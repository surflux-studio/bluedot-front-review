import{g as k}from"../chunks/entry.BrRH53jn.js";import{s as j,a as y,g as I,i as b,f as c,k as E,w as F,B as L,e as M,t as C,c as O,b as S,d as D,v as P,h as H,n as T,y as q}from"../chunks/scheduler.CbwPF6wx.js";import{S as z,i as U,c as $,b as d,m as g,t as h,a as _,e as x}from"../chunks/index.DiLw73rm.js";import{F as Z,I as A}from"../chunks/IconLocation.BY0cqcbC.js";import{H as G}from"../chunks/Header.D9t2FVO6.js";import{M as J}from"../chunks/Map.BSsQxwQ1.js";import{N as K}from"../chunks/NavigationBar.CUOwH2cx.js";import{s as p,v as Q}from"../chunks/map.Bm2ROMmj.js";import{p as R}from"../chunks/stores.DhVV8JKy.js";import{e as B}from"../chunks/sign.BdHK-5Oh.js";import{f as V}from"../chunks/proj.DXH8zrwl.js";import{s as W}from"../chunks/s32cloudfront.CwVUwD63.js";const X=async({params:l,parent:e})=>{var a;if(l.idx==="-1")return k("/boxes");const n=await e();return n.error||!n.data?k("/boxes"):(a=n.data)!=null&&a.hasPermission?n.data:k(`/boxes/${l.idx}`)},dt=Object.freeze(Object.defineProperty({__proto__:null,load:X},Symbol.toStringTag,{value:"Module"}));function Y(l){let e,r=(l[0].name??"")+"",n;return{c(){e=M("p"),n=C(r),this.h()},l(a){e=O(a,"P",{class:!0});var s=S(e);n=D(s,r),s.forEach(c),this.h()},h(){P(e,"class","font-semibold text-[15px] leading-[18px] text-black")},m(a,s){b(a,e,s),H(e,n)},p:T,d(a){a&&c(e)}}}function tt(l){let e,r,n,a,s;return r=new A({}),{c(){e=M("button"),$(r.$$.fragment),this.h()},l(i){e=O(i,"BUTTON",{slot:!0,class:!0});var m=S(e);d(r.$$.fragment,m),m.forEach(c),this.h()},h(){P(e,"slot","right"),P(e,"class","flex justify-center items-center w-10 h-10 rounded-full bg-[rgba(56,56,56,0.7)] pointer-events-auto")},m(i,m){b(i,e,m),g(r,e,null),n=!0,a||(s=q(e,"click",l[2]),a=!0)},p:T,i(i){n||(h(r.$$.fragment,i),n=!0)},o(i){_(r.$$.fragment,i),n=!1},d(i){i&&c(e),x(r),a=!1,s()}}}function et(l){let e,r,n,a,s,i,m,u;return e=new G({props:{position:"fixed",leftBack:"black",$$slots:{default:[Y]},$$scope:{ctx:l}}}),n=new J({}),s=new Z({props:{position:"fixed",$$slots:{right:[tt]},$$scope:{ctx:l}}}),m=new K({}),{c(){$(e.$$.fragment),r=y(),$(n.$$.fragment),a=y(),$(s.$$.fragment),i=y(),$(m.$$.fragment)},l(t){d(e.$$.fragment,t),r=I(t),d(n.$$.fragment,t),a=I(t),d(s.$$.fragment,t),i=I(t),d(m.$$.fragment,t)},m(t,f){g(e,t,f),b(t,r,f),g(n,t,f),b(t,a,f),g(s,t,f),b(t,i,f),g(m,t,f),u=!0},p(t,[f]){const v={};f&512&&(v.$$scope={dirty:f,ctx:t}),e.$set(v);const o={};f&512&&(o.$$scope={dirty:f,ctx:t}),s.$set(o)},i(t){u||(h(e.$$.fragment,t),h(n.$$.fragment,t),h(s.$$.fragment,t),h(m.$$.fragment,t),u=!0)},o(t){_(e.$$.fragment,t),_(n.$$.fragment,t),_(s.$$.fragment,t),_(m.$$.fragment,t),u=!1},d(t){t&&(c(r),c(a),c(i)),x(e,t),x(n,t),x(s,t),x(m,t)}}}const w=60;function nt(l,e,r){let n;E(l,R,o=>r(4,n=o));let{data:a}=e,s=a.box,i=a.places;F(()=>{t()}),L(()=>{p.un("change",f)});const m=[];let u=[];function t(){i.length!==0&&(u=i.filter(o=>!o.longitude||!o.latitude||m.includes(o.idx)?!1:(m.push(o.idx),!0)),!n.url.searchParams.get("location")&&u.length>0&&p.on("change",f),B.emit("addIcons",u.map(o=>{var N;return{idx:Number(o.idx),coordinate:V([o.longitude,o.latitude]),image:W(((N=o.media)==null?void 0:N.at(0))??"",500),shape:"point",type:"place",link:`/places/${o.idx}?boxIdx=${s.idx}`,rank:1,name:o.name,width:38,height:46}})))}function f(){if(p.getFeatures().length!==u.length)return;p.un("change",f);const o=p.getExtent();Q.fit(o,{padding:[w,w,w,w],duration:500,maxZoom:16})}const v=()=>{B.emit("flyToCurrentPosition")};return l.$$set=o=>{"data"in o&&r(1,a=o.data)},[s,a,v]}class gt extends z{constructor(e){super(),U(this,e,nt,et,j,{data:1})}}export{gt as component,dt as universal};
