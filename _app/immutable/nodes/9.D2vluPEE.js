import{s as T,C as V,D as z,a as P,g as y,i as B,n as G,f as k,e as ne,c as se,b as oe,q as ae,k as ie,B as fe,t as J,d as K}from"../chunks/scheduler.Dd3rEL6m.js";import{S as L,i as Q,e as X,c as _,b as g,m as b,t as l,a as p,d,f as F,g as M}from"../chunks/index.Dkei3nAf.js";import{U as ue}from"../chunks/UpperBoxes.BWMSnQk5.js";import{g as R}from"../chunks/entry.CrbIkr3p.js";import{F as Y}from"../chunks/Footer.CzHPx_w1.js";import{H as Z}from"../chunks/Header.YdgG7huA.js";import{M as le}from"../chunks/Map.Di3ya9Zs.js";import{N as ce}from"../chunks/NavigationBar.ByRXct9X.js";import{B as H}from"../chunks/Button.CIZZ26YC.js";import{g as me}from"../chunks/searchParams.ChVBvFOa.js";import{c as U,e as j}from"../chunks/sign.CJj0RIG-.js";import{p as pe}from"../chunks/stores.CxjZeeFv.js";import"../chunks/Field.DwtF3OY9.js";/* empty css                                                   *//* empty css                                                   */import"../chunks/map.DGNy6QyY.js";import"../chunks/ImageShaper.Dix5sBHT.js";import"../chunks/heic2any.UGIpBdk1.js";/* empty css                                                            */import{A as $e}from"../chunks/ActionSheet.DEmbgrn8.js";import{S as _e}from"../chunks/Search.tyRZlVFW.js";import{B as ge}from"../chunks/BottomNavigationPadder.3yPoOQLh.js";import{p as be,b as de}from"../chunks/boxRequest.B7NwKCTU.js";function he(a){let e,r,t,o;return e=new _e({}),t=new ge({props:{heightPx:120}}),{c(){_(e.$$.fragment),r=P(),_(t.$$.fragment)},l(n){g(e.$$.fragment,n),r=y(n),g(t.$$.fragment,n)},m(n,i){b(e,n,i),B(n,r,i),b(t,n,i),o=!0},p:G,i(n){o||(l(e.$$.fragment,n),l(t.$$.fragment,n),o=!0)},o(n){p(e.$$.fragment,n),p(t.$$.fragment,n),o=!1},d(n){n&&k(r),d(e,n),d(t,n)}}}function ke(a){let e,r,t;function o(i){a[1](i)}let n={sheetBackground:"bg-[black]/60 backdrop-blur-sm",$$slots:{default:[he]},$$scope:{ctx:a}};return a[0]!==void 0&&(n.isOpen=a[0]),e=new $e({props:n}),V.push(()=>X(e,"isOpen",o)),{c(){_(e.$$.fragment)},l(i){g(e.$$.fragment,i)},m(i,c){b(e,i,c),t=!0},p(i,[c]){const m={};c&4&&(m.$$scope={dirty:c,ctx:i}),!r&&c&1&&(r=!0,m.isOpen=i[0],z(()=>r=!1)),e.$set(m)},i(i){t||(l(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){d(e,i)}}}function we(a,e,r){let{isOpen:t=!1}=e;function o(n){t=n,r(0,t)}return a.$$set=n=>{"isOpen"in n&&r(0,t=n.isOpen)},[t,o]}class xe extends L{constructor(e){super(),Q(this,e,we,ke,T,{isOpen:0})}}function Be(a){let e,r;return e=new Z({props:{position:"fixed",rightFeed:!0}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function Ce(a){let e,r;return e=new Z({props:{position:"fixed",leftBack:!0}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function W(a){let e,r;return e=new ue({props:{boxes:a[0]}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},p(t,o){const n={};o&1&&(n.boxes=t[0]),e.$set(n)},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function Oe(a){let e,r;return e=new Y({props:{position:"fixed",leftReposition:!0,centerSearch:!0,right:"add"}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},p:G,i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function Se(a){let e,r;return e=new Y({props:{position:"fixed",bottom:"2rem",$$slots:{default:[Ne]},$$scope:{ctx:a}}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},p(t,o){const n={};o&2048&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function Pe(a){let e;return{c(){e=J("이 장소가 아니예요")},l(r){e=K(r,"이 장소가 아니예요")},m(r,t){B(r,e,t)},d(r){r&&k(e)}}}function ye(a){let e;return{c(){e=J("이 장소가 맞아요")},l(r){e=K(r,"이 장소가 맞아요")},m(r,t){B(r,e,t)},d(r){r&&k(e)}}}function Ne(a){let e,r,t,o;return e=new H({props:{backgroundColor:"bg-gray-300",textColor:"text-white",$$slots:{default:[Pe]},$$scope:{ctx:a}}}),e.$on("click",a[7]),t=new H({props:{backgroundColor:"bg-primary-500",textColor:"text-white",$$slots:{default:[ye]},$$scope:{ctx:a}}}),t.$on("click",a[4]),{c(){_(e.$$.fragment),r=P(),_(t.$$.fragment)},l(n){g(e.$$.fragment,n),r=y(n),g(t.$$.fragment,n)},m(n,i){b(e,n,i),B(n,r,i),b(t,n,i),o=!0},p(n,i){const c={};i&2048&&(c.$$scope={dirty:i,ctx:n}),e.$set(c);const m={};i&2048&&(m.$$scope={dirty:i,ctx:n}),t.$set(m)},i(n){o||(l(e.$$.fragment,n),l(t.$$.fragment,n),o=!0)},o(n){p(e.$$.fragment,n),p(t.$$.fragment,n),o=!1},d(n){n&&k(r),d(e,n),d(t,n)}}}function ve(a){let e,r,t,o,n,i,c,m,O,C,h,v,N,$,w;const S=[Ce,Be],x=[];function I(s,f){return s[3]==="post"||s[3]==="box"||s[2]?0:1}e=I(a),r=x[e]=S[e](a),n=new le({props:{onMoveend:a[5]}});let u=a[0].length>0&&W(a);const ee=[Se,Oe],D=[];function te(s,f){return s[3]==="post"||s[3]==="box"?0:1}m=te(a),O=D[m]=ee[m](a);function re(s){a[8](s)}let q={};return a[1]!==void 0&&(q.isOpen=a[1]),h=new xe({props:q}),V.push(()=>X(h,"isOpen",re)),$=new ce({props:{show:a[3]!=="post"}}),{c(){r.c(),t=P(),o=ne("div"),_(n.$$.fragment),i=P(),u&&u.c(),c=P(),O.c(),C=P(),_(h.$$.fragment),N=P(),_($.$$.fragment),this.h()},l(s){r.l(s),t=y(s),o=se(s,"DIV",{class:!0});var f=oe(o);g(n.$$.fragment,f),f.forEach(k),i=y(s),u&&u.l(s),c=y(s),O.l(s),C=y(s),g(h.$$.fragment,s),N=y(s),g($.$$.fragment,s),this.h()},h(){ae(o,"class","fixed top-0 left-0 w-full h-full")},m(s,f){x[e].m(s,f),B(s,t,f),B(s,o,f),b(n,o,null),B(s,i,f),u&&u.m(s,f),B(s,c,f),D[m].m(s,f),B(s,C,f),b(h,s,f),B(s,N,f),b($,s,f),w=!0},p(s,[f]){let A=e;e=I(s),e!==A&&(M(),p(x[A],1,1,()=>{x[A]=null}),F(),r=x[e],r||(r=x[e]=S[e](s),r.c()),l(r,1),r.m(t.parentNode,t)),s[0].length>0?u?(u.p(s,f),f&1&&l(u,1)):(u=W(s),u.c(),l(u,1),u.m(c.parentNode,c)):u&&(M(),p(u,1,1,()=>{u=null}),F()),O.p(s,f);const E={};!v&&f&2&&(v=!0,E.isOpen=s[1],z(()=>v=!1)),h.$set(E)},i(s){w||(l(r),l(n.$$.fragment,s),l(u),l(O),l(h.$$.fragment,s),l($.$$.fragment,s),w=!0)},o(s){p(r),p(n.$$.fragment,s),p(u),p(O),p(h.$$.fragment,s),p($.$$.fragment,s),w=!1},d(s){s&&(k(t),k(o),k(i),k(c),k(C),k(N)),x[e].d(s),d(n),u&&u.d(s),D[m].d(s),d(h,s),d($,s)}}}function Ie(a,e,r){let t,o;ie(a,pe,$=>r(6,o=$));let n=[];const i=o.url.searchParams.get("type"),c=o.url.searchParams.get("tags");c&&U.set(c.split(","));let m=!1;j.on("openSearch",()=>{r(1,m=!0)}),j.on("closeSearch",()=>{r(1,m=!1)}),fe(()=>{U.set([])});async function O(){if(i==="box"){const $=o.url.searchParams.get("boxIdx"),w=Number(o.url.searchParams.get("boxIdx")),S=sessionStorage.getItem("jwt"),x=o.url.searchParams.get("placeIdx");if(Number.isNaN(w)||!$||!S||!x)return R("/boxes");(await be(S,$,x)).ok||j.emit("pushSnackbar",{message:"장소 추가에 실패했습니다."}),R(`/boxes/${$}/detail`)}else i==="post"&&me("/viewer/edit")}let C;async function h($){try{C&&C.abort("new request"),C=new AbortController;const w=await de($,C);if(!w.ok)return;const S=await w.json();r(0,n=S.data)}catch{}}const v=()=>window.history.back();function N($){m=$,r(1,m)}return a.$$.update=()=>{a.$$.dirty&64&&r(2,t=o.url.searchParams.get("withBack")==="true")},[n,m,t,i,O,h,o,v,N]}class tt extends L{constructor(e){super(),Q(this,e,Ie,ve,T,{})}}export{tt as component};
