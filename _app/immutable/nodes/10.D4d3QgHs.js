import{s as U,w as Z,x as q,b as D,f as g,o as f,i as A,h as v,n as R,e as b,a as $,c as _,g as F,G as oe,y as se,z as ne,W as le,X as ce,V as X,p as S,H as Y,B as z,A as Ce,m as J,C as de,v as fe}from"../chunks/scheduler.BRSuf-vg.js";import{S as G,i as H,c as k,b as j,m as T,t as w,a as y,d as O,g as ie,f as ae,e as pe}from"../chunks/index.C48quBYD.js";import{M as me}from"../chunks/Map.EifOprsS.js";import{e as E}from"../chunks/emitter.E5P-NQ8u.js";import{W as ge,r as he,c as K}from"../chunks/store.CDalJydL.js";import{b as Be,a as be}from"../chunks/CardOption.CspikdPk.js";import"../chunks/index.Do7nUb9h.js";import"../chunks/entry.D4uLwyBi.js";import"../chunks/heic2any.DNwmm2Sv.js";import{e as Q}from"../chunks/each.B5sF3ehM.js";import{D as _e}from"../chunks/Dim.Cn7ToZFj.js";import{I as ve,a as we}from"../chunks/IconDeleteV2.rcAdPWPr.js";function De(s){let e,u;return{c(){e=Z("svg"),u=Z("path"),this.h()},l(t){e=q(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);u=q(i,"path",{d:!0,fill:!0}),D(u).forEach(g),i.forEach(g),this.h()},h(){f(u,"d","M5 10C5.82843 10 6.5 10.6716 6.5 11.5C6.5 12.3284 5.82843 13 5 13C4.17157 13 3.5 12.3284 3.5 11.5C3.5 10.6716 4.17157 10 5 10ZM11 10C11.8284 10 12.5 10.6716 12.5 11.5C12.5 12.3284 11.8284 13 11 13C10.1716 13 9.5 12.3284 9.5 11.5C9.5 10.6716 10.1716 10 11 10ZM17 10C17.8284 10 18.5 10.6716 18.5 11.5C18.5 12.3284 17.8284 13 17 13C16.1716 13 15.5 12.3284 15.5 11.5C15.5 10.6716 16.1716 10 17 10Z"),f(u,"fill","#222222"),f(e,"width","22"),f(e,"height","22"),f(e,"viewBox","0 0 22 22"),f(e,"fill","none"),f(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){A(t,e,i),v(e,u)},p:R,i:R,o:R,d(t){t&&g(e)}}}class Ae extends G{constructor(e){super(),H(this,e,null,De,U,{})}}class Ee extends ge{async write(e){if(typeof navigator>"u"||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(e.string!==void 0)await this.writeText(e.string);else if(e.url)await this.writeText(e.url);else if(e.image)if(typeof ClipboardItem<"u")try{const u=await(await fetch(e.image)).blob(),t=new ClipboardItem({[u.type]:u});await navigator.clipboard.write([t])}catch{throw new Error("Failed to write image")}else throw this.unavailable("Writing images to the clipboard is not supported in this browser");else throw new Error("Nothing to write")}async read(){if(typeof navigator>"u"||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(typeof ClipboardItem<"u")try{const e=await navigator.clipboard.read(),u=e[0].types[0],t=await e[0].getType(u);return{value:await this._getBlobData(t,u),type:u}}catch{return this.readText()}else return this.readText()}async readText(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.readText)throw this.unavailable("Reading from clipboard not supported in this browser");return{value:await navigator.clipboard.readText(),type:"text/plain"}}async writeText(e){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.writeText)throw this.unavailable("Writting to clipboard not supported in this browser");await navigator.clipboard.writeText(e)}_getBlobData(e,u){return new Promise((t,i)=>{const a=new FileReader;u.includes("image")?a.readAsDataURL(e):a.readAsText(e),a.onloadend=()=>{const C=a.result;t(C)},a.onerror=C=>{i(C)}})}}const xe=he("Clipboard",{web:()=>new Ee});let W=!1;async function ye(s){W||(W=!0,await xe.write({url:`https://bluedot.land${s}`}),E.emit("pushSnackbar",{message:"링크를 복사했습니다."}),setTimeout(()=>{W=!1},1e3))}function ee(s,e,u){const t=s.slice();return t[10]=e[u],t[12]=u,t}function te(s){let e,u,t,i,a,C,d,l,r=s[10].emoji+"",o,n,c;function p(){return s[6](s[10])}return{c(){e=b("div"),u=b("div"),t=b("div"),i=b("img"),C=$(),d=b("div"),l=new le(!1),o=$(),this.h()},l(h){e=_(h,"DIV",{class:!0,style:!0});var B=D(e);u=_(B,"DIV",{class:!0});var I=D(u);t=_(I,"DIV",{class:!0,style:!0});var P=D(t);i=_(P,"IMG",{src:!0,alt:!0,class:!0,draggable:!0}),P.forEach(g),C=F(I),d=_(I,"DIV",{class:!0});var V=D(d);l=ce(V,!1),V.forEach(g),I.forEach(g),o=F(B),B.forEach(g),this.h()},h(){X(i.src,a=s[10].image)||f(i,"src",a),f(i,"alt","random image"),f(i,"class","w-full h-full object-cover rounded-[2vh]"),f(i,"draggable","false"),f(t,"class","w-full h-full pb-8"),f(t,"style",`aspect-ratio: ${K}`),l.a=null,f(d,"class","emoji absolute bottom-[11px] left-0 right-0 flex justify-center items-center text-[15px] transform origin-center "),f(u,"class","card-face card-front absolute inset-0 p-2 [backface-visibility:hidden] [transform:rotateY(0deg)] "),f(e,"class","card relative w-[161px] bg-white rounded-[2vh] shadow-xl p-[1.5vh] "+(s[12]%2===0?"left-card":"right-card")+" svelte-rfrwxz"),f(e,"style",`aspect-ratio: ${K}`)},m(h,B){A(h,e,B),v(e,u),v(u,t),v(t,i),v(u,C),v(u,d),l.m(r,d),v(e,o),n||(c=S(e,"click",p),n=!0)},p(h,B){s=h,B&1&&!X(i.src,a=s[10].image)&&f(i,"src",a),B&1&&r!==(r=s[10].emoji+"")&&l.p(r)},d(h){h&&g(e),n=!1,c()}}}function ue(s){let e,u,t,i,a,C,d,l;e=new Be({props:{card:s[1]}});let r=s[2]&&re(s);return a=new Ae({}),{c(){k(e.$$.fragment),u=$(),r&&r.c(),t=$(),i=b("button"),k(a.$$.fragment),this.h()},l(o){j(e.$$.fragment,o),u=F(o),r&&r.l(o),t=F(o),i=_(o,"BUTTON",{class:!0});var n=D(i);j(a.$$.fragment,n),n.forEach(g),this.h()},h(){f(i,"class","absolute top-[54px] right-4 px-[9px] py-[5px] bg-white rounded-lg shadow-[1px_4px_16px_rgba(0,0,0,0.08)] z-50")},m(o,n){T(e,o,n),A(o,u,n),r&&r.m(o,n),A(o,t,n),A(o,i,n),T(a,i,null),C=!0,d||(l=S(i,"click",z(s[7])),d=!0)},p(o,n){const c={};n&2&&(c.card=o[1]),e.$set(c),o[2]?r?(r.p(o,n),n&4&&w(r,1)):(r=re(o),r.c(),w(r,1),r.m(t.parentNode,t)):r&&(ie(),y(r,1,1,()=>{r=null}),ae())},i(o){C||(w(e.$$.fragment,o),w(r),w(a.$$.fragment,o),C=!0)},o(o){y(e.$$.fragment,o),y(r),y(a.$$.fragment,o),C=!1},d(o){o&&(g(u),g(t),g(i)),O(e,o),r&&r.d(o),O(a),d=!1,l()}}}function re(s){let e,u;return e=new be({props:{card:s[4]}}),{c(){k(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,i){T(e,t,i),u=!0},p:R,i(t){u||(w(e.$$.fragment,t),u=!0)},o(t){y(e.$$.fragment,t),u=!1},d(t){O(e,t)}}}function $e(s){let e,u,t=s[1]&&ue(s);return{c(){t&&t.c(),e=Y()},l(i){t&&t.l(i),e=Y()},m(i,a){t&&t.m(i,a),A(i,e,a),u=!0},p(i,a){i[1]?t?(t.p(i,a),a&2&&w(t,1)):(t=ue(i),t.c(),w(t,1),t.m(e.parentNode,e)):t&&(ie(),y(t,1,1,()=>{t=null}),ae())},i(i){u||(w(t),u=!0)},o(i){y(t),u=!1},d(i){i&&g(e),t&&t.d(i)}}}function Fe(s){let e,u,t,i,a,C,d=Q(s[0]),l=[];for(let r=0;r<d.length;r+=1)l[r]=te(ee(s,d,r));return a=new _e({props:{className:`
  transition-opacity duration-300 
  ${s[3]?"opacity-100 visible pointer-events-auto":"opacity-0 pointer-events-none"}
`,$$slots:{default:[$e]},$$scope:{ctx:s}}}),a.$on("click",s[8]),{c(){e=b("div"),u=b("div");for(let r=0;r<l.length;r+=1)l[r].c();i=$(),k(a.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var o=D(e);u=_(o,"DIV",{class:!0});var n=D(u);for(let c=0;c<l.length;c+=1)l[c].l(n);n.forEach(g),o.forEach(g),i=F(r),j(a.$$.fragment,r),this.h()},h(){f(u,"class",t="grid grid-cols-2 gap-[9px] "+(s[0].length%2===0?"pb-[78px]":"")),f(e,"class","w-full h-full px-4 py-14 flex justify-center overflow-hidden relative")},m(r,o){A(r,e,o),v(e,u);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(u,null);A(r,i,o),T(a,r,o),C=!0},p(r,[o]){if(o&35){d=Q(r[0]);let c;for(c=0;c<d.length;c+=1){const p=ee(r,d,c);l[c]?l[c].p(p,o):(l[c]=te(p),l[c].c(),l[c].m(u,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=d.length}(!C||o&1&&t!==(t="grid grid-cols-2 gap-[9px] "+(r[0].length%2===0?"pb-[78px]":"")))&&f(u,"class",t);const n={};o&8&&(n.className=`
  transition-opacity duration-300 
  ${r[3]?"opacity-100 visible pointer-events-auto":"opacity-0 pointer-events-none"}
`),o&8198&&(n.$$scope={dirty:o,ctx:r}),a.$set(n)},i(r){C||(w(a.$$.fragment,r),C=!0)},o(r){y(a.$$.fragment,r),C=!1},d(r){r&&(g(e),g(i)),oe(l,r),O(a,r)}}}function Ie(s,e,u){let t,{cards:i=[]}=e,a=null,C=!1,l={idx:"7",type:"option",left:"",right:"",unflippable:!0,rotateDegree:0,optionList:[{startIcon:ve,name:"링크 복사",onClick:()=>{a&&ye(`${location.pathname}${location.search}`),r()}},{startIcon:we,name:"삭제",onClick:()=>{a&&E.emit("removeCardByIdx",{idx:a.idx}),r()}}],onDumpRight:()=>u(2,C=!1),onDumpLeft:()=>u(2,C=!1)};se(()=>{E.on("pushCard",p=>{u(0,i=[...i,p])}),E.on("setCards",p=>{u(0,i=p)}),E.on("setCardByIdx",({idx:p,card:h})=>{u(0,i=i.map(B=>B.idx===p?{...B,...h}:B))}),E.on("removeCardByIdx",({idx:p})=>{u(0,i=i.filter(h=>h.idx!==p))})}),ne(()=>{E.off("pushCard"),E.off("setCards"),E.off("removeCardByIdx")});function r(){console.log("unselect"),u(1,a=null),u(2,C=!1)}const o=p=>{u(1,a={...p,rotateDegree:0,onDumpRight:r,onDumpLeft:r})},n=()=>u(2,C=!0),c=p=>{p.stopPropagation(),r()};return s.$$set=p=>{"cards"in p&&u(0,i=p.cards)},s.$$.update=()=>{s.$$.dirty&6&&a&&u(1,a=C?{...a,rotateDegree:5}:{...a,rotateDegree:0}),s.$$.dirty&2&&u(3,t=a!==null)},[i,a,C,t,l,r,o,n,c]}class ke extends G{constructor(e){super(),H(this,e,Ie,Fe,U,{cards:0})}}function je(s){let e,u,t,i,a,C,d,l,r,o="앨범 비우기",n,c,p="카드 추가",h,B,I;u=new me({});function P(m){s[3](m)}let V={};return s[0]!==void 0&&(V.cards=s[0]),i=new ke({props:V}),Ce.push(()=>pe(i,"cards",P)),{c(){e=b("div"),k(u.$$.fragment),t=$(),k(i.$$.fragment),C=$(),d=b("div"),l=b("div"),r=b("button"),r.textContent=o,n=$(),c=b("button"),c.textContent=p,this.h()},l(m){e=_(m,"DIV",{class:!0});var x=D(e);j(u.$$.fragment,x),x.forEach(g),t=F(m),j(i.$$.fragment,m),C=F(m),d=_(m,"DIV",{class:!0});var M=D(d);l=_(M,"DIV",{class:!0});var N=D(l);r=_(N,"BUTTON",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-jzs62c"&&(r.textContent=o),n=F(N),c=_(N,"BUTTON",{class:!0,"data-svelte-h":!0}),J(c)!=="svelte-7e1h2v"&&(c.textContent=p),N.forEach(g),M.forEach(g),this.h()},h(){f(e,"class","fixed inset-0"),f(r,"class","w-full bg-blue-500 text-white p-4 rounded-lg"),f(c,"class","w-full bg-blue-500 text-white p-4 rounded-lg"),f(l,"class","flex gap-4"),f(d,"class","fixed w-full bottom-0 p-6 z-40")},m(m,x){A(m,e,x),T(u,e,null),A(m,t,x),T(i,m,x),A(m,C,x),A(m,d,x),v(d,l),v(l,r),v(l,n),v(l,c),h=!0,B||(I=[S(r,"click",z(s[4])),S(c,"click",z(s[5]))],B=!0)},p(m,[x]){const M={};!a&&x&1&&(a=!0,M.cards=m[0],de(()=>a=!1)),i.$set(M)},i(m){h||(w(u.$$.fragment,m),w(i.$$.fragment,m),h=!0)},o(m){y(u.$$.fragment,m),y(i.$$.fragment,m),h=!1},d(m){m&&(g(e),g(t),g(C),g(d)),O(u),O(i,m),B=!1,fe(I)}}}function L(s,e){return s+Math.floor(Math.random()*(e+1-s))}function Te(s,e,u){const t=["/h1.jpeg","/h2.png","/dosisool.jpg","/eul.jpg","/face1.jpeg","/face2.jpeg","/face3.jpeg","/j.jpg","/oilh.jpg","/signin.png","/thumb1.jpeg","/thumb2.jpeg","/thumb3.jpeg","/thumb4.jpeg","/thumb5.jpeg"];let i=[{idx:"1",type:"photo",image:t[0],emoji:"🧸🎀✨💎✨🎀",back:"카드 뒷면입니다",left:"넘어갈게",right:"카드 위에서 불러오기",rightColor:"positive",ownerIdx:"1",inputDimIsOpen:!1},{idx:"2",type:"photo",image:t[1],emoji:"🔥🌴😆🚂",back:"카드 뒷면입니다",left:"넘어갈게",right:"카드 오른쪽에서 불러오기",rightColor:"positive",ownerIdx:"1",inputDimIsOpen:!1},{idx:"3",type:"photo",image:t[2],emoji:"🧸🎀✨💎✨🎀",back:"카드 뒷면입니다",left:"넘어갈게",right:"카드 아래에서 불러오기",rightColor:"positive",ownerIdx:"1",inputDimIsOpen:!1},{idx:"4",type:"photo",image:t[3],emoji:"🔥🌴😆🚂",back:"카드 뒷면입니다",left:"넘어갈게",right:"카드 왼쪽에서 불러오기",rightColor:"positive",ownerIdx:"1",inputDimIsOpen:!1},{idx:"5",type:"photo",image:t[4],emoji:"👀👀👀👀👀",back:"첫눈 오는 날, 눈 코에 묻히고 공 물고 웃던 너. 그 순간이 겨울의 선물 같았어.",left:"넘어갈게",right:"카드 한장 뿅하고 불러오기",rightColor:"positive",ownerIdx:"1",inputDimIsOpen:!1},{idx:"6",type:"photo",image:t[5],emoji:"👀👀👀👀👀",back:"첫눈 오는 날, 눈 코에 묻히고 공 물고 웃던 너. 그 순간이 겨울의 선물 같았어.",left:"넘어갈게",right:"카드 한장 뿅하고 불러오기",rightColor:"positive",ownerIdx:"1",inputDimIsOpen:!1},{idx:"7",type:"photo",image:t[6],emoji:"👀👀👀👀👀",back:"첫눈 오는 날, 눈 코에 묻히고 공 물고 웃던 너. 그 순간이 겨울의 선물 같았어.",left:"넘어갈게",right:"카드 한장 뿅하고 불러오기",rightColor:"positive",ownerIdx:"1",inputDimIsOpen:!1}];const a=[[128513,128591],[9986,10160],[128640,128704],[128512,128566],[128641,128709],[127757,128359]];function C(){const n=a[L(0,a.length-1)];return`&#${L(n[0],n[1])};`}function d(){let n="";const c=L(0,8);for(let p=0;p<c;p++)n+=C();return n}function l(n){i=n,u(0,i)}return[i,t,d,l,()=>{E.emit("setCards",[])},()=>{E.emit("pushCard",{idx:"0",type:"photo",image:t[L(0,t.length-1)],emoji:d(),back:"카드 뒷면입니다",left:"넘어갈게",right:"넘어갈게",ownerIdx:"1",inputDimIsOpen:!1})}]}class He extends G{constructor(e){super(),H(this,e,Te,je,U,{})}}export{He as component};
