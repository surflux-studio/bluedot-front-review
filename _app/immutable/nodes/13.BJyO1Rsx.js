import{s as S,w as C,a as A,g as E,i as k,x as L,f as I,k as U,y as F,e as H,t as O,c as T,b as j,d as q,v,h as y,n as G}from"../chunks/scheduler.CXaZJLX8.js";import{S as K,i as V,b as M,c as _,d as g,m as b,t as d,a as h,f as x}from"../chunks/index.BKOkOgp0.js";import{H as W}from"../chunks/Header.Up7H--wX.js";import{M as X}from"../chunks/Map.CCoGbb9x.js";import{p as z}from"../chunks/stores.BM436znX.js";import{U as D}from"../chunks/UpperBoxes.CtvJqyRd.js";import{g as J}from"../chunks/entry.DkKUt85L.js";import{I as Q,A as Y,b as Z}from"../chunks/store.mQmyAdCo.js";import{F as ee}from"../chunks/IconLocation.BQjOdBLg.js";import{U as te}from"../chunks/_FindMeButton.BUk87O-B.js";function se(o){let t,n;return{c(){t=H("p"),n=O(o[3]),this.h()},l(s){t=T(s,"P",{class:!0});var a=j(t);n=q(a,o[3]),a.forEach(I),this.h()},h(){v(t,"class","font-semibold text-[15px] leading-[18px] text-black")},m(s,a){k(s,t,a),y(t,n)},p:G,d(s){s&&I(t)}}}function ae(o){let t,n;return t=new te({}),{c(){_(t.$$.fragment)},l(s){g(t.$$.fragment,s)},m(s,a){b(t,s,a),n=!0},i(s){n||(d(t.$$.fragment,s),n=!0)},o(s){h(t.$$.fragment,s),n=!1},d(s){x(t,s)}}}function oe(o){let t,n,s,a,c,m,p,u,f,$;function w(e){o[5](e)}let r={position:"fixed",leftBack:Q?"":"black",$$slots:{default:[se]},$$scope:{ctx:o}};o[0]!==void 0&&(r.header=o[0]),t=new W({props:r}),C.push(()=>M(t,"header",w));function N(e){o[6](e)}let l={boxes:o[1],onBoxClick:o[4]};return o[2]!==void 0&&(l.top=o[2]),a=new D({props:l}),C.push(()=>M(a,"top",N)),p=new X({}),f=new ee({props:{position:"fixed",$$slots:{right:[ae]},$$scope:{ctx:o}}}),{c(){_(t.$$.fragment),s=A(),_(a.$$.fragment),m=A(),_(p.$$.fragment),u=A(),_(f.$$.fragment)},l(e){g(t.$$.fragment,e),s=E(e),g(a.$$.fragment,e),m=E(e),g(p.$$.fragment,e),u=E(e),g(f.$$.fragment,e)},m(e,i){b(t,e,i),k(e,s,i),b(a,e,i),k(e,m,i),b(p,e,i),k(e,u,i),b(f,e,i),$=!0},p(e,[i]){const P={};i&512&&(P.$$scope={dirty:i,ctx:e}),!n&&i&1&&(n=!0,P.header=e[0],L(()=>n=!1)),t.$set(P);const B={};i&2&&(B.boxes=e[1]),!c&&i&4&&(c=!0,B.top=e[2],L(()=>c=!1)),a.$set(B);const R={};i&512&&(R.$$scope={dirty:i,ctx:e}),f.$set(R)},i(e){$||(d(t.$$.fragment,e),d(a.$$.fragment,e),d(p.$$.fragment,e),d(f.$$.fragment,e),$=!0)},o(e){h(t.$$.fragment,e),h(a.$$.fragment,e),h(p.$$.fragment,e),h(f.$$.fragment,e),$=!1},d(e){e&&(I(s),I(m),I(u)),x(t,e),x(a,e),x(p,e),x(f,e)}}}function ne(o,t,n){let s,a;U(o,z,r=>n(7,a=r));const c=a.url.searchParams.get("placeName");let m=[],p;async function u(){const r=Number(a.url.searchParams.get("placeIdx"));if(Number.isNaN(r)||!r)return;const N=await fetch(`${Y}/places/${r}/boxes`,{headers:{"x-api-version":Z.PLACE}});if(!N.ok)return;const l=await N.json();l.data&&n(1,m=l.data)}F(()=>{u()});function f(r){J(`/boxes/${r}`)}function $(r){p=r,n(0,p)}function w(r){s=r,n(2,s),n(0,p)}return o.$$.update=()=>{var r;o.$$.dirty&1&&n(2,s=((r=p==null?void 0:p.getClientRects()[0])==null?void 0:r.height)??0)},[p,m,s,c,f,$,w]}class ge extends K{constructor(t){super(),V(this,t,ne,oe,S,{})}}export{ge as component};
