import{n as q,W as se,Q as re,s as ie,l as B,i as x,f as b,k as le,a6 as O,e as C,t as A,a as z,c as I,b as W,d as J,g as N,m as v,h as M,w as me,j as U,o as pe,p as he,B as _e,F as ge,G as we,H as be,O as ye,J as j,K as G}from"../chunks/scheduler.B36p9E6k.js";import{n as ve,l as ke,h as Se,j as $e,S as ae,i as ue,g as D,f as P,t as y,b as k,k as Le,c as V,a as ce,m as F,d as H}from"../chunks/index.K404SoRv.js";import{e as R,u as Ee,f as Te}from"../chunks/each.CPGC1t5D.js";import{w as Me,p as Q}from"../chunks/entry.CSULzzio.js";import{e as Xe,a as xe,b as Ce,s as Ie}from"../chunks/store.CEymtcp9.js";import{S as w}from"../chunks/constants.bFPGP2yY.js";import{component as We}from"./18.9oXXFsJA.js";import{component as Be}from"./9.D6kt-2Az.js";import{component as De}from"./15.CAjmsjvT.js";import{component as Pe}from"./3._Ji5pVk4.js";import{h as Oe}from"../chunks/Footer.C96VyIka.js";function je(a,e,s,t){if(!e)return q;const n=a.getBoundingClientRect();if(e.left===n.left&&e.right===n.right&&e.top===n.top&&e.bottom===n.bottom)return q;const{delay:l=0,duration:r=300,easing:i=se,start:o=ve()+l,end:u=o+r,tick:c=q,css:d}=s(a,{from:e,to:n},t);let g=!0,h=!1,_;function L(){d&&(_=Se(a,0,1,r,l,i,d)),l||(h=!0)}function S(){d&&$e(a,_),g=!1}return ke(p=>{if(!h&&p>=o&&(h=!0),h&&p>=u&&(c(1,0),S()),!g)return!1;if(h){const $=p-o,X=0+1*i($/r);c(X,1-X)}return!0}),L(),c(0,1),S}function qe(a){const e=getComputedStyle(a);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:s,height:t}=e,n=a.getBoundingClientRect();a.style.position="absolute",a.style.width=s,a.style.height=t,fe(a,n)}}function fe(a,e){const s=a.getBoundingClientRect();if(e.left!==s.left||e.top!==s.top){const t=getComputedStyle(a),n=t.transform==="none"?"":t.transform;a.style.transform=`${n} translate(${e.left-s.left}px, ${e.top-s.top}px)`}}const ze=!1,Ne="auto",Re=a=>{if(console.log(a.route.id),a.route.id!==null)return{route:a.route.id==="/"?"/viewer":a.route.id}},dt=Object.freeze(Object.defineProperty({__proto__:null,load:Re,prerender:Ne,ssr:ze},Symbol.toStringTag,{value:"Module"}));function Ve(a){const e=a-1;return e*e*e+1}function Fe(a,{delay:e=0,duration:s=400,easing:t=se}={}){const n=+getComputedStyle(a).opacity;return{delay:e,duration:s,easing:t,css:l=>`opacity: ${l*n}`}}function He(a,{from:e,to:s},t={}){const n=getComputedStyle(a),l=n.transform==="none"?"":n.transform,[r,i]=n.transformOrigin.split(" ").map(parseFloat),o=e.left+e.width*r/s.width-(s.left+r),u=e.top+e.height*i/s.height-(s.top+i),{delay:c=0,duration:d=h=>Math.sqrt(h)*120,easing:g=Ve}=t;return{delay:c,duration:re(d)?d(Math.sqrt(o*o+u*u)):d,easing:g,css:(h,_)=>{const L=_*o,S=_*u,p=h+_*e.width/s.width,$=h+_*e.height/s.height;return`transform: ${l} translate(${L}px, ${S}px) scale(${p}, ${$});`}}}function Z(a,e,s){const t=a.slice();return t[5]=e[s],t[7]=s,t}function ee(a,e){let s,t,n,l=e[5].message+"",r,i,o,u=(e[5].buttonText||K)+"",c,d,g,h,_,L,S=q,p,$,X;return{key:a,first:null,c(){s=C("div"),t=C("div"),n=C("div"),r=A(l),i=z(),o=C("div"),c=A(u),g=z(),this.h()},l(f){s=I(f,"DIV",{class:!0,style:!0});var m=W(s);t=I(m,"DIV",{class:!0,style:!0});var E=W(t);n=I(E,"DIV",{class:!0});var T=W(n);r=J(T,l),T.forEach(b),i=N(E),o=I(E,"DIV",{class:!0});var Y=W(o);c=J(Y,u),Y.forEach(b),E.forEach(b),g=N(m),m.forEach(b),this.h()},h(){v(n,"class","text-white flex-grow"),v(o,"class","text-primary-300"),v(t,"class","flex bg-black p-[1.125rem]"),v(t,"style",d=`transform: scale(${1-.05*e[7]})`),v(s,"class","fixed bottom-24 w-full p-4"),v(s,"style",h=`z-index: ${80-e[7]}; transform: translateY(${-.3*e[7]}rem);`),this.first=s},m(f,m){x(f,s,m),M(s,t),M(t,n),M(n,r),M(t,i),M(t,o),M(o,c),M(s,g),p=!0,$||(X=me(o,"click",function(){re(e[5].callback)&&e[5].callback.apply(this,arguments)}),$=!0)},p(f,m){e=f,(!p||m&1)&&l!==(l=e[5].message+"")&&U(r,l),(!p||m&1)&&u!==(u=(e[5].buttonText||K)+"")&&U(c,u),(!p||m&1&&d!==(d=`transform: scale(${1-.05*e[7]})`))&&v(t,"style",d),(!p||m&1&&h!==(h=`z-index: ${80-e[7]}; transform: translateY(${-.3*e[7]}rem);`))&&v(s,"style",h)},r(){L=s.getBoundingClientRect()},f(){qe(s),S(),fe(s,L)},a(){S(),S=je(s,L,He,{})},i(f){p||(_&&_.end(1),p=!0)},o(f){f&&(_=Le(s,Fe,{duration:300})),p=!1},d(f){f&&b(s),f&&_&&_.end(),$=!1,X()}}}function Ke(a){let e=[],s=new Map,t,n,l=R(a[0]);const r=i=>i[5].uuid;for(let i=0;i<l.length;i+=1){let o=Z(a,l,i),u=r(o);s.set(u,e[i]=ee(u,o))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=B()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);t=B()},m(i,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(i,o);x(i,t,o),n=!0},p(i,[o]){if(o&1){l=R(i[0]),D();for(let u=0;u<e.length;u+=1)e[u].r();e=Ee(e,o,r,1,i,l,s,t.parentNode,Te,ee,t,Z);for(let u=0;u<e.length;u+=1)e[u].a();P()}},i(i){if(!n){for(let o=0;o<l.length;o+=1)y(e[o]);n=!0}},o(i){for(let o=0;o<e.length;o+=1)k(e[o]);n=!1},d(i){i&&b(t);for(let o=0;o<e.length;o+=1)e[o].d(i)}}}const Ye=5e3,Ae=!1,K="닫기";function Je(a,e,s){let t;const n=()=>{clearTimeout(r),O(l,t=t.slice(1),t)},l=Me([]);le(a,l,o=>s(0,t=o));let r;Xe.on("pushSnackbar",i);function i(o){if(t.some(c=>c.uuid===o.uuid))return;const u={uuid:o.uuid||crypto.randomUUID(),message:o.message,urgent:o.urgent,keep:o.keep||Ae,duration:o.duration||Ye,buttonText:o.buttonText||K,callback:()=>{n();try{o.callback()}catch{}}};if(o.urgent){clearTimeout(r),O(l,t=[u,...t],t);return}O(l,t=[...t,u],t)}return a.$$.update=()=>{if(a.$$.dirty&5&&t.length>0){const{duration:o,keep:u}=t[0];clearTimeout(r),u||s(2,r=setTimeout(()=>{O(l,t=t.slice(1),t)},o))}},[t,l,r]}class Ue extends ae{constructor(e){super(),ue(this,e,Je,Ke,ie,{})}}function de(){const a=window.innerWidth<=w.MobileS?w.MobileS:window.innerWidth<=w.MobileM?w.MobileM:window.innerWidth<=w.MobileL?w.MobileL:window.innerWidth<=w.Tablet?w.Tablet:window.innerWidth<=w.Laptop?w.Laptop:window.innerWidth<=w.LaptopL?w.LaptopL:w.FourK;xe.set(a)}window.onresize=de;function te(a,e,s){const t=a.slice();return t[17]=e[s],t[19]=s,t}function Ge(a){let e;const s=a[7].default,t=_e(s,a,a[6],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&64)&&ge(t,s,n,n[6],e?be(s,n[6],l,null):we(n[6]),null)},i(n){e||(y(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function Qe(a){let e,s,t=R(a[0]),n=[];for(let r=0;r<t.length;r+=1)n[r]=oe(te(a,t,r));const l=r=>k(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=B()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=B()},m(r,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,i);x(r,e,i),s=!0},p(r,i){if(i&31){t=R(r[0]);let o;for(o=0;o<t.length;o+=1){const u=te(r,t,o);n[o]?(n[o].p(u,i),y(n[o],1)):(n[o]=oe(u),n[o].c(),y(n[o],1),n[o].m(e.parentNode,e))}for(D(),o=t.length;o<n.length;o+=1)l(o);P()}},i(r){if(!s){for(let i=0;i<t.length;i+=1)y(n[i]);s=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)k(n[i]);s=!1},d(r){r&&b(e),ye(n,r)}}}function ne(a){let e,s,t;var n=a[17].component;function l(r,i){return{}}return n&&(e=G(n,l()),e.$on("stopSwipe",a[4])),{c(){e&&V(e.$$.fragment),s=B()},l(r){e&&ce(e.$$.fragment,r),s=B()},m(r,i){e&&F(e,r,i),x(r,s,i),t=!0},p(r,i){if(i&1&&n!==(n=r[17].component)){if(e){D();const o=e;k(o.$$.fragment,1,0,()=>{H(o,1)}),P()}n?(e=G(n,l()),e.$on("stopSwipe",r[4]),V(e.$$.fragment),y(e.$$.fragment,1),F(e,s.parentNode,s)):e=null}},i(r){t||(e&&y(e.$$.fragment,r),t=!0)},o(r){e&&k(e.$$.fragment,r),t=!1},d(r){r&&b(s),e&&H(e,r)}}}function oe(a){let e,s,t,n,l=a[17].component&&a[17].isLoading&&ne(a);return{c(){e=C("div"),l&&l.c(),s=z(),this.h()},l(r){e=I(r,"DIV",{class:!0});var i=W(e);l&&l.l(i),s=N(i),i.forEach(b),this.h()},h(){v(e,"class",t=`page fixed w-full h-full ${a[2]||a[17].route==="/viewer"?"overflow-hidden":"overflow-auto"}`),j(e,"transform",a[1]),j(e,"left",`${(a[19]-a[3])*100}%`)},m(r,i){x(r,e,i),l&&l.m(e,null),M(e,s),n=!0},p(r,i){r[17].component&&r[17].isLoading?l?(l.p(r,i),i&1&&y(l,1)):(l=ne(r),l.c(),y(l,1),l.m(e,s)):l&&(D(),k(l,1,1,()=>{l=null}),P()),(!n||i&5&&t!==(t=`page fixed w-full h-full ${r[2]||r[17].route==="/viewer"?"overflow-hidden":"overflow-auto"}`))&&v(e,"class",t),i&2&&j(e,"transform",r[1]),i&8&&j(e,"left",`${(r[19]-r[3])*100}%`)},i(r){n||(y(l),n=!0)},o(r){k(l),n=!1},d(r){r&&b(e),l&&l.d()}}}function Ze(a){let e,s,t,n,l,r;e=new Ue({});const i=[Qe,Ge],o=[];function u(c,d){return c[3]!==-1?0:1}return n=u(a),l=o[n]=i[n](a),{c(){V(e.$$.fragment),s=z(),t=C("main"),l.c(),this.h()},l(c){ce(e.$$.fragment,c),s=N(c),t=I(c,"MAIN",{id:!0,class:!0});var d=W(t);l.l(d),d.forEach(b),this.h()},h(){v(t,"id","page-container"),v(t,"class","w-screen min-h-screen overflow-visible")},m(c,d){F(e,c,d),x(c,s,d),x(c,t,d),o[n].m(t,null),r=!0},p(c,[d]){let g=n;n=u(c),n===g?o[n].p(c,d):(D(),k(o[g],1,1,()=>{o[g]=null}),P(),l=o[n],l?l.p(c,d):(l=o[n]=i[n](c),l.c()),y(l,1),l.m(t,null))},i(c){r||(y(e.$$.fragment,c),y(l),r=!0)},o(c){k(e.$$.fragment,c),k(l),r=!1},d(c){c&&(b(s),b(t)),H(e,c),o[n].d()}}}function et(a,e,s){let t,n;le(a,Ie,f=>s(11,n=f));let{$$slots:l={},$$scope:r}=e,{data:i}=e;const o=[{route:"/map",path:"/map",regex:/^\/map$/,component:Be,isLoading:!1},{route:"/viewer",path:"/viewer",regex:/^\/(viewer)?$/,component:We,isLoading:!1},{route:"/boxes",path:"/boxes",regex:/^\/boxes$/,component:Pe,isLoading:!1},{route:"/users/[idx]",path:"/users/111",regex:/^\/users\/\d+$/,component:De,isLoading:!1}];pe(()=>{Ce.set(window),Oe(),de(),L()}),he(()=>{S()});let u="translateX(0)",c=-1,d;function g(f){p||t===-1||(c=f.touches[0].clientX,t===0&&c<d-20&&(s(1,u="translateX(0)"),c=-1))}function h(f){if(p||n||c<0||t===-1)return;let m=f.touches[0].clientX-c;m=m>d?d:m<-d?-d:m,m=t===0&&m>0||t===o.length-1&&m<0?0:m,m>0?s(0,o[t-1].isLoading=!0,o):m<0&&s(0,o[t+1].isLoading=!0,o),s(1,u=`translateX(${m}px)`)}function _(f){if(p||n||c<0||t===-1)return c=-1;let m=f.changedTouches[0].clientX-c;if(m>d/2&&t!==0){s(1,u=`translateX(${d}px)`);const E=t-1,T=o[E];Q(T.path,{}),s(5,i.route=T.route,i),s(1,u="translateX(0)")}else if(-m>d/2&&t!==o.length-1){s(1,u=`translateX(${-d}px)`);const E=t+1,T=o[E];Q(T.path,{}),s(5,i.route=T.route,i),s(1,u="translateX(0)")}else s(1,u="translateX(0)");c=-1}function L(){d=document.body.clientWidth,document.addEventListener("touchstart",g),document.addEventListener("touchmove",h),document.addEventListener("touchend",_),window.onpopstate=function(){if(t!==-1){for(const f of o)if(f.regex.test(window.location.pathname)){s(5,i.route=f.route,i);break}}}}function S(){document.removeEventListener("touchstart",g),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",_)}let p=!1,$=!1;function X(f){p=f.detail.stop,f.detail.toDefault&&(c=-1),f.detail.toHiddenScroll!==void 0&&s(2,$=f.detail.toHiddenScroll)}return a.$$set=f=>{"data"in f&&s(5,i=f.data),"$$scope"in f&&s(6,r=f.$$scope)},a.$$.update=()=>{a.$$.dirty&33&&s(3,t=o.findIndex(f=>{const m=i.route===f.route;return m&&(f.isLoading=!0),m}))},[o,u,$,t,X,i,r,l]}class mt extends ae{constructor(e){super(),ue(this,e,et,Ze,ie,{data:5})}}export{mt as component,dt as universal};
