import{g as be}from"../chunks/entry.Db-OMiWN.js";import{s as Se,q as Fe,r as Re,b as $,f as u,v as h,i as A,h as f,n as ee,y as je,e as v,a as P,t as X,c as k,g as y,d as K,B as Be,A as ae,z as Ne,j as he,G as Ae,k as Ue,P as Oe,C as Ce,I as Ie,H as Le,D as He,K as ct}from"../chunks/scheduler.5W7zuegH.js";import{S as ot,i as at,e as Me,c as se,b as ie,m as re,a as S,f as ge,t as N,d as oe,g as ve}from"../chunks/index.6ch9Ev20.js";import{e as me,u as ut,d as ft}from"../chunks/each.B8tsjCWH.js";import{H as dt,w as ht,I as _t}from"../chunks/Header.BCIZSXVx.js";import{s as Ee,k as mt,e as $e,g as qe,A as ze}from"../chunks/sign.B0sGg__T.js";import{s as xe}from"../chunks/s32cloudfront.V6T8osDJ.js";import{p as pt}from"../chunks/stores.cuRlGAbM.js";import{F as bt}from"../chunks/Field.CRtKfVbW.js";import{I as gt}from"../chunks/IconLink.DCga9-ju.js";import{f as vt,u as kt}from"../chunks/follow.BMbFDKrz.js";import{C as Pe}from"../chunks/CircleImage.DPLwmJLy.js";import{N as wt}from"../chunks/NavigationBar.CvdQ_uzW.js";import{A as We}from"../chunks/ActionSheet.BENERO-D.js";import{I as $t}from"../chunks/IconDelete.CEdoI-O-.js";function xt(s){let e,l;return{c(){e=Fe("svg"),l=Fe("path"),this.h()},l(t){e=Re(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=$(e);l=Re(i,"path",{d:!0}),$(l).forEach(u),i.forEach(u),this.h()},h(){h(l,"d","M10.4853 6.45739L9.54267 5.51472L3.4212 11.6362C3.36494 11.6924 3.33333 11.7688 3.33333 11.8483V12.3667C3.33333 12.5324 3.46765 12.6667 3.63333 12.6667H4.15174C4.2313 12.6667 4.30761 12.6351 4.36387 12.5789L10.4853 6.45739ZM11.428 5.51472L12.3707 4.57206L11.428 3.62939L10.4853 4.57206L11.428 5.51472ZM4.91587 13.9122C4.85961 13.9685 4.7833 14.0001 4.70374 14.0001H2.3C2.13431 14.0001 2 13.8657 2 13.7001V11.2957C2 11.2161 2.03161 11.1398 2.08787 11.0835L10.9567 2.21472C11.0817 2.08974 11.2512 2.01953 11.428 2.01953C11.6048 2.01953 11.7743 2.08974 11.8993 2.21472L13.7853 4.10072C13.9103 4.22574 13.9805 4.39528 13.9805 4.57206C13.9805 4.74883 13.9103 4.91837 13.7853 5.04339L4.91587 13.9122Z"),h(e,"width",s[0]),h(e,"height",s[1]),h(e,"viewBox","0 0 16 16"),h(e,"fill",s[2]),h(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){A(t,e,i),f(e,l)},p(t,[i]){i&1&&h(e,"width",t[0]),i&2&&h(e,"height",t[1]),i&4&&h(e,"fill",t[2])},i:ee,o:ee,d(t){t&&u(e)}}}function Ct(s,e,l){let{width:t="16"}=e,{height:i="16"}=e,{fill:c="#F1F1F1"}=e;return s.$$set=n=>{"width"in n&&l(0,t=n.width),"height"in n&&l(1,i=n.height),"fill"in n&&l(2,c=n.fill)},[t,i,c]}class It extends ot{constructor(e){super(),at(this,e,Ct,xt,Se,{width:0,height:1,fill:2})}}const Et=async({params:s,parent:e})=>{if(s.idx==="-1")return be("/boxes");const t=await e();return t.error||!t.data?be("/boxes"):t.data},nl=Object.freeze(Object.defineProperty({__proto__:null,load:Et},Symbol.toStringTag,{value:"Module"}));function Ze(s,e,l){const t=s.slice();return t[45]=e[l],t}function Ge(s,e,l){const t=s.slice();return t[45]=e[l],t}function Je(s,e,l){const t=s.slice();return t[50]=e[l],t}function Xe(s,e,l){const t=s.slice();return t[53]=e[l],t}function Dt(s){let e,l,t=s[0].name+"",i,c,n,o,r=s[0].member_count+"",a,b,d=s[0].place_count+"",_,g;return{c(){e=v("div"),l=v("div"),i=X(t),c=P(),n=v("div"),o=X("멤버 "),a=X(r),b=X("명 ･ 장소 "),_=X(d),g=X("개"),this.h()},l(x){e=k(x,"DIV",{class:!0});var D=$(e);l=k(D,"DIV",{class:!0});var L=$(l);i=K(L,t),L.forEach(u),c=y(D),n=k(D,"DIV",{class:!0});var w=$(n);o=K(w,"멤버 "),a=K(w,r),b=K(w,"명 ･ 장소 "),_=K(w,d),g=K(w,"개"),w.forEach(u),D.forEach(u),this.h()},h(){h(l,"class","text-white text-[15px] font-semibold"),h(n,"class","flex text-center text-[#A6A9AB] text-xs font-normal"),h(e,"class","flex flex-col justify-center items-center")},m(x,D){A(x,e,D),f(e,l),f(l,i),f(e,c),f(e,n),f(n,o),f(n,a),f(n,b),f(n,_),f(n,g)},p(x,D){D[0]&1&&t!==(t=x[0].name+"")&&he(i,t),D[0]&1&&r!==(r=x[0].member_count+"")&&he(a,r),D[0]&1&&d!==(d=x[0].place_count+"")&&he(_,d)},d(x){x&&u(e)}}}function Ke(s){let e,l,t,i,c;return l=new _t({}),{c(){e=v("button"),se(l.$$.fragment)},l(n){e=k(n,"BUTTON",{});var o=$(e);ie(l.$$.fragment,o),o.forEach(u)},m(n,o){A(n,e,o),re(l,e,null),t=!0,i||(c=ae(e,"click",s[21]),i=!0)},p:ee,i(n){t||(N(l.$$.fragment,n),t=!0)},o(n){S(l.$$.fragment,n),t=!1},d(n){n&&u(e),oe(l),i=!1,c()}}}function Vt(s){let e,l,t,i,c,n,o;t=new gt({});let r=s[0].role==="owner"&&Ke(s);return{c(){e=v("div"),l=v("button"),se(t.$$.fragment),i=P(),r&&r.c(),this.h()},l(a){e=k(a,"DIV",{slot:!0,class:!0});var b=$(e);l=k(b,"BUTTON",{});var d=$(l);ie(t.$$.fragment,d),d.forEach(u),i=y(b),r&&r.l(b),b.forEach(u),this.h()},h(){h(e,"slot","right"),h(e,"class","flex items-center gap-2")},m(a,b){A(a,e,b),f(e,l),re(t,l,null),f(e,i),r&&r.m(e,null),c=!0,n||(o=ae(l,"click",s[20]),n=!0)},p(a,b){a[0].role==="owner"?r?(r.p(a,b),b[0]&1&&N(r,1)):(r=Ke(a),r.c(),N(r,1),r.m(e,null)):r&&(ve(),S(r,1,1,()=>{r=null}),ge())},i(a){c||(N(t.$$.fragment,a),N(r),c=!0)},o(a){S(t.$$.fragment,a),S(r),c=!1},d(a){a&&u(e),oe(t),r&&r.d(),n=!1,o()}}}function Bt(s){let e;return{c(){e=v("div"),this.h()},l(l){e=k(l,"DIV",{class:!0}),$(e).forEach(u),this.h()},h(){h(e,"class","absolute w-[70px] h-[70px] bg-[rgb(73,73,73)] rounded-full")},m(l,t){A(l,e,t)},p:ee,i:ee,o:ee,d(l){l&&u(e)}}}function Tt(s){let e,l;return e=new Pe({props:{src:xe(s[0].image??"",500),width:"70px",strokeWidth:"0"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,i){re(e,t,i),l=!0},p(t,i){const c={};i[0]&1&&(c.src=xe(t[0].image??"",500)),e.$set(c)},i(t){l||(N(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Qe(s){let e,l,t=s[0].description+"",i;return{c(){e=v("section"),l=v("p"),i=X(t),this.h()},l(c){e=k(c,"SECTION",{class:!0});var n=$(e);l=k(n,"P",{class:!0});var o=$(l);i=K(o,t),o.forEach(u),n.forEach(u),this.h()},h(){h(l,"class","text-start font-normal text-xs leading-4 text-[#A6A9AB] line-clamp-2"),h(e,"class","flex-none px-5 py-2")},m(c,n){A(c,e,n),f(e,l),f(l,i)},p(c,n){n[0]&1&&t!==(t=c[0].description+"")&&he(i,t)},d(c){c&&u(e)}}}function Ot(s){let e,l='<p class="font-normal text-sm leading-5 text-[#B3B8BD]">기타 정보를 볼 수 있는 권한이 없습니다</p>';return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=k(t,"DIV",{class:!0,"data-svelte-h":!0}),Be(e)!=="svelte-dvf6hm"&&(e.innerHTML=l),this.h()},h(){h(e,"class","flex-auto flex items-center justify-center")},m(t,i){A(t,e,i)},p:ee,i:ee,o:ee,d(t){t&&u(e)}}}function jt(s){var ce,ke;let e,l,t,i,c,n=s[0].place_count+"",o,r,a,b,d,_,g,x=s[0].member_count+"",D,L,w,q,V=`${((ke=(ce=s[6])==null?void 0:ce.getClientRects()[0])==null?void 0:ke.height)??0}px`,E,M,F,G,te,Y,W,Z,R,j=s[12]&&s[2]==="member"&&Ye(s),U=me(s[8]),T=[];for(let C=0;C<U.length;C+=1)T[C]=et(Xe(s,U,C));const ne=C=>S(T[C],1,1,()=>{T[C]=null});let J=s[12]&&St(s);return{c(){e=v("div"),l=v("div"),t=v("div"),i=v("button"),c=X("장소("),o=X(n),r=X(")"),b=P(),d=v("div"),_=v("button"),g=X("멤버("),D=X(x),L=X(")"),q=P(),j&&j.c(),E=P(),M=v("div"),F=v("div"),G=v("div");for(let C=0;C<T.length;C+=1)T[C].c();te=P(),Y=v("div"),J&&J.c(),this.h()},l(C){e=k(C,"DIV",{class:!0});var O=$(e);l=k(O,"DIV",{class:!0});var z=$(l);t=k(z,"DIV",{class:!0});var ue=$(t);i=k(ue,"BUTTON",{class:!0});var B=$(i);c=K(B,"장소("),o=K(B,n),r=K(B,")"),B.forEach(u),ue.forEach(u),b=y(z),d=k(z,"DIV",{class:!0});var de=$(d);_=k(de,"BUTTON",{class:!0});var fe=$(_);g=K(fe,"멤버("),D=K(fe,x),L=K(fe,")"),fe.forEach(u),de.forEach(u),z.forEach(u),q=y(O),j&&j.l(O),O.forEach(u),E=y(C),M=k(C,"DIV",{class:!0});var we=$(M);F=k(we,"DIV",{class:!0});var _e=$(F);G=k(_e,"DIV",{class:!0});var pe=$(G);for(let I=0;I<T.length;I+=1)T[I].l(pe);pe.forEach(u),te=y(_e),Y=k(_e,"DIV",{class:!0});var m=$(Y);J&&J.l(m),m.forEach(u),_e.forEach(u),we.forEach(u),this.h()},h(){h(i,"class",a=s[2]==="place"?De:Ve),h(t,"class","tab-place w-1/2"),h(_,"class",w=s[2]==="member"?De:Ve),h(d,"class","tab-member w-1/2"),h(l,"class","tab h-10 flex justify-center text-center"),h(e,"class","flex-none sticky w-full bg-inherit z-10"),Ce(e,"top",V),h(G,"class","w-full flex flex-col pb-[82px] px-5"),Ie(G,"hidden",s[2]!=="place"),h(Y,"class","w-full flex flex-col absolute left-full top-0 pb-[82px] px-5"),Ie(Y,"hidden",s[2]!=="member"),h(F,"class","h-full w-full transition-transform"),Ce(F,"transform",`translateX(${s[2]==="place"?0:-100}%)`),h(M,"class","content flex-auto")},m(C,O){A(C,e,O),f(e,l),f(l,t),f(t,i),f(i,c),f(i,o),f(i,r),f(l,b),f(l,d),f(d,_),f(_,g),f(_,D),f(_,L),f(e,q),j&&j.m(e,null),A(C,E,O),A(C,M,O),f(M,F),f(F,G);for(let z=0;z<T.length;z+=1)T[z]&&T[z].m(G,null);f(F,te),f(F,Y),J&&J.m(Y,null),W=!0,Z||(R=[ae(i,"click",s[24]),ae(_,"click",s[25])],Z=!0)},p(C,O){var z,ue;if((!W||O[0]&1)&&n!==(n=C[0].place_count+"")&&he(o,n),(!W||O[0]&4&&a!==(a=C[2]==="place"?De:Ve))&&h(i,"class",a),(!W||O[0]&1)&&x!==(x=C[0].member_count+"")&&he(D,x),(!W||O[0]&4&&w!==(w=C[2]==="member"?De:Ve))&&h(_,"class",w),C[12]&&C[2]==="member"?j?(j.p(C,O),O[0]&4&&N(j,1)):(j=Ye(C),j.c(),N(j,1),j.m(e,null)):j&&(ve(),S(j,1,1,()=>{j=null}),ge()),O[0]&64&&V!==(V=`${((ue=(z=C[6])==null?void 0:z.getClientRects()[0])==null?void 0:ue.height)??0}px`)&&Ce(e,"top",V),O[0]&257){U=me(C[8]);let B;for(B=0;B<U.length;B+=1){const de=Xe(C,U,B);T[B]?(T[B].p(de,O),N(T[B],1)):(T[B]=et(de),T[B].c(),N(T[B],1),T[B].m(G,null))}for(ve(),B=U.length;B<T.length;B+=1)ne(B);ge()}(!W||O[0]&4)&&Ie(G,"hidden",C[2]!=="place"),C[12]&&J.p(C,O),(!W||O[0]&4)&&Ie(Y,"hidden",C[2]!=="member"),O[0]&4&&Ce(F,"transform",`translateX(${C[2]==="place"?0:-100}%)`)},i(C){if(!W){N(j);for(let O=0;O<U.length;O+=1)N(T[O]);N(J),W=!0}},o(C){S(j),T=T.filter(Boolean);for(let O=0;O<T.length;O+=1)S(T[O]);S(J),W=!1},d(C){C&&(u(e),u(E),u(M)),j&&j.d(),Le(T,C),J&&J.d(),Z=!1,Ae(R)}}}function Ye(s){let e,l,t,i;function c(o){s[26](o)}let n={round:!0,placeholder:"멤버 검색",fontSize:"font-normal text-sm",fontColor:"text-[#757D86]",clear:!0,backgroundColor:"bg-[#383838]/30",onInput:s[17]};return s[3]!==void 0&&(n.value=s[3]),l=new bt({props:n}),je.push(()=>Me(l,"value",c)),{c(){e=v("section"),se(l.$$.fragment),this.h()},l(o){e=k(o,"SECTION",{class:!0});var r=$(e);ie(l.$$.fragment,r),r.forEach(u),this.h()},h(){h(e,"class","box-search px-5 py-1")},m(o,r){A(o,e,r),re(l,e,null),i=!0},p(o,r){const a={};!t&&r[0]&8&&(t=!0,a.value=o[3],Ne(()=>t=!1)),l.$set(a)},i(o){i||(N(l.$$.fragment,o),i=!0)},o(o){S(l.$$.fragment,o),i=!1},d(o){o&&u(e),oe(l)}}}function Nt(s){let e;return{c(){e=v("div"),this.h()},l(l){e=k(l,"DIV",{class:!0}),$(e).forEach(u),this.h()},h(){h(e,"class","w-full h-full bg-[#D9D9D9] rounded-full")},m(l,t){A(l,e,t)},p:ee,i:ee,o:ee,d(l){l&&u(e)}}}function Mt(s){let e,l;return e=new Pe({props:{src:xe(s[53].media.at(0)??"",500),width:"40px",strokeWidth:"0"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,i){re(e,t,i),l=!0},p:ee,i(t){l||(N(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function et(s){let e,l,t,i,c,n,o,r,a=s[53].name+"",b,d,_,g=s[53].categories.join(" | ")+"",x,D,L,w=s[53].road_address+"",q,V,E,M,F;const G=[Mt,Nt],te=[];function Y(Z,R){var j;return(j=Z[53].media)!=null&&j.at(0)?0:1}t=Y(s),i=te[t]=G[t](s);function W(){return s[27](s[53])}return{c(){e=v("div"),l=v("div"),i.c(),c=P(),n=v("div"),o=v("div"),r=v("div"),b=X(a),d=P(),_=v("div"),x=X(g),D=P(),L=v("div"),q=X(w),V=P(),this.h()},l(Z){e=k(Z,"DIV",{class:!0,"aria-hidden":!0});var R=$(e);l=k(R,"DIV",{class:!0});var j=$(l);i.l(j),j.forEach(u),c=y(R),n=k(R,"DIV",{class:!0});var U=$(n);o=k(U,"DIV",{class:!0});var T=$(o);r=k(T,"DIV",{class:!0});var ne=$(r);b=K(ne,a),ne.forEach(u),d=y(T),_=k(T,"DIV",{class:!0});var J=$(_);x=K(J,g),J.forEach(u),T.forEach(u),D=y(U),L=k(U,"DIV",{class:!0});var ce=$(L);q=K(ce,w),ce.forEach(u),U.forEach(u),V=y(R),R.forEach(u),this.h()},h(){h(l,"class","flex-none w-10 h-10"),h(r,"class","font-medium text-sm leading-[17px] text-white truncate"),h(_,"class","flex-none max-w-16 truncate font-medium text-xs leading-[18px] tracking-[-0.6px] text-[#757D86]"),h(o,"class","flex flex-row items-center gap-1.5 w-full"),h(L,"class","w-full truncate font-normal text-sm leading-5 text-[#757D86]"),h(n,"class","flex-auto min-w-0 flex flex-col items-start gap-0.5"),h(e,"class","py-1.5 flex gap-3 h-[62px] items-center"),h(e,"aria-hidden","")},m(Z,R){A(Z,e,R),f(e,l),te[t].m(l,null),f(e,c),f(e,n),f(n,o),f(o,r),f(r,b),f(o,d),f(o,_),f(_,x),f(n,D),f(n,L),f(L,q),f(e,V),E=!0,M||(F=ae(e,"click",W),M=!0)},p(Z,R){s=Z,i.p(s,R)},i(Z){E||(N(i),E=!0)},o(Z){S(i),E=!1},d(Z){Z&&u(e),te[t].d(),M=!1,F()}}}function St(s){let e,l,t=me(s[1]),i=[];for(let n=0;n<t.length;n+=1)i[n]=st(Ge(s,t,n));const c=n=>S(i[n],1,1,()=>{i[n]=null});return{c(){for(let n=0;n<i.length;n+=1)i[n].c();e=He()},l(n){for(let o=0;o<i.length;o+=1)i[o].l(n);e=He()},m(n,o){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(n,o);A(n,e,o),l=!0},p(n,o){if(o[0]&42003){t=me(n[1]);let r;for(r=0;r<t.length;r+=1){const a=Ge(n,t,r);i[r]?(i[r].p(a,o),N(i[r],1)):(i[r]=st(a),i[r].c(),N(i[r],1),i[r].m(e.parentNode,e))}for(ve(),r=t.length;r<i.length;r+=1)c(r);ge()}},i(n){if(!l){for(let o=0;o<t.length;o+=1)N(i[o]);l=!0}},o(n){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)S(i[o]);l=!1},d(n){n&&u(e),Le(i,n)}}}function At(s){let e;return{c(){e=v("div"),this.h()},l(l){e=k(l,"DIV",{class:!0}),$(e).forEach(u),this.h()},h(){h(e,"class","w-full h-full bg-[#D9D9D9] rounded-full")},m(l,t){A(l,e,t)},p:ee,i:ee,o:ee,d(l){l&&u(e)}}}function Lt(s){let e,l;return e=new Pe({props:{src:xe(s[50].profile_image_url,500),width:"40px",strokeWidth:"0"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,i){re(e,t,i),l=!0},p(t,i){const c={};i[0]&2&&(c.src=xe(t[50].profile_image_url,500)),e.$set(c)},i(t){l||(N(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function tt(s){let e,l=s[50].idx,t=lt(s);return{c(){e=v("div"),t.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var c=$(e);t.l(c),c.forEach(u),this.h()},h(){h(e,"class","flex-none")},m(i,c){A(i,e,c),t.m(e,null)},p(i,c){c[0]&2&&Se(l,l=i[50].idx)?(t.d(1),t=lt(i),t.c(),t.m(e,null)):t.p(i,c)},d(i){i&&u(e),t.d(i)}}}function lt(s){let e,l,t,i;function c(...n){return s[28](s[50],...n)}return{c(){e=v("input"),this.h()},l(n){e=k(n,"INPUT",{class:!0,type:!0}),this.h()},h(){h(e,"class","m-2 focus:outline-none focus:ring-0 focus:ring-offset-0"),h(e,"type","checkbox"),e.checked=l=s[4].includes(s[50].idx)},m(n,o){A(n,e,o),t||(i=ae(e,"click",ct(c)),t=!0)},p(n,o){s=n,o[0]&18&&l!==(l=s[4].includes(s[50].idx))&&(e.checked=l)},d(n){n&&u(e),t=!1,i()}}}function nt(s){let e,l,t,i,c,n,o=s[50].unique_name+"",r,a,b=s[50].role!=="owner"&&s[10].includes(s[0].role??""),d,_,g;const x=[Lt,At],D=[];function L(V,E){return V[50].profile_image_url?0:1}t=L(s),i=D[t]=x[t](s);let w=b&&tt(s);function q(){return s[29](s[50])}return{c(){e=v("div"),l=v("div"),i.c(),c=P(),n=v("p"),r=X(o),a=P(),w&&w.c(),this.h()},l(V){e=k(V,"DIV",{class:!0,"aria-hidden":!0});var E=$(e);l=k(E,"DIV",{class:!0});var M=$(l);i.l(M),M.forEach(u),c=y(E),n=k(E,"P",{class:!0});var F=$(n);r=K(F,o),F.forEach(u),a=y(E),w&&w.l(E),E.forEach(u),this.h()},h(){h(l,"class","flex-none w-10 h-10"),h(n,"class","flex-auto font-medium text-sm leading-[17px] text-white"),h(e,"class","py-2 relative flex flex-row gap-2 items-center"),h(e,"aria-hidden","")},m(V,E){A(V,e,E),f(e,l),D[t].m(l,null),f(e,c),f(e,n),f(n,r),f(e,a),w&&w.m(e,null),d=!0,_||(g=ae(e,"click",q),_=!0)},p(V,E){s=V;let M=t;t=L(s),t===M?D[t].p(s,E):(ve(),S(D[M],1,1,()=>{D[M]=null}),ge(),i=D[t],i?i.p(s,E):(i=D[t]=x[t](s),i.c()),N(i,1),i.m(l,null)),(!d||E[0]&2)&&o!==(o=s[50].unique_name+"")&&he(r,o),E[0]&3&&(b=s[50].role!=="owner"&&s[10].includes(s[0].role??"")),b?w?w.p(s,E):(w=tt(s),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i(V){d||(N(i),d=!0)},o(V){S(i),d=!1},d(V){V&&u(e),D[t].d(),w&&w.d(),_=!1,g()}}}function st(s){let e,l=s[45]+"",t,i,c,n,o,r=me(s[13](s[45])),a=[];for(let d=0;d<r.length;d+=1)a[d]=nt(Je(s,r,d));const b=d=>S(a[d],1,1,()=>{a[d]=null});return{c(){e=v("p"),t=X(l),i=P(),c=v("div");for(let d=0;d<a.length;d+=1)a[d].c();n=P(),this.h()},l(d){e=k(d,"P",{class:!0});var _=$(e);t=K(_,l),_.forEach(u),i=y(d),c=k(d,"DIV",{class:!0});var g=$(c);for(let x=0;x<a.length;x+=1)a[x].l(g);n=y(g),g.forEach(u),this.h()},h(){h(e,"class","py-2.5 font-normal text-sm leading-5 text-[#757D86]"),h(c,"class","flex flex-col")},m(d,_){A(d,e,_),f(e,t),A(d,i,_),A(d,c,_);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(c,null);f(c,n),o=!0},p(d,_){if((!o||_[0]&2)&&l!==(l=d[45]+"")&&he(t,l),_[0]&42003){r=me(d[13](d[45]));let g;for(g=0;g<r.length;g+=1){const x=Je(d,r,g);a[g]?(a[g].p(x,_),N(a[g],1)):(a[g]=nt(x),a[g].c(),N(a[g],1),a[g].m(c,n))}for(ve(),g=r.length;g<a.length;g+=1)b(g);ge()}},i(d){if(!o){for(let _=0;_<r.length;_+=1)N(a[_]);o=!0}},o(d){a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)S(a[_]);o=!1},d(d){d&&(u(e),u(i),u(c)),Le(a,d)}}}function it(s,e){let l,t,i,c=e[45]+"",n,o,r,a;function b(){return e[30](e[45])}return{key:s,first:null,c(){l=v("div"),t=v("button"),i=v("div"),n=X(c),o=P(),this.h()},l(d){l=k(d,"DIV",{class:!0});var _=$(l);t=k(_,"BUTTON",{class:!0});var g=$(t);i=k(g,"DIV",{});var x=$(i);n=K(x,c),x.forEach(u),g.forEach(u),o=y(_),_.forEach(u),this.h()},h(){h(t,"class","flex items-center gap-1"),h(l,"class","flex items-center gap-1 flex-wrap"),this.first=l},m(d,_){A(d,l,_),f(l,t),f(t,i),f(i,n),f(l,o),r||(a=ae(t,"click",b),r=!0)},p(d,_){e=d},d(d){d&&u(l),r=!1,a()}}}function Pt(s){let e,l,t=[],i=new Map,c=me(s[11]);const n=o=>o[45];for(let o=0;o<c.length;o+=1){let r=Ze(s,c,o),a=n(r);i.set(a,t[o]=it(a,r))}return{c(){e=v("div"),l=v("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=k(o,"DIV",{class:!0});var r=$(e);l=k(r,"DIV",{class:!0});var a=$(l);for(let b=0;b<t.length;b+=1)t[b].l(a);a.forEach(u),r.forEach(u),this.h()},h(){h(l,"class","flex flex-col gap-4 text-white flex-wrap"),h(e,"class","p-5")},m(o,r){A(o,e,r),f(e,l);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(l,null)},p(o,r){r[0]&67584&&(c=me(o[11]),t=ut(t,r,n,1,o,c,i,l,ft,it,null,Ze))},d(o){o&&u(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function yt(s){let e,l,t,i,c,n,o="수정",r,a,b,d,_,g="삭제",x,D,L;return i=new It({props:{width:"24",height:"24",fill:"white"}}),b=new $t({props:{width:"24",height:"24",fill:"white"}}),{c(){e=v("div"),l=v("div"),t=v("div"),se(i.$$.fragment),c=P(),n=v("button"),n.textContent=o,r=P(),a=v("div"),se(b.$$.fragment),d=P(),_=v("button"),_.textContent=g,this.h()},l(w){e=k(w,"DIV",{class:!0});var q=$(e);l=k(q,"DIV",{class:!0});var V=$(l);t=k(V,"DIV",{class:!0,"aria-hidden":!0});var E=$(t);ie(i.$$.fragment,E),c=y(E),n=k(E,"BUTTON",{class:!0,"data-svelte-h":!0}),Be(n)!=="svelte-2x8z4c"&&(n.textContent=o),E.forEach(u),r=y(V),a=k(V,"DIV",{class:!0,"aria-hidden":!0});var M=$(a);ie(b.$$.fragment,M),d=y(M),_=k(M,"BUTTON",{class:!0,"data-svelte-h":!0}),Be(_)!=="svelte-16jhj3q"&&(_.textContent=g),M.forEach(u),V.forEach(u),q.forEach(u),this.h()},h(){h(n,"class","font-medium text-sm leading-[17px]"),h(t,"class","flex items-center gap-2"),h(t,"aria-hidden",""),h(_,"class","font-medium text-sm leading-[17px]"),h(a,"class","flex items-center gap-2"),h(a,"aria-hidden",""),h(l,"class","flex flex-col gap-3 text-white"),h(e,"class","p-5")},m(w,q){A(w,e,q),f(e,l),f(l,t),re(i,t,null),f(t,c),f(t,n),f(l,r),f(l,a),re(b,a,null),f(a,d),f(a,_),x=!0,D||(L=[ae(t,"click",s[32]),ae(a,"click",s[18])],D=!0)},p:ee,i(w){x||(N(i.$$.fragment,w),N(b.$$.fragment,w),x=!0)},o(w){S(i.$$.fragment,w),S(b.$$.fragment,w),x=!1},d(w){w&&u(e),oe(i),oe(b),D=!1,Ae(L)}}}function Ft(s){let e,l,t,i,c,n,o,r,a,b,d,_,g,x,D=s[0].is_subcribed?"구독중":"구독",L,w,q,V,E,M="지도에서 보기",F,G,te,Y,W,Z,R,j,U,T,ne,J,ce;function ke(m){s[22](m)}let C={position:"fixed",backgroundColor:"bg-black",contentPosition:"items-center",leftBack:!0,$$slots:{right:[Vt],default:[Dt]},$$scope:{ctx:s}};s[6]!==void 0&&(C.header=s[6]),t=new dt({props:C}),je.push(()=>Me(t,"header",ke));const O=[Tt,Bt],z=[];function ue(m,I){return m[0].image?0:1}a=ue(s),b=z[a]=O[a](s);let B=s[0].description&&Qe(s);const de=[jt,Ot],fe=[];function we(m,I){return m[9]?0:1}G=we(s),te=fe[G]=de[G](s),W=new wt({}),R=new We({props:{fixed:!0,noHandle:!0,isOpen:s[2]==="member"&&s[4].length>0,onClose:s[31],$$slots:{default:[Pt]},$$scope:{ctx:s}}});function _e(m){s[33](m)}let pe={fixed:!0,noHandle:!0,$$slots:{default:[yt]},$$scope:{ctx:s}};return s[5]!==void 0&&(pe.isOpen=s[5]),U=new We({props:pe}),je.push(()=>Me(U,"isOpen",_e)),{c(){e=v("div"),l=v("div"),se(t.$$.fragment),c=P(),n=v("div"),o=v("div"),r=P(),b.c(),d=P(),B&&B.c(),_=P(),g=v("div"),x=v("button"),L=X(D),V=P(),E=v("button"),E.textContent=M,F=P(),te.c(),Y=P(),se(W.$$.fragment),Z=P(),se(R.$$.fragment),j=P(),se(U.$$.fragment),this.h()},l(m){e=k(m,"DIV",{class:!0});var I=$(e);l=k(I,"DIV",{class:!0});var p=$(l);ie(t.$$.fragment,p),p.forEach(u),c=y(I),n=k(I,"DIV",{class:!0});var H=$(n);o=k(H,"DIV",{class:!0}),$(o).forEach(u),r=y(H),b.l(H),H.forEach(u),d=y(I),B&&B.l(I),_=y(I),g=k(I,"DIV",{class:!0});var Q=$(g);x=k(Q,"BUTTON",{class:!0});var le=$(x);L=K(le,D),le.forEach(u),V=y(Q),E=k(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),Be(E)!=="svelte-cn1lco"&&(E.textContent=M),Q.forEach(u),F=y(I),te.l(I),I.forEach(u),Y=y(m),ie(W.$$.fragment,m),Z=y(m),ie(R.$$.fragment,m),j=y(m),ie(U.$$.fragment,m),this.h()},h(){h(l,"class","flex-none h-[114.5px]"),h(o,"class","absolute w-full h-full bg-[rgba(56,56,56,0.7)] rounded-full shadow-[1px_1px_6px_rgba(0,0,0,0.1)]"),h(n,"class","flex-none w-[78px] h-[78px] mx-auto relative flex justify-center items-center"),h(x,"class",w="w-full h-full rounded-[50px] p-2.5 "+(s[0].is_subcribed?"border border-[#0C79FE] text-[#0C79FE]":"bg-[#0C79FE] text-white")+" disabled:bg-[rgba(56,56,56,0.7)] font-medium text-sm leading-[17px] disabled:text-[#757475]"),x.disabled=q=s[0].role==="owner",h(E,"class","w-full h-full rounded-[50px] p-2.5 border border-[#0C79FE] font-medium text-sm leading-[17px] text-[#0C79FE]"),h(g,"class","flex-none flex gap-1.5 px-5 py-2 w-full justify-between items-center"),h(e,"class","flex flex-col w-dvw h-dvh overflow-x-hidden bg-black")},m(m,I){A(m,e,I),f(e,l),re(t,l,null),f(e,c),f(e,n),f(n,o),f(n,r),z[a].m(n,null),f(e,d),B&&B.m(e,null),f(e,_),f(e,g),f(g,x),f(x,L),f(g,V),f(g,E),f(e,F),fe[G].m(e,null),A(m,Y,I),re(W,m,I),A(m,Z,I),re(R,m,I),A(m,j,I),re(U,m,I),ne=!0,J||(ce=[ae(x,"click",s[14]),ae(E,"click",s[23])],J=!0)},p(m,I){const p={};I[0]&161|I[1]&33554432&&(p.$$scope={dirty:I,ctx:m}),!i&&I[0]&64&&(i=!0,p.header=m[6],Ne(()=>i=!1)),t.$set(p);let H=a;a=ue(m),a===H?z[a].p(m,I):(ve(),S(z[H],1,1,()=>{z[H]=null}),ge(),b=z[a],b?b.p(m,I):(b=z[a]=O[a](m),b.c()),N(b,1),b.m(n,null)),m[0].description?B?B.p(m,I):(B=Qe(m),B.c(),B.m(e,_)):B&&(B.d(1),B=null),(!ne||I[0]&1)&&D!==(D=m[0].is_subcribed?"구독중":"구독")&&he(L,D),(!ne||I[0]&1&&w!==(w="w-full h-full rounded-[50px] p-2.5 "+(m[0].is_subcribed?"border border-[#0C79FE] text-[#0C79FE]":"bg-[#0C79FE] text-white")+" disabled:bg-[rgba(56,56,56,0.7)] font-medium text-sm leading-[17px] disabled:text-[#757475]"))&&h(x,"class",w),(!ne||I[0]&1&&q!==(q=m[0].role==="owner"))&&(x.disabled=q),te.p(m,I);const Q={};I[0]&20&&(Q.isOpen=m[2]==="member"&&m[4].length>0),I[0]&16&&(Q.onClose=m[31]),I[1]&33554432&&(Q.$$scope={dirty:I,ctx:m}),R.$set(Q);const le={};I[0]&1|I[1]&33554432&&(le.$$scope={dirty:I,ctx:m}),!T&&I[0]&32&&(T=!0,le.isOpen=m[5],Ne(()=>T=!1)),U.$set(le)},i(m){ne||(N(t.$$.fragment,m),N(b),N(te),N(W.$$.fragment,m),N(R.$$.fragment,m),N(U.$$.fragment,m),ne=!0)},o(m){S(t.$$.fragment,m),S(b),S(te),S(W.$$.fragment,m),S(R.$$.fragment,m),S(U.$$.fragment,m),ne=!1},d(m){m&&(u(e),u(Y),u(Z),u(j)),oe(t),z[a].d(),B&&B.d(),fe[G].d(),oe(W,m),oe(R,m),oe(U,m),J=!1,Ae(ce)}}}let De="h-full font-medium text-sm leading-[17px] text-white border-b-2 border-white",Ve="h-full font-medium text-sm leading-[17px] text-[#757D86]";function rt(s){return Object.groupBy(s,({role:e})=>e??"none")}function Rt(s,e,l){let t,i;Ue(s,Ee,p=>l(37,t=p)),Ue(s,pt,p=>l(7,i=p));let{data:c}=e,n=c.box,o=c.places,r=c.members,a=rt(r),b=c.hasPermission;const d=["owner","manager"],_=["writer","reader"],g=[...d,..._],x=["manager",..._,"none"];let D=[...g,"none"];const L=d.includes(n.role??"");let w="place",q="",V=[],E=!1,M;function F(p){a=rt(p),l(1,D=[...D])}function G(p){return D.includes(p)}function te(p){return G(p)?a[p]??[]:[]}async function Y(){const p=mt();if(!p)return $e.emit("showSignInModal",{removable:!0});const H=BigInt(p.sub);n.is_subcribed?await Z(p,H):await W(p,H)}async function W(p,H){await vt({targetTable:"boxes",targetIdx:BigInt(n.idx),subjectIdx:H}),l(0,n.is_subcribed=!0,n),Oe(Ee,t=[{...n,role:"none"},...t],t),!r.some(Q=>Q.idx===p.sub)&&(r=[...r,{idx:p.sub,unique_name:p.uni,profile_image_url:p.pic??"",role:n.role??"none"}],F(r),n.member_count&&l(0,n.member_count=`${Number(n.member_count)+1}`,n))}async function Z(p,H){await kt({targetTable:"boxes",targetIdx:BigInt(n.idx),subjectIdx:H}),l(0,n.is_subcribed=!1,n),Oe(Ee,t=t.filter(le=>le.idx!==n.idx),t);const Q=r.find(le=>le.idx===p.sub);!Q||g.includes(Q.role)||(n.member_count&&l(0,n.member_count=`${Number(n.member_count)-1}`,n),r=r.filter(le=>le.idx!==p.sub),F(r))}function R(p,H){H&&!V.includes(p)?l(4,V=[...V,p]):!H&&V.includes(p)&&l(4,V=V.filter(Q=>Q!==p))}async function j(p){if(!G(p))return;const H=qe();if(!H)return $e.emit("showSignInModal",{removable:!0});const Q=[];V.forEach(le=>{const ye=r.find(Te=>Te.idx===le);ye&&(Q.push(fetch(`${ze}/auth/permissions?targetTable=boxes&targetIdx=${n.idx}&subjectTable=users&subjectIdx=${le}&relation=${p}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`}}).then(Te=>{if(!Te.ok)throw"error"})),ye.role=p)});try{await Promise.all(Q),F(r),l(4,V=[])}catch{$e.emit("pushSnackbar",{message:"일시적으로 장애가 발생했습니다."})}}let U;function T(){clearTimeout(U),U=setTimeout(ne,300)}function ne(){F(r.filter(p=>p.unique_name.includes(q)))}async function J(){const p=qe();if(!p)return $e.emit("showSignInModal",{removable:!0});await fetch(`${ze}/boxes/${n.idx}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`}}),Oe(Ee,t=t.filter(H=>H.idx!==n.idx),t),$e.emit("pushSnackbar",{message:`${n.name} 박스를 삭제했습니다.`}),be("/boxes")}const ce=()=>ht(i.url),ke=()=>l(5,E=!0);function C(p){M=p,l(6,M)}const O=()=>be(`/boxes/${n.idx}/map`),z=()=>l(2,w="place"),ue=()=>{L?l(2,w="member"):$e.emit("pushSnackbar",{message:"권한이 없습니다.",duration:1e3})};function B(p){q=p,l(3,q)}const de=p=>be(`/places/${p.idx}?boxIdx=${n.idx}`),fe=(p,H)=>R(p.idx,H.currentTarget.checked),we=p=>be(`/users/${p.idx}`),_e=p=>j(p),pe=()=>l(4,V=[]),m=()=>be(`/boxes/${n.idx}/setting`);function I(p){E=p,l(5,E)}return s.$$set=p=>{"data"in p&&l(19,c=p.data)},[n,D,w,q,V,E,M,i,o,b,d,x,L,te,Y,R,j,T,J,c,ce,ke,C,O,z,ue,B,de,fe,we,_e,pe,m,I]}class sl extends ot{constructor(e){super(),at(this,e,Rt,Ft,Se,{data:19},null,[-1,-1])}}export{sl as component,nl as universal};
