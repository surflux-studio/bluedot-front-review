import{s as ke,q as fe,r as ue,b as C,f as _,v as s,i as Q,h as g,n as le,y as Ne,a as L,g as V,z as Le,k as Ye,w as bt,x as Et,m as yt,u as St,o as Pt,p as Tt,e as w,t as he,c as $,d as me,A as De,j as ve,P as Fe,B as Ke,C as nt,G as at,N as He,D as it}from"../chunks/scheduler.BTWb34i-.js";import{S as Ee,i as ye,e as Ve,c as U,b as G,m as K,t as k,a as P,d as W,g as $e,f as Ie}from"../chunks/index.D8fgSKXR.js";import{e as Me}from"../chunks/each.Co5Upyp2.js";import{H as Dt}from"../chunks/Header.B4ZdURB9.js";import{p as At}from"../chunks/stores.BuR131Dn.js";/* empty css                                                   */import{C as Ft}from"../chunks/CircleImage.Bdg0rf02.js";import{g as Nt}from"../chunks/entry.C9m624fl.js";import{N as Lt}from"../chunks/NavigationBar.xrgyMeCO.js";import{n as Se,C as Ue,i as xe,e as Pe,t as Oe,h as rt,A as Ze,g as st}from"../chunks/sign.D1hvpANE.js";import{g as Ce,s as Vt}from"../chunks/searchParams.BDjoxA2Z.js";import{f as Bt}from"../chunks/proj.DXH8zrwl.js";import{g as we,a as oe,s as Te}from"../chunks/s32cloudfront.r_FDhqrw.js";import{B as Ct}from"../chunks/BottomNavigationPadder.DwHlk_jT.js";import{r as Re}from"../chunks/units.BJZU6p1c.js";import{Y as wt,I as $t,a as Mt,b as Ot}from"../chunks/IconHeartFill.Djo_KpMT.js";import{I as qt}from"../chunks/IconEarth.BWo7het8.js";import{C as xt,I as ot,a as Ht}from"../chunks/IconCamera.DJxCDEP4.js";import{g as Rt,u as qe,t as Zt,a as jt,b as zt}from"../chunks/photo.I-o-mD7f.js";import{A as Yt}from"../chunks/ActionSheet.DTZHMjb4.js";import{F as Ut}from"../chunks/Field.cvwonUDa.js";import{K as je}from"../chunks/index.BYuGGbts.js";import{I as It}from"../chunks/IconAdd.CsTVd1_1.js";function Gt(n){let e,l;return{c(){e=fe("svg"),l=fe("path"),this.h()},l(t){e=ue(t,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var a=C(e);l=ue(a,"path",{d:!0}),C(l).forEach(_),a.forEach(_),this.h()},h(){s(l,"d","M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 -960 960 960"),s(e,"width",n[1]),s(e,"height",n[1]),s(e,"fill",n[0])},m(t,a){Q(t,e,a),g(e,l)},p(t,[a]){a&2&&s(e,"width",t[1]),a&2&&s(e,"height",t[1]),a&1&&s(e,"fill",t[0])},i:le,o:le,d(t){t&&_(e)}}}function Kt(n,e,l){let t,{fill:a="#5f6368"}=e,{length:i="1.75"}=e,{alt:r="Account"}=e;return n.$$set=f=>{"fill"in f&&l(0,a=f.fill),"length"in f&&l(2,i=f.length),"alt"in f&&l(3,r=f.alt)},n.$$.update=()=>{n.$$.dirty&4&&l(1,t=Re(i))},[a,t,i,r]}class Wt extends Ee{constructor(e){super(),ye(this,e,Kt,Gt,ke,{fill:0,length:2,alt:3})}}function Jt(n){let e,l;return{c(){e=fe("svg"),l=fe("path"),this.h()},l(t){e=ue(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=C(e);l=ue(a,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),C(l).forEach(_),a.forEach(_),this.h()},h(){s(l,"fill-rule","evenodd"),s(l,"clip-rule","evenodd"),s(l,"d","M5.00017 9.5C5.00017 7.64348 5.73767 5.86301 7.05043 4.55025C8.36318 3.2375 10.1437 2.5 12.0002 2.5C13.8567 2.5 15.6372 3.2375 16.9499 4.55025C18.2627 5.86301 19.0002 7.64348 19.0002 9.5V13.264L20.8222 16.908C20.906 17.0757 20.9457 17.2621 20.9372 17.4494C20.9288 17.6368 20.8726 17.8188 20.774 17.9783C20.6754 18.1379 20.5377 18.2695 20.3739 18.3608C20.2101 18.4521 20.0257 18.5 19.8382 18.5H15.8742C15.6517 19.3582 15.1506 20.1183 14.4494 20.6609C13.7483 21.2035 12.8868 21.4979 12.0002 21.4979C11.1136 21.4979 10.2521 21.2035 9.55091 20.6609C8.84975 20.1183 8.34861 19.3582 8.12617 18.5H4.16217C3.97465 18.5 3.79024 18.4521 3.62644 18.3608C3.46265 18.2695 3.32491 18.1379 3.22632 17.9783C3.12773 17.8188 3.07155 17.6368 3.06312 17.4494C3.0547 17.2621 3.0943 17.0757 3.17817 16.908L5.00017 13.264V9.5ZM10.2682 18.5C10.4437 18.804 10.6962 19.0565 11.0002 19.232C11.3042 19.4075 11.6491 19.4999 12.0002 19.4999C12.3512 19.4999 12.6961 19.4075 13.0001 19.232C13.3042 19.0565 13.5566 18.804 13.7322 18.5H10.2682ZM12.0002 4.5C10.6741 4.5 9.40232 5.02678 8.46464 5.96447C7.52696 6.90215 7.00017 8.17392 7.00017 9.5V13.264C7.00015 13.5743 6.92792 13.8804 6.78917 14.158L5.61917 16.5H18.3822L17.2122 14.158C17.0731 13.8805 17.0005 13.5744 17.0002 13.264V9.5C17.0002 8.17392 16.4734 6.90215 15.5357 5.96447C14.598 5.02678 13.3263 4.5 12.0002 4.5Z"),s(e,"width",n[0]),s(e,"height",n[1]),s(e,"viewBox","0 0 24 25"),s(e,"fill",n[2]),s(e,"xmlns","http://www.w3.org/2000/svg")},m(t,a){Q(t,e,a),g(e,l)},p(t,[a]){a&1&&s(e,"width",t[0]),a&2&&s(e,"height",t[1]),a&4&&s(e,"fill",t[2])},i:le,o:le,d(t){t&&_(e)}}}function Qt(n,e,l){let{width:t="24"}=e,{height:a="24"}=e,{fill:i="white"}=e;return n.$$set=r=>{"width"in r&&l(0,t=r.width),"height"in r&&l(1,a=r.height),"fill"in r&&l(2,i=r.fill)},[t,a,i]}class Xt extends Ee{constructor(e){super(),ye(this,e,Qt,Jt,ke,{width:0,height:1,fill:2})}}function el(n){let e,l;return{c(){e=fe("svg"),l=fe("path"),this.h()},l(t){e=ue(t,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var a=C(e);l=ue(a,"path",{d:!0}),C(l).forEach(_),a.forEach(_),this.h()},h(){s(l,"d","M6.07592 17.3537L1.66676 18.3337L2.64676 13.9245C2.00137 12.7173 1.6647 11.3692 1.66676 10.0003C1.66676 5.39783 5.39759 1.66699 10.0001 1.66699C14.6026 1.66699 18.3334 5.39783 18.3334 10.0003C18.3334 14.6028 14.6026 18.3337 10.0001 18.3337C8.63122 18.3357 7.28311 17.9991 6.07592 17.3537ZM6.31759 15.5928L6.86176 15.8845C7.82722 16.4004 8.90542 16.6693 10.0001 16.667C11.3186 16.667 12.6076 16.276 13.7039 15.5435C14.8002 14.8109 15.6547 13.7697 16.1593 12.5515C16.6639 11.3334 16.7959 9.99293 16.5387 8.69972C16.2814 7.40652 15.6465 6.21863 14.7141 5.28628C13.7818 4.35393 12.5939 3.71899 11.3007 3.46176C10.0075 3.20452 8.66704 3.33654 7.44887 3.84113C6.23069 4.34571 5.1895 5.2002 4.45696 6.29652C3.72442 7.39285 3.33342 8.68178 3.33342 10.0003C3.33342 11.112 3.60426 12.182 4.11676 13.1387L4.40759 13.6828L3.86176 16.1387L6.31759 15.5928Z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 20 20"),s(e,"width",n[1]),s(e,"height",n[1]),s(e,"fill",n[0])},m(t,a){Q(t,e,a),g(e,l)},p(t,[a]){a&2&&s(e,"width",t[1]),a&2&&s(e,"height",t[1]),a&1&&s(e,"fill",t[0])},i:le,o:le,d(t){t&&_(e)}}}function tl(n,e,l){let t,{fill:a="#5f6368"}=e,{length:i="1.75"}=e;return n.$$set=r=>{"fill"in r&&l(0,a=r.fill),"length"in r&&l(2,i=r.length)},n.$$.update=()=>{n.$$.dirty&4&&l(1,t=Re(i))},[a,t,i]}class ll extends Ee{constructor(e){super(),ye(this,e,tl,el,ke,{fill:0,length:2})}}function nl(n){let e,l;return{c(){e=fe("svg"),l=fe("path"),this.h()},l(t){e=ue(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=C(e);l=ue(a,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),C(l).forEach(_),a.forEach(_),this.h()},h(){s(l,"fill-rule","evenodd"),s(l,"clip-rule","evenodd"),s(l,"d","M17.3869 7.1081C17.3869 5.8373 16.6769 4.64285 15.3038 4.64285H9.50589L8.65302 3.40425C8.26249 2.83709 7.62882 2.5 6.95318 2.5H3.08308C1.93262 2.5 1 3.45939 1 4.64285V15.3571C1 16.5406 1.93262 17.5 3.08307 17.5L15.6877 17.5C16.6768 17.5 17.5295 16.7845 17.7283 15.7877L18.9568 9.62702C19.1891 8.4619 18.4591 7.36159 17.3869 7.1081ZM9.50589 5.71428C9.16807 5.71428 8.85123 5.54574 8.65597 5.26216L7.8031 4.02355C7.60783 3.73997 7.291 3.57143 6.95318 3.57143H3.08308C2.50785 3.57143 2.04154 4.05112 2.04154 4.64285V12.2768L2.74164 8.76584C2.94039 7.7691 3.79312 7.05357 4.78222 7.05357H16.3453C16.3453 6.38893 16.0637 5.71428 15.3038 5.71428H9.50589ZM4.78222 8.125H16.9162C17.5755 8.125 18.069 8.74728 17.9365 9.41172L16.708 15.5724C16.6086 16.0708 16.1823 16.4286 15.6877 16.4286H3.55374C2.89439 16.4286 2.40096 15.8063 2.53345 15.1418L3.76193 8.98113C3.86131 8.48276 4.28767 8.125 4.78222 8.125Z"),s(l,"fill",n[0]),s(e,"width",n[1]),s(e,"height",n[1]),s(e,"viewBox","0 0 20 20"),s(e,"fill","none"),s(e,"xmlns","http://www.w3.org/2000/svg")},m(t,a){Q(t,e,a),g(e,l)},p(t,[a]){a&1&&s(l,"fill",t[0]),a&2&&s(e,"width",t[1]),a&2&&s(e,"height",t[1])},i:le,o:le,d(t){t&&_(e)}}}function al(n,e,l){let t,{fill:a="#5f6368"}=e,{length:i="1.75"}=e;return n.$$set=r=>{"fill"in r&&l(0,a=r.fill),"length"in r&&l(2,i=r.length)},n.$$.update=()=>{n.$$.dirty&4&&l(1,t=Re(i))},[a,t,i]}class il extends Ee{constructor(e){super(),ye(this,e,al,nl,ke,{fill:0,length:2})}}function rl(n){let e,l,t;return{c(){e=fe("svg"),l=fe("path"),t=fe("path"),this.h()},l(a){e=ue(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=C(e);l=ue(i,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),C(l).forEach(_),t=ue(i,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),C(t).forEach(_),i.forEach(_),this.h()},h(){s(l,"fill-rule","evenodd"),s(l,"clip-rule","evenodd"),s(l,"d","M8.20491 8.01013C8.20491 7.75488 8.48122 7.59535 8.70227 7.72298L12.3012 9.80084C12.5223 9.92846 12.5223 10.2475 12.3012 10.3751L8.70227 12.453C8.48122 12.5806 8.20491 12.4211 8.20491 12.1659V8.01013ZM11.3776 10.088L8.91543 11.5095V8.66649L11.3776 10.088Z"),s(l,"fill",n[0]),s(t,"fill-rule","evenodd"),s(t,"clip-rule","evenodd"),s(t,"d","M16.4036 16.0081C17.6446 15.9003 18.653 14.9592 18.793 13.7213C18.9286 12.5224 19 11.2772 19 9.99977C19 8.72237 18.9286 7.47716 18.793 6.27822C18.653 5.04038 17.6446 4.09927 16.4036 3.99143C14.3775 3.81539 12.2275 3.7207 9.99998 3.7207C7.77252 3.7207 5.62246 3.81538 3.59642 3.99143C2.35536 4.09926 1.34697 5.04037 1.207 6.27822C1.07143 7.47716 1 8.72236 1 9.99977C1 11.2772 1.07143 12.5224 1.207 13.7213C1.34697 14.9592 2.35536 15.9003 3.59642 16.0081C5.62246 16.1842 7.77252 16.2788 9.99998 16.2788C12.2275 16.2788 14.3775 16.1842 16.4036 16.0081ZM18.0526 9.99977C18.0526 11.242 17.9832 12.4517 17.8516 13.6149C17.7646 14.3843 17.1342 14.9937 16.3216 15.0643C14.3236 15.2379 12.2009 15.3315 9.99998 15.3315C7.79908 15.3315 5.6764 15.2379 3.67843 15.0643C2.86583 14.9937 2.23536 14.3843 2.14837 13.6149C2.01684 12.4517 1.94737 11.242 1.94737 9.99977C1.94737 8.75755 2.01684 7.54789 2.14837 6.38466C2.23536 5.61529 2.86583 5.00585 3.67843 4.93524C5.6764 4.76164 7.79908 4.66807 9.99998 4.66807C12.2009 4.66807 14.3236 4.76164 16.3216 4.93525C17.1342 5.00585 17.7646 5.61529 17.8516 6.38467C17.9832 7.54789 18.0526 8.75755 18.0526 9.99977Z"),s(t,"fill",n[0]),s(e,"width",n[1]),s(e,"height",n[1]),s(e,"viewBox","0 0 20 20"),s(e,"fill","none"),s(e,"xmlns","http://www.w3.org/2000/svg")},m(a,i){Q(a,e,i),g(e,l),g(e,t)},p(a,[i]){i&1&&s(l,"fill",a[0]),i&1&&s(t,"fill",a[0]),i&2&&s(e,"width",a[1]),i&2&&s(e,"height",a[1])},i:le,o:le,d(a){a&&_(e)}}}function sl(n,e,l){let t,{fill:a="#5f6368"}=e,{length:i="1.75"}=e;return n.$$set=r=>{"fill"in r&&l(0,a=r.fill),"length"in r&&l(2,i=r.length)},n.$$.update=()=>{n.$$.dirty&4&&l(1,t=Re(i))},[a,t,i]}class ft extends Ee{constructor(e){super(),ye(this,e,sl,rl,ke,{fill:0,length:2})}}function ol(n){let e;const l=n[9].default,t=yt(l,n,n[14],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,i){t&&t.m(a,i),e=!0},p(a,i){t&&t.p&&(!e||i&16384)&&St(t,l,a,a[14],e?Tt(l,a[14],i,null):Pt(a[14]),null)},i(a){e||(k(t,a),e=!0)},o(a){P(t,a),e=!1},d(a){t&&t.d(a)}}}function ut(n){let e,l;return e=new wt({props:{src:n[2]}}),{c(){U(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},p(t,a){const i={};a&4&&(i.src=t[2]),e.$set(i)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function ct(n){let e,l;return e=new $t({props:{instagramId:oe(n[2])}}),{c(){U(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},p(t,a){const i={};a&4&&(i.instagramId=oe(t[2])),e.$set(i)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function fl(n){let e,l,t,a=n[1]==="youtube"?"유튜브 링크":"인스타그램 링크",i,r,f,h,p,o,c,v,T,b,B,X=n[1]==="youtube"&&we(n[2]),M,ee=n[1]==="instagram"&&oe(n[2]),J,O,x,te,q;function j(u){n[10](u)}let H={round:"rounded-lg",border:"border border-[#3F3F3F]",backgroundColor:"bg-transparent",fontSize:"font-normal text-sm",fontColor:"text-white placeholder:text-[#757475]",placeholder:"URL 붙여넣기",onInput:n[5]};n[2]!==void 0&&(H.value=n[2]),v=new Ut({props:H}),Ne.push(()=>Ve(v,"value",j));let I=X&&ut(n),D=ee&&ct(n);return O=new Ct({}),{c(){e=w("div"),l=w("div"),t=w("div"),i=he(a),r=L(),f=w("button"),h=he("첨부"),o=L(),c=w("div"),U(v.$$.fragment),b=L(),B=w("div"),I&&I.c(),M=L(),D&&D.c(),J=L(),U(O.$$.fragment),this.h()},l(u){e=$(u,"DIV",{class:!0});var d=C(e);l=$(d,"DIV",{class:!0});var F=C(l);t=$(F,"DIV",{class:!0});var ne=C(t);i=me(ne,a),ne.forEach(_),r=V(F),f=$(F,"BUTTON",{class:!0});var A=C(f);h=me(A,"첨부"),A.forEach(_),F.forEach(_),o=V(d),c=$(d,"DIV",{class:!0});var E=C(c);G(v.$$.fragment,E),E.forEach(_),b=V(d),B=$(d,"DIV",{class:!0});var re=C(B);I&&I.l(re),M=V(re),D&&D.l(re),re.forEach(_),d.forEach(_),J=V(u),G(O.$$.fragment,u),this.h()},h(){s(t,"class","text-white text-sm font-semibold leading-[17px]"),s(f,"class","text-sm font-normal text-[#0C79FE] disabled:text-[#757475]"),f.disabled=p=n[2]===""||n[1]==="youtube"&&!we(n[2])||n[1]==="instagram"&&!oe(n[2]),s(l,"class","flex justify-between items-center py-[11px]"),s(c,"class","py-1"),s(B,"class",`w-full h-[${Ge}px] py-1 overflow-hidden`),s(e,"class","p-5 text-white")},m(u,d){Q(u,e,d),g(e,l),g(l,t),g(t,i),g(l,r),g(l,f),g(f,h),g(e,o),g(e,c),K(v,c,null),g(e,b),g(e,B),I&&I.m(B,null),g(B,M),D&&D.m(B,null),Q(u,J,d),K(O,u,d),x=!0,te||(q=De(f,"click",n[6]),te=!0)},p(u,d){(!x||d&2)&&a!==(a=u[1]==="youtube"?"유튜브 링크":"인스타그램 링크")&&ve(i,a),(!x||d&6&&p!==(p=u[2]===""||u[1]==="youtube"&&!we(u[2])||u[1]==="instagram"&&!oe(u[2])))&&(f.disabled=p);const F={};!T&&d&4&&(T=!0,F.value=u[2],Le(()=>T=!1)),v.$set(F),d&6&&(X=u[1]==="youtube"&&we(u[2])),X?I?(I.p(u,d),d&6&&k(I,1)):(I=ut(u),I.c(),k(I,1),I.m(B,M)):I&&($e(),P(I,1,1,()=>{I=null}),Ie()),d&6&&(ee=u[1]==="instagram"&&oe(u[2])),ee?D?(D.p(u,d),d&6&&k(D,1)):(D=ct(u),D.c(),k(D,1),D.m(B,null)):D&&($e(),P(D,1,1,()=>{D=null}),Ie())},i(u){x||(k(v.$$.fragment,u),k(I),k(D),k(O.$$.fragment,u),x=!0)},o(u){P(v.$$.fragment,u),P(I),P(D),P(O.$$.fragment,u),x=!1},d(u){u&&(_(e),_(J)),W(v),I&&I.d(),D&&D.d(),W(O,u),te=!1,q()}}}function ul(n){let e,l,t,a,i,r;e=new xt({props:{shrink:!1,items:n[4],$$slots:{default:[ol]},$$scope:{ctx:n}}});function f(o){n[12](o)}function h(o){n[13](o)}let p={sheetBackground:"bg-[#222222]",defaultHeight:172,noHandle:!0,fixed:!0,onClose:n[11],$$slots:{default:[fl]},$$scope:{ctx:n}};return n[0]!==void 0&&(p.isOpen=n[0]),n[3]!==void 0&&(p.movePositionY=n[3]),t=new Yt({props:p}),Ne.push(()=>Ve(t,"isOpen",f)),Ne.push(()=>Ve(t,"movePositionY",h)),{c(){U(e.$$.fragment),l=L(),U(t.$$.fragment)},l(o){G(e.$$.fragment,o),l=V(o),G(t.$$.fragment,o)},m(o,c){K(e,o,c),Q(o,l,c),K(t,o,c),r=!0},p(o,[c]){const v={};c&16384&&(v.$$scope={dirty:c,ctx:o}),e.$set(v);const T={};c&7&&(T.onClose=o[11]),c&16390&&(T.$$scope={dirty:c,ctx:o}),!a&&c&1&&(a=!0,T.isOpen=o[0],Le(()=>a=!1)),!i&&c&8&&(i=!0,T.movePositionY=o[3],Le(()=>i=!1)),t.$set(T)},i(o){r||(k(e.$$.fragment,o),k(t.$$.fragment,o),r=!0)},o(o){P(e.$$.fragment,o),P(t.$$.fragment,o),r=!1},d(o){o&&_(l),W(e,o),W(t,o)}}}const Ge=180;function cl(n,e,l){let t;Ye(n,Se,d=>l(17,t=d));let{$$slots:a={},$$scope:i}=e,{placeIdx:r=0}=e,{placeName:f=""}=e,{isOpenEmbedSeet:h=!1}=e;const p=Ue.isNativePlatform();let o,c="",v=0,T=0,b=!1;async function B(){const d=await Rt({limit:12}),F=await qe(d);Fe(Se,t=F,t),await Ce("/viewer/edit",{type:"post",placeIdx:String(r),placeName:f},{replaceState:!1,invalidateAll:!1})}async function X(){const d=await Zt(),F=await qe(d);Fe(Se,t=F,t),await Ce("/viewer/edit",{type:"post",placeIdx:String(r),placeName:f},{replaceState:!1,invalidateAll:!1})}async function M(){const d=await jt({limit:12}),F=await qe(d);Fe(Se,t=F,t),await Ce("/viewer/edit",{type:"post",placeIdx:String(r),placeName:f},{replaceState:!1,invalidateAll:!1})}async function ee(){const d=await zt({limit:12}),F=await qe(d);Fe(Se,t=F,t),await Ce("/viewer/edit",{type:"post",placeIdx:String(r),placeName:f},{replaceState:!1,invalidateAll:!1})}const J=p?[{name:"사진 선택",icon:ot,onClick:B},{name:"사진 촬영",icon:Ht,onClick:X},{name:"파일 첨부",icon:il,onClick:M},{name:"유튜브",icon:ft,onClick:()=>{l(1,o="youtube"),O()}}]:[{name:"파일 첨부",icon:ot,onClick:ee},{name:"유튜브",icon:ft,onClick:()=>{l(1,o="youtube"),O()}}];function O(){if(!xe()){Pe.emit("showSignInModal",{removable:!0});return}l(0,h=!0)}function x(){je.addListener("keyboardWillShow",d=>{T===0&&(T=d.keyboardHeight),l(3,v=-T)}),je.addListener("keyboardWillHide",()=>{l(3,v=T)})}function te(){je.removeAllListeners()}bt(()=>{p&&x()}),Et(()=>{p&&te()});function q(){if(o==="youtube"&&we(c)||o==="instagram"&&oe(c)){if(b)return;b=!0,l(3,v=-Ge)}else b&&(b=!1,l(3,v=Ge))}async function j(){!we(c)&&!oe(c)||(Se.set([c]),await Ce("/viewer/edit",{type:"post",placeIdx:String(r),placeName:f},{replaceState:!1,invalidateAll:!1}))}function H(d){c=d,l(2,c)}const I=()=>{l(2,c=""),l(1,o=void 0),l(0,h=!1)};function D(d){h=d,l(0,h)}function u(d){v=d,l(3,v)}return n.$$set=d=>{"placeIdx"in d&&l(7,r=d.placeIdx),"placeName"in d&&l(8,f=d.placeName),"isOpenEmbedSeet"in d&&l(0,h=d.isOpenEmbedSeet),"$$scope"in d&&l(14,i=d.$$scope)},[h,o,c,v,J,q,j,r,f,a,H,I,D,u,i]}class dl extends Ee{constructor(e){super(),ye(this,e,cl,ul,ke,{placeIdx:7,placeName:8,isOpenEmbedSeet:0})}}function dt(n,e,l){const t=n.slice();return t[27]=e[l],t[29]=l,t}function ht(n,e,l){const t=n.slice();return t[27]=e[l],t[29]=l,t}function ze(n){var t;const e=n.slice(),l=(t=e[27].media)==null?void 0:t.at(0);return e[31]=l,e}function hl(n){let e,l,t,a=n[5].name+"",i,r,f,h=(n[5].roadAddress||n[5].lotAddress||"")+"",p;return{c(){e=w("div"),l=w("div"),t=w("p"),i=he(a),r=L(),f=w("div"),p=he(h),this.h()},l(o){e=$(o,"DIV",{class:!0});var c=C(e);l=$(c,"DIV",{class:!0});var v=C(l);t=$(v,"P",{class:!0});var T=C(t);i=me(T,a),T.forEach(_),v.forEach(_),r=V(c),f=$(c,"DIV",{class:!0});var b=C(f);p=me(b,h),b.forEach(_),c.forEach(_),this.h()},h(){s(t,"class","text-white text-[15px] font-semibold line-clamp-1"),s(l,"class","h-6 flex items-center"),s(f,"class","text-center text-[#A6A9AB] text-xs font-normal line-clamp-2"),s(e,"class","flex flex-col justify-center items-center gap-0.5")},m(o,c){Q(o,e,c),g(e,l),g(l,t),g(t,i),g(e,r),g(e,f),g(f,p)},p(o,c){c[0]&32&&a!==(a=o[5].name+"")&&ve(i,a),c[0]&32&&h!==(h=(o[5].roadAddress||o[5].lotAddress||"")+"")&&ve(p,h)},d(o){o&&_(e)}}}function ml(n){let e;return{c(){e=w("div"),this.h()},l(l){e=$(l,"DIV",{slot:!0,class:!0}),C(e).forEach(_),this.h()},h(){s(e,"slot","left"),s(e,"class","w-6")},m(l,t){Q(l,e,t)},p:le,d(l){l&&_(e)}}}function gl(n){let e,l,t,a,i,r,f,h,p;return t=new qt({}),r=new Xt({}),{c(){e=w("div"),l=w("button"),U(t.$$.fragment),a=L(),i=w("button"),U(r.$$.fragment),this.h()},l(o){e=$(o,"DIV",{slot:!0,class:!0});var c=C(e);l=$(c,"BUTTON",{});var v=C(l);G(t.$$.fragment,v),v.forEach(_),a=V(c),i=$(c,"BUTTON",{});var T=C(i);G(r.$$.fragment,T),T.forEach(_),c.forEach(_),this.h()},h(){s(e,"slot","right"),s(e,"class","flex items-center gap-2")},m(o,c){Q(o,e,c),g(e,l),K(t,l,null),g(e,a),g(e,i),K(r,i,null),f=!0,h||(p=De(l,"click",n[14]),h=!0)},p:le,i(o){f||(k(t.$$.fragment,o),k(r.$$.fragment,o),f=!0)},o(o){P(t.$$.fragment,o),P(r.$$.fragment,o),f=!1},d(o){o&&_(e),W(t),W(r),h=!1,p()}}}function _l(n){let e,l,t,a,i="포스트",r;return l=new It({props:{width:"14",height:"14",fill:"white",strokeColor:"white"}}),{c(){e=w("div"),U(l.$$.fragment),t=L(),a=w("p"),a.textContent=i,this.h()},l(f){e=$(f,"DIV",{class:!0});var h=C(e);G(l.$$.fragment,h),t=V(h),a=$(h,"P",{class:!0,"data-svelte-h":!0}),Ke(a)!=="svelte-bo4d3u"&&(a.textContent=i),h.forEach(_),this.h()},h(){s(a,"class","font-medium text-sm leading-[17px] text-white"),s(e,"class","flex justify-center gap-1.5 items-center")},m(f,h){Q(f,e,h),K(l,e,null),g(e,t),g(e,a),r=!0},p:le,i(f){r||(k(l.$$.fragment,f),r=!0)},o(f){P(l.$$.fragment,f),r=!1},d(f){f&&_(e),W(l)}}}function pl(n){let e,l;return e=new Wt({props:{fill:"#222222"}}),{c(){U(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},p:le,i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function vl(n){let e,l;return e=new Ft({props:{src:Te(n[27].profile_image_url,500),width:"26px",strokeWidth:"0"}}),{c(){U(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},p(t,a){const i={};a[0]&128&&(i.src=Te(t[27].profile_image_url,500)),e.$set(i)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function mt(n){let e,l,t=n[11](n[27].text)+"",a,i,r=n[27].text.length>85&&gt(n);return{c(){e=w("div"),l=w("p"),a=he(t),i=L(),r&&r.c(),this.h()},l(f){e=$(f,"DIV",{class:!0});var h=C(e);l=$(h,"P",{});var p=C(l);a=me(p,t),i=V(p),r&&r.l(p),p.forEach(_),h.forEach(_),this.h()},h(){s(e,"class","pt-0.5 pb-2 typo-body3 text-gray-900 relative")},m(f,h){Q(f,e,h),g(e,l),g(l,a),g(l,i),r&&r.m(l,null)},p(f,h){h[0]&128&&t!==(t=f[11](f[27].text)+"")&&ve(a,t),f[27].text.length>85?r?r.p(f,h):(r=gt(f),r.c(),r.m(l,null)):r&&(r.d(1),r=null)},d(f){f&&_(e),r&&r.d()}}}function gt(n){let e,l=n[2]?"더 보기":"간단히",t,a,i;return{c(){e=w("span"),t=he(l),this.h()},l(r){e=$(r,"SPAN",{class:!0,"aria-hidden":!0});var f=C(e);t=me(f,l),f.forEach(_),this.h()},h(){s(e,"class","text-gray-500"),s(e,"aria-hidden","")},m(r,f){Q(r,e,f),g(e,t),a||(i=De(e,"click",n[12]),a=!0)},p(r,f){f[0]&4&&l!==(l=r[2]?"더 보기":"간단히")&&ve(t,l)},d(r){r&&_(e),a=!1,i()}}}function _t(n){let e,l,t,a,i,r;const f=[wl,Cl,bl],h=[];function p(o,c){return c[0]&128&&(e=null),c[0]&128&&(l=null),e==null&&(e=!!we(o[31])),e?0:(l==null&&(l=!!oe(o[31])),l?1:2)}return t=p(n,[-1,-1]),a=h[t]=f[t](n),{c(){a.c(),i=it()},l(o){a.l(o),i=it()},m(o,c){h[t].m(o,c),Q(o,i,c),r=!0},p(o,c){let v=t;t=p(o,c),t===v?h[t].p(o,c):($e(),P(h[v],1,1,()=>{h[v]=null}),Ie(),a=h[t],a?a.p(o,c):(a=h[t]=f[t](o),a.c()),k(a,1),a.m(i.parentNode,i))},i(o){r||(k(a),r=!0)},o(o){P(a),r=!1},d(o){o&&_(i),h[t].d(o)}}}function bl(n){let e,l,t;return{c(){e=w("img"),this.h()},l(a){e=$(a,"IMG",{src:!0,alt:!0,class:!0,draggable:!0}),this.h()},h(){He(e.src,l=Te(n[31]))||s(e,"src",l),s(e,"alt",t=n[27].place_name),s(e,"class","select-none pointer-events-none w-full h-full object-cover"),s(e,"draggable","false")},m(a,i){Q(a,e,i)},p(a,i){i[0]&128&&!He(e.src,l=Te(a[31]))&&s(e,"src",l),i[0]&128&&t!==(t=a[27].place_name)&&s(e,"alt",t)},i:le,o:le,d(a){a&&_(e)}}}function Cl(n){let e,l;return e=new $t({props:{instagramId:oe(n[31])}}),{c(){U(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},p(t,a){const i={};a[0]&128&&(i.instagramId=oe(t[31])),e.$set(i)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function wl(n){let e,l;return e=new wt({props:{src:n[31]}}),{c(){U(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},p(t,a){const i={};a[0]&128&&(i.src=t[31]),e.$set(i)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function $l(n){let e,l;return e=new Mt({props:{length:"1.25",fill:"#25272a"}}),{c(){U(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function Il(n){let e,l;return e=new Ot({props:{length:"1.25",fill:"#EA3323"}}),{c(){U(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,a){K(e,t,a),l=!0},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function pt(n){var Je;let e,l,t,a,i,r,f,h,p,o,c=n[27].unique_name+"",v,T,b,B,X=n[10](n[27].created_at)+"",M,ee,J,O,x=(Je=n[27].media)==null?void 0:Je.at(0),te,q,j,H,I,D,u,d=(n[27].reactionCount||"")+"",F,ne,A,E,re,de="356",z,m,y,Y;const se=[vl,pl],ie=[];function S(ae,Z){return ae[27].profile_image_url?0:1}i=S(n),r=ie[i]=se[i](n);let N=n[27].text&&mt(n),R=x&&_t(ze(n));const ce=[Il,$l],be=[];function We(ae,Z){return ae[27].myReaction?0:1}H=We(n),I=be[H]=ce[H](n);function kt(){return n[18](n[27])}return A=new ll({props:{length:"1.25",fill:"#25272a"}}),{c(){e=w("div"),l=w("div"),t=w("div"),a=w("a"),r.c(),h=L(),p=w("div"),o=w("a"),v=he(c),b=L(),B=w("span"),M=he(X),ee=L(),N&&N.c(),J=L(),O=w("div"),R&&R.c(),te=L(),q=w("div"),j=w("button"),I.c(),D=L(),u=w("span"),F=he(d),ne=L(),U(A.$$.fragment),E=L(),re=w("span"),re.textContent=de,z=L(),this.h()},l(ae){e=$(ae,"DIV",{class:!0});var Z=C(e);l=$(Z,"DIV",{class:!0});var ge=C(l);t=$(ge,"DIV",{class:!0});var _e=C(t);a=$(_e,"A",{href:!0});var Ae=C(a);r.l(Ae),Ae.forEach(_),h=V(_e),p=$(_e,"DIV",{});var Be=C(p);o=$(Be,"A",{href:!0,class:!0});var Qe=C(o);v=me(Qe,c),Qe.forEach(_),b=V(Be),B=$(Be,"SPAN",{class:!0});var Xe=C(B);M=me(Xe,X),Xe.forEach(_),Be.forEach(_),_e.forEach(_),ee=V(ge),N&&N.l(ge),ge.forEach(_),J=V(Z),O=$(Z,"DIV",{class:!0});var et=C(O);R&&R.l(et),et.forEach(_),te=V(Z),q=$(Z,"DIV",{class:!0});var pe=C(q);j=$(pe,"BUTTON",{});var tt=C(j);I.l(tt),tt.forEach(_),D=V(pe),u=$(pe,"SPAN",{});var lt=C(u);F=me(lt,d),lt.forEach(_),ne=V(pe),G(A.$$.fragment,pe),E=V(pe),re=$(pe,"SPAN",{"data-svelte-h":!0}),Ke(re)!=="svelte-jfalm8"&&(re.textContent=de),pe.forEach(_),z=V(Z),Z.forEach(_),this.h()},h(){s(a,"href",f="/users/"+n[27].user_idx),s(o,"href",T="/users/"+n[27].user_idx),s(o,"class","font-medium text-sm leading-[17px] text-[#222222]"),s(B,"class","pl-1.5 font-normal text-xs text-[#757D86]"),s(t,"class","py-2.5 flex justify-start items-center gap-2.5"),s(l,"class","px-3"),s(O,"class","w-full h-[244px] bg-[#D9D9D9]"),s(q,"class","px-4 py-3 text-gray-900 typo-body3 flex items-center gap-2.5"),s(e,"class","bg-[#F4F7FF] relative rounded-[10px] w-full mb-4")},m(ae,Z){Q(ae,e,Z),g(e,l),g(l,t),g(t,a),ie[i].m(a,null),g(t,h),g(t,p),g(p,o),g(o,v),g(p,b),g(p,B),g(B,M),g(l,ee),N&&N.m(l,null),g(e,J),g(e,O),R&&R.m(O,null),g(e,te),g(e,q),g(q,j),be[H].m(j,null),g(q,D),g(q,u),g(u,F),g(q,ne),K(A,q,null),g(q,E),g(q,re),g(e,z),m=!0,y||(Y=De(j,"click",kt),y=!0)},p(ae,Z){var Ae;n=ae;let ge=i;i=S(n),i===ge?ie[i].p(n,Z):($e(),P(ie[ge],1,1,()=>{ie[ge]=null}),Ie(),r=ie[i],r?r.p(n,Z):(r=ie[i]=se[i](n),r.c()),k(r,1),r.m(a,null)),(!m||Z[0]&128&&f!==(f="/users/"+n[27].user_idx))&&s(a,"href",f),(!m||Z[0]&128)&&c!==(c=n[27].unique_name+"")&&ve(v,c),(!m||Z[0]&128&&T!==(T="/users/"+n[27].user_idx))&&s(o,"href",T),(!m||Z[0]&128)&&X!==(X=n[10](n[27].created_at)+"")&&ve(M,X),n[27].text?N?N.p(n,Z):(N=mt(n),N.c(),N.m(l,null)):N&&(N.d(1),N=null),Z[0]&128&&(x=(Ae=n[27].media)==null?void 0:Ae.at(0)),x?R?(R.p(ze(n),Z),Z[0]&128&&k(R,1)):(R=_t(ze(n)),R.c(),k(R,1),R.m(O,null)):R&&($e(),P(R,1,1,()=>{R=null}),Ie());let _e=H;H=We(n),H!==_e&&($e(),P(be[_e],1,1,()=>{be[_e]=null}),Ie(),I=be[H],I||(I=be[H]=ce[H](n),I.c()),k(I,1),I.m(j,null)),(!m||Z[0]&128)&&d!==(d=(n[27].reactionCount||"")+"")&&ve(F,d)},i(ae){m||(k(r),k(R),k(I),k(A.$$.fragment,ae),m=!0)},o(ae){P(r),P(R),P(I),P(A.$$.fragment,ae),m=!1},d(ae){ae&&_(e),ie[i].d(),N&&N.d(),R&&R.d(),be[H].d(),W(A),y=!1,Y()}}}function vt(n){let e,l,t,a,i,r;function f(){return n[19](n[27])}return{c(){e=w("div"),l=w("img"),a=L(),this.h()},l(h){e=$(h,"DIV",{class:!0,"aria-hidden":!0});var p=C(e);l=$(p,"IMG",{fetchpriority:!0,loading:!0,src:!0,alt:!0,class:!0}),a=V(p),p.forEach(_),this.h()},h(){var h,p;s(l,"fetchpriority",n[29]<=4?"high":"low"),s(l,"loading","lazy"),He(l.src,t=Te(((p=(h=n[27])==null?void 0:h.media)==null?void 0:p.at(0))??"",500))||s(l,"src",t),s(l,"alt","post"),s(l,"class","h-full w-full object-cover"),s(e,"class","bg-gray-50 aspect-square overflow-hidden relative rounded-xl"),s(e,"aria-hidden","")},m(h,p){Q(h,e,p),g(e,l),g(e,a),i||(r=De(e,"click",f),i=!0)},p(h,p){var o,c;n=h,p[0]&64&&!He(l.src,t=Te(((c=(o=n[27])==null?void 0:o.media)==null?void 0:c.at(0))??"",500))&&s(l,"src",t)},d(h){h&&_(e),i=!1,r()}}}function kl(n){let e,l,t,a,i,r,f,h,p,o,c,v,T,b,B="장소 담기",X,M,ee,J,O,x,te=`${n[4]}px`,q,j,H,I,D;function u(m){n[15](m)}let d={position:"fixed",backgroundColor:"bg-black",leftBack:!0,$$slots:{right:[gl],left:[ml],default:[hl]},$$scope:{ctx:n}};n[3]!==void 0&&(d.header=n[3]),l=new Dt({props:d}),Ne.push(()=>Ve(l,"header",u));function F(m){n[16](m)}let ne={placeIdx:n[5].placeIdx,placeName:n[5].name,$$slots:{default:[_l]},$$scope:{ctx:n}};n[0]!==void 0&&(ne.isOpenEmbedSeet=n[0]),h=new dl({props:ne}),Ne.push(()=>Ve(h,"isOpenEmbedSeet",F)),v=new It({props:{width:"14",height:"14"}});let A=Me(n[7]),E=[];for(let m=0;m<A.length;m+=1)E[m]=pt(ht(n,A,m));const re=m=>P(E[m],1,1,()=>{E[m]=null});let de=Me(n[6]),z=[];for(let m=0;m<de.length;m+=1)z[m]=vt(dt(n,de,m));return x=new Ct({}),j=new Lt({props:{zindex:n[1]}}),{c(){e=w("div"),U(l.$$.fragment),a=L(),i=w("div"),r=w("section"),f=w("button"),U(h.$$.fragment),o=L(),c=w("button"),U(v.$$.fragment),T=L(),b=w("p"),b.textContent=B,X=L(),M=w("section");for(let m=0;m<E.length;m+=1)E[m].c();ee=L(),J=w("div");for(let m=0;m<z.length;m+=1)z[m].c();O=L(),U(x.$$.fragment),q=L(),U(j.$$.fragment),this.h()},l(m){e=$(m,"DIV",{class:!0});var y=C(e);G(l.$$.fragment,y),a=V(y),i=$(y,"DIV",{class:!0});var Y=C(i);r=$(Y,"SECTION",{class:!0});var se=C(r);f=$(se,"BUTTON",{class:!0});var ie=C(f);G(h.$$.fragment,ie),ie.forEach(_),o=V(se),c=$(se,"BUTTON",{class:!0});var S=C(c);G(v.$$.fragment,S),T=V(S),b=$(S,"P",{class:!0,"data-svelte-h":!0}),Ke(b)!=="svelte-1k5moer"&&(b.textContent=B),S.forEach(_),se.forEach(_),X=V(Y),M=$(Y,"SECTION",{class:!0});var N=C(M);for(let ce=0;ce<E.length;ce+=1)E[ce].l(N);ee=V(N),J=$(N,"DIV",{class:!0});var R=C(J);for(let ce=0;ce<z.length;ce+=1)z[ce].l(R);R.forEach(_),N.forEach(_),Y.forEach(_),O=V(y),G(x.$$.fragment,y),y.forEach(_),q=V(m),G(j.$$.fragment,m),this.h()},h(){s(f,"class","flex-1 w-full h-8 rounded-[50px] bg-[#0C79FE]"),s(b,"class","font-medium text-sm leading-[17px] text-[#0C79FE]"),s(c,"class","flex-1 w-full h-8 rounded-[50px] border border-[#0C79FE] flex justify-center gap-1.5 items-center"),s(r,"class","flex gap-1.5 py-3 w-full bg-inherit z-10"),s(J,"class","grid grid-cols-2 gap-[3px]"),s(M,"class","py-2"),s(i,"class","px-5"),s(e,"class","bg-black min-h-dvh"),nt(e,"padding-top",te)},m(m,y){Q(m,e,y),K(l,e,null),g(e,a),g(e,i),g(i,r),g(r,f),K(h,f,null),g(r,o),g(r,c),K(v,c,null),g(c,T),g(c,b),g(i,X),g(i,M);for(let Y=0;Y<E.length;Y+=1)E[Y]&&E[Y].m(M,null);g(M,ee),g(M,J);for(let Y=0;Y<z.length;Y+=1)z[Y]&&z[Y].m(J,null);g(e,O),K(x,e,null),Q(m,q,y),K(j,m,y),H=!0,I||(D=De(c,"click",n[17]),I=!0)},p(m,y){const Y={};y[0]&288|y[1]&2&&(Y.$$scope={dirty:y,ctx:m}),!t&&y[0]&8&&(t=!0,Y.header=m[3],Le(()=>t=!1)),l.$set(Y);const se={};if(y[0]&32&&(se.placeIdx=m[5].placeIdx),y[0]&32&&(se.placeName=m[5].name),y[1]&2&&(se.$$scope={dirty:y,ctx:m}),!p&&y[0]&1&&(p=!0,se.isOpenEmbedSeet=m[0],Le(()=>p=!1)),h.$set(se),y[0]&15492){A=Me(m[7]);let S;for(S=0;S<A.length;S+=1){const N=ht(m,A,S);E[S]?(E[S].p(N,y),k(E[S],1)):(E[S]=pt(N),E[S].c(),k(E[S],1),E[S].m(M,ee))}for($e(),S=A.length;S<E.length;S+=1)re(S);Ie()}if(y[0]&608){de=Me(m[6]);let S;for(S=0;S<de.length;S+=1){const N=dt(m,de,S);z[S]?z[S].p(N,y):(z[S]=vt(N),z[S].c(),z[S].m(J,null))}for(;S<z.length;S+=1)z[S].d(1);z.length=de.length}y[0]&16&&te!==(te=`${m[4]}px`)&&nt(e,"padding-top",te);const ie={};y[0]&2&&(ie.zindex=m[1]),j.$set(ie)},i(m){if(!H){k(l.$$.fragment,m),k(h.$$.fragment,m),k(v.$$.fragment,m);for(let y=0;y<A.length;y+=1)k(E[y]);k(x.$$.fragment,m),k(j.$$.fragment,m),H=!0}},o(m){P(l.$$.fragment,m),P(h.$$.fragment,m),P(v.$$.fragment,m),E=E.filter(Boolean);for(let y=0;y<E.length;y+=1)P(E[y]);P(x.$$.fragment,m),P(j.$$.fragment,m),H=!1},d(m){m&&(_(e),_(q)),W(l),W(h),W(v),at(E,m),at(z,m),W(x),W(j,m),I=!1,D()}}}function El(n,e,l){let t,a;Ye(n,At,u=>l(8,t=u)),Ye(n,rt,u=>l(9,a=u));const i={name:"",latitude:0,longitude:0,categories:[],options:[]};let r="z-50";Oe.subscribe(u=>l(1,r=u?"z-0":"z-50"));let f=!1;const h=new Intl.DateTimeFormat("ko-KR",{dateStyle:"short",timeStyle:"short",hour12:!1});let p,o=0,c=!1;bt(async()=>{var u;await X(),Oe.set(B),Ce(t.url.toString(),{onshare:""},{replaceState:!0}),M(),l(4,o=((u=p==null?void 0:p.getClientRects()[0])==null?void 0:u.height)??0)});let v=i,T=[],b=[],B=!1;async function X(){const u=new URL(t.url.toString()),d=t.params;B=u.searchParams.get("onshare")==="1"&&xe();const F=await fetch(`${Ze}/places/${d.idx}`).then(A=>A.ok?A.json():{data:{place:i}}).then(A=>{const E=A.data;return{place:E,tags:[...E.categories,...E.options]}});l(5,v=F.place),F.tags;const ne=await fetch(`${Ze}/posts?placeIdx=${d.idx}&limit=24${u.searchParams.get("boxIdx")?`&boxIdx=${u.searchParams.get("boxIdx")}`:""}`,{method:"GET",headers:{Authorization:`Bearer ${st()}`}}).then(A=>A.json()).then(A=>A.data);l(6,T=ne.posts),l(7,b=ne.cardPosts)}async function M(){if(!(b!=null&&b.length))return;const u=st();l(7,b=await Promise.all(b.map(async d=>{var E;const ne=await(await fetch(`${Ze}/vote/reactions?targetTable=posts&targetId=${d.idx}`,{method:"GET",headers:{Authorization:"Bearer "+u}})).json(),A=Number((E=ne.data.reactions[0])==null?void 0:E.count);return d.reactionCount=Number.isNaN(A)?0:A,d.myReaction=ne.data.myReaction,d})))}function ee(u){return h.format(new Date(u))}function J(u){return u.length<=85||f?u:`${u.slice(0,85)}...`}function O(){l(2,f=!f)}function x(u){if(!(b!=null&&b.length))return;const d=b.findIndex(F=>F.idx===u);if(d!==-1){if(!xe())return l(7,b[d].needReactionReload=!0,b),Pe.emit("showSignInModal",{removable:!0,callback:Ue.isNativePlatform()?()=>{M()}:void 0});b[d].myReaction?b[d].myReaction==="❤️"?Pe.emit("setReaction",{target:"posts",targetId:u,reaction:null,callback:()=>{l(7,b[d].myReaction=null,b),l(7,b[d].reactionCount=b[d].reactionCount>0?b[d].reactionCount-1:0,b)}}):Pe.emit("setReaction",{target:"posts",targetId:u,reaction:"❤️",callback:()=>{l(7,b[d].myReaction="❤️",b)}}):Pe.emit("setReaction",{target:"posts",targetId:u,reaction:"❤️",callback:()=>{l(7,b[d].myReaction="❤️",b),l(7,b[d].reactionCount+=1,b)}})}}const te=()=>{Ce(`/places/${t.params.idx}/map`,{location:Bt([Number(v.longitude),Number(v.latitude)]).join(),placeIdx:v.placeIdx,placeName:v.name})};function q(u){p=u,l(3,p)}function j(u){c=u,l(0,c)}const H=()=>{xe()?Oe.set(!0):(Ue.isNativePlatform()||Vt({onshare:"1"}),Pe.emit("showSignInModal",{removable:!0,callback:()=>{Oe.set(!0)}}))},I=u=>{x(u.idx)},D=async u=>{u!=null&&u.media&&(Fe(rt,a=T,a),await Nt(`/viewer?placeIdx=${v.placeIdx}&postIdx=${u.idx}`,{replaceState:!1,invalidateAll:!1}))};return n.$$.update=()=>{n.$$.dirty[0]&1&&l(1,r=c?"z-0":"z-50")},[c,r,f,p,o,v,T,b,t,a,ee,J,O,x,te,q,j,H,I,D]}class Kl extends Ee{constructor(e){super(),ye(this,e,El,kl,ke,{},null,[-1,-1])}}export{Kl as component};
