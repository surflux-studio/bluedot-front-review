import{s as ht,m as rt,o as ot,b as k,f as u,l as i,i as B,h as v,n as tt,a as V,e as C,t as K,g as M,c as I,d as Q,B as N,L as nt,u as et,O as _t,r as vt,k as $t,v as bt,w as wt,j as dt,H as it}from"../chunks/scheduler.BRtuPHcG.js";import{S as pt,i as gt,c as z,a as G,m as R,t as X,b as A,d as J}from"../chunks/index.B4yC_IY0.js";import{e as ct}from"../chunks/each.B2RYFZbl.js";import{H as yt}from"../chunks/Header.Bwy9bDXz.js";import{p as xt}from"../chunks/stores.GOrYKYAx.js";import{M as kt}from"../chunks/Map.M0gWhXy7.js";import{F as Ct}from"../chunks/Footer.9RfCLaiB.js";import{e as It}from"../chunks/emitter.E5P-NQ8u.js";import{s as H,v as Et}from"../chunks/map.QLuuJgw9.js";import{g as Bt}from"../chunks/entry.BiFNfNKk.js";function jt(o){let t,l;return{c(){t=rt("svg"),l=rt("path"),this.h()},l(e){t=ot(e,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=k(t);l=ot(a,"path",{d:!0}),k(l).forEach(u),a.forEach(u),this.h()},h(){i(l,"d","M15.3033 14.4703L10 19.7736L4.69667 14.4703C3.64779 13.4214 2.93349 12.085 2.64411 10.6301C2.35473 9.17528 2.50326 7.66729 3.07092 6.29684C3.63858 4.9264 4.59987 3.75507 5.83324 2.93096C7.0666 2.10686 8.51665 1.66699 10 1.66699C11.4834 1.66699 12.9334 2.10686 14.1668 2.93096C15.4001 3.75507 16.3614 4.9264 16.9291 6.29684C17.4968 7.66729 17.6453 9.17528 17.3559 10.6301C17.0665 12.085 16.3522 13.4214 15.3033 14.4703ZM10 10.8336C10.442 10.8336 10.866 10.658 11.1785 10.3454C11.4911 10.0329 11.6667 9.60895 11.6667 9.16693C11.6667 8.7249 11.4911 8.30098 11.1785 7.98842C10.866 7.67586 10.442 7.50026 10 7.50026C9.55798 7.50026 9.13405 7.67586 8.82149 7.98842C8.50893 8.30098 8.33334 8.7249 8.33334 9.16693C8.33334 9.60895 8.50893 10.0329 8.82149 10.3454C9.13405 10.658 9.55798 10.8336 10 10.8336Z"),i(t,"width","20"),i(t,"height","20"),i(t,"viewBox","0 0 20 20"),i(t,"fill",o[0]),i(t,"xmlns","http://www.w3.org/2000/svg")},m(e,a){B(e,t,a),v(t,l)},p(e,[a]){a&1&&i(t,"fill",e[0])},i:tt,o:tt,d(e){e&&u(t)}}}function Tt(o,t,l){let{fill:e}=t;return o.$$set=a=>{"fill"in a&&l(0,e=a.fill)},[e]}class Dt extends pt{constructor(t){super(),gt(this,t,Tt,jt,ht,{fill:0})}}function ft(o,t,l){const e=o.slice();return e[13]=t[l],e}function Vt(o){var a;let t,l=((a=o[0])==null?void 0:a.name)+"",e;return{c(){t=C("div"),e=K(l),this.h()},l(r){t=I(r,"DIV",{class:!0});var n=k(t);e=Q(n,l),n.forEach(u),this.h()},h(){i(t,"class","typo-sub-h3 text-gray-900")},m(r,n){B(r,t,n),v(t,e)},p(r,n){var d;n&1&&l!==(l=((d=r[0])==null?void 0:d.name)+"")&&dt(e,l)},d(r){r&&u(t)}}}function ut(o){let t,l;return{c(){t=C("img"),this.h()},l(e){t=I(e,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){var e,a;i(t,"class","w-full h-full object-cover"),i(t,"alt","장소 사진"),it(t.src,l=(a=(e=o[13])==null?void 0:e.media)==null?void 0:a.at(0))||i(t,"src",l)},m(e,a){B(e,t,a)},p(e,a){var r,n;a&2&&!it(t.src,l=(n=(r=e[13])==null?void 0:r.media)==null?void 0:n.at(0))&&i(t,"src",l)},d(e){e&&u(t)}}}function mt(o){var $,E;let t,l=(E=($=o[13])==null?void 0:$.media)==null?void 0:E.at(0),e,a,r=o[13].name+"",n,d,c=l&&ut(o);return{c(){t=C("div"),c&&c.c(),e=V(),a=C("div"),n=K(r),d=V(),this.h()},l(p){t=I(p,"DIV",{class:!0});var h=k(t);c&&c.l(h),e=M(h),a=I(h,"DIV",{class:!0});var b=k(a);n=Q(b,r),b.forEach(u),d=M(h),h.forEach(u),this.h()},h(){i(a,"class","absolute bottom-0 p-2.5 typo-caption1 text-white text-shadow svelte-sygcjw"),i(t,"class","bg-gray-50 h-36 relative")},m(p,h){B(p,t,h),c&&c.m(t,null),v(t,e),v(t,a),v(a,n),v(t,d)},p(p,h){var b,w;h&2&&(l=(w=(b=p[13])==null?void 0:b.media)==null?void 0:w.at(0)),l?c?c.p(p,h):(c=ut(p),c.c(),c.m(t,e)):c&&(c.d(1),c=null),h&2&&r!==(r=p[13].name+"")&&dt(n,r)},d(p){p&&u(t),c&&c.d()}}}function Mt(o){let t,l,e,a,r;return l=new Dt({props:{fill:"white"}}),{c(){t=C("button"),z(l.$$.fragment),this.h()},l(n){t=I(n,"BUTTON",{slot:!0,class:!0});var d=k(t);G(l.$$.fragment,d),d.forEach(u),this.h()},h(){i(t,"slot","right"),i(t,"class","bg-primary-500 rounded-full p-[15px] shadow shadow-primary-500/65 pointer-events-auto")},m(n,d){B(n,t,d),R(l,t,null),e=!0,a||(r=et(t,"click",o[5]),a=!0)},p:tt,i(n){e||(X(l.$$.fragment,n),e=!0)},o(n){A(l.$$.fragment,n),e=!1},d(n){n&&u(t),J(l),a=!1,r()}}}function Ot(o){var at;let t,l,e,a,r,n,d,c,$,E,p,h,b,w,j,f,y,L,T,O,W,st;t=new yt({props:{position:"static",leftBack:!0,rightBoxSetting:((at=o[0])==null?void 0:at.role)==="owner"?" ":"",slotPosition:"justify-start",$$slots:{default:[Vt]},$$scope:{ctx:o}}}),j=new kt({});let S=ct(o[1]),g=[];for(let s=0;s<S.length;s+=1)g[s]=mt(ft(o,S,s));return T=new Ct({props:{position:"fixed",leftReposition:o[2]==="map",$$slots:{right:[Mt]},$$scope:{ctx:o}}}),{c(){z(t.$$.fragment),l=V(),e=C("div"),a=C("div"),r=C("button"),n=K("지도"),c=V(),$=C("button"),E=K("리스트"),h=V(),b=C("div"),w=C("div"),z(j.$$.fragment),f=V(),y=C("div");for(let s=0;s<g.length;s+=1)g[s].c();L=V(),z(T.$$.fragment),this.h()},l(s){G(t.$$.fragment,s),l=M(s),e=I(s,"DIV",{class:!0});var m=k(e);a=I(m,"DIV",{class:!0});var x=k(a);r=I(x,"BUTTON",{class:!0});var F=k(r);n=Q(F,"지도"),F.forEach(u),c=M(x),$=I(x,"BUTTON",{class:!0});var P=k($);E=Q(P,"리스트"),P.forEach(u),x.forEach(u),m.forEach(u),h=M(s),b=I(s,"DIV",{class:!0});var _=k(b);w=I(_,"DIV",{class:!0});var D=k(w);G(j.$$.fragment,D),f=M(D),y=I(D,"DIV",{class:!0});var lt=k(y);for(let Y=0;Y<g.length;Y+=1)g[Y].l(lt);lt.forEach(u),D.forEach(u),_.forEach(u),L=M(s),G(T.$$.fragment,s),this.h()},h(){i(r,"class",d=N(`tab-map w-full px-8 py-2.5 ${o[2]==="map"?U:Z}`)+" svelte-sygcjw"),i($,"class",p=N(`tab-list w-full px-8 py-2.5 ${o[2]==="list"?U:Z}`)+" svelte-sygcjw"),i(a,"class","tab-category w-full flex flex-row text-center"),i(e,"class","tab w-full px-4 pt-2.5 pb-0.5"),i(y,"class","absolute left-full w-screen grid grid-cols-3 gap-1"),i(w,"class","h-screen w-screen transition-transform"),nt(w,"transform",`translateX(${o[2]==="map"?0:-100}%)`),i(b,"class","content")},m(s,m){R(t,s,m),B(s,l,m),B(s,e,m),v(e,a),v(a,r),v(r,n),v(a,c),v(a,$),v($,E),B(s,h,m),B(s,b,m),v(b,w),R(j,w,null),v(w,f),v(w,y);for(let x=0;x<g.length;x+=1)g[x]&&g[x].m(y,null);B(s,L,m),R(T,s,m),O=!0,W||(st=[et(r,"click",o[3]),et($,"click",o[4])],W=!0)},p(s,[m]){var P;const x={};if(m&1&&(x.rightBoxSetting=((P=s[0])==null?void 0:P.role)==="owner"?" ":""),m&65537&&(x.$$scope={dirty:m,ctx:s}),t.$set(x),(!O||m&4&&d!==(d=N(`tab-map w-full px-8 py-2.5 ${s[2]==="map"?U:Z}`)+" svelte-sygcjw"))&&i(r,"class",d),(!O||m&4&&p!==(p=N(`tab-list w-full px-8 py-2.5 ${s[2]==="list"?U:Z}`)+" svelte-sygcjw"))&&i($,"class",p),m&2){S=ct(s[1]);let _;for(_=0;_<S.length;_+=1){const D=ft(s,S,_);g[_]?g[_].p(D,m):(g[_]=mt(D),g[_].c(),g[_].m(y,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=S.length}m&4&&nt(w,"transform",`translateX(${s[2]==="map"?0:-100}%)`);const F={};m&4&&(F.leftReposition=s[2]==="map"),m&65537&&(F.$$scope={dirty:m,ctx:s}),T.$set(F)},i(s){O||(X(t.$$.fragment,s),X(j.$$.fragment,s),X(T.$$.fragment,s),O=!0)},o(s){A(t.$$.fragment,s),A(j.$$.fragment,s),A(T.$$.fragment,s),O=!1},d(s){s&&(u(l),u(e),u(h),u(b),u(L)),J(t,s),J(j),_t(g,s),J(T,s),W=!1,vt(st)}}}let U="text-gray-900 typo-sub-h2 border-b-[2.5px] border-gray-900",Z="text-gray-500 typo-sub-h5";const q=60;function St(o,t,l){let e;$t(o,xt,f=>l(7,e=f));let a,r=[],n=sessionStorage.getItem("jwt");async function d(){const f=await fetch(`https://azit.surflux.studio/boxes/${e.params.idx}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}});if(!f.ok)return;const y=await f.json();l(0,a=y.data.box),l(1,r=y.data.places)}bt(async()=>{await d(),p()}),wt(()=>{H.un("change",h)});let c="map";const $=[];let E=[];function p(){E=r.filter(f=>!f.longitude||!f.latitude||$.includes(f.idx)?!1:($.push(f.idx),!0)),H.on("change",h),E.forEach(f=>{var y;It.emit("addIcon",{coordinate:[f.longitude,f.latitude],image:((y=f==null?void 0:f.media)==null?void 0:y.at(0))??"",shape:"waterdrop",type:"place",link:`/places/${f.idx}`,rank:1,name:f.name,width:56,height:61})})}function h(){if(H.getFeatures().length!==E.length)return;H.un("change",h);const f=H.getExtent();Et.fit(f,{padding:[q,q,q,q],duration:500,maxZoom:16})}return[a,r,c,()=>l(2,c="map"),()=>l(2,c="list"),()=>Bt(`/map/search?type=box&boxIdx=${a==null?void 0:a.idx}`)]}class Rt extends pt{constructor(t){super(),gt(this,t,St,Ot,ht,{})}}export{Rt as component};
