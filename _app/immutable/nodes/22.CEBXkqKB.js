import{e as Ge}from"../chunks/index.B8PgvQ4b.js";import{a as Ve,b as Gt,g as ot}from"../chunks/sign.DzAuSUd6.js";import{I as ee,d as It,A as qe,s as nt,e as Kt}from"../chunks/store.Cd2LbFPE.js";import{g as ie}from"../chunks/entry._OD5CP8F.js";import{s as it,q as Ne,r as Pe,b as E,f as c,v as i,i as A,h as d,n as te,w as at,D as Qe,a as y,e as _,t as ue,T as Qt,g as T,c as g,d as ce,z as xe,A as R,j as Ie,x as xt,L as At,F as ut,k as yt,y as Wt,B as Xt,Q as Yt,C as Tt,P as St,l as Dt}from"../chunks/scheduler.BS-S8op5.js";import{g as es}from"../chunks/boxRequest.Cm2fU-WJ.js";import{S as Ut,i as Rt,b as Ot,c as F,d as z,m as L,a as N,e as Bt,t as O,f as U,g as Nt}from"../chunks/index.CxHkUi4z.js";import{e as Ke}from"../chunks/each.4uJpovwX.js";import{p as ts}from"../chunks/stores.UwhcWCV_.js";import{H as ss}from"../chunks/Header.CEhmEFso.js";import{C as rs}from"../chunks/CircleImage.CeiTlKJ2.js";import{e as je}from"../chunks/emitter.E5P-NQ8u.js";import{a as ls}from"../chunks/link_preview.DfKqbwsY.js";import"../chunks/ImageShaper.DEAJmI5j.js";import{N as ns}from"../chunks/NavigationBar.Or02YSO2.js";import{s as We}from"../chunks/s32cloudfront.DM69o-3i.js";import{B as os}from"../chunks/BottomNavigationPadder.BJxWDAil.js";import{g as as,i as is,u as us,f as cs}from"../chunks/follow.D-UPWY4v.js";/* empty css                                                   */import{w as fs,I as ms}from"../chunks/utils.BXhe6FCB.js";import{I as ds}from"../chunks/IconMore.CGBTlgQf.js";import{A as hs}from"../chunks/ActionSheet.DrpHsxss.js";import{I as ps}from"../chunks/IconSearch.BNWNFtdy.js";import{F as _s}from"../chunks/Figure.CFneRTn5.js";import{g as Pt}from"../chunks/color.C_Jm4JAr.js";import{r as gs}from"../chunks/units.BJZU6p1c.js";import{i as bs}from"../chunks/device.BmvLoMs_.js";import{u as vs}from"../chunks/searchParams.BwMEf4R1.js";import{A as ks}from"../chunks/ActionSheetOpenApp.CccFDClX.js";function ws(r){let e,t,s,n,l,o;return{c(){e=Ne("svg"),t=Ne("path"),s=Ne("path"),n=Ne("path"),l=Ne("path"),this.h()},l(u){e=Pe(u,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var f=E(e);t=Pe(f,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(t).forEach(c),s=Pe(f,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),E(s).forEach(c),n=Pe(f,"path",{d:!0,fill:!0}),E(n).forEach(c),l=Pe(f,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linejoin":!0}),E(l).forEach(c),f.forEach(c),this.h()},h(){i(t,"d","M2 22V21C2 18.79 3.79 17 6 17H10C12.21 17 14 18.79 14 21V22"),i(t,"stroke",r[1]),i(t,"stroke-width","1.5"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(s,"d","M8 14C6.34 14 5 12.66 5 11C5 9.34 6.34 8 8 8C9.66 8 11 9.34 11 11C11 12.66 9.66 14 8 14Z"),i(s,"stroke",r[1]),i(s,"stroke-width","1.5"),i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(n,"d","M18.5018 6.68182C18.3812 6.68182 18.2656 6.63393 18.1804 6.54868C18.0951 6.46344 18.0472 6.34783 18.0472 6.22727L18.0472 3.95455C18.0472 3.83399 18.0951 3.71838 18.1804 3.63313C18.2656 3.54789 18.3812 3.5 18.5018 3.5C18.6223 3.5 18.7379 3.54789 18.8232 3.63313C18.9084 3.71838 18.9563 3.83399 18.9563 3.95455L18.9563 6.22727C18.9563 6.34783 18.9084 6.46344 18.8232 6.54868C18.7379 6.63393 18.6223 6.68182 18.5018 6.68182ZM17.82 7.81818C17.82 7.63735 17.8918 7.46393 18.0197 7.33606C18.1475 7.2082 18.3209 7.13636 18.5018 7.13636C18.6826 7.13636 18.856 7.2082 18.9839 7.33606C19.1118 7.46393 19.1836 7.63735 19.1836 7.81818C19.1836 7.99901 19.1118 8.17243 18.9839 8.3003C18.856 8.42817 18.6826 8.5 18.5018 8.5C18.3209 8.5 18.1475 8.42817 18.0197 8.3003C17.8918 8.17243 17.82 7.99901 17.82 7.81818Z"),i(n,"fill",r[0]),i(l,"d","M19.8856 2.2C19.2698 1.13333 17.7302 1.13333 17.1144 2.2L14.0833 7.45C13.4674 8.51667 14.2372 9.85 15.4689 9.85H21.5311C22.7628 9.85 23.5326 8.51667 22.9167 7.45L19.8856 2.2Z"),i(l,"stroke",r[1]),i(l,"stroke-width","1.2"),i(l,"stroke-linejoin","round"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"width",r[2]),i(e,"height",r[2]),i(e,"viewBox",o="0 0 "+r[2]+" "+r[2]),i(e,"fill","none")},m(u,f){A(u,e,f),d(e,t),d(e,s),d(e,n),d(e,l)},p(u,[f]){f&2&&i(t,"stroke",u[1]),f&2&&i(s,"stroke",u[1]),f&1&&i(n,"fill",u[0]),f&2&&i(l,"stroke",u[1]),f&4&&i(e,"width",u[2]),f&4&&i(e,"height",u[2]),f&4&&o!==(o="0 0 "+u[2]+" "+u[2])&&i(e,"viewBox",o)},i:te,o:te,d(u){u&&c(e)}}}function Cs(r,e,t){let s,{fill:n="#FF4F1E"}=e,{stroke:l="#FF4F1E"}=e,{length:o="1.5"}=e;return r.$$set=u=>{"fill"in u&&t(0,n=u.fill),"stroke"in u&&t(1,l=u.stroke),"length"in u&&t(3,o=u.length)},r.$$.update=()=>{r.$$.dirty&8&&t(2,s=gs(o))},[n,l,s,o]}class Es extends Ut{constructor(e){super(),Rt(this,e,Cs,ws,it,{fill:0,stroke:1,length:3})}}function jt(r,e,t){const s=r.slice();return s[34]=e[t],s[36]=t,s}function Vt(r,e,t){const s=r.slice();return s[37]=e[t],s[36]=t,s}function qt(r){let e,t,s,n,l,o,u,f,k,w,p,v,$;return document.title=e=`블루닷 - ${r[0].unique_name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`,{c(){t=y(),s=_("meta"),l=y(),o=_("meta"),f=y(),k=_("meta"),w=y(),p=_("meta"),v=y(),$=_("meta"),this.h()},l(m){t=T(m),s=g(m,"META",{property:!0,content:!0}),l=T(m),o=g(m,"META",{property:!0,content:!0}),f=T(m),k=g(m,"META",{property:!0,content:!0}),w=T(m),p=g(m,"META",{property:!0,content:!0}),v=T(m),$=g(m,"META",{property:!0,content:!0}),this.h()},h(){i(s,"property","og:title"),i(s,"content",n=`블루닷${r[0].unique_name?` - ${r[0].unique_name} 님 계정`:""}`),i(o,"property","og:description"),i(o,"content",u=r[0].unique_name?`사용자 ${r[0].unique_name} 님의 계정`:"사람과 장소 그리고 순간을 의미 있게 만들다"),i(k,"property","og:url"),i(k,"content",`https://bluedot.land${location.pathname}${location.search}`),i(p,"property","og:image"),i(p,"content",ls),i($,"property","og:image:alt"),i($,"content","bluedot logo")},m(m,C){A(m,t,C),A(m,s,C),A(m,l,C),A(m,o,C),A(m,f,C),A(m,k,C),A(m,w,C),A(m,p,C),A(m,v,C),A(m,$,C)},p(m,C){C[0]&1&&e!==(e=`블루닷 - ${m[0].unique_name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`)&&(document.title=e),C[0]&1&&n!==(n=`블루닷${m[0].unique_name?` - ${m[0].unique_name} 님 계정`:""}`)&&i(s,"content",n),C[0]&1&&u!==(u=m[0].unique_name?`사용자 ${m[0].unique_name} 님의 계정`:"사람과 장소 그리고 순간을 의미 있게 만들다")&&i(o,"content",u)},d(m){m&&(c(t),c(s),c(l),c(o),c(f),c(k),c(w),c(p),c(v),c($))}}}function $s(r){let e,t,s,n,l,o,u,f,k;return s=new ps({props:{width:"24",height:"24"}}),o=new ds({}),{c(){e=_("div"),t=_("button"),F(s.$$.fragment),n=y(),l=_("button"),F(o.$$.fragment),this.h()},l(w){e=g(w,"DIV",{class:!0});var p=E(e);t=g(p,"BUTTON",{});var v=E(t);z(s.$$.fragment,v),v.forEach(c),n=T(p),l=g(p,"BUTTON",{});var $=E(l);z(o.$$.fragment,$),$.forEach(c),p.forEach(c),this.h()},h(){i(e,"class","flex items-center gap-2")},m(w,p){A(w,e,p),d(e,t),L(s,t,null),d(e,n),d(e,l),L(o,l,null),u=!0,f||(k=[R(t,"click",r[16]),R(l,"click",r[17])],f=!0)},p:te,i(w){u||(O(s.$$.fragment,w),O(o.$$.fragment,w),u=!0)},o(w){N(s.$$.fragment,w),N(o.$$.fragment,w),u=!1},d(w){w&&c(e),U(s),U(o),f=!1,ut(k)}}}function Is(r){let e,t,s=!ee&&$s(r);return{c(){s&&s.c(),e=Qe()},l(n){s&&s.l(n),e=Qe()},m(n,l){s&&s.m(n,l),A(n,e,l),t=!0},p(n,l){ee||s.p(n,l)},i(n){t||(O(s),t=!0)},o(n){N(s),t=!1},d(n){n&&c(e),s&&s.d(n)}}}function xs(r){var l;let e,t,s=(((l=r[0].unique_name)==null?void 0:l.at(0))??"u")+"",n;return{c(){e=_("div"),t=_("span"),n=ue(s),this.h()},l(o){e=g(o,"DIV",{class:!0,style:!0});var u=E(e);t=g(u,"SPAN",{class:!0});var f=E(t);n=ce(f,s),f.forEach(c),u.forEach(c),this.h()},h(){i(t,"class","text-2xl font-semibold text-black"),i(e,"class","w-full h-full flex items-center justify-center"),Tt(e,"background-color",Pt(r[0].unique_name))},m(o,u){A(o,e,u),d(e,t),d(t,n)},p(o,u){var f;u[0]&1&&s!==(s=(((f=o[0].unique_name)==null?void 0:f.at(0))??"u")+"")&&Ie(n,s),u[0]&1&&Tt(e,"background-color",Pt(o[0].unique_name))},i:te,o:te,d(o){o&&c(e)}}}function As(r){let e,t;return e=new rs({props:{src:We(r[0].profile_image_url,500),width:"4.375rem",strokeWidth:"0"}}),{c(){F(e.$$.fragment)},l(s){z(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},p(s,n){const l={};n[0]&1&&(l.src=We(s[0].profile_image_url,500)),e.$set(l)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function ys(r){let e;function t(l,o){return l[7]==!0?Ds:Ss}let s=t(r),n=s(r);return{c(){e=_("div"),n.c()},l(l){e=g(l,"DIV",{});var o=E(e);n.l(o),o.forEach(c)},m(l,o){A(l,e,o),n.m(e,null)},p(l,o){s===(s=t(l))&&n?n.p(l,o):(n.d(1),n=s(l),n&&(n.c(),n.m(e,null)))},d(l){l&&c(e),n.d()}}}function Ts(r){let e,t,s="프로필 편집",n,l;return{c(){e=_("div"),t=_("button"),t.textContent=s,this.h()},l(o){e=g(o,"DIV",{});var u=E(e);t=g(u,"BUTTON",{class:!0,"data-svelte-h":!0}),xe(t)!=="svelte-19n2ifp"&&(t.textContent=s),u.forEach(c),this.h()},h(){i(t,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(o,u){A(o,e,u),d(e,t),n||(l=R(t,"click",r[20]),n=!0)},p:te,d(o){o&&c(e),n=!1,l()}}}function Ss(r){let e,t,s="팔로우",n,l;return{c(){e=_("button"),t=_("div"),t.textContent=s,this.h()},l(o){e=g(o,"BUTTON",{class:!0});var u=E(e);t=g(u,"DIV",{"data-svelte-h":!0}),xe(t)!=="svelte-1sbe5nn"&&(t.textContent=s),u.forEach(c),this.h()},h(){i(e,"class","w-full bg-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-white p-2.5 ")},m(o,u){A(o,e,u),d(e,t),n||(l=R(t,"click",r[22]),n=!0)},p:te,d(o){o&&c(e),n=!1,l()}}}function Ds(r){let e,t="팔로잉",s,n;return{c(){e=_("button"),e.textContent=t,this.h()},l(l){e=g(l,"BUTTON",{class:!0,"data-svelte-h":!0}),xe(e)!=="svelte-18fzixz"&&(e.textContent=t),this.h()},h(){i(e,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(l,o){A(l,e,o),s||(n=R(e,"click",r[21]),s=!0)},p:te,d(l){l&&c(e),s=!1,n()}}}function Mt(r){let e,t,s;return{c(){e=_("img"),this.h()},l(n){e=g(n,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){i(e,"class","w-full h-full object-cover bg-[#D9D9D9] brightness-75"),St(e.src,t=We(r[37].image,500))||i(e,"src",t),i(e,"alt",s=r[37].name)},m(n,l){A(n,e,l)},p(n,l){l[0]&8&&!St(e.src,t=We(n[37].image,500))&&i(e,"src",t),l[0]&8&&s!==(s=n[37].name)&&i(e,"alt",s)},d(n){n&&c(e)}}}function Ft(r){let e,t,s,n=r[37].name+"",l,o,u=r[37].image,f,k,w,p=Mt(r);function v(){return r[23](r[37])}return{c(){e=_("div"),t=_("div"),s=_("span"),l=ue(n),o=y(),p.c(),f=y(),this.h()},l($){e=g($,"DIV",{class:!0});var m=E(e);t=g(m,"DIV",{class:!0});var C=E(t);s=g(C,"SPAN",{class:!0});var P=E(s);l=ce(P,n),P.forEach(c),o=T(C),p.l(C),C.forEach(c),f=T(m),m.forEach(c),this.h()},h(){i(s,"class","absolute inset-0 flex items-center justify-center z-10 text-xs text-center font-medium leading-[1.125rem] tracking-[-0.0375rem] "),i(t,"class","relative w-full h-full rounded-full overflow-hidden border-4 border-white/15 "),i(e,"class","w-[4.875rem] h-[4.875rem] flex-shrink-0")},m($,m){A($,e,m),d(e,t),d(t,s),d(s,l),d(t,o),p.m(t,null),d(e,f),k||(w=R(t,"click",v),k=!0)},p($,m){r=$,m[0]&8&&n!==(n=r[37].name+"")&&Ie(l,n),m[0]&8&&it(u,u=r[37].image)?(p.d(1),p=Mt(r),p.c(),p.m(t,null)):p.p(r,m)},d($){$&&c(e),p.d($),k=!1,w()}}}function zt(r){let e,t,s,n,l,o;t=new _s({props:{src:r[34].media[0],post:r[34],isThumbnail:!0,loading:"lazy",useThumbnailInVideo:bs,fetchpriority:r[36]<=9?"high":"low",imgSize:500}});function u(){return r[24](r[34])}return{c(){e=_("div"),F(t.$$.fragment),s=y(),this.h()},l(f){e=g(f,"DIV",{class:!0});var k=E(e);z(t.$$.fragment,k),s=T(k),k.forEach(c),this.h()},h(){i(e,"class","aspect-square overflow-hidden relative")},m(f,k){A(f,e,k),L(t,e,null),d(e,s),n=!0,l||(o=R(e,"click",u),l=!0)},p(f,k){r=f;const w={};k[0]&4&&(w.src=r[34].media[0]),k[0]&4&&(w.post=r[34]),t.$set(w)},i(f){n||(O(t.$$.fragment,f),n=!0)},o(f){N(t.$$.fragment,f),n=!1},d(f){f&&c(e),U(t),l=!1,o()}}}function Os(r){let e,t;return e=new ns({}),{c(){F(e.$$.fragment)},l(s){z(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function Bs(r){let e,t,s,n,l,o,u,f,k,w,p;return s=new ms({props:{length:1.5,fill:"white"}}),u=new Es({}),{c(){e=_("div"),t=_("button"),F(s.$$.fragment),n=ue(`
      링크 복사`),l=y(),o=_("button"),F(u.$$.fragment),f=ue(`
      계정 신고하기`),this.h()},l(v){e=g(v,"DIV",{class:!0});var $=E(e);t=g($,"BUTTON",{class:!0});var m=E(t);z(s.$$.fragment,m),n=ce(m,`
      링크 복사`),m.forEach(c),l=T($),o=g($,"BUTTON",{class:!0});var C=E(o);z(u.$$.fragment,C),f=ce(C,`
      계정 신고하기`),C.forEach(c),$.forEach(c),this.h()},h(){i(t,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),i(o,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),i(e,"class","px-5")},m(v,$){A(v,e,$),d(e,t),L(s,t,null),d(t,n),d(e,l),d(e,o),L(u,o,null),d(o,f),k=!0,w||(p=[R(t,"click",r[26]),R(o,"click",r[13])],w=!0)},p:te,i(v){k||(O(s.$$.fragment,v),O(u.$$.fragment,v),k=!0)},o(v){N(s.$$.fragment,v),N(u.$$.fragment,v),k=!1},d(v){v&&c(e),U(s),U(u),w=!1,ut(p)}}}function Ns(r){let e,t,s,n,l,o,u,f,k,w,p,v,$,m,C,P,H=r[2].length+"",fe,Z,K,Me="포스트",me,V,se,ve,Ae,Q,Fe="팔로워",ye,q,re,ke,Te,W,ze="팔로잉",Se,h,D,le=r[0].unique_name+"",De,we,de,Xe,Ce,he,Ye,pe,et,Oe,tt,_e,Le,Ue,X,st,Re,Y,rt,ne,lt,ct,j=r[0].idx&&qt(r);o=new ss({props:{position:ee?"sticky":"static",leftLogo:ee,leftBack:ee?"":"white",backgroundColor:"bg-black",$$slots:{right:[Is]},$$scope:{ctx:r}}});const ft=[As,xs],oe=[];function mt(a,b){return a[0].profile_image_url?0:1}p=mt(r),v=oe[p]=ft[p](r);function dt(a,b){return a[6]?Ts:ys}let He=dt(r),M=He(r),Ee=Ke(r[3]),B=[];for(let a=0;a<Ee.length;a+=1)B[a]=Ft(Vt(r,Ee,a));let ge=Ke(r[2]),S=[];for(let a=0;a<ge.length;a+=1)S[a]=zt(jt(r,ge,a));const Ht=a=>N(S[a],1,1,()=>{S[a]=null});_e=new os({});let J=!ee&&Os();function Zt(a){r[27](a)}let ht={fixed:!0,noHandle:!0,$$slots:{default:[Bs]},$$scope:{ctx:r}};r[9]!==void 0&&(ht.isOpen=r[9]),X=new hs({props:ht}),at.push(()=>Ot(X,"isOpen",Zt));function Jt(a){r[28](a)}let pt={};return r[11]!==void 0&&(pt.isOpen=r[11]),Y=new ks({props:pt}),at.push(()=>Ot(Y,"isOpen",Jt)),{c(){j&&j.c(),e=Qe(),t=y(),s=_("div"),n=y(),l=_("div"),F(o.$$.fragment),u=y(),f=_("section"),k=_("div"),w=_("div"),v.c(),$=y(),m=_("div"),C=_("div"),P=_("span"),fe=ue(H),Z=y(),K=_("span"),K.textContent=Me,me=y(),V=_("div"),se=_("span"),ve=ue(r[4]),Ae=y(),Q=_("span"),Q.textContent=Fe,ye=y(),q=_("div"),re=_("span"),ke=ue(r[5]),Te=y(),W=_("span"),W.textContent=ze,Se=y(),h=_("section"),D=_("span"),De=ue(le),we=y(),de=_("section"),M.c(),Xe=y(),Ce=_("section"),he=_("div");for(let a=0;a<B.length;a+=1)B[a].c();Ye=y(),pe=_("div");for(let a=0;a<S.length;a+=1)S[a].c();et=y(),Oe=_("div"),tt=y(),F(_e.$$.fragment),Le=y(),J&&J.c(),Ue=y(),F(X.$$.fragment),Re=y(),F(Y.$$.fragment),this.h()},l(a){const b=Qt("svelte-1kr9zm",document.head);j&&j.l(b),e=Qe(),b.forEach(c),t=T(a),s=g(a,"DIV",{class:!0}),E(s).forEach(c),n=T(a),l=g(a,"DIV",{class:!0});var x=E(l);z(o.$$.fragment,x),u=T(x),f=g(x,"SECTION",{class:!0});var ae=E(f);k=g(ae,"DIV",{class:!0});var $e=E(k);w=g($e,"DIV",{class:!0});var Be=E(w);v.l(Be),Be.forEach(c),$e.forEach(c),$=T(ae),m=g(ae,"DIV",{class:!0});var I=E(m);C=g(I,"DIV",{class:!0});var G=E(C);P=g(G,"SPAN",{class:!0});var _t=E(P);fe=ce(_t,H),_t.forEach(c),Z=T(G),K=g(G,"SPAN",{class:!0,"data-svelte-h":!0}),xe(K)!=="svelte-13hqbuq"&&(K.textContent=Me),G.forEach(c),me=T(I),V=g(I,"DIV",{class:!0});var Ze=E(V);se=g(Ze,"SPAN",{class:!0});var gt=E(se);ve=ce(gt,r[4]),gt.forEach(c),Ae=T(Ze),Q=g(Ze,"SPAN",{class:!0,"data-svelte-h":!0}),xe(Q)!=="svelte-1nb7yum"&&(Q.textContent=Fe),Ze.forEach(c),ye=T(I),q=g(I,"DIV",{class:!0});var Je=E(q);re=g(Je,"SPAN",{class:!0});var bt=E(re);ke=ce(bt,r[5]),bt.forEach(c),Te=T(Je),W=g(Je,"SPAN",{class:!0,"data-svelte-h":!0}),xe(W)!=="svelte-ugas5h"&&(W.textContent=ze),Je.forEach(c),I.forEach(c),ae.forEach(c),Se=T(x),h=g(x,"SECTION",{class:!0});var vt=E(h);D=g(vt,"SPAN",{class:!0});var kt=E(D);De=ce(kt,le),kt.forEach(c),vt.forEach(c),we=T(x),de=g(x,"SECTION",{class:!0});var wt=E(de);M.l(wt),wt.forEach(c),Xe=T(x),Ce=g(x,"SECTION",{class:!0});var Ct=E(Ce);he=g(Ct,"DIV",{class:!0});var Et=E(he);for(let be=0;be<B.length;be+=1)B[be].l(Et);Et.forEach(c),Ct.forEach(c),Ye=T(x),pe=g(x,"DIV",{class:!0});var $t=E(pe);for(let be=0;be<S.length;be+=1)S[be].l($t);$t.forEach(c),et=T(x),Oe=g(x,"DIV",{}),E(Oe).forEach(c),tt=T(x),z(_e.$$.fragment,x),x.forEach(c),Le=T(a),J&&J.l(a),Ue=T(a),z(X.$$.fragment,a),Re=T(a),z(Y.$$.fragment,a),this.h()},h(){i(s,"class","fixed w-full h-full bg-black -z-10"),i(w,"class","w-[4.375rem] h-[4.375rem] rounded-full overflow-hidden"),i(k,"class","flex flex-col gap-2 items-center"),i(P,"class","text-[0.8125rem] font-semibold"),i(K,"class","text-xs"),i(C,"class","flex flex-col items-center"),i(se,"class","text-[0.8125rem] font-semibold"),i(Q,"class","text-xs"),i(V,"class","flex flex-col items-center"),i(re,"class","text-[0.8125rem] font-semibold"),i(W,"class","text-xs"),i(q,"class","flex flex-col items-center"),i(m,"class","flex gap-8 justify-start"),i(f,"class","flex px-5 pt-3.5 gap-6 items-center"),i(D,"class","text-sm font-medium"),i(h,"class","mt-[1.125rem] px-5"),i(de,"class","px-5 pt-[0.88rem]"),i(he,"class","flex overflow-x-auto space-x-5 px-5 pb-[1.5rem]"),i(Ce,"class","mt-[1.69rem]"),i(pe,"class","grid grid-cols-3 gap-[0.19rem]"),i(l,"class","w-full h-full text-white")},m(a,b){j&&j.m(document.head,null),d(document.head,e),A(a,t,b),A(a,s,b),A(a,n,b),A(a,l,b),L(o,l,null),d(l,u),d(l,f),d(f,k),d(k,w),oe[p].m(w,null),d(f,$),d(f,m),d(m,C),d(C,P),d(P,fe),d(C,Z),d(C,K),d(m,me),d(m,V),d(V,se),d(se,ve),d(V,Ae),d(V,Q),d(m,ye),d(m,q),d(q,re),d(re,ke),d(q,Te),d(q,W),d(l,Se),d(l,h),d(h,D),d(D,De),d(l,we),d(l,de),M.m(de,null),d(l,Xe),d(l,Ce),d(Ce,he);for(let x=0;x<B.length;x+=1)B[x]&&B[x].m(he,null);d(l,Ye),d(l,pe);for(let x=0;x<S.length;x+=1)S[x]&&S[x].m(pe,null);d(l,et),d(l,Oe),r[25](Oe),d(l,tt),L(_e,l,null),A(a,Le,b),J&&J.m(a,b),A(a,Ue,b),L(X,a,b),A(a,Re,b),L(Y,a,b),ne=!0,lt||(ct=[R(V,"click",r[18]),R(q,"click",r[19])],lt=!0)},p(a,b){a[0].idx?j?j.p(a,b):(j=qt(a),j.c(),j.m(e.parentNode,e)):j&&(j.d(1),j=null);const x={};b[0]&578|b[1]&256&&(x.$$scope={dirty:b,ctx:a}),o.$set(x);let ae=p;if(p=mt(a),p===ae?oe[p].p(a,b):(Nt(),N(oe[ae],1,1,()=>{oe[ae]=null}),Bt(),v=oe[p],v?v.p(a,b):(v=oe[p]=ft[p](a),v.c()),O(v,1),v.m(w,null)),(!ne||b[0]&4)&&H!==(H=a[2].length+"")&&Ie(fe,H),(!ne||b[0]&16)&&Ie(ve,a[4]),(!ne||b[0]&32)&&Ie(ke,a[5]),(!ne||b[0]&1)&&le!==(le=a[0].unique_name+"")&&Ie(De,le),He===(He=dt(a))&&M?M.p(a,b):(M.d(1),M=He(a),M&&(M.c(),M.m(de,null))),b[0]&8){Ee=Ke(a[3]);let I;for(I=0;I<Ee.length;I+=1){const G=Vt(a,Ee,I);B[I]?B[I].p(G,b):(B[I]=Ft(G),B[I].c(),B[I].m(he,null))}for(;I<B.length;I+=1)B[I].d(1);B.length=Ee.length}if(b[0]&4103){ge=Ke(a[2]);let I;for(I=0;I<ge.length;I+=1){const G=jt(a,ge,I);S[I]?(S[I].p(G,b),O(S[I],1)):(S[I]=zt(G),S[I].c(),O(S[I],1),S[I].m(pe,null))}for(Nt(),I=ge.length;I<S.length;I+=1)Ht(I);Bt()}const $e={};b[0]&512|b[1]&256&&($e.$$scope={dirty:b,ctx:a}),!st&&b[0]&512&&(st=!0,$e.isOpen=a[9],xt(()=>st=!1)),X.$set($e);const Be={};!rt&&b[0]&2048&&(rt=!0,Be.isOpen=a[11],xt(()=>rt=!1)),Y.$set(Be)},i(a){if(!ne){O(o.$$.fragment,a),O(v);for(let b=0;b<ge.length;b+=1)O(S[b]);O(_e.$$.fragment,a),O(J),O(X.$$.fragment,a),O(Y.$$.fragment,a),ne=!0}},o(a){N(o.$$.fragment,a),N(v),S=S.filter(Boolean);for(let b=0;b<S.length;b+=1)N(S[b]);N(_e.$$.fragment,a),N(J),N(X.$$.fragment,a),N(Y.$$.fragment,a),ne=!1},d(a){a&&(c(t),c(s),c(n),c(l),c(Le),c(Ue),c(Re)),j&&j.d(a),c(e),U(o),oe[p].d(),M.d(),At(B,a),At(S,a),r[25](null),U(_e),J&&J.d(a),U(X,a),U(Y,a),lt=!1,ut(ct)}}}let Lt=24;function Ps(r,e,t){let s,n;yt(r,ts,h=>t(1,s=h)),yt(r,It,h=>t(12,n=h));let{data:l}=e,o=l.user??{},u=l.posts??[],f=l.boxes??[],k=0,w=0,p=!1,v=!1,$=Ve(),m=!1,C=!1,P,H,fe=24,Z=!1;async function K(){var h;if(o.idx)try{const D=ot(),le=await fetch(`${qe}/posts?userIdx=${o.idx}&offset=${fe}&limit=${Lt}`,{headers:{Authorization:`Bearer ${D}`}});if(!le.ok)return;const we=((h=(await le.json()).data)==null?void 0:h.posts)??[];we.length>0?(t(2,u=u.concat(we)),fe+=Lt):H.unobserve(P)}catch{}}Wt(()=>{H=new IntersectionObserver(h=>{h[0].isIntersecting&&K()},{rootMargin:"10%"}),H.observe(P)}),Xt(()=>H.unobserve(P));function Me(){fetch(`${qe}/auth/followers?targetTable=users&subjectTable=users&subjectIdx=${s.params.idx}`).then(h=>h.json()).then(h=>{t(5,w=h.data.length)})}let me=!1;async function V(){if(window.confirm("계정을 신고하시겠어요?")&&!me){me=!0,je.emit("loading",!0);try{const D=new URL(`${qe}/auth/permissions`);D.searchParams.set("targetTable","users"),D.searchParams.set("targetIdx",s.params.idx),D.searchParams.set("relation","reported"),D.searchParams.set("subjectTable","users"),D.searchParams.set("subjectIdx",Gt().sub),D.searchParams.set("metadata",JSON.stringify({text:"계정 신고",value:"account"})),t(9,C=!1),await fetch(D,{method:"PUT",headers:{Authorization:`Bearer ${ot()}`}}),je.emit("pushSnackbar",{message:"신고가 접수되었습니다."})}catch(D){throw je.emit("pushSnackbar",{message:"신고에 실패했습니다."}),D}finally{me=!1,je.emit("loading",!1)}}}const se=async()=>{await ie("/search")},ve=()=>{p?ie(`/users/${s.params.idx}/setting`):t(9,C=!0)},Ae=async()=>{const h=`/users/${s.params.idx}/followers?tab=followers`;console.log(h),await ie(h)},Q=async()=>{const h=`/users/${s.params.idx}/followers?tab=followings`;console.log(h),await ie(h)},Fe=async()=>{if(ee)return t(11,Z=!0);await ie(`/users/${s.params.idx}/setting/profile`)},ye=async()=>{if(ee)return t(11,Z=!0);m||(t(8,m=!0),await us({targetIdx:s.params.idx,subjectIdx:Ve()}),t(7,v=!1),t(4,k-=1),t(8,m=!1))},q=async()=>{if(ee)return t(11,Z=!0);const h=Ve();if(!h){je.emit("showSignInModal");return}m||(t(8,m=!0),await cs({targetIdx:s.params.idx,subjectIdx:h}),t(7,v=!0),t(4,k+=1),t(8,m=!1))},re=h=>{ie(`/boxes/${h.idx}`)},ke=async h=>{try{if((o==null?void 0:o.idx)===0)return;Yt(It,n=u,n),await ie(`/viewer?userIdx=${s.params.idx}&postIdx=${h.idx}`,{replaceState:!1,invalidateAll:!1})}catch{}};function Te(h){at[h?"unshift":"push"](()=>{P=h,t(10,P)})}const W=()=>{fs(`${location.pathname}${location.search}`),t(9,C=!1)};function ze(h){C=h,t(9,C)}function Se(h){Z=h,t(11,Z)}return r.$$set=h=>{"data"in h&&t(14,l=h.data)},r.$$.update=()=>{if(r.$$.dirty[0]&49155&&l.user&&s.params.idx&&s.params.idx!=="0"&&(t(0,o=l.user),t(2,u=l.posts),t(3,f=l.boxes),t(15,$=Ve()),t(6,p=String(o==null?void 0:o.idx)===String($)),as({targetIdx:s.params.idx}).then(h=>{t(4,k=h)}),Me(),$&&is({targetIdx:s.params.idx,subjectIdx:$}).then(h=>{t(7,v=h)})),r.$$.dirty[0]&16386&&!l.user&&s.params.idx==="0")try{vs({replace:"1"},{replace:!0})}catch{}},[o,s,u,f,k,w,p,v,m,C,P,Z,n,V,l,$,se,ve,Ae,Q,Fe,ye,q,re,ke,Te,W,ze,Se]}class mr extends Ut{constructor(e){super(),Rt(this,e,Ps,Ns,it,{data:14},null,[-1,-1])}}const js=async({params:r,fetch:e,depends:t,url:s})=>{var o;t("app:user");const n=Ve(),l=ot();if(r.idx==="0"&&n===null)return{};if(r.idx==="0"&&n!==null)return ie(`/users/${String(n)}`,{replaceState:s.searchParams.get("replace")==="1"});if(r.idx!=="0")try{const[u,f]=await Promise.all([e(`${qe}/auth/users/${r.idx}`,{headers:{Authorization:`Bearer ${l}`}}),e(`${qe}/posts?userIdx=${r.idx}&limit=24`,{headers:{Authorization:`Bearer ${l}`}})]);if(!u.ok||!f.ok)throw Ge(500,"Failed to fetch data");const k=await u.json(),w=await f.json();let p=[];const v=String(n)===r.idx;if(v&&Dt(nt).length!==0)p=Dt(nt);else{const $=await es(l,r.idx);if(!$.ok)throw Ge(500,"Failed to fetch data");const m=await $.json();v&&nt.set(m.data),p=m.data}return Kt.set(!0),{user:{...k.data,idx:Number(r.idx)},posts:((o=w.data)==null?void 0:o.posts)??[],boxes:p}}catch{throw Ge(500,"An error occurred while loading data")}throw Ge(404,"Not found")},dr=Object.freeze(Object.defineProperty({__proto__:null,load:js},Symbol.toStringTag,{value:"Module"}));export{mr as component,dr as universal};
