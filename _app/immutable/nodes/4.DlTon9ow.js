import{s as nt,I as S,i as k,f as h,k as U,e as I,a as y,c as T,b as L,m as z,g as x,o as g,h as $,p as E,v as ft,C as ut,D as ct,n as ot,z as mt}from"../chunks/scheduler.CGPrvQej.js";import{S as it,i as lt,t as b,g as G,a as w,f as W,c as N,d as V,m as A,e as B}from"../chunks/index.C24WiM7b.js";import{a as D,b as J,c as dt,C as pt,I as ht,m as _t,o as bt}from"../chunks/optionCard.C93z79xH.js";import{d as vt}from"../chunks/TermsOfService.CPYNjYls.js";import{I as gt}from"../chunks/IconPlus.B0UC35Ff.js";import{O as wt,m as kt}from"../chunks/map.CL48o778.js";import{g as rt,i as Ct,a as $t}from"../chunks/sign.Bt5KbStV.js";import{e as O}from"../chunks/emitter.E5P-NQ8u.js";import{c as j,f as at,a as R,d as It,b as K,h as q,g as Q,A as Tt,j as Mt}from"../chunks/store.BtwMQtZz.js";import{c as yt}from"../chunks/createCard.CFZssMUC.js";import{C as xt}from"../chunks/CardDeck.rqR8105Q.js";import{D as Ot}from"../chunks/Dot.DRORFAXH.js";function X(u){let s,n,e,o='<div class="bottom-island-sun svelte-7mvhi4"></div>',i,r,l,f,p='<div class="bottom-island-moon svelte-7mvhi4"></div>',_,c,d,m,t,a,v,P,Z;return a=new gt({}),{c(){s=I("div"),n=I("div"),e=I("button"),e.innerHTML=o,i=y(),r=I("div"),l=y(),f=I("button"),f.innerHTML=p,_=y(),c=I("div"),m=y(),t=I("button"),N(a.$$.fragment),this.h()},l(C){s=T(C,"DIV",{class:!0});var H=L(s);n=T(H,"DIV",{class:!0});var M=L(n);e=T(M,"BUTTON",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-nvhq4c"&&(e.innerHTML=o),i=x(M),r=T(M,"DIV",{class:!0}),L(r).forEach(h),l=x(M),f=T(M,"BUTTON",{class:!0,"data-svelte-h":!0}),z(f)!=="svelte-k08wib"&&(f.innerHTML=p),_=x(M),c=T(M,"DIV",{class:!0}),L(c).forEach(h),m=x(M),t=T(M,"BUTTON",{class:!0});var F=L(t);V(a.$$.fragment,F),F.forEach(h),M.forEach(h),H.forEach(h),this.h()},h(){g(e,"class","bottom-island-sun-part svelte-7mvhi4"),g(r,"class","flex-auto"),g(f,"class","bottom-island-moon-part svelte-7mvhi4"),g(c,"class",d="bottom-island-active "+(u[0]==="sun"?"moon-to-sun":"sun-to-moon")+" svelte-7mvhi4"),g(t,"class","bottom-island-create-button svelte-7mvhi4"),g(n,"class","bottom-island svelte-7mvhi4"),g(s,"class","bottom-island-container svelte-7mvhi4")},m(C,H){k(C,s,H),$(s,n),$(n,e),$(n,i),$(n,r),$(n,l),$(n,f),$(n,_),$(n,c),$(n,m),$(n,t),A(a,t,null),v=!0,P||(Z=[E(e,"click",u[3]),E(f,"click",u[4]),E(t,"click",yt)],P=!0)},p(C,H){(!v||H&1&&d!==(d="bottom-island-active "+(C[0]==="sun"?"moon-to-sun":"sun-to-moon")+" svelte-7mvhi4"))&&g(c,"class",d)},i(C){v||(b(a.$$.fragment,C),v=!0)},o(C){w(a.$$.fragment,C),v=!1},d(C){C&&h(s),B(a),P=!1,ft(Z)}}}function Lt(u){let s,n,e=u[1]&&X(u);return{c(){e&&e.c(),s=S()},l(o){e&&e.l(o),s=S()},m(o,i){e&&e.m(o,i),k(o,s,i),n=!0},p(o,[i]){o[1]?e?(e.p(o,i),i&2&&b(e,1)):(e=X(o),e.c(),b(e,1),e.m(s.parentNode,s)):e&&(G(),w(e,1,1,()=>{e=null}),W())},i(o){n||(b(e),n=!0)},o(o){w(e),n=!1},d(o){o&&h(s),e&&e.d(o)}}}function Ht(u,s,n){let e;U(u,j,_=>n(1,e=_));let o="sun";const i=document.createElement("div");i.style.width="100%",i.style.height="100%";const r=new wt({element:i,stopEvent:!1,positioning:"top-left",className:"overlay-map-light"});kt.addOverlay(r);function l(_){if(o!==_){if(_==="moon"&&!rt()){O.emit("pushCard",{idx:"111",type:"signIn",unflippable:!0});return}n(0,o=_),at.set(o),o==="sun"?(i.classList.add("to-bright"),i.classList.remove("to-dark")):(i.classList.add("to-dark"),i.classList.remove("to-bright"))}}return[o,e,l,()=>{l("sun")},()=>{l("moon")}]}class Dt extends it{constructor(s){super(),lt(this,s,Ht,Lt,nt,{})}}function Y(u){let s,n;return s=new pt({}),{c(){N(s.$$.fragment)},l(e){V(s.$$.fragment,e)},m(e,o){A(s,e,o),n=!0},i(e){n||(b(s.$$.fragment,e),n=!0)},o(e){w(s.$$.fragment,e),n=!1},d(e){B(s,e)}}}function tt(u){let s,n='<svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 2H16" stroke="#222222" stroke-width="2.5" stroke-linecap="round"></path><path d="M2 8H16" stroke="#222222" stroke-width="2.5" stroke-linecap="round"></path><path d="M2 14H16" stroke="#222222" stroke-width="2.5" stroke-linecap="round"></path></svg>',e,o,i,r,l=u[3]==="moon"&&et(u);return{c(){s=I("button"),s.innerHTML=n,e=y(),l&&l.c(),o=S(),this.h()},l(f){s=T(f,"BUTTON",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-1noa7nl"&&(s.innerHTML=n),e=x(f),l&&l.l(f),o=S(),this.h()},h(){g(s,"class","bg-white rounded-full w-10 h-10 flex justify-center items-center shadow-[0.934762px,0.934762px,5.60857px,rgba(0,0,0,0.1)]")},m(f,p){k(f,s,p),k(f,e,p),l&&l.m(f,p),k(f,o,p),i||(r=E(s,"click",u[7]),i=!0)},p(f,p){f[3]==="moon"?l?l.p(f,p):(l=et(f),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},d(f){f&&(h(s),h(e),h(o)),l&&l.d(f),i=!1,r()}}}function et(u){let s,n='<svg width="18" height="22" viewBox="0 0 18 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.99658 1H14.9966C16.1012 1 16.9966 1.89543 16.9966 3V15C16.9966 16.1046 16.1012 17 14.9966 17H6.99658C5.89201 17 4.99658 16.1046 4.99658 15V3C4.99658 1.89543 5.89201 1 6.99658 1Z" fill="white" stroke="black" stroke-width="2"></path><path d="M3.00293 5H11.0029C12.1075 5 13.0029 5.89543 13.0029 7V19C13.0029 20.1046 12.1075 21 11.0029 21H3.00293C1.89836 21 1.00293 20.1046 1.00293 19V7C1.00293 5.89543 1.89836 5 3.00293 5Z" fill="white" stroke="black" stroke-width="2"></path></svg>',e,o;return{c(){s=I("button"),s.innerHTML=n,this.h()},l(i){s=T(i,"BUTTON",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-1e1eezb"&&(s.innerHTML=n),this.h()},h(){g(s,"class","bg-white rounded-full w-10 h-10 flex justify-center items-center shadow-[0.934762px,0.934762px,5.60857px,rgba(0,0,0,0.1)]")},m(i,r){k(i,s,r),e||(o=E(s,"click",u[8]),e=!0)},p:ot,d(i){i&&h(s),e=!1,o()}}}function st(u){let s,n,e,o,i;return n=new ht({}),{c(){s=I("button"),N(n.$$.fragment),this.h()},l(r){s=T(r,"BUTTON",{class:!0});var l=L(s);V(n.$$.fragment,l),l.forEach(h),this.h()},h(){g(s,"class","px-[9px] py-[5px] bg-white rounded-lg shadow-[1px_4px_16px_rgba(0,0,0,0.08)] z-50")},m(r,l){k(r,s,l),A(n,s,null),e=!0,o||(i=E(s,"click",mt(u[5])),o=!0)},p:ot,i(r){e||(b(n.$$.fragment,r),e=!0)},o(r){w(n.$$.fragment,r),e=!1},d(r){r&&h(s),B(n),o=!1,i()}}}function Et(u){let s,n,e,o,i,r,l,f,p,_;s=new Ot({}),e=new xt({});let c=u[1]&&Y(),d=u[2]&&tt(u),m=u[4]&&st(u);return p=new Dt({}),{c(){N(s.$$.fragment),n=y(),N(e.$$.fragment),o=y(),c&&c.c(),i=y(),r=I("div"),d&&d.c(),l=y(),m&&m.c(),f=y(),N(p.$$.fragment),this.h()},l(t){V(s.$$.fragment,t),n=x(t),V(e.$$.fragment,t),o=x(t),c&&c.l(t),i=x(t),r=T(t,"DIV",{class:!0});var a=L(r);d&&d.l(a),l=x(a),m&&m.l(a),a.forEach(h),f=x(t),V(p.$$.fragment,t),this.h()},h(){g(r,"class","top-right-floating absolute top-[54px] right-4 flex flex-col gap-2.5 z-50")},m(t,a){A(s,t,a),k(t,n,a),A(e,t,a),k(t,o,a),c&&c.m(t,a),k(t,i,a),k(t,r,a),d&&d.m(r,null),$(r,l),m&&m.m(r,null),k(t,f,a),A(p,t,a),_=!0},p(t,[a]){t[1]?c?a&2&&b(c,1):(c=Y(),c.c(),b(c,1),c.m(i.parentNode,i)):c&&(G(),w(c,1,1,()=>{c=null}),W()),t[2]?d?d.p(t,a):(d=tt(t),d.c(),d.m(r,l)):d&&(d.d(1),d=null),t[4]?m?(m.p(t,a),a&16&&b(m,1)):(m=st(t),m.c(),b(m,1),m.m(r,null)):m&&(G(),w(m,1,1,()=>{m=null}),W())},i(t){_||(b(s.$$.fragment,t),b(e.$$.fragment,t),b(c),b(m),b(p.$$.fragment,t),_=!0)},o(t){w(s.$$.fragment,t),w(e.$$.fragment,t),w(c),w(m),w(p.$$.fragment,t),_=!1},d(t){t&&(h(n),h(o),h(i),h(r),h(f)),B(s,t),B(e,t),c&&c.d(t),d&&d.d(),m&&m.d(),B(p,t)}}}function Nt(u,s,n){let e,o,i,r;U(u,R,t=>n(9,e=t)),U(u,q,t=>n(2,o=t)),U(u,at,t=>n(3,i=t)),U(u,K,t=>n(4,r=t));let l=!1,f=!1;R.subscribe(t=>{if(t.length===0){c();return}const a=t.at(-1);a&&(a.rotateDegree=0);const v=t.at(-2);v&&(v.rotateDegree=void 0)}),It.subscribe(async t=>{if(t){const a=await p();console.log(a),n(6,D[0].endCount=a.length,D),n(6,D[0].onClick=()=>{O.emit("pushCard",{idx:"1",type:"option",left:"",right:"",unflippable:!0,optionList:a.map(v=>({startIcon:vt,name:`사용자 #${v.target_idx}`,onClick:()=>{}}))})},D)}else O.emit("setCards",[]),n(0,l=!1)});async function p(){const t=`${Tt}/auth/filters`;return(await(await fetch(t,{headers:{Authorization:`Bearer ${rt()}`}})).json()).data}function _(){const t=e.at(-1);if((t==null?void 0:t.idx)!=="-1"&&t&&t.ownerIdx){const a=$t();Mt.set(t);const v=t.ownerIdx===`${a}`?_t:bt;O.emit("pushCard",v)}}function c(){n(0,l=!1),K.set(!1)}ut(()=>{O.on("showAlbum",t=>{n(1,f=t)})}),ct(()=>{O.off("showAlbum")});const d=()=>n(0,l=!0),m=()=>n(1,f=!0);return u.$$.update=()=>{if(u.$$.dirty&65)if(l){const t={...J,optionList:[...Ct()?D:dt,...J.optionList]};O.emit("pushCard",t),j.set(!1)}else j.set(!0);u.$$.dirty&2&&(f?(j.set(!1),q.set(!1),Q.set(!1)):(j.set(!0),q.set(!0),Q.set(!0)))},[l,f,o,i,r,_,D,d,m]}class Ft extends it{constructor(s){super(),lt(this,s,Nt,Et,nt,{})}}export{Ft as component};
