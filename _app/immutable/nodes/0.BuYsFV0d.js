import{n as R,W as se,R as re,s as ie,p as W,i as x,f as b,k as le,a6 as q,e as I,t as J,a as j,c as C,b as D,d as K,g as z,o as v,h as T,y as me,j as U,q as pe,u as he,D as _e,H as ge,I as we,J as be,O as ye,L as O,M as G}from"../chunks/scheduler.zPBk7LGW.js";import{n as ve,l as ke,h as Se,j as Le,S as ae,i as ue,g as P,f as B,t as y,b as k,k as $e,c as V,a as ce,m as H,d as Y}from"../chunks/index.C4C7kEja.js";import{e as N,u as Ee,f as Me}from"../chunks/each.BBNuS97K.js";import{w as Te,p as Q}from"../chunks/entry.BLI9612Y.js";import{e as Xe,h as xe}from"../chunks/Header.D715OeCp.js";import{a as Ie,b as Ce,s as De}from"../chunks/store.WFlaWcnQ.js";import{S as w}from"../chunks/constants.bFPGP2yY.js";import{component as We}from"./16.D7V38M_Q.js";import{component as Pe}from"./7.CeaZNZZm.js";import{component as Be}from"./13.CCnCqe29.js";import{component as qe}from"./3.B_j4Vr44.js";function Oe(a,e,s,t){if(!e)return R;const n=a.getBoundingClientRect();if(e.left===n.left&&e.right===n.right&&e.top===n.top&&e.bottom===n.bottom)return R;const{delay:l=0,duration:r=300,easing:i=se,start:o=ve()+l,end:u=o+r,tick:c=R,css:d}=s(a,{from:e,to:n},t);let g=!0,h=!1,_;function $(){d&&(_=Se(a,0,1,r,l,i,d)),l||(h=!0)}function S(){d&&Le(a,_),g=!1}return ke(p=>{if(!h&&p>=o&&(h=!0),h&&p>=u&&(c(1,0),S()),!g)return!1;if(h){const L=p-o,X=0+1*i(L/r);c(X,1-X)}return!0}),$(),c(0,1),S}function Re(a){const e=getComputedStyle(a);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:s,height:t}=e,n=a.getBoundingClientRect();a.style.position="absolute",a.style.width=s,a.style.height=t,fe(a,n)}}function fe(a,e){const s=a.getBoundingClientRect();if(e.left!==s.left||e.top!==s.top){const t=getComputedStyle(a),n=t.transform==="none"?"":t.transform;a.style.transform=`${n} translate(${e.left-s.left}px, ${e.top-s.top}px)`}}const je=!1,ze="auto",Ne=a=>{if(console.log(a.route.id),a.route.id!==null)return{route:a.route.id==="/"?"/viewer":a.route.id}},dt=Object.freeze(Object.defineProperty({__proto__:null,load:Ne,prerender:ze,ssr:je},Symbol.toStringTag,{value:"Module"}));function Ve(a){const e=a-1;return e*e*e+1}function He(a,{delay:e=0,duration:s=400,easing:t=se}={}){const n=+getComputedStyle(a).opacity;return{delay:e,duration:s,easing:t,css:l=>`opacity: ${l*n}`}}function Ye(a,{from:e,to:s},t={}){const n=getComputedStyle(a),l=n.transform==="none"?"":n.transform,[r,i]=n.transformOrigin.split(" ").map(parseFloat),o=e.left+e.width*r/s.width-(s.left+r),u=e.top+e.height*i/s.height-(s.top+i),{delay:c=0,duration:d=h=>Math.sqrt(h)*120,easing:g=Ve}=t;return{delay:c,duration:re(d)?d(Math.sqrt(o*o+u*u)):d,easing:g,css:(h,_)=>{const $=_*o,S=_*u,p=h+_*e.width/s.width,L=h+_*e.height/s.height;return`transform: ${l} translate(${$}px, ${S}px) scale(${p}, ${L});`}}}function Z(a,e,s){const t=a.slice();return t[5]=e[s],t[7]=s,t}function ee(a,e){let s,t,n,l=e[5].message+"",r,i,o,u=(e[5].buttonText||A)+"",c,d,g,h,_,$,S=R,p,L,X;return{key:a,first:null,c(){s=I("div"),t=I("div"),n=I("div"),r=J(l),i=j(),o=I("div"),c=J(u),g=j(),this.h()},l(f){s=C(f,"DIV",{class:!0,style:!0});var m=D(s);t=C(m,"DIV",{class:!0,style:!0});var E=D(t);n=C(E,"DIV",{class:!0});var M=D(n);r=K(M,l),M.forEach(b),i=z(E),o=C(E,"DIV",{class:!0});var F=D(o);c=K(F,u),F.forEach(b),E.forEach(b),g=z(m),m.forEach(b),this.h()},h(){v(n,"class","text-white flex-grow"),v(o,"class","text-primary-300"),v(t,"class","flex bg-black p-[1.125rem]"),v(t,"style",d=`transform: scale(${1-.05*e[7]})`),v(s,"class","fixed bottom-24 w-full p-4"),v(s,"style",h=`z-index: ${80-e[7]}; transform: translateY(${-.3*e[7]}rem);`),this.first=s},m(f,m){x(f,s,m),T(s,t),T(t,n),T(n,r),T(t,i),T(t,o),T(o,c),T(s,g),p=!0,L||(X=me(o,"click",function(){re(e[5].callback)&&e[5].callback.apply(this,arguments)}),L=!0)},p(f,m){e=f,(!p||m&1)&&l!==(l=e[5].message+"")&&U(r,l),(!p||m&1)&&u!==(u=(e[5].buttonText||A)+"")&&U(c,u),(!p||m&1&&d!==(d=`transform: scale(${1-.05*e[7]})`))&&v(t,"style",d),(!p||m&1&&h!==(h=`z-index: ${80-e[7]}; transform: translateY(${-.3*e[7]}rem);`))&&v(s,"style",h)},r(){$=s.getBoundingClientRect()},f(){Re(s),S(),fe(s,$)},a(){S(),S=Oe(s,$,Ye,{})},i(f){p||(_&&_.end(1),p=!0)},o(f){f&&(_=$e(s,He,{duration:300})),p=!1},d(f){f&&b(s),f&&_&&_.end(),L=!1,X()}}}function Ae(a){let e=[],s=new Map,t,n,l=N(a[0]);const r=i=>i[5].uuid;for(let i=0;i<l.length;i+=1){let o=Z(a,l,i),u=r(o);s.set(u,e[i]=ee(u,o))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=W()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);t=W()},m(i,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(i,o);x(i,t,o),n=!0},p(i,[o]){if(o&1){l=N(i[0]),P();for(let u=0;u<e.length;u+=1)e[u].r();e=Ee(e,o,r,1,i,l,s,t.parentNode,Me,ee,t,Z);for(let u=0;u<e.length;u+=1)e[u].a();B()}},i(i){if(!n){for(let o=0;o<l.length;o+=1)y(e[o]);n=!0}},o(i){for(let o=0;o<e.length;o+=1)k(e[o]);n=!1},d(i){i&&b(t);for(let o=0;o<e.length;o+=1)e[o].d(i)}}}const Fe=5e3,Je=!1,A="닫기";function Ke(a,e,s){let t;const n=()=>{clearTimeout(r),q(l,t=t.slice(1),t)},l=Te([]);le(a,l,o=>s(0,t=o));let r;Xe.on("pushSnackbar",i);function i(o){if(t.some(c=>c.uuid===o.uuid))return;const u={uuid:o.uuid||crypto.randomUUID(),message:o.message,urgent:o.urgent,keep:o.keep||Je,duration:o.duration||Fe,buttonText:o.buttonText||A,callback:()=>{n();try{o.callback()}catch{}}};if(o.urgent){clearTimeout(r),q(l,t=[u,...t],t);return}q(l,t=[...t,u],t)}return a.$$.update=()=>{if(a.$$.dirty&5&&t.length>0){const{duration:o,keep:u}=t[0];clearTimeout(r),u||s(2,r=setTimeout(()=>{q(l,t=t.slice(1),t)},o))}},[t,l,r]}class Ue extends ae{constructor(e){super(),ue(this,e,Ke,Ae,ie,{})}}function de(){const a=window.innerWidth<=w.MobileS?w.MobileS:window.innerWidth<=w.MobileM?w.MobileM:window.innerWidth<=w.MobileL?w.MobileL:window.innerWidth<=w.Tablet?w.Tablet:window.innerWidth<=w.Laptop?w.Laptop:window.innerWidth<=w.LaptopL?w.LaptopL:w.FourK;Ie.set(a)}window.onresize=de;function te(a,e,s){const t=a.slice();return t[17]=e[s],t[19]=s,t}function Ge(a){let e;const s=a[7].default,t=_e(s,a,a[6],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&64)&&ge(t,s,n,n[6],e?be(s,n[6],l,null):we(n[6]),null)},i(n){e||(y(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function Qe(a){let e,s,t=N(a[0]),n=[];for(let r=0;r<t.length;r+=1)n[r]=oe(te(a,t,r));const l=r=>k(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=W()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=W()},m(r,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,i);x(r,e,i),s=!0},p(r,i){if(i&31){t=N(r[0]);let o;for(o=0;o<t.length;o+=1){const u=te(r,t,o);n[o]?(n[o].p(u,i),y(n[o],1)):(n[o]=oe(u),n[o].c(),y(n[o],1),n[o].m(e.parentNode,e))}for(P(),o=t.length;o<n.length;o+=1)l(o);B()}},i(r){if(!s){for(let i=0;i<t.length;i+=1)y(n[i]);s=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)k(n[i]);s=!1},d(r){r&&b(e),ye(n,r)}}}function ne(a){let e,s,t;var n=a[17].component;function l(r,i){return{}}return n&&(e=G(n,l()),e.$on("stopSwipe",a[4])),{c(){e&&V(e.$$.fragment),s=W()},l(r){e&&ce(e.$$.fragment,r),s=W()},m(r,i){e&&H(e,r,i),x(r,s,i),t=!0},p(r,i){if(i&1&&n!==(n=r[17].component)){if(e){P();const o=e;k(o.$$.fragment,1,0,()=>{Y(o,1)}),B()}n?(e=G(n,l()),e.$on("stopSwipe",r[4]),V(e.$$.fragment),y(e.$$.fragment,1),H(e,s.parentNode,s)):e=null}},i(r){t||(e&&y(e.$$.fragment,r),t=!0)},o(r){e&&k(e.$$.fragment,r),t=!1},d(r){r&&b(s),e&&Y(e,r)}}}function oe(a){let e,s,t,n,l=a[17].component&&a[17].isLoading&&ne(a);return{c(){e=I("div"),l&&l.c(),s=j(),this.h()},l(r){e=C(r,"DIV",{class:!0});var i=D(e);l&&l.l(i),s=z(i),i.forEach(b),this.h()},h(){v(e,"class",t=`page fixed w-full h-full ${a[2]||a[17].route==="/viewer"?"overflow-hidden":"overflow-auto"}`),O(e,"transform",a[1]),O(e,"left",`${(a[19]-a[3])*100}%`)},m(r,i){x(r,e,i),l&&l.m(e,null),T(e,s),n=!0},p(r,i){r[17].component&&r[17].isLoading?l?(l.p(r,i),i&1&&y(l,1)):(l=ne(r),l.c(),y(l,1),l.m(e,s)):l&&(P(),k(l,1,1,()=>{l=null}),B()),(!n||i&5&&t!==(t=`page fixed w-full h-full ${r[2]||r[17].route==="/viewer"?"overflow-hidden":"overflow-auto"}`))&&v(e,"class",t),i&2&&O(e,"transform",r[1]),i&8&&O(e,"left",`${(r[19]-r[3])*100}%`)},i(r){n||(y(l),n=!0)},o(r){k(l),n=!1},d(r){r&&b(e),l&&l.d()}}}function Ze(a){let e,s,t,n,l,r;e=new Ue({});const i=[Qe,Ge],o=[];function u(c,d){return c[3]!==-1?0:1}return n=u(a),l=o[n]=i[n](a),{c(){V(e.$$.fragment),s=j(),t=I("main"),l.c(),this.h()},l(c){ce(e.$$.fragment,c),s=z(c),t=C(c,"MAIN",{id:!0,class:!0});var d=D(t);l.l(d),d.forEach(b),this.h()},h(){v(t,"id","page-container"),v(t,"class","w-screen min-h-screen overflow-visible")},m(c,d){H(e,c,d),x(c,s,d),x(c,t,d),o[n].m(t,null),r=!0},p(c,[d]){let g=n;n=u(c),n===g?o[n].p(c,d):(P(),k(o[g],1,1,()=>{o[g]=null}),B(),l=o[n],l?l.p(c,d):(l=o[n]=i[n](c),l.c()),y(l,1),l.m(t,null))},i(c){r||(y(e.$$.fragment,c),y(l),r=!0)},o(c){k(e.$$.fragment,c),k(l),r=!1},d(c){c&&(b(s),b(t)),Y(e,c),o[n].d()}}}function et(a,e,s){let t,n;le(a,De,f=>s(11,n=f));let{$$slots:l={},$$scope:r}=e,{data:i}=e;const o=[{route:"/map",path:"/map",regex:/^\/map$/,component:Pe,isLoading:!1},{route:"/viewer",path:"/viewer",regex:/^\/(viewer)?$/,component:We,isLoading:!1},{route:"/boxes",path:"/boxes",regex:/^\/boxes$/,component:qe,isLoading:!1},{route:"/users/[idx]",path:"/users/111",regex:/^\/users\/\d+$/,component:Be,isLoading:!1}];pe(()=>{Ce.set(window),xe(),de(),$()}),he(()=>{S()});let u="translateX(0)",c=-1,d;function g(f){p||t===-1||(c=f.touches[0].clientX,t===0&&c<d-20&&(s(1,u="translateX(0)"),c=-1))}function h(f){if(p||n||c<0||t===-1)return;let m=f.touches[0].clientX-c;m=m>d?d:m<-d?-d:m,m=t===0&&m>0||t===o.length-1&&m<0?0:m,m>0?s(0,o[t-1].isLoading=!0,o):m<0&&s(0,o[t+1].isLoading=!0,o),s(1,u=`translateX(${m}px)`)}function _(f){if(p||n||c<0||t===-1)return c=-1;let m=f.changedTouches[0].clientX-c;if(m>d/2&&t!==0){s(1,u=`translateX(${d}px)`);const E=t-1,M=o[E];Q(M.path,{}),s(5,i.route=M.route,i),s(1,u="translateX(0)")}else if(-m>d/2&&t!==o.length-1){s(1,u=`translateX(${-d}px)`);const E=t+1,M=o[E];Q(M.path,{}),s(5,i.route=M.route,i),s(1,u="translateX(0)")}else s(1,u="translateX(0)");c=-1}function $(){d=document.body.clientWidth,document.addEventListener("touchstart",g),document.addEventListener("touchmove",h),document.addEventListener("touchend",_),window.onpopstate=function(){if(t!==-1){for(const f of o)if(f.regex.test(window.location.pathname)){s(5,i.route=f.route,i);break}}}}function S(){document.removeEventListener("touchstart",g),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",_)}let p=!1,L=!1;function X(f){p=f.detail.stop,f.detail.toDefault&&(c=-1),f.detail.toHiddenScroll!==void 0&&s(2,L=f.detail.toHiddenScroll)}return a.$$set=f=>{"data"in f&&s(5,i=f.data),"$$scope"in f&&s(6,r=f.$$scope)},a.$$.update=()=>{a.$$.dirty&33&&s(3,t=o.findIndex(f=>{const m=i.route===f.route;return m&&(f.isLoading=!0),m}))},[o,u,L,t,X,i,r,l]}class mt extends ae{constructor(e){super(),ue(this,e,et,Ze,ie,{data:5})}}export{mt as component,dt as universal};
