import{e as Je}from"../chunks/index.B4BoCjpO.js";import{a as je,b as Jt,g as nt}from"../chunks/sign.DjOL18JW.js";import{I as Gt,b as Et,A as Ve,e as Be,s as lt,c as Kt}from"../chunks/store.C807Sv48.js";import{g as oe}from"../chunks/entry.BlipmNmQ.js";import{s as at,q as Ne,r as Pe,b as C,f as c,v as i,i as y,h as d,n as Y,w as ot,D as Ke,a as x,e as _,t as ae,P as Wt,g as A,c as g,d as ie,z as Ie,A as R,j as Ee,x as It,M as xt,F as it,k as At,y as Xt,B as Qt,U as Yt,C as yt,R as St,l as Tt}from"../chunks/scheduler.CIbz-4tf.js";import{g as es}from"../chunks/boxRequest.BX__N5Om.js";import{S as zt,i as Lt,b as Dt,c as F,d as U,m as z,a as N,e as Ot,t as O,f as L,g as Bt}from"../chunks/index.gvaMc9LH.js";import{e as Ge}from"../chunks/each.Cdd7o6io.js";import{p as ts}from"../chunks/stores.Bxja5V5b.js";import{H as ss}from"../chunks/Header.D0Ely6jv.js";import{C as rs}from"../chunks/CircleImage.CZpdYjea.js";import{a as ls}from"../chunks/link_preview.DfKqbwsY.js";import"../chunks/ImageShaper.DEAJmI5j.js";import{N as ns}from"../chunks/NavigationBar.CC2C4HCX.js";import{s as We}from"../chunks/s32cloudfront.iC-vMcWe.js";import{B as os}from"../chunks/BottomNavigationPadder.DW6RgBQw.js";import{g as as,i as is,u as us,f as cs}from"../chunks/follow.CYqatrlJ.js";/* empty css                                                   */import{w as fs,I as ms}from"../chunks/utils.BaFS_4w9.js";import{I as ds}from"../chunks/IconMore.BQ1nArCe.js";import{A as hs}from"../chunks/ActionSheet.C-nsuTqA.js";import{I as ps}from"../chunks/IconSearch.Deap0mXU.js";import{F as _s}from"../chunks/Figure.BMTorFGR.js";import{g as Nt}from"../chunks/color.C_Jm4JAr.js";import{r as gs}from"../chunks/units.BJZU6p1c.js";import{i as bs}from"../chunks/device.ncRycTeL.js";import{u as vs}from"../chunks/searchParams.bpYqbX7d.js";import{A as ks}from"../chunks/ActionSheetOpenApp.Hax2RVvs.js";function ws(r){let e,t,s,n,l,o;return{c(){e=Ne("svg"),t=Ne("path"),s=Ne("path"),n=Ne("path"),l=Ne("path"),this.h()},l(u){e=Pe(u,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var f=C(e);t=Pe(f,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),C(t).forEach(c),s=Pe(f,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),C(s).forEach(c),n=Pe(f,"path",{d:!0,fill:!0}),C(n).forEach(c),l=Pe(f,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linejoin":!0}),C(l).forEach(c),f.forEach(c),this.h()},h(){i(t,"d","M2 22V21C2 18.79 3.79 17 6 17H10C12.21 17 14 18.79 14 21V22"),i(t,"stroke",r[1]),i(t,"stroke-width","1.5"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(s,"d","M8 14C6.34 14 5 12.66 5 11C5 9.34 6.34 8 8 8C9.66 8 11 9.34 11 11C11 12.66 9.66 14 8 14Z"),i(s,"stroke",r[1]),i(s,"stroke-width","1.5"),i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(n,"d","M18.5018 6.68182C18.3812 6.68182 18.2656 6.63393 18.1804 6.54868C18.0951 6.46344 18.0472 6.34783 18.0472 6.22727L18.0472 3.95455C18.0472 3.83399 18.0951 3.71838 18.1804 3.63313C18.2656 3.54789 18.3812 3.5 18.5018 3.5C18.6223 3.5 18.7379 3.54789 18.8232 3.63313C18.9084 3.71838 18.9563 3.83399 18.9563 3.95455L18.9563 6.22727C18.9563 6.34783 18.9084 6.46344 18.8232 6.54868C18.7379 6.63393 18.6223 6.68182 18.5018 6.68182ZM17.82 7.81818C17.82 7.63735 17.8918 7.46393 18.0197 7.33606C18.1475 7.2082 18.3209 7.13636 18.5018 7.13636C18.6826 7.13636 18.856 7.2082 18.9839 7.33606C19.1118 7.46393 19.1836 7.63735 19.1836 7.81818C19.1836 7.99901 19.1118 8.17243 18.9839 8.3003C18.856 8.42817 18.6826 8.5 18.5018 8.5C18.3209 8.5 18.1475 8.42817 18.0197 8.3003C17.8918 8.17243 17.82 7.99901 17.82 7.81818Z"),i(n,"fill",r[0]),i(l,"d","M19.8856 2.2C19.2698 1.13333 17.7302 1.13333 17.1144 2.2L14.0833 7.45C13.4674 8.51667 14.2372 9.85 15.4689 9.85H21.5311C22.7628 9.85 23.5326 8.51667 22.9167 7.45L19.8856 2.2Z"),i(l,"stroke",r[1]),i(l,"stroke-width","1.2"),i(l,"stroke-linejoin","round"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"width",r[2]),i(e,"height",r[2]),i(e,"viewBox",o="0 0 "+r[2]+" "+r[2]),i(e,"fill","none")},m(u,f){y(u,e,f),d(e,t),d(e,s),d(e,n),d(e,l)},p(u,[f]){f&2&&i(t,"stroke",u[1]),f&2&&i(s,"stroke",u[1]),f&1&&i(n,"fill",u[0]),f&2&&i(l,"stroke",u[1]),f&4&&i(e,"width",u[2]),f&4&&i(e,"height",u[2]),f&4&&o!==(o="0 0 "+u[2]+" "+u[2])&&i(e,"viewBox",o)},i:Y,o:Y,d(u){u&&c(e)}}}function Cs(r,e,t){let s,{fill:n="#FF4F1E"}=e,{stroke:l="#FF4F1E"}=e,{length:o="1.5"}=e;return r.$$set=u=>{"fill"in u&&t(0,n=u.fill),"stroke"in u&&t(1,l=u.stroke),"length"in u&&t(3,o=u.length)},r.$$.update=()=>{r.$$.dirty&8&&t(2,s=gs(o))},[n,l,s,o]}class $s extends zt{constructor(e){super(),Lt(this,e,Cs,ws,at,{fill:0,stroke:1,length:3})}}function Pt(r,e,t){const s=r.slice();return s[34]=e[t],s[36]=t,s}function jt(r,e,t){const s=r.slice();return s[37]=e[t],s[36]=t,s}function Vt(r){let e,t,s,n,l,o,u,f,k,w,p;return document.title=e=`블루닷 - ${r[0].unique_name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`,{c(){t=x(),s=_("meta"),l=x(),o=_("meta"),f=x(),k=_("meta"),w=x(),p=_("meta"),this.h()},l(m){t=A(m),s=g(m,"META",{property:!0,content:!0}),l=A(m),o=g(m,"META",{property:!0,content:!0}),f=A(m),k=g(m,"META",{property:!0,content:!0}),w=A(m),p=g(m,"META",{property:!0,content:!0}),this.h()},h(){i(s,"property","og:title"),i(s,"content",n=`블루닷${r[0].unique_name?` - ${r[0].unique_name} 님 계정`:""}`),i(o,"property","og:description"),i(o,"content",u=r[0].unique_name?`사용자 ${r[0].unique_name} 님의 계정`:"사람과 장소 그리고 순간을 의미 있게 만들다"),i(k,"property","og:image"),i(k,"content",ls),i(p,"property","og:image:alt"),i(p,"content","bluedot logo")},m(m,b){y(m,t,b),y(m,s,b),y(m,l,b),y(m,o,b),y(m,f,b),y(m,k,b),y(m,w,b),y(m,p,b)},p(m,b){b[0]&1&&e!==(e=`블루닷 - ${m[0].unique_name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`)&&(document.title=e),b[0]&1&&n!==(n=`블루닷${m[0].unique_name?` - ${m[0].unique_name} 님 계정`:""}`)&&i(s,"content",n),b[0]&1&&u!==(u=m[0].unique_name?`사용자 ${m[0].unique_name} 님의 계정`:"사람과 장소 그리고 순간을 의미 있게 만들다")&&i(o,"content",u)},d(m){m&&(c(t),c(s),c(l),c(o),c(f),c(k),c(w),c(p))}}}function Es(r){let e,t,s,n,l,o,u,f,k;return s=new ps({props:{width:"24",height:"24"}}),o=new ds({}),{c(){e=_("div"),t=_("button"),F(s.$$.fragment),n=x(),l=_("button"),F(o.$$.fragment),this.h()},l(w){e=g(w,"DIV",{class:!0});var p=C(e);t=g(p,"BUTTON",{});var m=C(t);U(s.$$.fragment,m),m.forEach(c),n=A(p),l=g(p,"BUTTON",{});var b=C(l);U(o.$$.fragment,b),b.forEach(c),p.forEach(c),this.h()},h(){i(e,"class","flex items-center gap-2")},m(w,p){y(w,e,p),d(e,t),z(s,t,null),d(e,n),d(e,l),z(o,l,null),u=!0,f||(k=[R(t,"click",r[16]),R(l,"click",r[17])],f=!0)},p:Y,i(w){u||(O(s.$$.fragment,w),O(o.$$.fragment,w),u=!0)},o(w){N(s.$$.fragment,w),N(o.$$.fragment,w),u=!1},d(w){w&&c(e),L(s),L(o),f=!1,it(k)}}}function Is(r){let e,t,s=Es(r);return{c(){s&&s.c(),e=Ke()},l(n){s&&s.l(n),e=Ke()},m(n,l){s&&s.m(n,l),y(n,e,l),t=!0},p(n,l){s.p(n,l)},i(n){t||(O(s),t=!0)},o(n){N(s),t=!1},d(n){n&&c(e),s&&s.d(n)}}}function xs(r){var l;let e,t,s=(((l=r[0].unique_name)==null?void 0:l.at(0))??"u")+"",n;return{c(){e=_("div"),t=_("span"),n=ae(s),this.h()},l(o){e=g(o,"DIV",{class:!0,style:!0});var u=C(e);t=g(u,"SPAN",{class:!0});var f=C(t);n=ie(f,s),f.forEach(c),u.forEach(c),this.h()},h(){i(t,"class","text-2xl font-semibold text-black"),i(e,"class","w-full h-full flex items-center justify-center"),yt(e,"background-color",Nt(r[0].unique_name))},m(o,u){y(o,e,u),d(e,t),d(t,n)},p(o,u){var f;u[0]&1&&s!==(s=(((f=o[0].unique_name)==null?void 0:f.at(0))??"u")+"")&&Ee(n,s),u[0]&1&&yt(e,"background-color",Nt(o[0].unique_name))},i:Y,o:Y,d(o){o&&c(e)}}}function As(r){let e,t;return e=new rs({props:{src:We(r[0].profile_image_url,500),width:"4.375rem",strokeWidth:"0"}}),{c(){F(e.$$.fragment)},l(s){U(e.$$.fragment,s)},m(s,n){z(e,s,n),t=!0},p(s,n){const l={};n[0]&1&&(l.src=We(s[0].profile_image_url,500)),e.$set(l)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function ys(r){let e;function t(l,o){return l[7]==!0?Ds:Ts}let s=t(r),n=s(r);return{c(){e=_("div"),n.c()},l(l){e=g(l,"DIV",{});var o=C(e);n.l(o),o.forEach(c)},m(l,o){y(l,e,o),n.m(e,null)},p(l,o){s===(s=t(l))&&n?n.p(l,o):(n.d(1),n=s(l),n&&(n.c(),n.m(e,null)))},d(l){l&&c(e),n.d()}}}function Ss(r){let e,t,s="프로필 편집",n,l;return{c(){e=_("div"),t=_("button"),t.textContent=s,this.h()},l(o){e=g(o,"DIV",{});var u=C(e);t=g(u,"BUTTON",{class:!0,"data-svelte-h":!0}),Ie(t)!=="svelte-19n2ifp"&&(t.textContent=s),u.forEach(c),this.h()},h(){i(t,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(o,u){y(o,e,u),d(e,t),n||(l=R(t,"click",r[20]),n=!0)},p:Y,d(o){o&&c(e),n=!1,l()}}}function Ts(r){let e,t,s="팔로우",n,l;return{c(){e=_("button"),t=_("div"),t.textContent=s,this.h()},l(o){e=g(o,"BUTTON",{class:!0});var u=C(e);t=g(u,"DIV",{"data-svelte-h":!0}),Ie(t)!=="svelte-1sbe5nn"&&(t.textContent=s),u.forEach(c),this.h()},h(){i(e,"class","w-full bg-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-white p-2.5 ")},m(o,u){y(o,e,u),d(e,t),n||(l=R(t,"click",r[22]),n=!0)},p:Y,d(o){o&&c(e),n=!1,l()}}}function Ds(r){let e,t="팔로잉",s,n;return{c(){e=_("button"),e.textContent=t,this.h()},l(l){e=g(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-18fzixz"&&(e.textContent=t),this.h()},h(){i(e,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(l,o){y(l,e,o),s||(n=R(e,"click",r[21]),s=!0)},p:Y,d(l){l&&c(e),s=!1,n()}}}function qt(r){let e,t,s;return{c(){e=_("img"),this.h()},l(n){e=g(n,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){i(e,"class","w-full h-full object-cover bg-[#D9D9D9] brightness-75"),St(e.src,t=We(r[37].image,500))||i(e,"src",t),i(e,"alt",s=r[37].name)},m(n,l){y(n,e,l)},p(n,l){l[0]&8&&!St(e.src,t=We(n[37].image,500))&&i(e,"src",t),l[0]&8&&s!==(s=n[37].name)&&i(e,"alt",s)},d(n){n&&c(e)}}}function Mt(r){let e,t,s,n=r[37].name+"",l,o,u=r[37].image,f,k,w,p=qt(r);function m(){return r[23](r[37])}return{c(){e=_("div"),t=_("div"),s=_("span"),l=ae(n),o=x(),p.c(),f=x(),this.h()},l(b){e=g(b,"DIV",{class:!0});var $=C(e);t=g($,"DIV",{class:!0});var S=C(t);s=g(S,"SPAN",{class:!0});var P=C(s);l=ie(P,n),P.forEach(c),o=A(S),p.l(S),S.forEach(c),f=A($),$.forEach(c),this.h()},h(){i(s,"class","absolute inset-0 flex items-center justify-center z-10 text-xs text-center font-medium leading-[1.125rem] tracking-[-0.0375rem] "),i(t,"class","relative w-full h-full rounded-full overflow-hidden border-4 border-white/15 "),i(e,"class","w-[4.875rem] h-[4.875rem] flex-shrink-0")},m(b,$){y(b,e,$),d(e,t),d(t,s),d(s,l),d(t,o),p.m(t,null),d(e,f),k||(w=R(t,"click",m),k=!0)},p(b,$){r=b,$[0]&8&&n!==(n=r[37].name+"")&&Ee(l,n),$[0]&8&&at(u,u=r[37].image)?(p.d(1),p=qt(r),p.c(),p.m(t,null)):p.p(r,$)},d(b){b&&c(e),p.d(b),k=!1,w()}}}function Ft(r){let e,t,s,n,l,o;t=new _s({props:{src:r[34].media[0],post:r[34],isThumbnail:!0,loading:"lazy",useThumbnailInVideo:bs,fetchpriority:r[36]<=9?"high":"low",imgSize:500}});function u(){return r[24](r[34])}return{c(){e=_("div"),F(t.$$.fragment),s=x(),this.h()},l(f){e=g(f,"DIV",{class:!0});var k=C(e);U(t.$$.fragment,k),s=A(k),k.forEach(c),this.h()},h(){i(e,"class","aspect-square overflow-hidden relative")},m(f,k){y(f,e,k),z(t,e,null),d(e,s),n=!0,l||(o=R(e,"click",u),l=!0)},p(f,k){r=f;const w={};k[0]&4&&(w.src=r[34].media[0]),k[0]&4&&(w.post=r[34]),t.$set(w)},i(f){n||(O(t.$$.fragment,f),n=!0)},o(f){N(t.$$.fragment,f),n=!1},d(f){f&&c(e),L(t),l=!1,o()}}}function Os(r){let e,t;return e=new ns({}),{c(){F(e.$$.fragment)},l(s){U(e.$$.fragment,s)},m(s,n){z(e,s,n),t=!0},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function Bs(r){let e,t,s,n,l,o,u,f,k,w,p;return s=new ms({props:{length:1.5,fill:"white"}}),u=new $s({}),{c(){e=_("div"),t=_("button"),F(s.$$.fragment),n=ae(`
      링크 복사`),l=x(),o=_("button"),F(u.$$.fragment),f=ae(`
      계정 신고하기`),this.h()},l(m){e=g(m,"DIV",{class:!0});var b=C(e);t=g(b,"BUTTON",{class:!0});var $=C(t);U(s.$$.fragment,$),n=ie($,`
      링크 복사`),$.forEach(c),l=A(b),o=g(b,"BUTTON",{class:!0});var S=C(o);U(u.$$.fragment,S),f=ie(S,`
      계정 신고하기`),S.forEach(c),b.forEach(c),this.h()},h(){i(t,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),i(o,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),i(e,"class","px-5")},m(m,b){y(m,e,b),d(e,t),z(s,t,null),d(t,n),d(e,l),d(e,o),z(u,o,null),d(o,f),k=!0,w||(p=[R(t,"click",r[26]),R(o,"click",r[13])],w=!0)},p:Y,i(m){k||(O(s.$$.fragment,m),O(u.$$.fragment,m),k=!0)},o(m){N(s.$$.fragment,m),N(u.$$.fragment,m),k=!1},d(m){m&&c(e),L(s),L(u),w=!1,it(p)}}}function Ns(r){let e,t,s,n,l,o,u,f,k,w,p,m,b,$,S,P,H=r[2].length+"",ue,ce,G,qe="포스트",fe,V,ee,be,xe,K,Me="팔로워",Ae,q,te,ve,ye,W,Fe="팔로잉",Se,h,D,se=r[0].unique_name+"",Te,ke,me,Xe,we,de,Qe,he,Ye,De,et,pe,Ue,ze,X,tt,Le,Q,st,re,rt,ut,j=r[0].idx&&Vt(r);o=new ss({props:{position:"static",leftLogo:Gt,leftBack:"white",backgroundColor:"bg-black",$$slots:{right:[Is]},$$scope:{ctx:r}}});const ct=[As,xs],le=[];function ft(a,v){return a[0].profile_image_url?0:1}p=ft(r),m=le[p]=ct[p](r);function mt(a,v){return a[6]?Ss:ys}let Re=mt(r),M=Re(r),Ce=Ge(r[3]),B=[];for(let a=0;a<Ce.length;a+=1)B[a]=Mt(jt(r,Ce,a));let _e=Ge(r[2]),T=[];for(let a=0;a<_e.length;a+=1)T[a]=Ft(Pt(r,_e,a));const Rt=a=>N(T[a],1,1,()=>{T[a]=null});pe=new os({});let Z=Os();function Ht(a){r[27](a)}let dt={fixed:!0,noHandle:!0,$$slots:{default:[Bs]},$$scope:{ctx:r}};r[9]!==void 0&&(dt.isOpen=r[9]),X=new hs({props:dt}),ot.push(()=>Dt(X,"isOpen",Ht));function Zt(a){r[28](a)}let ht={};return r[11]!==void 0&&(ht.isOpen=r[11]),Q=new ks({props:ht}),ot.push(()=>Dt(Q,"isOpen",Zt)),{c(){j&&j.c(),e=Ke(),t=x(),s=_("div"),n=x(),l=_("div"),F(o.$$.fragment),u=x(),f=_("section"),k=_("div"),w=_("div"),m.c(),b=x(),$=_("div"),S=_("div"),P=_("span"),ue=ae(H),ce=x(),G=_("span"),G.textContent=qe,fe=x(),V=_("div"),ee=_("span"),be=ae(r[4]),xe=x(),K=_("span"),K.textContent=Me,Ae=x(),q=_("div"),te=_("span"),ve=ae(r[5]),ye=x(),W=_("span"),W.textContent=Fe,Se=x(),h=_("section"),D=_("span"),Te=ae(se),ke=x(),me=_("section"),M.c(),Xe=x(),we=_("section"),de=_("div");for(let a=0;a<B.length;a+=1)B[a].c();Qe=x(),he=_("div");for(let a=0;a<T.length;a+=1)T[a].c();Ye=x(),De=_("div"),et=x(),F(pe.$$.fragment),Ue=x(),Z&&Z.c(),ze=x(),F(X.$$.fragment),Le=x(),F(Q.$$.fragment),this.h()},l(a){const v=Wt("svelte-9hxaoi",document.head);j&&j.l(v),e=Ke(),v.forEach(c),t=A(a),s=g(a,"DIV",{class:!0}),C(s).forEach(c),n=A(a),l=g(a,"DIV",{class:!0});var I=C(l);U(o.$$.fragment,I),u=A(I),f=g(I,"SECTION",{class:!0});var ne=C(f);k=g(ne,"DIV",{class:!0});var $e=C(k);w=g($e,"DIV",{class:!0});var Oe=C(w);m.l(Oe),Oe.forEach(c),$e.forEach(c),b=A(ne),$=g(ne,"DIV",{class:!0});var E=C($);S=g(E,"DIV",{class:!0});var J=C(S);P=g(J,"SPAN",{class:!0});var pt=C(P);ue=ie(pt,H),pt.forEach(c),ce=A(J),G=g(J,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(G)!=="svelte-13hqbuq"&&(G.textContent=qe),J.forEach(c),fe=A(E),V=g(E,"DIV",{class:!0});var He=C(V);ee=g(He,"SPAN",{class:!0});var _t=C(ee);be=ie(_t,r[4]),_t.forEach(c),xe=A(He),K=g(He,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(K)!=="svelte-1nb7yum"&&(K.textContent=Me),He.forEach(c),Ae=A(E),q=g(E,"DIV",{class:!0});var Ze=C(q);te=g(Ze,"SPAN",{class:!0});var gt=C(te);ve=ie(gt,r[5]),gt.forEach(c),ye=A(Ze),W=g(Ze,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(W)!=="svelte-ugas5h"&&(W.textContent=Fe),Ze.forEach(c),E.forEach(c),ne.forEach(c),Se=A(I),h=g(I,"SECTION",{class:!0});var bt=C(h);D=g(bt,"SPAN",{class:!0});var vt=C(D);Te=ie(vt,se),vt.forEach(c),bt.forEach(c),ke=A(I),me=g(I,"SECTION",{class:!0});var kt=C(me);M.l(kt),kt.forEach(c),Xe=A(I),we=g(I,"SECTION",{class:!0});var wt=C(we);de=g(wt,"DIV",{class:!0});var Ct=C(de);for(let ge=0;ge<B.length;ge+=1)B[ge].l(Ct);Ct.forEach(c),wt.forEach(c),Qe=A(I),he=g(I,"DIV",{class:!0});var $t=C(he);for(let ge=0;ge<T.length;ge+=1)T[ge].l($t);$t.forEach(c),Ye=A(I),De=g(I,"DIV",{}),C(De).forEach(c),et=A(I),U(pe.$$.fragment,I),I.forEach(c),Ue=A(a),Z&&Z.l(a),ze=A(a),U(X.$$.fragment,a),Le=A(a),U(Q.$$.fragment,a),this.h()},h(){i(s,"class","fixed w-full h-full bg-black -z-10"),i(w,"class","w-[4.375rem] h-[4.375rem] rounded-full overflow-hidden"),i(k,"class","flex flex-col gap-2 items-center"),i(P,"class","text-[0.8125rem] font-semibold"),i(G,"class","text-xs"),i(S,"class","flex flex-col items-center"),i(ee,"class","text-[0.8125rem] font-semibold"),i(K,"class","text-xs"),i(V,"class","flex flex-col items-center"),i(te,"class","text-[0.8125rem] font-semibold"),i(W,"class","text-xs"),i(q,"class","flex flex-col items-center"),i($,"class","flex gap-8 justify-start"),i(f,"class","flex px-5 pt-3.5 gap-6 items-center"),i(D,"class","text-sm font-medium"),i(h,"class","mt-[1.125rem] px-5"),i(me,"class","px-5 pt-[0.88rem]"),i(de,"class","flex overflow-x-auto space-x-5 px-5 pb-[1.5rem]"),i(we,"class","mt-[1.69rem]"),i(he,"class","grid grid-cols-3 gap-[0.19rem]"),i(l,"class","w-full h-full text-white")},m(a,v){j&&j.m(document.head,null),d(document.head,e),y(a,t,v),y(a,s,v),y(a,n,v),y(a,l,v),z(o,l,null),d(l,u),d(l,f),d(f,k),d(k,w),le[p].m(w,null),d(f,b),d(f,$),d($,S),d(S,P),d(P,ue),d(S,ce),d(S,G),d($,fe),d($,V),d(V,ee),d(ee,be),d(V,xe),d(V,K),d($,Ae),d($,q),d(q,te),d(te,ve),d(q,ye),d(q,W),d(l,Se),d(l,h),d(h,D),d(D,Te),d(l,ke),d(l,me),M.m(me,null),d(l,Xe),d(l,we),d(we,de);for(let I=0;I<B.length;I+=1)B[I]&&B[I].m(de,null);d(l,Qe),d(l,he);for(let I=0;I<T.length;I+=1)T[I]&&T[I].m(he,null);d(l,Ye),d(l,De),r[25](De),d(l,et),z(pe,l,null),y(a,Ue,v),Z&&Z.m(a,v),y(a,ze,v),z(X,a,v),y(a,Le,v),z(Q,a,v),re=!0,rt||(ut=[R(V,"click",r[18]),R(q,"click",r[19])],rt=!0)},p(a,v){a[0].idx?j?j.p(a,v):(j=Vt(a),j.c(),j.m(e.parentNode,e)):j&&(j.d(1),j=null);const I={};v[0]&578|v[1]&256&&(I.$$scope={dirty:v,ctx:a}),o.$set(I);let ne=p;if(p=ft(a),p===ne?le[p].p(a,v):(Bt(),N(le[ne],1,1,()=>{le[ne]=null}),Ot(),m=le[p],m?m.p(a,v):(m=le[p]=ct[p](a),m.c()),O(m,1),m.m(w,null)),(!re||v[0]&4)&&H!==(H=a[2].length+"")&&Ee(ue,H),(!re||v[0]&16)&&Ee(be,a[4]),(!re||v[0]&32)&&Ee(ve,a[5]),(!re||v[0]&1)&&se!==(se=a[0].unique_name+"")&&Ee(Te,se),Re===(Re=mt(a))&&M?M.p(a,v):(M.d(1),M=Re(a),M&&(M.c(),M.m(me,null))),v[0]&8){Ce=Ge(a[3]);let E;for(E=0;E<Ce.length;E+=1){const J=jt(a,Ce,E);B[E]?B[E].p(J,v):(B[E]=Mt(J),B[E].c(),B[E].m(de,null))}for(;E<B.length;E+=1)B[E].d(1);B.length=Ce.length}if(v[0]&4103){_e=Ge(a[2]);let E;for(E=0;E<_e.length;E+=1){const J=Pt(a,_e,E);T[E]?(T[E].p(J,v),O(T[E],1)):(T[E]=Ft(J),T[E].c(),O(T[E],1),T[E].m(he,null))}for(Bt(),E=_e.length;E<T.length;E+=1)Rt(E);Ot()}const $e={};v[0]&512|v[1]&256&&($e.$$scope={dirty:v,ctx:a}),!tt&&v[0]&512&&(tt=!0,$e.isOpen=a[9],It(()=>tt=!1)),X.$set($e);const Oe={};!st&&v[0]&2048&&(st=!0,Oe.isOpen=a[11],It(()=>st=!1)),Q.$set(Oe)},i(a){if(!re){O(o.$$.fragment,a),O(m);for(let v=0;v<_e.length;v+=1)O(T[v]);O(pe.$$.fragment,a),O(Z),O(X.$$.fragment,a),O(Q.$$.fragment,a),re=!0}},o(a){N(o.$$.fragment,a),N(m),T=T.filter(Boolean);for(let v=0;v<T.length;v+=1)N(T[v]);N(pe.$$.fragment,a),N(Z),N(X.$$.fragment,a),N(Q.$$.fragment,a),re=!1},d(a){a&&(c(t),c(s),c(n),c(l),c(Ue),c(ze),c(Le)),j&&j.d(a),c(e),L(o),le[p].d(),M.d(),xt(B,a),xt(T,a),r[25](null),L(pe),Z&&Z.d(a),L(X,a),L(Q,a),rt=!1,it(ut)}}}let Ut=24;function Ps(r,e,t){let s,n;At(r,ts,h=>t(1,s=h)),At(r,Et,h=>t(12,n=h));let{data:l}=e,o=l.user??{},u=l.posts??[],f=l.boxes??[],k=0,w=0,p=!1,m=!1,b=je(),$=!1,S=!1,P,H,ue=24,ce=!1;async function G(){var h;if(o.idx)try{const D=nt(),se=await fetch(`${Ve}/posts?userIdx=${o.idx}&offset=${ue}&limit=${Ut}`,{headers:{Authorization:`Bearer ${D}`}});if(!se.ok)return;const ke=((h=(await se.json()).data)==null?void 0:h.posts)??[];ke.length>0?(t(2,u=u.concat(ke)),ue+=Ut):H.unobserve(P)}catch{}}Xt(()=>{H=new IntersectionObserver(h=>{h[0].isIntersecting&&G()},{rootMargin:"10%"}),H.observe(P)}),Qt(()=>H.unobserve(P));function qe(){fetch(`${Ve}/auth/followers?targetTable=users&subjectTable=users&subjectIdx=${s.params.idx}`).then(h=>h.json()).then(h=>{t(5,w=h.data.length)})}let fe=!1;async function V(){if(window.confirm("계정을 신고하시겠어요?")&&!fe){fe=!0,Be.emit("loading",!0);try{const D=new URL(`${Ve}/auth/permissions`);D.searchParams.set("targetTable","users"),D.searchParams.set("targetIdx",s.params.idx),D.searchParams.set("relation","reported"),D.searchParams.set("subjectTable","users"),D.searchParams.set("subjectIdx",Jt().sub),D.searchParams.set("metadata",JSON.stringify({text:"계정 신고",value:"account"})),t(9,S=!1),await fetch(D,{method:"PUT",headers:{Authorization:`Bearer ${nt()}`}}),Be.emit("pushSnackbar",{message:"신고가 접수되었습니다."})}catch(D){throw Be.emit("pushSnackbar",{message:"신고에 실패했습니다."}),D}finally{fe=!1,Be.emit("loading",!1)}}}const ee=async()=>{await oe("/search")},be=()=>{p?oe(`/users/${s.params.idx}/setting`):t(9,S=!0)},xe=async()=>{const h=`/users/${s.params.idx}/followers?tab=followers`;console.log(h),await oe(h)},K=async()=>{const h=`/users/${s.params.idx}/followers?tab=followings`;console.log(h),await oe(h)},Me=async()=>{await oe(`/users/${s.params.idx}/setting/profile`)},Ae=async()=>{$||(t(8,$=!0),await us({targetIdx:s.params.idx,subjectIdx:je()}),t(7,m=!1),t(4,k-=1),t(8,$=!1))},q=async()=>{const h=je();if(!h){Be.emit("showSignInModal");return}$||(t(8,$=!0),await cs({targetIdx:s.params.idx,subjectIdx:h}),t(7,m=!0),t(4,k+=1),t(8,$=!1))},te=h=>{oe(`/boxes/${h.idx}`)},ve=async h=>{try{if((o==null?void 0:o.idx)===0)return;Yt(Et,n=u,n),await oe(`/viewer?userIdx=${s.params.idx}&postIdx=${h.idx}`,{replaceState:!1,invalidateAll:!1})}catch{}};function ye(h){ot[h?"unshift":"push"](()=>{P=h,t(10,P)})}const W=()=>{fs(`${location.pathname}${location.search}`),t(9,S=!1)};function Fe(h){S=h,t(9,S)}function Se(h){ce=h,t(11,ce)}return r.$$set=h=>{"data"in h&&t(14,l=h.data)},r.$$.update=()=>{if(r.$$.dirty[0]&49155&&l.user&&s.params.idx&&s.params.idx!=="0"&&(t(0,o=l.user),t(2,u=l.posts),t(3,f=l.boxes),t(15,b=je()),t(6,p=String(o==null?void 0:o.idx)===String(b)),as({targetIdx:s.params.idx}).then(h=>{t(4,k=h)}),qe(),b&&is({targetIdx:s.params.idx,subjectIdx:b}).then(h=>{t(7,m=h)})),r.$$.dirty[0]&16386&&!l.user&&s.params.idx==="0")try{vs({replace:"1"},{replace:!0})}catch{}},[o,s,u,f,k,w,p,m,$,S,P,ce,n,V,l,b,ee,be,xe,K,Me,Ae,q,te,ve,ye,W,Fe,Se]}class fr extends zt{constructor(e){super(),Lt(this,e,Ps,Ns,at,{data:14},null,[-1,-1])}}const js=async({params:r,fetch:e,depends:t,url:s})=>{var o;t("app:user");const n=je(),l=nt();if(r.idx==="0"&&n===null)return{};if(r.idx==="0"&&n!==null)return oe(`/users/${String(n)}`,{replaceState:s.searchParams.get("replace")==="1"});if(r.idx!=="0")try{const[u,f]=await Promise.all([e(`${Ve}/auth/users/${r.idx}`,{headers:{Authorization:`Bearer ${l}`}}),e(`${Ve}/posts?userIdx=${r.idx}&limit=24`,{headers:{Authorization:`Bearer ${l}`}})]);if(!u.ok||!f.ok)throw Je(500,"Failed to fetch data");const k=await u.json(),w=await f.json();let p=[];const m=String(n)===r.idx;if(m&&Tt(lt).length!==0)p=Tt(lt);else{const b=await es(l,r.idx);if(!b.ok)throw Je(500,"Failed to fetch data");const $=await b.json();m&&lt.set($.data),p=$.data}return Kt.set(!0),{user:{...k.data,idx:Number(r.idx)},posts:((o=w.data)==null?void 0:o.posts)??[],boxes:p}}catch{throw Je(500,"An error occurred while loading data")}throw Je(404,"Not found")},mr=Object.freeze(Object.defineProperty({__proto__:null,load:js},Symbol.toStringTag,{value:"Module"}));export{fr as component,mr as universal};
