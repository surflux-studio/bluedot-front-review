import{g as Q}from"../chunks/entry.BV8Inj_p.js";import{r as tt,A as st,b as nt}from"../chunks/units.BMbtY17E.js";import{s as F,L,M as R,b as C,f as _,q as u,i as P,h as x,n as B,m as W,a as E,g as S,p as X,k as lt,e as I,c as q,u as D,r as G,w as et}from"../chunks/scheduler.BjRrIjTN.js";import{S as J,i as K,e as Y,c as j,a as M,m as A,b as V,f as rt,t as $,d as N,g as it}from"../chunks/index.BlBwh9YZ.js";import{H as at}from"../chunks/Header.CwtuFZld.js";import{V as ot}from"../chunks/Viewer.CCnPqn87.js";/* empty css                                                   */import"../chunks/heic2any.eRqfWUXo.js";import"../chunks/store.gkSKwQRQ.js";/* empty css                                                     */import{p as ft}from"../chunks/stores.CoQzwfwp.js";import{N as ut}from"../chunks/NavigationBar.D6-_zM_F.js";import{A as ct}from"../chunks/ActionSheet.c2IPoY3q.js";/* empty css                                                   */import{M as dt}from"../chunks/Modal.B_7O17YL.js";function ht(l){let t,e;return{c(){t=L("svg"),e=L("path"),this.h()},l(s){t=R(s,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var n=C(t);e=R(n,"path",{d:!0}),C(e).forEach(_),n.forEach(_),this.h()},h(){u(e,"d","M200-200h57l391-391-57-57-391 391v57Zm-40 80q-17 0-28.5-11.5T120-160v-97q0-16 6-30.5t17-25.5l505-504q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L313-143q-11 11-25.5 17t-30.5 6h-97Zm600-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"viewBox","0 -960 960 960"),u(t,"width",l[1]),u(t,"height",l[1]),u(t,"fill",l[0])},m(s,n){P(s,t,n),x(t,e)},p(s,[n]){n&2&&u(t,"width",s[1]),n&2&&u(t,"height",s[1]),n&1&&u(t,"fill",s[0])},i:B,o:B,d(s){s&&_(t)}}}function mt(l,t,e){let s,{fill:n="#5f6368"}=t,{length:i="1.75"}=t,{alt:f="Edit"}=t;return l.$$set=o=>{"fill"in o&&e(0,n=o.fill),"length"in o&&e(2,i=o.length),"alt"in o&&e(3,f=o.alt)},l.$$.update=()=>{l.$$.dirty&4&&e(1,s=tt(i))},[n,s,i,f]}class pt extends J{constructor(t){super(),K(this,t,mt,ht,F,{fill:0,length:2,alt:3})}}function gt(l){let t,e;return{c(){t=L("svg"),e=L("path"),this.h()},l(s){t=R(s,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var n=C(t);e=R(n,"path",{d:!0}),C(e).forEach(_),n.forEach(_),this.h()},h(){u(e,"d","M280-120q-33 0-56.5-23.5T200-200v-520q-17 0-28.5-11.5T160-760q0-17 11.5-28.5T200-800h160q0-17 11.5-28.5T400-840h160q17 0 28.5 11.5T600-800h160q17 0 28.5 11.5T800-760q0 17-11.5 28.5T760-720v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM400-280q17 0 28.5-11.5T440-320v-280q0-17-11.5-28.5T400-640q-17 0-28.5 11.5T360-600v280q0 17 11.5 28.5T400-280Zm160 0q17 0 28.5-11.5T600-320v-280q0-17-11.5-28.5T560-640q-17 0-28.5 11.5T520-600v280q0 17 11.5 28.5T560-280ZM280-720v520-520Z"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"viewBox","0 -960 960 960"),u(t,"width",l[1]),u(t,"height",l[1]),u(t,"fill",l[0])},m(s,n){P(s,t,n),x(t,e)},p(s,[n]){n&2&&u(t,"width",s[1]),n&2&&u(t,"height",s[1]),n&1&&u(t,"fill",s[0])},i:B,o:B,d(s){s&&_(t)}}}function _t(l,t,e){let s,{fill:n="#5f6368"}=t,{length:i="1.75"}=t,{alt:f="Delete"}=t;return l.$$set=o=>{"fill"in o&&e(0,n=o.fill),"length"in o&&e(2,i=o.length),"alt"in o&&e(3,f=o.alt)},l.$$.update=()=>{l.$$.dirty&4&&e(1,s=tt(i))},[n,s,i,f]}class bt extends J{constructor(t){super(),K(this,t,_t,gt,F,{fill:0,length:2,alt:3})}}function vt(l){let t,e,s;return e=new ot({props:{posts:l[0]}}),{c(){t=I("div"),j(e.$$.fragment),this.h()},l(n){t=q(n,"DIV",{class:!0});var i=C(t);M(e.$$.fragment,i),i.forEach(_),this.h()},h(){u(t,"class","fixed top-0 left-0 w-full h-full")},m(n,i){P(n,t,i),A(e,t,null),s=!0},p(n,i){const f={};i&1&&(f.posts=n[0]),e.$set(f)},i(n){s||($(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){n&&_(t),N(e)}}}function xt(l){let t;return{c(){t=I("div"),this.h()},l(e){t=q(e,"DIV",{class:!0}),C(t).forEach(_),this.h()},h(){u(t,"class","bg-black w-screen h-screen")},m(e,s){P(e,t,s)},p:B,i:B,o:B,d(e){e&&_(t)}}}function wt(l){let t,e,s,n,i,f="수정",o,a,c,w,d,p="삭제",k,y,g;return s=new pt({props:{fill:"white",length:1.4}}),c=new bt({props:{fill:"red",length:1.4}}),{c(){t=I("div"),e=I("button"),j(s.$$.fragment),n=E(),i=I("span"),i.textContent=f,o=E(),a=I("button"),j(c.$$.fragment),w=E(),d=I("span"),d.textContent=p,this.h()},l(h){t=q(h,"DIV",{class:!0});var b=C(t);e=q(b,"BUTTON",{class:!0});var T=C(e);M(s.$$.fragment,T),n=S(T),i=q(T,"SPAN",{"data-svelte-h":!0}),D(i)!=="svelte-17aljrl"&&(i.textContent=f),T.forEach(_),o=S(b),a=q(b,"BUTTON",{class:!0});var O=C(a);M(c.$$.fragment,O),w=S(O),d=q(O,"SPAN",{"data-svelte-h":!0}),D(d)!=="svelte-1k1dgz"&&(d.textContent=p),O.forEach(_),b.forEach(_),this.h()},h(){u(e,"class","w-full py-3 flex items-center gap-2 justify-center text-base font-medium tracking-wider text-white rounded-t-xl bg-[#3335] border-b border-[#333] border-collapse"),u(a,"class","w-full py-3 flex items-center gap-2 justify-center text-base font-medium tracking-wider text-[red] rounded-b-xl bg-[#3336] border-t border-[#333] border-collapse"),u(t,"class","flex flex-col items-center px-6 py-4")},m(h,b){P(h,t,b),x(t,e),A(s,e,null),x(e,n),x(e,i),x(t,o),x(t,a),A(c,a,null),x(a,w),x(a,d),k=!0,y||(g=[G(e,"click",l[14]),G(a,"click",l[15])],y=!0)},p:B,i(h){k||($(s.$$.fragment,h),$(c.$$.fragment,h),k=!0)},o(h){V(s.$$.fragment,h),V(c.$$.fragment,h),k=!1},d(h){h&&_(t),N(s),N(c),y=!1,et(g)}}}function kt(l){let t,e,s="정말로 삭제하시겠습니까?",n,i,f="이 작업은 취소할 수 없습니다. 계속 진행하시겠습니까?",o,a,c,w="삭제",d,p,k="취소",y,g;return{c(){t=I("div"),e=I("h2"),e.textContent=s,n=E(),i=I("p"),i.textContent=f,o=E(),a=I("div"),c=I("button"),c.textContent=w,d=E(),p=I("button"),p.textContent=k,this.h()},l(h){t=q(h,"DIV",{class:!0});var b=C(t);e=q(b,"H2",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-1yzhdkj"&&(e.textContent=s),n=S(b),i=q(b,"P",{class:!0,"data-svelte-h":!0}),D(i)!=="svelte-26p028"&&(i.textContent=f),o=S(b),a=q(b,"DIV",{class:!0});var T=C(a);c=q(T,"BUTTON",{class:!0,"data-svelte-h":!0}),D(c)!=="svelte-1q4epan"&&(c.textContent=w),d=S(T),p=q(T,"BUTTON",{class:!0,"data-svelte-h":!0}),D(p)!=="svelte-1rzg9yy"&&(p.textContent=k),T.forEach(_),b.forEach(_),this.h()},h(){u(e,"class","text-lg font-semibold mb-2"),u(i,"class","text-gray-600 mb-4"),u(c,"class","bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition"),u(p,"class","bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition"),u(a,"class","flex justify-center space-x-4"),u(t,"class","text-center")},m(h,b){P(h,t,b),x(t,e),x(t,n),x(t,i),x(t,o),x(t,a),x(a,c),x(a,d),x(a,p),y||(g=[G(c,"click",l[17]),G(p,"click",l[18])],y=!0)},p:B,d(h){h&&_(t),y=!1,et(g)}}}function Tt(l){let t,e,s,n,i,f,o,a,c,w,d,p,k;t=new at({props:{position:"fixed",leftBack:l[5]?"":"white",rightSearch:"white",rightPostSetting:{visible:l[4],fill:"white",onClick:l[13]}}});const y=[xt,vt],g=[];function h(r,m){return r[0].length===0?0:1}s=h(l),n=g[s]=y[s](l),f=new ut({});function b(r){l[16](r)}let T={defaultHeight:16*16,maxHeight:16*16,$$slots:{default:[wt]},$$scope:{ctx:l}};l[1]!==void 0&&(T.isOpen=l[1]),a=new ct({props:T}),W.push(()=>Y(a,"isOpen",b));function O(r){l[19](r)}let U={$$slots:{default:[kt]},$$scope:{ctx:l}};return l[2]!==void 0&&(U.modalVisible=l[2]),d=new dt({props:U}),W.push(()=>Y(d,"modalVisible",O)),{c(){j(t.$$.fragment),e=E(),n.c(),i=E(),j(f.$$.fragment),o=E(),j(a.$$.fragment),w=E(),j(d.$$.fragment)},l(r){M(t.$$.fragment,r),e=S(r),n.l(r),i=S(r),M(f.$$.fragment,r),o=S(r),M(a.$$.fragment,r),w=S(r),M(d.$$.fragment,r)},m(r,m){A(t,r,m),P(r,e,m),g[s].m(r,m),P(r,i,m),A(f,r,m),P(r,o,m),A(a,r,m),P(r,w,m),A(d,r,m),k=!0},p(r,[m]){const z={};m&32&&(z.leftBack=r[5]?"":"white"),m&18&&(z.rightPostSetting={visible:r[4],fill:"white",onClick:r[13]}),t.$set(z);let H=s;s=h(r),s===H?g[s].p(r,m):(it(),V(g[H],1,1,()=>{g[H]=null}),rt(),n=g[s],n?n.p(r,m):(n=g[s]=y[s](r),n.c()),$(n,1),n.m(i.parentNode,i));const v={};m&8388622&&(v.$$scope={dirty:m,ctx:r}),!c&&m&2&&(c=!0,v.isOpen=r[1],X(()=>c=!1)),a.$set(v);const Z={};m&8388612&&(Z.$$scope={dirty:m,ctx:r}),!p&&m&4&&(p=!0,Z.modalVisible=r[2],X(()=>p=!1)),d.$set(Z)},i(r){k||($(t.$$.fragment,r),$(n),$(f.$$.fragment,r),$(a.$$.fragment,r),$(d.$$.fragment,r),k=!0)},o(r){V(t.$$.fragment,r),V(n),V(f.$$.fragment,r),V(a.$$.fragment,r),V(d.$$.fragment,r),k=!1},d(r){r&&(_(e),_(i),_(o),_(w)),N(t,r),g[s].d(r),N(f,r),N(a,r),N(d,r)}}}function It(l,t,e){let s,n,i,f,o,a,c,w,d;lt(l,ft,v=>e(12,d=v));let{data:p}=t,k=p.tokenIdx,y=p.token,g=!1,h=!1;function b(){fetch(`${st}/posts/${f}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`}}).then(v=>v.json()).then(()=>Q(`/users/${k}`,{replaceState:!0,invalidateAll:!0}))}const T=()=>{e(1,g=!0)},O=()=>{e(1,g=!1),Q(`/viewer/edit?type=patch&postIdx=${f}`,{replaceState:!1,invalidateAll:!1})},U=()=>{e(1,g=!1),e(2,h=!0)};function r(v){g=v,e(1,g)}const m=()=>{b(),e(2,h=!1)},z=()=>{e(2,h=!1)};function H(v){h=v,e(2,h)}return l.$$set=v=>{"data"in v&&e(7,p=v.data)},l.$$.update=()=>{var v,Z;l.$$.dirty&128&&e(0,s=p.posts),l.$$.dirty&4096&&e(10,n=d.url.searchParams.get("placeIdx")),l.$$.dirty&4096&&e(9,i=d.url.searchParams.get("userIdx")),l.$$.dirty&4096&&e(11,a=d.url.searchParams.get("pidx")),l.$$.dirty&2049&&e(3,f=(v=s[a])==null?void 0:v.idx),l.$$.dirty&2049&&e(8,o=(Z=s[a])==null?void 0:Z.user_idx),l.$$.dirty&4096&&d.url.searchParams.get("midx"),l.$$.dirty&1536&&e(5,c=!n&&!i),l.$$.dirty&256&&e(4,w=String(k)===String(o))},[s,g,h,f,w,c,b,p,o,i,n,a,d,T,O,U,r,m,z,H]}class zt extends J{constructor(t){super(),K(this,t,It,Tt,F,{data:7})}}const qt=async({fetch:l,url:t})=>{console.warn("viewer/+page.ts load");const e=sessionStorage.getItem("jwt"),s=nt(),n=t.searchParams.get("placeIdx"),i=t.searchParams.get("userIdx"),f=n?`&placeIdx=${n}`:"",o=i?`&userIdx=${i}`:"";return{posts:await l(`https://azit.surflux.studio/posts?${f}${o}&limit=30`,{method:"GET",headers:{Authorization:"Bearer "+e}}).then(c=>c.json()).then(c=>c.data.map(w=>({...w,mediaIdx:0})))||[],tokenIdx:s,token:e}},Ht=Object.freeze(Object.defineProperty({__proto__:null,load:qt},Symbol.toStringTag,{value:"Module"}));export{zt as component,Ht as universal};
