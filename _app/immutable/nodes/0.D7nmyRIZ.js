import{n as z,p as re,l as ie,s as ae,c as V,D as B,o as me,a as pe,h as he,u as _e,i as ge,j as be}from"../chunks/scheduler.mTkvHAFM.js";import{I as we,J as ye,K as ke,L as ve,S as le,i as ce,q as C,g as M,w as D,u as W,n as k,o as $,d as y,e as X,t as J,s as N,c as I,a as P,b as G,f as O,r as L,h as T,C as Le,j as H,M as $e,k as j,l as ue,m as A,p as K,E as Se,v as q,x as Q}from"../chunks/index.DrH1dKcj.js";import{e as R,u as xe,f as Ee}from"../chunks/each.DrVQ7EeR.js";import{w as Te,p as Z}from"../chunks/entry.jdavMpDZ.js";import{e as Me,a as Xe,b as Ie,s as Pe}from"../chunks/store.BxWZvLVq.js";import{S as w}from"../chunks/constants.bFPGP2yY.js";import{p as Ce}from"../chunks/stores.BgOxvm63.js";import{P as De}from"../chunks/_page.B2Qy38TF.js";import{component as We}from"./8.BlGWwHaq.js";import{component as Be}from"./14.BUlbpZY9.js";import{component as qe}from"./3.DgCcRWsX.js";function ze(a,e,s,n){if(!e)return z;const t=a.getBoundingClientRect();if(e.left===t.left&&e.right===t.right&&e.top===t.top&&e.bottom===t.bottom)return z;const{delay:i=0,duration:r=300,easing:l=re,start:o=we()+i,end:c=o+r,tick:u=z,css:f}=s(a,{from:e,to:t},n);let h=!0,p=!1,_;function S(){f&&(_=ke(a,0,1,r,i,l,f)),i||(p=!0)}function v(){f&&ve(a,_),h=!1}return ye(g=>{if(!p&&g>=o&&(p=!0),p&&g>=c&&(u(1,0),v()),!h)return!1;if(p){const E=g-o,m=0+1*l(E/r);u(m,1-m)}return!0}),S(),u(0,1),v}function Ne(a){const e=getComputedStyle(a);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:s,height:n}=e,t=a.getBoundingClientRect();a.style.position="absolute",a.style.width=s,a.style.height=n,fe(a,t)}}function fe(a,e){const s=a.getBoundingClientRect();if(e.left!==s.left||e.top!==s.top){const n=getComputedStyle(a),t=n.transform==="none"?"":n.transform;a.style.transform=`${t} translate(${e.left-s.left}px, ${e.top-s.top}px)`}}const Oe=!1,Re="auto",Ve=a=>{if(console.log(a.route.id),a.route.id!==null)return{route:a.route.id==="/"?"/viewer":a.route.id}},dt=Object.freeze(Object.defineProperty({__proto__:null,load:Ve,prerender:Re,ssr:Oe},Symbol.toStringTag,{value:"Module"}));function je(a){const e=a-1;return e*e*e+1}function Ae(a,{delay:e=0,duration:s=400,easing:n=re}={}){const t=+getComputedStyle(a).opacity;return{delay:e,duration:s,easing:n,css:i=>`opacity: ${i*t}`}}function Ke(a,{from:e,to:s},n={}){const t=getComputedStyle(a),i=t.transform==="none"?"":t.transform,[r,l]=t.transformOrigin.split(" ").map(parseFloat),o=e.left+e.width*r/s.width-(s.left+r),c=e.top+e.height*l/s.height-(s.top+l),{delay:u=0,duration:f=p=>Math.sqrt(p)*120,easing:h=je}=n;return{delay:u,duration:ie(f)?f(Math.sqrt(o*o+c*c)):f,easing:h,css:(p,_)=>{const S=_*o,v=_*c,g=p+_*e.width/s.width,E=p+_*e.height/s.height;return`transform: ${i} translate(${S}px, ${v}px) scale(${g}, ${E});`}}}function ee(a,e,s){const n=a.slice();return n[5]=e[s],n[7]=s,n}function te(a,e){let s,n,t,i=e[5].message+"",r,l,o,c=(e[5].buttonText||U)+"",u,f,h,p,_,S,v=z,g,E,m;return{key:a,first:null,c(){s=X("div"),n=X("div"),t=X("div"),r=J(i),l=N(),o=X("div"),u=J(c),h=N(),this.h()},l(d){s=I(d,"DIV",{class:!0,style:!0});var b=P(s);n=I(b,"DIV",{class:!0,style:!0});var x=P(n);t=I(x,"DIV",{class:!0});var Y=P(t);r=G(Y,i),Y.forEach(y),l=O(x),o=I(x,"DIV",{class:!0});var F=P(o);u=G(F,c),F.forEach(y),x.forEach(y),h=O(b),b.forEach(y),this.h()},h(){L(t,"class","text-white flex-grow"),L(o,"class","text-primary-300"),L(n,"class","flex bg-black p-[1.125rem]"),L(n,"style",f=`transform: scale(${1-.05*e[7]})`),L(s,"class","fixed bottom-24 w-full p-4"),L(s,"style",p=`z-index: ${80-e[7]}; transform: translateY(${-.3*e[7]}rem);`),this.first=s},m(d,b){M(d,s,b),T(s,n),T(n,t),T(t,r),T(n,l),T(n,o),T(o,u),T(s,h),g=!0,E||(m=Le(o,"click",function(){ie(e[5].callback)&&e[5].callback.apply(this,arguments)}),E=!0)},p(d,b){e=d,(!g||b&1)&&i!==(i=e[5].message+"")&&H(r,i),(!g||b&1)&&c!==(c=(e[5].buttonText||U)+"")&&H(u,c),(!g||b&1&&f!==(f=`transform: scale(${1-.05*e[7]})`))&&L(n,"style",f),(!g||b&1&&p!==(p=`z-index: ${80-e[7]}; transform: translateY(${-.3*e[7]}rem);`))&&L(s,"style",p)},r(){S=s.getBoundingClientRect()},f(){Ne(s),v(),fe(s,S)},a(){v(),v=ze(s,S,Ke,{})},i(d){g||(_&&_.end(1),g=!0)},o(d){d&&(_=$e(s,Ae,{duration:300})),g=!1},d(d){d&&y(s),d&&_&&_.end(),E=!1,m()}}}function Ue(a){let e=[],s=new Map,n,t,i=R(a[0]);const r=l=>l[5].uuid;for(let l=0;l<i.length;l+=1){let o=ee(a,i,l),c=r(o);s.set(c,e[l]=te(c,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=C()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);n=C()},m(l,o){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(l,o);M(l,n,o),t=!0},p(l,[o]){if(o&1){i=R(l[0]),D();for(let c=0;c<e.length;c+=1)e[c].r();e=xe(e,o,r,1,l,i,s,n.parentNode,Ee,te,n,ee);for(let c=0;c<e.length;c+=1)e[c].a();W()}},i(l){if(!t){for(let o=0;o<i.length;o+=1)k(e[o]);t=!0}},o(l){for(let o=0;o<e.length;o+=1)$(e[o]);t=!1},d(l){l&&y(n);for(let o=0;o<e.length;o+=1)e[o].d(l)}}}const Ye=5e3,Fe=!1,U="닫기";function Je(a,e,s){let n;const t=()=>{clearTimeout(r),B(i,n=n.slice(1),n)},i=Te([]);V(a,i,o=>s(0,n=o));let r;Me.on("pushSnackbar",l);function l(o){if(n.some(u=>u.uuid===o.uuid))return;const c={uuid:o.uuid||crypto.randomUUID(),message:o.message,urgent:o.urgent,keep:o.keep||Fe,duration:o.duration||Ye,buttonText:o.buttonText||U,callback:()=>{t();try{o.callback()}catch{}}};if(o.urgent){clearTimeout(r),B(i,n=[c,...n],n);return}B(i,n=[...n,c],n)}return a.$$.update=()=>{if(a.$$.dirty&5&&n.length>0){const{duration:o,keep:c}=n[0];clearTimeout(r),c||s(2,r=setTimeout(()=>{B(i,n=n.slice(1),n)},o))}},[n,i,r]}class Ge extends le{constructor(e){super(),ce(this,e,Je,Ue,ae,{})}}function de(){const a=window.innerWidth<=w.MobileS?w.MobileS:window.innerWidth<=w.MobileM?w.MobileM:window.innerWidth<=w.MobileL?w.MobileL:window.innerWidth<=w.Tablet?w.Tablet:window.innerWidth<=w.Laptop?w.Laptop:window.innerWidth<=w.LaptopL?w.LaptopL:w.FourK;Xe.set(a)}window.onresize=de;function ne(a,e,s){const n=a.slice();return n[16]=e[s],n[18]=s,n}function He(a){let e;const s=a[5].default,n=he(s,a,a[4],null);return{c(){n&&n.c()},l(t){n&&n.l(t)},m(t,i){n&&n.m(t,i),e=!0},p(t,i){n&&n.p&&(!e||i&16)&&_e(n,s,t,t[4],e?be(s,t[4],i,null):ge(t[4]),null)},i(t){e||(k(n,t),e=!0)},o(t){$(n,t),e=!1},d(t){n&&n.d(t)}}}function Qe(a){let e,s,n=R(a[0]),t=[];for(let r=0;r<n.length;r+=1)t[r]=se(ne(a,n,r));const i=r=>$(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=C()},l(r){for(let l=0;l<t.length;l+=1)t[l].l(r);e=C()},m(r,l){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,l);M(r,e,l),s=!0},p(r,l){if(l&7){n=R(r[0]);let o;for(o=0;o<n.length;o+=1){const c=ne(r,n,o);t[o]?(t[o].p(c,l),k(t[o],1)):(t[o]=se(c),t[o].c(),k(t[o],1),t[o].m(e.parentNode,e))}for(D(),o=n.length;o<t.length;o+=1)i(o);W()}},i(r){if(!s){for(let l=0;l<n.length;l+=1)k(t[l]);s=!0}},o(r){t=t.filter(Boolean);for(let l=0;l<t.length;l+=1)$(t[l]);s=!1},d(r){r&&y(e),Se(t,r)}}}function oe(a){let e,s,n;var t=a[16].component;function i(r,l){return{}}return t&&(e=Q(t,i())),{c(){e&&j(e.$$.fragment),s=C()},l(r){e&&ue(e.$$.fragment,r),s=C()},m(r,l){e&&A(e,r,l),M(r,s,l),n=!0},p(r,l){if(l&1&&t!==(t=r[16].component)){if(e){D();const o=e;$(o.$$.fragment,1,0,()=>{K(o,1)}),W()}t?(e=Q(t,i()),j(e.$$.fragment),k(e.$$.fragment,1),A(e,s.parentNode,s)):e=null}},i(r){n||(e&&k(e.$$.fragment,r),n=!0)},o(r){e&&$(e.$$.fragment,r),n=!1},d(r){r&&y(s),e&&K(e,r)}}}function se(a){let e,s,n,t=a[16].component&&a[16].isLoading&&oe(a);return{c(){e=X("div"),t&&t.c(),s=N(),this.h()},l(i){e=I(i,"DIV",{class:!0});var r=P(e);t&&t.l(r),s=O(r),r.forEach(y),this.h()},h(){L(e,"class","page svelte-1g77332"),q(e,"transform",a[1]),q(e,"left",`${(a[18]-a[2])*100}%`)},m(i,r){M(i,e,r),t&&t.m(e,null),T(e,s),n=!0},p(i,r){i[16].component&&i[16].isLoading?t?(t.p(i,r),r&1&&k(t,1)):(t=oe(i),t.c(),k(t,1),t.m(e,s)):t&&(D(),$(t,1,1,()=>{t=null}),W()),r&2&&q(e,"transform",i[1]),r&4&&q(e,"left",`${(i[18]-i[2])*100}%`)},i(i){n||(k(t),n=!0)},o(i){$(t),n=!1},d(i){i&&y(e),t&&t.d()}}}function Ze(a){let e,s,n,t,i,r;e=new Ge({});const l=[Qe,He],o=[];function c(u,f){return u[2]!==-1?0:1}return t=c(a),i=o[t]=l[t](a),{c(){j(e.$$.fragment),s=N(),n=X("main"),i.c(),this.h()},l(u){ue(e.$$.fragment,u),s=O(u),n=I(u,"MAIN",{id:!0,class:!0});var f=P(n);i.l(f),f.forEach(y),this.h()},h(){L(n,"id","page-container"),L(n,"class","w-screen min-h-screen overflow-visible")},m(u,f){A(e,u,f),M(u,s,f),M(u,n,f),o[t].m(n,null),r=!0},p(u,[f]){let h=t;t=c(u),t===h?o[t].p(u,f):(D(),$(o[h],1,1,()=>{o[h]=null}),W(),i=o[t],i?i.p(u,f):(i=o[t]=l[t](u),i.c()),k(i,1),i.m(n,null))},i(u){r||(k(e.$$.fragment,u),k(i),r=!0)},o(u){$(e.$$.fragment,u),$(i),r=!1},d(u){u&&(y(s),y(n)),K(e,u),o[t].d()}}}function et(a,e,s){let n,t,i;V(a,Pe,m=>s(8,t=m)),V(a,Ce,m=>s(9,i=m));let{$$slots:r={},$$scope:l}=e,{data:o}=e;const c=[{route:"/map",path:"/map",regex:/^\/map$/,component:We,isLoading:!1},{route:"/viewer",path:"/viewer",regex:/^\/(viewer)?$/,component:De,isLoading:!1},{route:"/users/[idx]",path:"/users/111",regex:/^\/users\/\d+$/,component:Be,isLoading:!1},{route:"/boxes",path:"/boxes",regex:/^\/boxes$/,component:qe,isLoading:!1}];me(()=>{Ie.set(window),de(),u(),g()}),pe(()=>{E()});function u(){const m=i.url.searchParams.get("access");if(m){sessionStorage.setItem("access",m),i.url.searchParams.delete("access");const d=`${i.url.origin}${i.url.pathname}?${i.url.searchParams.toString()}`;window.history.replaceState({},"",d)}}let f="translateX(0)",h=-1,p;function _(m){n!==-1&&(h=m.touches[0].clientX,n===0&&h<p-20&&(s(1,f="translateX(0)"),h=-1))}function S(m){if(t||h<0||n===-1)return;let d=m.touches[0].clientX-h;d=d>p?p:d<-p?-p:d,d=n===0&&d>0||n===c.length-1&&d<0?0:d,d>0?s(0,c[n-1].isLoading=!0,c):d<0&&s(0,c[n+1].isLoading=!0,c),s(1,f=`translateX(${d}px)`)}function v(m){if(t||h<0||n===-1)return;let d=m.changedTouches[0].clientX-h;if(d>p/2&&n!==0){s(1,f=`translateX(${p}px)`);const b=n-1,x=c[b];Z(x.path,{}),s(3,o.route=x.route,o),s(1,f="translateX(0)")}else if(-d>p/2&&n!==c.length-1){s(1,f=`translateX(${-p}px)`);const b=n+1,x=c[b];Z(x.path,{}),s(3,o.route=x.route,o),s(1,f="translateX(0)")}else s(1,f="translateX(0)")}function g(){p=document.body.clientWidth,document.addEventListener("touchstart",_),document.addEventListener("touchmove",S),document.addEventListener("touchend",v),window.onpopstate=function(){if(n!==-1){for(const m of c)if(m.regex.test(window.location.pathname)){s(3,o.route=m.route,o);break}}}}function E(){document.removeEventListener("touchstart",_),document.removeEventListener("touchmove",S),document.removeEventListener("touchend",v)}return a.$$set=m=>{"data"in m&&s(3,o=m.data),"$$scope"in m&&s(4,l=m.$$scope)},a.$$.update=()=>{a.$$.dirty&9&&s(2,n=c.findIndex(m=>{const d=o.route===m.route;return d&&(m.isLoading=!0),d}))},[c,f,n,o,l,r]}class mt extends le{constructor(e){super(),ce(this,e,et,Ze,ae,{data:3})}}export{mt as component,dt as universal};
