import{s as mt,p as rt,q as ot,b as k,f as u,l as i,i as j,h as v,n as tt,a as V,e as C,t as K,g as M,c as I,d as Q,A as G,P as nt,w as et,N as _t,r as vt,k as $t,o as bt,x as wt,j as dt,G as it}from"../chunks/scheduler.BFzxWJSn.js";import{S as pt,i as gt,c as A,a as H,m as L,t as R,b as X,d as J}from"../chunks/index.DXXOSJvz.js";import{e as ct}from"../chunks/each.Bd302JEX.js";import{H as xt}from"../chunks/Header.DgF0Mwj_.js";import{p as yt}from"../chunks/stores.BMzH1F7a.js";import{M as kt}from"../chunks/Map.BM4vHy4a.js";import{F as Ct}from"../chunks/Footer.D0uuu4eV.js";import{e as It}from"../chunks/emitter.E5P-NQ8u.js";import{s as O,v as Et}from"../chunks/map._4ThwQJB.js";import{g as jt}from"../chunks/entry.ESfJ-tmN.js";function Bt(o){let t,l;return{c(){t=rt("svg"),l=rt("path"),this.h()},l(e){t=ot(e,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=k(t);l=ot(a,"path",{d:!0}),k(l).forEach(u),a.forEach(u),this.h()},h(){i(l,"d","M15.3033 14.4703L10 19.7736L4.69667 14.4703C3.64779 13.4214 2.93349 12.085 2.64411 10.6301C2.35473 9.17528 2.50326 7.66729 3.07092 6.29684C3.63858 4.9264 4.59987 3.75507 5.83324 2.93096C7.0666 2.10686 8.51665 1.66699 10 1.66699C11.4834 1.66699 12.9334 2.10686 14.1668 2.93096C15.4001 3.75507 16.3614 4.9264 16.9291 6.29684C17.4968 7.66729 17.6453 9.17528 17.3559 10.6301C17.0665 12.085 16.3522 13.4214 15.3033 14.4703ZM10 10.8336C10.442 10.8336 10.866 10.658 11.1785 10.3454C11.4911 10.0329 11.6667 9.60895 11.6667 9.16693C11.6667 8.7249 11.4911 8.30098 11.1785 7.98842C10.866 7.67586 10.442 7.50026 10 7.50026C9.55798 7.50026 9.13405 7.67586 8.82149 7.98842C8.50893 8.30098 8.33334 8.7249 8.33334 9.16693C8.33334 9.60895 8.50893 10.0329 8.82149 10.3454C9.13405 10.658 9.55798 10.8336 10 10.8336Z"),i(t,"width","20"),i(t,"height","20"),i(t,"viewBox","0 0 20 20"),i(t,"fill",o[0]),i(t,"xmlns","http://www.w3.org/2000/svg")},m(e,a){j(e,t,a),v(t,l)},p(e,[a]){a&1&&i(t,"fill",e[0])},i:tt,o:tt,d(e){e&&u(t)}}}function Tt(o,t,l){let{fill:e}=t;return o.$$set=a=>{"fill"in a&&l(0,e=a.fill)},[e]}class Dt extends pt{constructor(t){super(),gt(this,t,Tt,Bt,mt,{fill:0})}}function ft(o,t,l){const e=o.slice();return e[13]=t[l],e}function Vt(o){var a;let t,l=((a=o[0])==null?void 0:a.name)+"",e;return{c(){t=C("div"),e=K(l),this.h()},l(r){t=I(r,"DIV",{class:!0});var n=k(t);e=Q(n,l),n.forEach(u),this.h()},h(){i(t,"class","typo-sub-h3 text-gray-900")},m(r,n){j(r,t,n),v(t,e)},p(r,n){var d;n&1&&l!==(l=((d=r[0])==null?void 0:d.name)+"")&&dt(e,l)},d(r){r&&u(t)}}}function ut(o){let t,l;return{c(){t=C("img"),this.h()},l(e){t=I(e,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){var e,a;i(t,"class","w-full h-full object-cover"),i(t,"alt","장소 사진"),it(t.src,l=(a=(e=o[13])==null?void 0:e.media)==null?void 0:a.at(0))||i(t,"src",l)},m(e,a){j(e,t,a)},p(e,a){var r,n;a&2&&!it(t.src,l=(n=(r=e[13])==null?void 0:r.media)==null?void 0:n.at(0))&&i(t,"src",l)},d(e){e&&u(t)}}}function ht(o){var $,E;let t,l=(E=($=o[13])==null?void 0:$.media)==null?void 0:E.at(0),e,a,r=o[13].name+"",n,d,c=l&&ut(o);return{c(){t=C("div"),c&&c.c(),e=V(),a=C("div"),n=K(r),d=V(),this.h()},l(p){t=I(p,"DIV",{class:!0});var m=k(t);c&&c.l(m),e=M(m),a=I(m,"DIV",{class:!0});var b=k(a);n=Q(b,r),b.forEach(u),d=M(m),m.forEach(u),this.h()},h(){i(a,"class","absolute bottom-0 p-2.5 typo-caption1 text-white text-shadow svelte-sygcjw"),i(t,"class","bg-gray-50 h-36 relative")},m(p,m){j(p,t,m),c&&c.m(t,null),v(t,e),v(t,a),v(a,n),v(t,d)},p(p,m){var b,w;m&2&&(l=(w=(b=p[13])==null?void 0:b.media)==null?void 0:w.at(0)),l?c?c.p(p,m):(c=ut(p),c.c(),c.m(t,e)):c&&(c.d(1),c=null),m&2&&r!==(r=p[13].name+"")&&dt(n,r)},d(p){p&&u(t),c&&c.d()}}}function Mt(o){let t,l,e,a,r;return l=new Dt({props:{fill:"white"}}),{c(){t=C("button"),A(l.$$.fragment),this.h()},l(n){t=I(n,"BUTTON",{slot:!0,class:!0});var d=k(t);H(l.$$.fragment,d),d.forEach(u),this.h()},h(){i(t,"slot","right"),i(t,"class","bg-primary-500 rounded-full p-[15px] shadow shadow-primary-500/65 pointer-events-auto")},m(n,d){j(n,t,d),L(l,t,null),e=!0,a||(r=et(t,"click",o[5]),a=!0)},p:tt,i(n){e||(R(l.$$.fragment,n),e=!0)},o(n){X(l.$$.fragment,n),e=!1},d(n){n&&u(t),J(l),a=!1,r()}}}function Pt(o){var at;let t,l,e,a,r,n,d,c,$,E,p,m,b,w,B,f,x,q,T,P,W,st;t=new xt({props:{position:"static",leftBack:!0,rightBoxSetting:((at=o[0])==null?void 0:at.role)==="owner"?" ":"",slotPosition:"justify-start",$$slots:{default:[Vt]},$$scope:{ctx:o}}}),B=new kt({});let S=ct(o[1]),g=[];for(let s=0;s<S.length;s+=1)g[s]=ht(ft(o,S,s));return T=new Ct({props:{position:"fixed",leftReposition:o[2]==="map",$$slots:{right:[Mt]},$$scope:{ctx:o}}}),{c(){A(t.$$.fragment),l=V(),e=C("div"),a=C("div"),r=C("button"),n=K("지도"),c=V(),$=C("button"),E=K("리스트"),m=V(),b=C("div"),w=C("div"),A(B.$$.fragment),f=V(),x=C("div");for(let s=0;s<g.length;s+=1)g[s].c();q=V(),A(T.$$.fragment),this.h()},l(s){H(t.$$.fragment,s),l=M(s),e=I(s,"DIV",{class:!0});var h=k(e);a=I(h,"DIV",{class:!0});var y=k(a);r=I(y,"BUTTON",{class:!0});var F=k(r);n=Q(F,"지도"),F.forEach(u),c=M(y),$=I(y,"BUTTON",{class:!0});var N=k($);E=Q(N,"리스트"),N.forEach(u),y.forEach(u),h.forEach(u),m=M(s),b=I(s,"DIV",{class:!0});var _=k(b);w=I(_,"DIV",{class:!0});var D=k(w);H(B.$$.fragment,D),f=M(D),x=I(D,"DIV",{class:!0});var lt=k(x);for(let Y=0;Y<g.length;Y+=1)g[Y].l(lt);lt.forEach(u),D.forEach(u),_.forEach(u),q=M(s),H(T.$$.fragment,s),this.h()},h(){i(r,"class",d=G(`tab-map w-full px-8 py-2.5 ${o[2]==="map"?U:Z}`)+" svelte-sygcjw"),i($,"class",p=G(`tab-list w-full px-8 py-2.5 ${o[2]==="list"?U:Z}`)+" svelte-sygcjw"),i(a,"class","tab-category w-full flex flex-row text-center"),i(e,"class","tab w-full px-4 pt-2.5 pb-0.5"),i(x,"class","absolute left-full w-screen grid grid-cols-3 gap-1"),i(w,"class","h-screen w-screen transition-transform"),nt(w,"transform",`translateX(${o[2]==="map"?0:-100}%)`),i(b,"class","content")},m(s,h){L(t,s,h),j(s,l,h),j(s,e,h),v(e,a),v(a,r),v(r,n),v(a,c),v(a,$),v($,E),j(s,m,h),j(s,b,h),v(b,w),L(B,w,null),v(w,f),v(w,x);for(let y=0;y<g.length;y+=1)g[y]&&g[y].m(x,null);j(s,q,h),L(T,s,h),P=!0,W||(st=[et(r,"click",o[3]),et($,"click",o[4])],W=!0)},p(s,[h]){var N;const y={};if(h&1&&(y.rightBoxSetting=((N=s[0])==null?void 0:N.role)==="owner"?" ":""),h&65537&&(y.$$scope={dirty:h,ctx:s}),t.$set(y),(!P||h&4&&d!==(d=G(`tab-map w-full px-8 py-2.5 ${s[2]==="map"?U:Z}`)+" svelte-sygcjw"))&&i(r,"class",d),(!P||h&4&&p!==(p=G(`tab-list w-full px-8 py-2.5 ${s[2]==="list"?U:Z}`)+" svelte-sygcjw"))&&i($,"class",p),h&2){S=ct(s[1]);let _;for(_=0;_<S.length;_+=1){const D=ft(s,S,_);g[_]?g[_].p(D,h):(g[_]=ht(D),g[_].c(),g[_].m(x,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=S.length}h&4&&nt(w,"transform",`translateX(${s[2]==="map"?0:-100}%)`);const F={};h&4&&(F.leftReposition=s[2]==="map"),h&65537&&(F.$$scope={dirty:h,ctx:s}),T.$set(F)},i(s){P||(R(t.$$.fragment,s),R(B.$$.fragment,s),R(T.$$.fragment,s),P=!0)},o(s){X(t.$$.fragment,s),X(B.$$.fragment,s),X(T.$$.fragment,s),P=!1},d(s){s&&(u(l),u(e),u(m),u(b),u(q)),J(t,s),J(B),_t(g,s),J(T,s),W=!1,vt(st)}}}let U="text-gray-900 typo-sub-h2 border-b-[2.5px] border-gray-900",Z="text-gray-500 typo-sub-h5";const z=60;function St(o,t,l){let e;$t(o,yt,f=>l(7,e=f));let a,r=[],n=sessionStorage.getItem("jwt");async function d(){const f=await fetch(`https://azit.surflux.studio/boxes/${e.params.idx}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}});if(!f.ok)return;const x=await f.json();l(0,a=x.data.box),l(1,r=x.data.places)}bt(async()=>{await d(),p()}),wt(()=>{O.un("change",m)});let c="map";const $=[];let E=[];function p(){E=r.filter(f=>!f.longitude||!f.latitude||$.includes(f.idx)?!1:($.push(f.idx),!0)),O.on("change",m),E.forEach(f=>{var x;It.emit("addIcon",{coordinate:[f.longitude,f.latitude],image:((x=f==null?void 0:f.media)==null?void 0:x.at(0))??"",shape:"waterdrop",type:"place",link:`/places/${f.idx}`,rank:1,name:f.name,width:56,height:61})})}function m(){if(O.getFeatures().length!==E.length)return;O.un("change",m);const f=O.getExtent();Et.fit(f,{padding:[z,z,z,z],duration:500,maxZoom:16})}return[a,r,c,()=>l(2,c="map"),()=>l(2,c="list"),()=>jt(`/map/search?type=box&boxIdx=${a==null?void 0:a.idx}`)]}class Lt extends pt{constructor(t){super(),gt(this,t,St,Pt,mt,{})}}export{Lt as component};
