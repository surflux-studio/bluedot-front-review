import{o as Oe,e as xe,A as _e,g as pe,p as De,r as Pe,q as ae,C as Se}from"../chunks/sign.D2LB2NXZ.js";import{e as ne}from"../chunks/index.g5YcAAdQ.js";import{l as Te,s as ee,e as D,c as I,b as C,f as g,v as u,i as S,t as ue,a as T,d as ce,g as N,h as w,A as W,T as Ne,j as ge,n as q,q as U,r as K,y as Z,z as Q,B as he,k as be,w as Ye,x as Fe,ac as Me,F as je}from"../chunks/scheduler.DobTUrUU.js";import{g as oe}from"../chunks/entry.72j06AYb.js";import{S as te,i as ie,g as re,f as se,t as V,a as E,c as Y,b as F,m as M,d as j,e as X}from"../chunks/index.BzbOx6Bd.js";import{r as Ie,H as Ve}from"../chunks/Header.BWVlw1P1.js";import{V as Ee}from"../chunks/Viewer.C7AyG-0h.js";/* empty css                                                   *//* empty css                                                     *//* empty css                                                   */import{p as He}from"../chunks/stores.B22jY-hJ.js";import{e as fe,u as Be,o as Ae}from"../chunks/each.C4gaqrOA.js";import{I as Le}from"../chunks/IconChevronRight.SXkJvkcb.js";import{B as qe}from"../chunks/BottomNavigationPadder.B0Eyzigo.js";import{A as Re}from"../chunks/ActionSheet.BeV2j9V7.js";import{N as Je}from"../chunks/NavigationBar.Ccwdi6Tw.js";const ze=async({fetch:r,url:e})=>{console.warn("viewer/edit/+page.ts load");const t=e.searchParams.get("type");if(t===null||!["post","patch"].includes(t))return ne(400,"Bad Request");if(t==="post"){console.log("viewer/edit/+page.ts load type post");const i=Oe();return{posts:[{user_idx:i==null?void 0:i.sub,unique_name:i==null?void 0:i.uni,profile_image_url:i==null?void 0:i.pic,place_idx:e.searchParams.get("placeIdx"),place_name:e.searchParams.get("placeName"),media:Te(De),mediaIdx:0,text:""}]}}if(t==="patch"){console.log("viewer/edit/+page.ts load type patch");const i=e.searchParams.get("postIdx");if(i==="null")return xe.emit("pushSnackbar",{message:"페이지 접근에 문제가 발생했습니다"}),oe("/viewer",{replaceState:!0});i||ne(404,"Not Found");const s=await r(`${_e}/posts/${i}`,{method:"GET",headers:{Authorization:"Bearer "+pe()}}).then(l=>l.json()).then(l=>l.data);return s.error&&ne(404,"Not Found"),{posts:[{...s,mediaIdx:0}]}}return ne(404,"Not Found")},Tt=Object.freeze(Object.defineProperty({__proto__:null,load:ze},Symbol.toStringTag,{value:"Module"}));var ve;(function(r){r.Dark="DARK",r.Light="LIGHT",r.Default="DEFAULT"})(ve||(ve={}));var ke;(function(r){r.Body="body",r.Ionic="ionic",r.Native="native",r.None="none"})(ke||(ke={}));const de=Pe("Keyboard");function we(r,e,t){const i=r.slice();return i[1]=e[t],i[3]=t,i}function Ge(r){let e;return{c(){e=D("div"),this.h()},l(t){e=I(t,"DIV",{class:!0}),C(e).forEach(g),this.h()},h(){u(e,"class","w-0.5")},m(t,i){S(t,e,i)},i:q,o:q,d(t){t&&g(e)}}}function Ue(r){let e,t;return e=new Le({props:{fill:"#6B7280",length:"1.25"}}),{c(){Y(e.$$.fragment)},l(i){F(e.$$.fragment,i)},m(i,s){M(e,i,s),t=!0},i(i){t||(V(e.$$.fragment,i),t=!0)},o(i){E(e.$$.fragment,i),t=!1},d(i){j(e,i)}}}function ye(r,e){let t,i,s=e[1].title+"",l,n,a,c,d=e[1].value+"",p,_,o,h,f,v,k,y,$;const B=[Ue,Ge],A=[];function R(O,P){return O[1].onClick?0:1}return o=R(e),h=A[o]=B[o](e),{key:r,first:null,c(){t=D("div"),i=D("span"),l=ue(s),n=T(),a=D("div"),c=D("span"),p=ue(d),_=T(),h.c(),f=T(),this.h()},l(O){t=I(O,"DIV",{class:!0});var P=C(t);i=I(P,"SPAN",{class:!0});var H=C(i);l=ce(H,s),H.forEach(g),n=N(P),a=I(P,"DIV",{class:!0});var L=C(a);c=I(L,"SPAN",{class:!0});var b=C(c);p=ce(b,d),b.forEach(g),_=N(L),h.l(L),L.forEach(g),f=N(P),P.forEach(g),this.h()},h(){u(i,"class","text-white text-sm font-medium"),u(c,"class","text-gray-500 text-xs"),u(a,"class","flex items-center gap-2"),u(t,"class",v=`flex items-center justify-between w-full px-5 py-2.5 border-b bg-black border-white/10
      ${e[1].onClick?"cursor-pointer hover:bg-white/10 active:bg-white/20":"cursor-default"} 
      ${e[3]===0?"border-t":""}
      transition-colors`),this.first=t},m(O,P){S(O,t,P),w(t,i),w(i,l),w(t,n),w(t,a),w(a,c),w(c,p),w(a,_),A[o].m(a,null),w(t,f),k=!0,y||($=W(t,"click",function(){Ne(e[1].onClick)&&e[1].onClick.apply(this,arguments)}),y=!0)},p(O,P){e=O,(!k||P&1)&&s!==(s=e[1].title+"")&&ge(l,s),(!k||P&1)&&d!==(d=e[1].value+"")&&ge(p,d);let H=o;o=R(e),o!==H&&(re(),E(A[H],1,1,()=>{A[H]=null}),se(),h=A[o],h||(h=A[o]=B[o](e),h.c()),V(h,1),h.m(a,null)),(!k||P&1&&v!==(v=`flex items-center justify-between w-full px-5 py-2.5 border-b bg-black border-white/10
      ${e[1].onClick?"cursor-pointer hover:bg-white/10 active:bg-white/20":"cursor-default"} 
      ${e[3]===0?"border-t":""}
      transition-colors`))&&u(t,"class",v)},i(O){k||(V(h),k=!0)},o(O){E(h),k=!1},d(O){O&&g(t),A[o].d(),y=!1,$()}}}function Ke(r){let e,t=[],i=new Map,s,l=fe(r[0]);const n=a=>a[1].id;for(let a=0;a<l.length;a+=1){let c=we(r,l,a),d=n(c);i.set(d,t[a]=ye(d,c))}return{c(){e=D("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=I(a,"DIV",{class:!0});var c=C(e);for(let d=0;d<t.length;d+=1)t[d].l(c);c.forEach(g),this.h()},h(){u(e,"class","flex flex-col w-full")},m(a,c){S(a,e,c);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);s=!0},p(a,[c]){c&1&&(l=fe(a[0]),re(),t=Be(t,c,n,1,a,l,i,e,Ae,ye,null,we),se())},i(a){if(!s){for(let c=0;c<l.length;c+=1)V(t[c]);s=!0}},o(a){for(let c=0;c<t.length;c+=1)E(t[c]);s=!1},d(a){a&&g(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function We(r,e,t){let{items:i=[{id:1,title:"장소",value:"팔발라 삼정본점"},{id:2,title:"공개 여부",value:"팔로워 공개"}]}=e;return r.$$set=s=>{"items"in s&&t(0,i=s.items)},[i]}class Ze extends te{constructor(e){super(),ie(this,e,We,Ke,ee,{items:0})}}function Qe(r){let e,t,i,s;return{c(){e=U("svg"),t=U("rect"),i=U("rect"),s=U("path"),this.h()},l(l){e=K(l,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=C(e);t=K(n,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,fill:!0}),C(t).forEach(g),i=K(n,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0}),C(i).forEach(g),s=K(n,"path",{d:!0,fill:!0}),C(s).forEach(g),n.forEach(g),this.h()},h(){u(t,"x","6.5"),u(t,"y","6.5"),u(t,"width","19"),u(t,"height","19"),u(t,"rx","9.5"),u(t,"fill",r[0]),u(i,"x","6.5"),u(i,"y","6.5"),u(i,"width","19"),u(i,"height","19"),u(i,"rx","9.5"),u(i,"stroke",r[1]),u(s,"d","M16 22.5C19.5899 22.5 22.5 19.5899 22.5 16C22.5 12.4101 19.5899 9.5 16 9.5C12.4101 9.5 9.5 12.4101 9.5 16C9.5 19.5899 12.4101 22.5 16 22.5Z"),u(s,"fill",r[1]),u(e,"width",r[2]),u(e,"height",r[2]),u(e,"viewBox","0 0 32 32"),u(e,"fill","none"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(l,n){S(l,e,n),w(e,t),w(e,i),w(e,s)},p(l,[n]){n&1&&u(t,"fill",l[0]),n&2&&u(i,"stroke",l[1]),n&2&&u(s,"fill",l[1]),n&4&&u(e,"width",l[2]),n&4&&u(e,"height",l[2])},i:q,o:q,d(l){l&&g(e)}}}function Xe(r,e,t){let i,{fill:s="#5f6368"}=e,{stroke:l="#000000"}=e,{length:n="1.75"}=e;return r.$$set=a=>{"fill"in a&&t(0,s=a.fill),"stroke"in a&&t(1,l=a.stroke),"length"in a&&t(3,n=a.length)},r.$$.update=()=>{r.$$.dirty&8&&t(2,i=Ie(n))},[s,l,i,n]}class et extends te{constructor(e){super(),ie(this,e,Xe,Qe,ee,{fill:0,stroke:1,length:3})}}function tt(r){let e,t,i;return{c(){e=U("svg"),t=U("rect"),i=U("rect"),this.h()},l(s){e=K(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var l=C(e);t=K(l,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,fill:!0}),C(t).forEach(g),i=K(l,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0}),C(i).forEach(g),l.forEach(g),this.h()},h(){u(t,"x","6.5"),u(t,"y","6.5"),u(t,"width","19"),u(t,"height","19"),u(t,"rx","9.5"),u(t,"fill",r[0]),u(i,"x","6.5"),u(i,"y","6.5"),u(i,"width","19"),u(i,"height","19"),u(i,"rx","9.5"),u(i,"stroke",r[1]),u(e,"width",r[2]),u(e,"height",r[2]),u(e,"viewBox","0 0 32 32"),u(e,"fill","none"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(s,l){S(s,e,l),w(e,t),w(e,i)},p(s,[l]){l&1&&u(t,"fill",s[0]),l&2&&u(i,"stroke",s[1]),l&4&&u(e,"width",s[2]),l&4&&u(e,"height",s[2])},i:q,o:q,d(s){s&&g(e)}}}function it(r,e,t){let i,{fill:s="#5f6368"}=e,{stroke:l="#C9CDD2"}=e,{length:n="1.75"}=e;return r.$$set=a=>{"fill"in a&&t(0,s=a.fill),"stroke"in a&&t(1,l=a.stroke),"length"in a&&t(3,n=a.length)},r.$$.update=()=>{r.$$.dirty&8&&t(2,i=Ie(n))},[s,l,i,n]}class rt extends te{constructor(e){super(),ie(this,e,it,tt,ee,{fill:0,stroke:1,length:3})}}function Ce(r,e,t){const i=r.slice();return i[5]=e[t],i[7]=t,i}function st(r){let e,t;return e=new rt({props:{fill:"white",stroke:"#C9CDD2",length:1.5}}),{c(){Y(e.$$.fragment)},l(i){F(e.$$.fragment,i)},m(i,s){M(e,i,s),t=!0},i(i){t||(V(e.$$.fragment,i),t=!0)},o(i){E(e.$$.fragment,i),t=!1},d(i){j(e,i)}}}function lt(r){let e,t;return e=new et({props:{fill:"white",stroke:"black",length:1.5}}),{c(){Y(e.$$.fragment)},l(i){F(e.$$.fragment,i)},m(i,s){M(e,i,s),t=!0},i(i){t||(V(e.$$.fragment,i),t=!0)},o(i){E(e.$$.fragment,i),t=!1},d(i){j(e,i)}}}function $e(r,e){let t,i,s,l,n,a=ae[e[5]]+"",c,d,p,_,o;const h=[lt,st],f=[];function v(y,$){return y[1]===y[5]?0:1}i=v(e),s=f[i]=h[i](e);function k(){return e[3](e[5])}return{key:r,first:null,c(){t=D("button"),s.c(),l=T(),n=D("div"),c=ue(a),d=T(),this.h()},l(y){t=I(y,"BUTTON",{class:!0});var $=C(t);s.l($),l=N($),n=I($,"DIV",{class:!0});var B=C(n);c=ce(B,a),B.forEach(g),d=N($),$.forEach(g),this.h()},h(){u(n,"class","text-sm"),u(t,"class","flex items-center gap-2.5 flex-wrap"),this.first=t},m(y,$){S(y,t,$),f[i].m(t,null),w(t,l),w(t,n),w(n,c),w(t,d),p=!0,_||(o=W(t,"click",k),_=!0)},p(y,$){e=y;let B=i;i=v(e),i!==B&&(re(),E(f[B],1,1,()=>{f[B]=null}),se(),s=f[i],s||(s=f[i]=h[i](e),s.c()),V(s,1),s.m(t,l)),(!p||$&4)&&a!==(a=ae[e[5]]+"")&&ge(c,a)},i(y){p||(V(s),p=!0)},o(y){E(s),p=!1},d(y){y&&g(t),f[i].d(),_=!1,o()}}}function nt(r){let e,t,i="공개 여부",s,l,n=[],a=new Map,c,d=fe(r[2]);const p=_=>_[5];for(let _=0;_<d.length;_+=1){let o=Ce(r,d,_),h=p(o);a.set(h,n[_]=$e(h,o))}return{c(){e=D("div"),t=D("header"),t.textContent=i,s=T(),l=D("div");for(let _=0;_<n.length;_+=1)n[_].c();this.h()},l(_){e=I(_,"DIV",{class:!0});var o=C(e);t=I(o,"HEADER",{class:!0,"data-svelte-h":!0}),he(t)!=="svelte-17ixxy5"&&(t.textContent=i),s=N(o),l=I(o,"DIV",{class:!0});var h=C(l);for(let f=0;f<n.length;f+=1)n[f].l(h);h.forEach(g),o.forEach(g),this.h()},h(){u(t,"class","py-2.5 text-[0.9375rem] text-white font-semibold"),u(l,"class","flex flex-col gap-3 text-white flex-wrap"),u(e,"class","px-5")},m(_,o){S(_,e,o),w(e,t),w(e,s),w(e,l);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(l,null);c=!0},p(_,o){o&6&&(d=fe(_[2]),re(),n=Be(n,o,p,1,_,d,a,l,Ae,$e,null,Ce),se())},i(_){if(!c){for(let o=0;o<d.length;o+=1)V(n[o]);c=!0}},o(_){for(let o=0;o<n.length;o+=1)E(n[o]);c=!1},d(_){_&&g(e);for(let o=0;o<n.length;o+=1)n[o].d()}}}function ot(r){let e,t,i;function s(n){r[4](n)}let l={fixed:!0,noHandle:!0,$$slots:{default:[nt]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.isOpen=r[0]),e=new Re({props:l}),Z.push(()=>X(e,"isOpen",s)),{c(){Y(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,a){M(e,n,a),i=!0},p(n,[a]){const c={};a&262&&(c.$$scope={dirty:a,ctx:n}),!t&&a&1&&(t=!0,c.isOpen=n[0],Q(()=>t=!1)),e.$set(c)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){E(e.$$.fragment,n),i=!1},d(n){j(e,n)}}}function at(r,e,t){let{isOpen:i=!1}=e,{availableVisibilities:s=["public","follower","private"]}=e,{selectedVisibility:l="public"}=e;const n=c=>t(1,l=c);function a(c){i=c,t(0,i)}return r.$$set=c=>{"isOpen"in c&&t(0,i=c.isOpen),"availableVisibilities"in c&&t(2,s=c.availableVisibilities),"selectedVisibility"in c&&t(1,l=c.selectedVisibility)},[i,l,s,n,a]}class ut extends te{constructor(e){super(),ie(this,e,at,ot,ee,{isOpen:0,availableVisibilities:2,selectedVisibility:1})}}function ct(r){let e,t,i,s,l,n,a,c;e=new Ve({props:{position:"fixed",leftBack:"white",$$slots:{right:[dt],default:[ht]},$$scope:{ctx:r}}});function d(o){r[20](o)}function p(o){r[21](o)}let _={dontMoveVertically:!0,hideActionButtons:!0};return r[1]!==void 0&&(_.posts=r[1]),r[5]!==void 0&&(_.keyboardY=r[5]),i=new Ee({props:_}),Z.push(()=>X(i,"posts",d)),Z.push(()=>X(i,"keyboardY",p)),a=new Je({}),{c(){Y(e.$$.fragment),t=T(),Y(i.$$.fragment),n=T(),Y(a.$$.fragment)},l(o){F(e.$$.fragment,o),t=N(o),F(i.$$.fragment,o),n=N(o),F(a.$$.fragment,o)},m(o,h){M(e,o,h),S(o,t,h),M(i,o,h),S(o,n,h),M(a,o,h),c=!0},p(o,h){const f={};h&536870912&&(f.$$scope={dirty:h,ctx:o}),e.$set(f);const v={};!s&&h&2&&(s=!0,v.posts=o[1],Q(()=>s=!1)),!l&&h&32&&(l=!0,v.keyboardY=o[5],Q(()=>l=!1)),i.$set(v)},i(o){c||(V(e.$$.fragment,o),V(i.$$.fragment,o),V(a.$$.fragment,o),c=!0)},o(o){E(e.$$.fragment,o),E(i.$$.fragment,o),E(a.$$.fragment,o),c=!1},d(o){o&&(g(t),g(n)),j(e,o),j(i,o),j(a,o)}}}function ft(r){let e,t,i,s,l,n,a,c,d,p,_=(r[2]||"텍스트 입력하기...")+"",o,h,f,v,k,y,$,B,A,R,O;t=new Ve({props:{position:"static",leftBack:"white",$$slots:{right:[_t]},$$scope:{ctx:r}}});function P(b){r[14](b)}function H(b){r[15](b)}let L={dontMoveVertically:!0,isEdit:!0};return r[1]!==void 0&&(L.posts=r[1]),r[5]!==void 0&&(L.keyboardY=r[5]),l=new Ee({props:L}),Z.push(()=>X(l,"posts",P)),Z.push(()=>X(l,"keyboardY",H)),k=new Ze({props:{items:[{id:1,title:"장소",value:r[1][0].place_name||""},{id:2,title:"공개 여부",value:ae[r[4]],onClick:r[18]}]}}),B=new qe({}),{c(){e=D("section"),Y(t.$$.fragment),i=T(),s=D("div"),Y(l.$$.fragment),c=T(),d=D("div"),p=D("div"),o=ue(_),f=T(),v=D("div"),Y(k.$$.fragment),y=T(),$=D("div"),Y(B.$$.fragment),this.h()},l(b){e=I(b,"SECTION",{class:!0});var x=C(e);F(t.$$.fragment,x),i=N(x),s=I(x,"DIV",{class:!0});var z=C(s);F(l.$$.fragment,z),z.forEach(g),c=N(x),d=I(x,"DIV",{class:!0});var J=C(d);p=I(J,"DIV",{contenteditable:!0,class:!0});var G=C(p);o=ce(G,_),G.forEach(g),J.forEach(g),f=N(x),v=I(x,"DIV",{class:!0});var le=C(v);F(k.$$.fragment,le),le.forEach(g),y=N(x),$=I(x,"DIV",{class:!0});var m=C($);F(B.$$.fragment,m),m.forEach(g),x.forEach(g),this.h()},h(){u(s,"class","flex flex-grow"),u(p,"contenteditable","true"),u(p,"class",h=`w-full h-full text-xs leading-[1.125rem] tracking-[-0.0375rem]
          bg-black border-0 overflow-y-auto 
          focus:outline-none 
          whitespace-pre-wrap
          ${r[6]?"text-gray-400":"text-white"}
        `),u(d,"class","h-32 px-5 py-2.5"),u(v,"class",""),u($,"class","h-40"),u(e,"class","flex flex-col w-full h-screen bg-black")},m(b,x){S(b,e,x),M(t,e,null),w(e,i),w(e,s),M(l,s,null),w(e,c),w(e,d),w(d,p),w(p,o),w(e,f),w(e,v),M(k,v,null),w(e,y),w(e,$),M(B,$,null),A=!0,R||(O=[W(p,"input",r[10]),W(p,"focus",r[16]),W(p,"blur",r[17])],R=!0)},p(b,x){const z={};x&536870913&&(z.$$scope={dirty:x,ctx:b}),t.$set(z);const J={};!n&&x&2&&(n=!0,J.posts=b[1],Q(()=>n=!1)),!a&&x&32&&(a=!0,J.keyboardY=b[5],Q(()=>a=!1)),l.$set(J),(!A||x&4)&&_!==(_=(b[2]||"텍스트 입력하기...")+"")&&Me(o,_),(!A||x&64&&h!==(h=`w-full h-full text-xs leading-[1.125rem] tracking-[-0.0375rem]
          bg-black border-0 overflow-y-auto 
          focus:outline-none 
          whitespace-pre-wrap
          ${b[6]?"text-gray-400":"text-white"}
        `))&&u(p,"class",h);const G={};x&26&&(G.items=[{id:1,title:"장소",value:b[1][0].place_name||""},{id:2,title:"공개 여부",value:ae[b[4]],onClick:b[18]}]),k.$set(G)},i(b){A||(V(t.$$.fragment,b),V(l.$$.fragment,b),V(k.$$.fragment,b),V(B.$$.fragment,b),A=!0)},o(b){E(t.$$.fragment,b),E(l.$$.fragment,b),E(k.$$.fragment,b),E(B.$$.fragment,b),A=!1},d(b){b&&g(e),j(t),j(l),j(k),j(B),R=!1,je(O)}}}function ht(r){let e,t="미리보기";return{c(){e=D("p"),e.textContent=t,this.h()},l(i){e=I(i,"P",{class:!0,"data-svelte-h":!0}),he(e)!=="svelte-1hktwn7"&&(e.textContent=t),this.h()},h(){u(e,"class","text-white text-[0.9375rem] font-semibold")},m(i,s){S(i,e,s)},p:q,d(i){i&&g(e)}}}function dt(r){let e,t="완료",i,s;return{c(){e=D("div"),e.textContent=t,this.h()},l(l){e=I(l,"DIV",{slot:!0,class:!0,"data-svelte-h":!0}),he(e)!=="svelte-11t55ng"&&(e.textContent=t),this.h()},h(){u(e,"slot","right"),u(e,"class","text-white")},m(l,n){S(l,e,n),i||(s=W(e,"click",r[19]),i=!0)},p:q,d(l){l&&g(e),i=!1,s()}}}function _t(r){let e,t="다음",i,s;return{c(){e=D("div"),e.textContent=t,this.h()},l(l){e=I(l,"DIV",{slot:!0,class:!0,"data-svelte-h":!0}),he(e)!=="svelte-7lem8v"&&(e.textContent=t),this.h()},h(){u(e,"slot","right"),u(e,"class","text-white")},m(l,n){S(l,e,n),i||(s=W(e,"click",r[13]),i=!0)},p:q,d(l){l&&g(e),i=!1,s()}}}function pt(r){let e,t,i,s,l,n,a;const c=[ft,ct],d=[];function p(f,v){return f[0]===0?0:f[0]===1?1:-1}~(e=p(r))&&(t=d[e]=c[e](r));function _(f){r[22](f)}function o(f){r[23](f)}let h={};return r[3]!==void 0&&(h.isOpen=r[3]),r[4]!==void 0&&(h.selectedVisibility=r[4]),s=new ut({props:h}),Z.push(()=>X(s,"isOpen",_)),Z.push(()=>X(s,"selectedVisibility",o)),{c(){t&&t.c(),i=T(),Y(s.$$.fragment)},l(f){t&&t.l(f),i=N(f),F(s.$$.fragment,f)},m(f,v){~e&&d[e].m(f,v),S(f,i,v),M(s,f,v),a=!0},p(f,[v]){let k=e;e=p(f),e===k?~e&&d[e].p(f,v):(t&&(re(),E(d[k],1,1,()=>{d[k]=null}),se()),~e?(t=d[e],t?t.p(f,v):(t=d[e]=c[e](f),t.c()),V(t,1),t.m(i.parentNode,i)):t=null);const y={};!l&&v&8&&(l=!0,y.isOpen=f[3],Q(()=>l=!1)),!n&&v&16&&(n=!0,y.selectedVisibility=f[4],Q(()=>n=!1)),s.$set(y)},i(f){a||(V(t),V(s.$$.fragment,f),a=!0)},o(f){E(t),E(s.$$.fragment,f),a=!1},d(f){f&&g(i),~e&&d[e].d(f),j(s,f)}}}function gt(r){const e=r.target;e.innerText==="텍스트 입력하기..."&&(e.innerText="")}function mt(r){const e=r.target;e.innerText.trim()||(e.innerText="텍스트 입력하기...")}function bt(r,e,t){let i,s,l;be(r,He,m=>t(25,s=m)),be(r,De,m=>t(12,l=m));const n=Se.getPlatform()!=="web",a=s.url.searchParams.get("type");let c=0,{data:d}=e,p=d.posts,_=p[0].text||"",o=!1,h="public";async function f(){(await fetch(`${_e}/posts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${pe()}`},body:JSON.stringify({placeIdx:s.url.searchParams.get("placeIdx"),text:_,media:i,permission:h})})).ok&&await oe("/users/0",{replaceState:!0,invalidateAll:!0})}async function v(){try{const m=await fetch(`${_e}/posts/${s.url.searchParams.get("postIdx")}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${pe()}`},body:JSON.stringify({text:_})});if(!m.ok){(await m.json()).status===401&&(xe.emit("pushSnackbar",{message:"접근할 수 없습니다"}),oe(`/viewer?postIdx=${s.url.searchParams.get("postIdx")}`));return}await oe("/users/0",{replaceState:!0,invalidateAll:!0})}catch{}}let k=0;function y(){de.addListener("keyboardWillShow",m=>{t(5,k=m.keyboardHeight*-1)}),de.addListener("keyboardWillHide",()=>{t(5,k=0)})}function $(){de.removeAllListeners()}Ye(()=>{n&&y()}),Fe(()=>{n&&$()});function B(m){const me=m.target;t(2,_=me.innerText),t(1,p[0]={...p[0],text:_},p)}let A=_.trim()==="";const R=()=>{t(0,c=1)};function O(m){p=m,t(1,p)}function P(m){k=m,t(5,k)}const H=m=>{gt(m),t(6,A=!1)},L=m=>{mt(m),t(6,A=!_.trim())},b=()=>{t(3,o=!0)},x=()=>{a==="post"?f():a==="patch"&&v()};function z(m){p=m,t(1,p)}function J(m){k=m,t(5,k)}function G(m){o=m,t(3,o)}function le(m){h=m,t(4,h)}return r.$$set=m=>{"data"in m&&t(11,d=m.data)},r.$$.update=()=>{r.$$.dirty&4096&&(i=l)},[c,p,_,o,h,k,A,a,f,v,B,d,l,R,O,P,H,L,b,x,z,J,G,le]}class Nt extends te{constructor(e){super(),ie(this,e,bt,pt,ee,{data:11})}}export{Nt as component,Tt as universal};
