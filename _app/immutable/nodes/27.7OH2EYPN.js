import{l as U,s as Z,e as _,a as B,t as J,c as h,b as k,f as i,g as N,B as M,d as L,v as u,i as I,h as d,N as G,A as R,j as ee,F as te,k as ae,O as se}from"../chunks/scheduler.CVGJxaOr.js";import{c as P,d as re,A as K,b as Q,g as W,f as X,e as Y}from"../chunks/sign.D_3Z-9N_.js";import{r as ne}from"../chunks/index.g5YcAAdQ.js";import{S as le,i as ie,c as ue,b as oe,m as ce,t as de,a as me,d as fe}from"../chunks/index.1WceP6qL.js";import{g as pe}from"../chunks/entry.DtipIR2I.js";import{H as _e}from"../chunks/Header.C1iJqmV8.js";const he=async({})=>{if(U(P)!==!0||U(re)!==!0)throw ne(302,"/")},ke=Object.freeze(Object.defineProperty({__proto__:null,load:he},Symbol.toStringTag,{value:"Module"}));function ve(l){let f,m,o,v,t,r,q="블루닷에서 사용할<br/>이름을 등록해주세요.",x,p,E="설정한 이름은 프로필 편집에서 변경 가능합니다.",n,c,s,b,w,D=(l[0].length>0&&l[1].uniqueName?l[1].uniqueName:"")+"",S,$,g,C,V,A,y,j,T;return o=new _e({props:{leftBack:"white"}}),{c(){f=_("div"),m=B(),ue(o.$$.fragment),v=B(),t=_("div"),r=_("div"),r.innerHTML=q,x=B(),p=_("div"),p.textContent=E,n=B(),c=_("div"),s=_("input"),b=B(),w=_("div"),S=J(D),$=B(),g=_("div"),C=_("div"),V=J("등록"),this.h()},l(e){f=h(e,"DIV",{class:!0}),k(f).forEach(i),m=N(e),oe(o.$$.fragment,e),v=N(e),t=h(e,"DIV",{class:!0});var a=k(t);r=h(a,"DIV",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-11nwzub"&&(r.innerHTML=q),x=N(a),p=h(a,"DIV",{class:!0,"data-svelte-h":!0}),M(p)!=="svelte-1851eu9"&&(p.textContent=E),n=N(a),c=h(a,"DIV",{class:!0});var z=k(c);s=h(z,"INPUT",{type:!0,class:!0,placeholder:!0}),z.forEach(i),b=N(a),w=h(a,"DIV",{class:!0});var H=k(w);S=L(H,D),H.forEach(i),a.forEach(i),$=N(e),g=h(e,"DIV",{class:!0});var O=k(g);C=h(O,"DIV",{class:!0});var F=k(C);V=L(F,"등록"),F.forEach(i),O.forEach(i),this.h()},h(){u(f,"class","fixed w-full h-full bg-black -z-10"),u(r,"class","mt-12 text-2xl leading-[1.95rem] tracking-[-0.003rem] font-bold text-start break-words"),u(p,"class","mt-3 text-sm"),u(s,"type","text"),u(s,"class","flex-grow py-2.5 px-1 bg-black border-0 cursor-not-allowed text-sm read-only:text-[#B3B8BD] border-b border-[#3F3F3F] placeholder:text-[#757475] "),u(s,"placeholder","본명 혹은 닉네임을 입력하세요"),u(c,"class","mt-9 flex flex-col gap-2"),u(w,"class","mt-2 text-xs text-[#757475]"),u(t,"class","flex flex-col px-5 text-white"),u(C,"class",A="w-full py-3.5 px-4 rounded-[62.5rem] text-white text-center font-semibold text-base "+(l[2]?"bg-primary-500":"bg-[#383838CC]")),u(g,"class","fixed bottom-[2.13rem] left-0 right-0 w-full px-5")},m(e,a){I(e,f,a),I(e,m,a),ce(o,e,a),I(e,v,a),I(e,t,a),d(t,r),d(t,x),d(t,p),d(t,n),d(t,c),d(c,s),G(s,l[0]),d(t,b),d(t,w),d(w,S),I(e,$,a),I(e,g,a),d(g,C),d(C,V),y=!0,j||(T=[R(s,"input",l[4]),R(C,"click",l[5])],j=!0)},p(e,[a]){a&1&&s.value!==e[0]&&G(s,e[0]),(!y||a&3)&&D!==(D=(e[0].length>0&&e[1].uniqueName?e[1].uniqueName:"")+"")&&ee(S,D),(!y||a&4&&A!==(A="w-full py-3.5 px-4 rounded-[62.5rem] text-white text-center font-semibold text-base "+(e[2]?"bg-primary-500":"bg-[#383838CC]")))&&u(C,"class",A)},i(e){y||(de(o.$$.fragment,e),y=!0)},o(e){me(o.$$.fragment,e),y=!1},d(e){e&&(i(f),i(m),i(v),i(t),i($),i(g)),fe(o,e),j=!1,te(T)}}}function Ce(l,f,m){let o,v;ae(l,P,n=>m(6,v=n));let t="",r={uniqueName:""};function q(n){let c=!0;return m(1,r.uniqueName="",r),/^[a-z0-9._]{1,30}$/.test(n)||(m(1,r.uniqueName="영어 소문자, 숫자, ., _ 로 최대 30자 까지만 허용됩니다.",r),c=!1),c}async function x(){if(!q(t))return;let n=await fetch(`${K}/auth/users/${Q()}`,{method:"PATCH",headers:{Authorization:`Bearer ${W()}`,"Content-Type":"application/json"},body:JSON.stringify({uniqueName:t})});if(n.ok)X((await n.json()).data.access);else{const s=await n.json(),b=s.error.message;throw console.warn(b),b.includes("users_unique_name_key")?Y.emit("pushSnackbar",{message:"중복된 이름입니다."}):Y.emit("pushSnackbar",{message:s.error.message}),new Error(b)}n=await fetch(`${K}/auth/users/${Q()}`,{method:"PATCH",headers:{Authorization:`Bearer ${W()}`,"Content-Type":"application/json"},body:JSON.stringify({signedUp:!0})});const c=await n.json();X(c.data.access),se(P,v=!1,v)}function p(){t=this.value,m(0,t)}const E=async()=>{o?(await x(),await pe("/users")):(checked1=!0,checked2=!0,checked3=!0)};return l.$$.update=()=>{l.$$.dirty&1&&m(2,o=q(t))},[t,r,o,x,p,E]}class Ne extends le{constructor(f){super(),ie(this,f,Ce,ve,Z,{})}}export{Ne as component,ke as universal};
