import{e as Qe}from"../chunks/index.Bi08Y9hB.js";import{a as Me,g as Ie}from"../chunks/sign.3vAERsXi.js";import{I as se,c as bt,A as de,b as Vt,s as st,d as Ft}from"../chunks/store.CGvrHMmq.js";import{g as me}from"../chunks/entry.DIA2gAip.js";import{s as Mt,w as rt,D as ye,a as x,e as _,t as re,G as Lt,f as c,g as I,c as g,b as k,d as le,z as pe,v as h,h as m,i as B,A as L,j as De,x as vt,F as ot,k as kt,y as Rt,B as Ht,H as jt,Q as Gt,n as he,C as wt,R as Et,l as Bt}from"../chunks/scheduler.cMGevFK0.js";import{g as Jt}from"../chunks/boxRequest.HwUA-g7q.js";import{S as Kt,i as Qt,b as $t,c as R,d as H,m as G,a as S,e as lt,t as y,f as J,g as nt}from"../chunks/index.DSosqu5f.js";import{e as We}from"../chunks/each.BUpLmwGX.js";import{p as Wt}from"../chunks/stores.DqM6WIWo.js";import{H as Xt}from"../chunks/Header.DSKviwpU.js";import{C as Yt}from"../chunks/CircleImage.Cb-gmTYT.js";import{e as z}from"../chunks/emitter.E5P-NQ8u.js";import{a as Zt}from"../chunks/link_preview.DfKqbwsY.js";import"../chunks/ImageShaper.DEAJmI5j.js";import{N as es}from"../chunks/NavigationBar.ChkHTqrX.js";import{s as Xe}from"../chunks/s32cloudfront.z5a5b5iQ.js";import{B as ts}from"../chunks/BottomNavigationPadder.DY53Hbn4.js";import{g as ss,i as rs,u as ls,f as ns}from"../chunks/follow.CcYPbSXQ.js";/* empty css                                                   */import{w as os,I as as}from"../chunks/utils.8DJIN5de.js";import{I as is}from"../chunks/IconMore.CoD9sAvd.js";import{A as us}from"../chunks/ActionSheet.CmgiZBYl.js";import{I as cs}from"../chunks/IconSearch.DHgIVWYI.js";import{F as fs}from"../chunks/Figure.Bf7kuMb_.js";import{g as xt}from"../chunks/color.C_Jm4JAr.js";import{i as ms}from"../chunks/device.CFvo2wwc.js";import{u as ds}from"../chunks/searchParams.CzM_Fn8q.js";import{A as ps}from"../chunks/ActionSheetOpenApp.CqC-qYh5.js";import{I as hs}from"../chunks/IconAlert.B4wJNtq8.js";import{I as _s}from"../chunks/IconBlock.DfXVaJV3.js";function It(o,e,t){const s=o.slice();return s[40]=e[t],s[42]=t,s}function Dt(o,e,t){const s=o.slice();return s[43]=e[t],s[42]=t,s}function yt(o){let e,t,s,r,l,n,a,i,b,C,p;return document.title=e=`블루닷 - ${o[0].unique_name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`,{c(){t=x(),s=_("meta"),l=x(),n=_("meta"),i=x(),b=_("meta"),C=x(),p=_("meta"),this.h()},l(d){t=I(d),s=g(d,"META",{property:!0,content:!0}),l=I(d),n=g(d,"META",{property:!0,content:!0}),i=I(d),b=g(d,"META",{property:!0,content:!0}),C=I(d),p=g(d,"META",{property:!0,content:!0}),this.h()},h(){h(s,"property","og:title"),h(s,"content",r=`블루닷${o[0].unique_name?` - ${o[0].unique_name} 님 계정`:""}`),h(n,"property","og:description"),h(n,"content",a=o[0].unique_name?`사용자 ${o[0].unique_name} 님의 계정`:"사람과 장소 그리고 순간을 의미 있게 만들다"),h(b,"property","og:image"),h(b,"content",Zt),h(p,"property","og:image:alt"),h(p,"content","bluedot logo")},m(d,v){B(d,t,v),B(d,s,v),B(d,l,v),B(d,n,v),B(d,i,v),B(d,b,v),B(d,C,v),B(d,p,v)},p(d,v){v[0]&1&&e!==(e=`블루닷 - ${d[0].unique_name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`)&&(document.title=e),v[0]&1&&r!==(r=`블루닷${d[0].unique_name?` - ${d[0].unique_name} 님 계정`:""}`)&&h(s,"content",r),v[0]&1&&a!==(a=d[0].unique_name?`사용자 ${d[0].unique_name} 님의 계정`:"사람과 장소 그리고 순간을 의미 있게 만들다")&&h(n,"content",a)},d(d){d&&(c(t),c(s),c(l),c(n),c(i),c(b),c(C),c(p))}}}function gs(o){let e,t,s,r,l,n,a,i,b;return s=new cs({props:{width:"24",height:"24"}}),n=new is({}),{c(){e=_("div"),t=_("button"),R(s.$$.fragment),r=x(),l=_("button"),R(n.$$.fragment),this.h()},l(C){e=g(C,"DIV",{class:!0});var p=k(e);t=g(p,"BUTTON",{});var d=k(t);H(s.$$.fragment,d),d.forEach(c),r=I(p),l=g(p,"BUTTON",{});var v=k(l);H(n.$$.fragment,v),v.forEach(c),p.forEach(c),this.h()},h(){h(e,"class","flex items-center gap-2")},m(C,p){B(C,e,p),m(e,t),G(s,t,null),m(e,r),m(e,l),G(n,l,null),a=!0,i||(b=[L(t,"click",o[19]),L(l,"click",o[20])],i=!0)},p:he,i(C){a||(y(s.$$.fragment,C),y(n.$$.fragment,C),a=!0)},o(C){S(s.$$.fragment,C),S(n.$$.fragment,C),a=!1},d(C){C&&c(e),J(s),J(n),i=!1,ot(b)}}}function Cs(o){let e,t,s=!se&&gs(o);return{c(){s&&s.c(),e=ye()},l(r){s&&s.l(r),e=ye()},m(r,l){s&&s.m(r,l),B(r,e,l),t=!0},p(r,l){se||s.p(r,l)},i(r){t||(y(s),t=!0)},o(r){S(s),t=!1},d(r){r&&c(e),s&&s.d(r)}}}function bs(o){var l;let e,t,s=(((l=o[0].unique_name)==null?void 0:l.at(0))??"u")+"",r;return{c(){e=_("div"),t=_("span"),r=re(s),this.h()},l(n){e=g(n,"DIV",{class:!0,style:!0});var a=k(e);t=g(a,"SPAN",{class:!0});var i=k(t);r=le(i,s),i.forEach(c),a.forEach(c),this.h()},h(){h(t,"class","text-2xl font-semibold text-black"),h(e,"class","w-full h-full flex items-center justify-center"),wt(e,"background-color",xt(o[0].unique_name))},m(n,a){B(n,e,a),m(e,t),m(t,r)},p(n,a){var i;a[0]&1&&s!==(s=(((i=n[0].unique_name)==null?void 0:i.at(0))??"u")+"")&&De(r,s),a[0]&1&&wt(e,"background-color",xt(n[0].unique_name))},i:he,o:he,d(n){n&&c(e)}}}function vs(o){let e,t;return e=new Yt({props:{src:Xe(o[0].profile_image_url,500),width:"4.375rem",strokeWidth:"0"}}),{c(){R(e.$$.fragment)},l(s){H(e.$$.fragment,s)},m(s,r){G(e,s,r),t=!0},p(s,r){const l={};r[0]&1&&(l.src=Xe(s[0].profile_image_url,500)),e.$set(l)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function ks(o){let e,t,s="차단 해제",r,l;return{c(){e=_("button"),t=_("div"),t.textContent=s,this.h()},l(n){e=g(n,"BUTTON",{class:!0});var a=k(e);t=g(a,"DIV",{"data-svelte-h":!0}),pe(t)!=="svelte-541pfg"&&(t.textContent=s),a.forEach(c),this.h()},h(){h(e,"class","w-full bg-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-white p-2.5 ")},m(n,a){B(n,e,a),m(e,t),r||(l=L(t,"click",o[16]),r=!0)},p:he,d(n){n&&c(e),r=!1,l()}}}function ws(o){let e;function t(l,n){return l[6]?Bs:Es}let s=t(o),r=s(o);return{c(){r.c(),e=ye()},l(l){r.l(l),e=ye()},m(l,n){r.m(l,n),B(l,e,n)},p(l,n){s===(s=t(l))&&r?r.p(l,n):(r.d(1),r=s(l),r&&(r.c(),r.m(e.parentNode,e)))},d(l){l&&c(e),r.d(l)}}}function Es(o){let e;function t(l,n){return l[7]==!0?xs:$s}let s=t(o),r=s(o);return{c(){e=_("div"),r.c()},l(l){e=g(l,"DIV",{});var n=k(e);r.l(n),n.forEach(c)},m(l,n){B(l,e,n),r.m(e,null)},p(l,n){s===(s=t(l))&&r?r.p(l,n):(r.d(1),r=s(l),r&&(r.c(),r.m(e,null)))},d(l){l&&c(e),r.d()}}}function Bs(o){let e,t,s="프로필 편집",r,l;return{c(){e=_("div"),t=_("button"),t.textContent=s,this.h()},l(n){e=g(n,"DIV",{});var a=k(e);t=g(a,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(t)!=="svelte-bq7dh"&&(t.textContent=s),a.forEach(c),this.h()},h(){h(t,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(n,a){B(n,e,a),m(e,t),r||(l=L(t,"click",o[23]),r=!0)},p:he,d(n){n&&c(e),r=!1,l()}}}function $s(o){let e,t,s="팔로우",r,l;return{c(){e=_("button"),t=_("div"),t.textContent=s,this.h()},l(n){e=g(n,"BUTTON",{class:!0});var a=k(e);t=g(a,"DIV",{"data-svelte-h":!0}),pe(t)!=="svelte-1h7plv"&&(t.textContent=s),a.forEach(c),this.h()},h(){h(e,"class","w-full bg-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-white p-2.5 ")},m(n,a){B(n,e,a),m(e,t),r||(l=L(t,"click",o[25]),r=!0)},p:he,d(n){n&&c(e),r=!1,l()}}}function xs(o){let e,t="팔로잉",s,r;return{c(){e=_("button"),e.textContent=t,this.h()},l(l){e=g(l,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-lkgmf"&&(e.textContent=t),this.h()},h(){h(e,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(l,n){B(l,e,n),s||(r=L(e,"click",o[24]),s=!0)},p:he,d(l){l&&c(e),s=!1,r()}}}function At(o){let e,t,s=We(o[3]),r=[];for(let l=0;l<s.length;l+=1)r[l]=St(Dt(o,s,l));return{c(){e=_("section"),t=_("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=g(l,"SECTION",{class:!0});var n=k(e);t=g(n,"DIV",{class:!0});var a=k(t);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(c),n.forEach(c),this.h()},h(){h(t,"class","flex overflow-x-auto space-x-5 px-5 pb-[1.5rem]"),h(e,"class","mt-[1.69rem]")},m(l,n){B(l,e,n),m(e,t);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(t,null)},p(l,n){if(n[0]&8){s=We(l[3]);let a;for(a=0;a<s.length;a+=1){const i=Dt(l,s,a);r[a]?r[a].p(i,n):(r[a]=St(i),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(l){l&&c(e),jt(r,l)}}}function Tt(o){let e,t,s;return{c(){e=_("img"),this.h()},l(r){e=g(r,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){h(e,"class","w-full h-full object-cover bg-[#D9D9D9] brightness-75"),Et(e.src,t=Xe(o[43].image,500))||h(e,"src",t),h(e,"alt",s=o[43].name)},m(r,l){B(r,e,l)},p(r,l){l[0]&8&&!Et(e.src,t=Xe(r[43].image,500))&&h(e,"src",t),l[0]&8&&s!==(s=r[43].name)&&h(e,"alt",s)},d(r){r&&c(e)}}}function St(o){let e,t,s,r=o[43].name+"",l,n,a=o[43].image,i,b,C,p=Tt(o);function d(){return o[26](o[43])}return{c(){e=_("div"),t=_("div"),s=_("span"),l=re(r),n=x(),p.c(),i=x(),this.h()},l(v){e=g(v,"DIV",{class:!0});var w=k(e);t=g(w,"DIV",{class:!0});var D=k(t);s=g(D,"SPAN",{class:!0});var $=k(s);l=le($,r),$.forEach(c),n=I(D),p.l(D),D.forEach(c),i=I(w),w.forEach(c),this.h()},h(){h(s,"class","absolute inset-0 flex items-center justify-center z-10 text-xs text-center font-medium leading-[1.125rem] tracking-[-0.0375rem] "),h(t,"class","relative w-full h-full rounded-full overflow-hidden border-4 border-white/15 "),h(e,"class","w-[4.875rem] h-[4.875rem] flex-shrink-0")},m(v,w){B(v,e,w),m(e,t),m(t,s),m(s,l),m(t,n),p.m(t,null),m(e,i),b||(C=L(t,"click",d),b=!0)},p(v,w){o=v,w[0]&8&&r!==(r=o[43].name+"")&&De(l,r),w[0]&8&&Mt(a,a=o[43].image)?(p.d(1),p=Tt(o),p.c(),p.m(t,null)):p.p(o,w)},d(v){v&&c(e),p.d(v),b=!1,C()}}}function Ot(o){let e,t='<span class="text-[0.9375rem] font-semibold text-white">계정이 차단되어 게시물을 볼 수 없습니다.</span>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1wdvf96"&&(e.innerHTML=t),this.h()},h(){h(e,"class","px-5 py-20 text-center")},m(s,r){B(s,e,r)},d(s){s&&c(e)}}}function Nt(o){let e,t,s=We(o[2]),r=[];for(let n=0;n<s.length;n+=1)r[n]=Pt(It(o,s,n));const l=n=>S(r[n],1,1,()=>{r[n]=null});return{c(){e=_("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=g(n,"DIV",{class:!0});var a=k(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(c),this.h()},h(){h(e,"class","grid grid-cols-3 gap-[0.19rem]")},m(n,a){B(n,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,a){if(a[0]&8199){s=We(n[2]);let i;for(i=0;i<s.length;i+=1){const b=It(n,s,i);r[i]?(r[i].p(b,a),y(r[i],1)):(r[i]=Pt(b),r[i].c(),y(r[i],1),r[i].m(e,null))}for(nt(),i=s.length;i<r.length;i+=1)l(i);lt()}},i(n){if(!t){for(let a=0;a<s.length;a+=1)y(r[a]);t=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)S(r[a]);t=!1},d(n){n&&c(e),jt(r,n)}}}function Pt(o){let e,t,s,r,l,n;t=new fs({props:{src:o[40].media[0],post:o[40],isThumbnail:!0,loading:"lazy",useThumbnailInVideo:ms,fetchpriority:o[42]<=9?"high":"low",imgSize:500}});function a(){return o[27](o[40])}return{c(){e=_("div"),R(t.$$.fragment),s=x(),this.h()},l(i){e=g(i,"DIV",{class:!0});var b=k(e);H(t.$$.fragment,b),s=I(b),b.forEach(c),this.h()},h(){h(e,"class","aspect-square overflow-hidden relative")},m(i,b){B(i,e,b),G(t,e,null),m(e,s),r=!0,l||(n=L(e,"click",a),l=!0)},p(i,b){o=i;const C={};b[0]&4&&(C.src=o[40].media[0]),b[0]&4&&(C.post=o[40]),t.$set(C)},i(i){r||(y(t.$$.fragment,i),r=!0)},o(i){S(t.$$.fragment,i),r=!1},d(i){i&&c(e),J(t),l=!1,n()}}}function Is(o){let e,t;return e=new es({}),{c(){R(e.$$.fragment)},l(s){H(e.$$.fragment,s)},m(s,r){G(e,s,r),t=!0},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function Ds(o){let e,t,s,r,l,n,a,i,b,C,p,d,v,w,D;return s=new as({props:{length:1.5,fill:"white"}}),a=new _s({}),p=new hs({}),{c(){e=_("div"),t=_("button"),R(s.$$.fragment),r=re(`
      링크 복사`),l=x(),n=_("button"),R(a.$$.fragment),i=re(`
      차단`),b=x(),C=_("button"),R(p.$$.fragment),d=re(`
      신고`),this.h()},l($){e=g($,"DIV",{class:!0});var O=k(e);t=g(O,"BUTTON",{class:!0});var K=k(t);H(s.$$.fragment,K),r=le(K,`
      링크 복사`),K.forEach(c),l=I(O),n=g(O,"BUTTON",{class:!0});var F=k(n);H(a.$$.fragment,F),i=le(F,`
      차단`),F.forEach(c),b=I(O),C=g(O,"BUTTON",{class:!0});var N=k(C);H(p.$$.fragment,N),d=le(N,`
      신고`),N.forEach(c),O.forEach(c),this.h()},h(){h(t,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),h(n,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),h(C,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),h(e,"class","px-5")},m($,O){B($,e,O),m(e,t),G(s,t,null),m(t,r),m(e,l),m(e,n),G(a,n,null),m(n,i),m(e,b),m(e,C),G(p,C,null),m(C,d),v=!0,w||(D=[L(t,"click",o[29]),L(n,"click",o[15]),L(C,"click",o[14])],w=!0)},p:he,i($){v||(y(s.$$.fragment,$),y(a.$$.fragment,$),y(p.$$.fragment,$),v=!0)},o($){S(s.$$.fragment,$),S(a.$$.fragment,$),S(p.$$.fragment,$),v=!1},d($){$&&c(e),J(s),J(a),J(p),w=!1,ot(D)}}}function ys(o){let e,t,s,r,l,n,a,i,b,C,p,d,v,w,D,$,O=(o[12]?0:o[2].length)+"",K,F,N,je="포스트",Ae,P,ne,_e=(o[12]?0:o[4])+"",ke,Te,X,Ue="팔로워",Se,Q,oe,ge=(o[12]?0:o[5])+"",we,Oe,Y,ze="팔로잉",Ne,ae,ie,Ce=o[0].unique_name+"",Ee,f,j,Z,Pe,be,Fe,qe,Ye,ve,Le,Re,ee,Ze,He,te,et,ue,tt,at,q=o[0].idx&&yt(o);n=new Xt({props:{position:se?"sticky":"static",leftLogo:se,leftBack:se?"":"white",backgroundColor:"bg-black",$$slots:{right:[Cs]},$$scope:{ctx:o}}});const it=[vs,bs],ce=[];function ut(u,E){return u[0].profile_image_url?0:1}p=ut(o),d=ce[p]=it[p](o);function ct(u,E){if(!u[12])return ws;if(u[12])return ks}let Be=ct(o),V=Be&&Be(o),M=!o[12]&&At(o),U=o[12]&&Ot(),T=!o[12]&&Nt(o);ve=new ts({});let W=!se&&Is();function Ut(u){o[30](u)}let ft={fixed:!0,noHandle:!0,$$slots:{default:[Ds]},$$scope:{ctx:o}};o[9]!==void 0&&(ft.isOpen=o[9]),ee=new us({props:ft}),rt.push(()=>$t(ee,"isOpen",Ut));function zt(u){o[31](u)}let mt={};return o[11]!==void 0&&(mt.isOpen=o[11]),te=new ps({props:mt}),rt.push(()=>$t(te,"isOpen",zt)),{c(){q&&q.c(),e=ye(),t=x(),s=_("div"),r=x(),l=_("div"),R(n.$$.fragment),a=x(),i=_("section"),b=_("div"),C=_("div"),d.c(),v=x(),w=_("div"),D=_("div"),$=_("span"),K=re(O),F=x(),N=_("span"),N.textContent=je,Ae=x(),P=_("div"),ne=_("span"),ke=re(_e),Te=x(),X=_("span"),X.textContent=Ue,Se=x(),Q=_("div"),oe=_("span"),we=re(ge),Oe=x(),Y=_("span"),Y.textContent=ze,Ne=x(),ae=_("section"),ie=_("span"),Ee=re(Ce),f=x(),j=_("section"),V&&V.c(),Z=x(),M&&M.c(),Pe=x(),U&&U.c(),be=x(),T&&T.c(),Fe=x(),qe=_("div"),Ye=x(),R(ve.$$.fragment),Le=x(),W&&W.c(),Re=x(),R(ee.$$.fragment),He=x(),R(te.$$.fragment),this.h()},l(u){const E=Lt("svelte-9hxaoi",document.head);q&&q.l(E),e=ye(),E.forEach(c),t=I(u),s=g(u,"DIV",{class:!0}),k(s).forEach(c),r=I(u),l=g(u,"DIV",{class:!0});var A=k(l);H(n.$$.fragment,A),a=I(A),i=g(A,"SECTION",{class:!0});var fe=k(i);b=g(fe,"DIV",{class:!0});var $e=k(b);C=g($e,"DIV",{class:!0});var Ve=k(C);d.l(Ve),Ve.forEach(c),$e.forEach(c),v=I(fe),w=g(fe,"DIV",{class:!0});var xe=k(w);D=g(xe,"DIV",{class:!0});var Ge=k(D);$=g(Ge,"SPAN",{class:!0});var dt=k($);K=le(dt,O),dt.forEach(c),F=I(Ge),N=g(Ge,"SPAN",{class:!0,"data-svelte-h":!0}),pe(N)!=="svelte-13hqbuq"&&(N.textContent=je),Ge.forEach(c),Ae=I(xe),P=g(xe,"DIV",{class:!0});var Je=k(P);ne=g(Je,"SPAN",{class:!0});var pt=k(ne);ke=le(pt,_e),pt.forEach(c),Te=I(Je),X=g(Je,"SPAN",{class:!0,"data-svelte-h":!0}),pe(X)!=="svelte-1nb7yum"&&(X.textContent=Ue),Je.forEach(c),Se=I(xe),Q=g(xe,"DIV",{class:!0});var Ke=k(Q);oe=g(Ke,"SPAN",{class:!0});var ht=k(oe);we=le(ht,ge),ht.forEach(c),Oe=I(Ke),Y=g(Ke,"SPAN",{class:!0,"data-svelte-h":!0}),pe(Y)!=="svelte-ugas5h"&&(Y.textContent=ze),Ke.forEach(c),xe.forEach(c),fe.forEach(c),Ne=I(A),ae=g(A,"SECTION",{class:!0});var _t=k(ae);ie=g(_t,"SPAN",{class:!0});var gt=k(ie);Ee=le(gt,Ce),gt.forEach(c),_t.forEach(c),f=I(A),j=g(A,"SECTION",{class:!0});var Ct=k(j);V&&V.l(Ct),Ct.forEach(c),Z=I(A),M&&M.l(A),Pe=I(A),U&&U.l(A),be=I(A),T&&T.l(A),Fe=I(A),qe=g(A,"DIV",{}),k(qe).forEach(c),Ye=I(A),H(ve.$$.fragment,A),A.forEach(c),Le=I(u),W&&W.l(u),Re=I(u),H(ee.$$.fragment,u),He=I(u),H(te.$$.fragment,u),this.h()},h(){h(s,"class","fixed w-full h-full bg-black -z-10"),h(C,"class","w-[4.375rem] h-[4.375rem] rounded-full overflow-hidden"),h(b,"class","flex flex-col gap-2 items-center"),h($,"class","text-[0.8125rem] font-semibold"),h(N,"class","text-xs"),h(D,"class","flex flex-col items-center"),h(ne,"class","text-[0.8125rem] font-semibold"),h(X,"class","text-xs"),h(P,"class","flex flex-col items-center"),h(oe,"class","text-[0.8125rem] font-semibold"),h(Y,"class","text-xs"),h(Q,"class","flex flex-col items-center"),h(w,"class","flex gap-8 justify-start"),h(i,"class","flex px-5 pt-3.5 gap-6 items-center"),h(ie,"class","text-sm font-medium"),h(ae,"class","mt-[1.125rem] px-5"),h(j,"class","px-5 pt-[0.88rem]"),h(l,"class","w-full h-full text-white")},m(u,E){q&&q.m(document.head,null),m(document.head,e),B(u,t,E),B(u,s,E),B(u,r,E),B(u,l,E),G(n,l,null),m(l,a),m(l,i),m(i,b),m(b,C),ce[p].m(C,null),m(i,v),m(i,w),m(w,D),m(D,$),m($,K),m(D,F),m(D,N),m(w,Ae),m(w,P),m(P,ne),m(ne,ke),m(P,Te),m(P,X),m(w,Se),m(w,Q),m(Q,oe),m(oe,we),m(Q,Oe),m(Q,Y),m(l,Ne),m(l,ae),m(ae,ie),m(ie,Ee),m(l,f),m(l,j),V&&V.m(j,null),m(l,Z),M&&M.m(l,null),m(l,Pe),U&&U.m(l,null),m(l,be),T&&T.m(l,null),m(l,Fe),m(l,qe),o[28](qe),m(l,Ye),G(ve,l,null),B(u,Le,E),W&&W.m(u,E),B(u,Re,E),G(ee,u,E),B(u,He,E),G(te,u,E),ue=!0,tt||(at=[L(P,"click",o[21]),L(Q,"click",o[22])],tt=!0)},p(u,E){u[0].idx?q?q.p(u,E):(q=yt(u),q.c(),q.m(e.parentNode,e)):q&&(q.d(1),q=null);const A={};E[0]&578|E[1]&16384&&(A.$$scope={dirty:E,ctx:u}),n.$set(A);let fe=p;p=ut(u),p===fe?ce[p].p(u,E):(nt(),S(ce[fe],1,1,()=>{ce[fe]=null}),lt(),d=ce[p],d?d.p(u,E):(d=ce[p]=it[p](u),d.c()),y(d,1),d.m(C,null)),(!ue||E[0]&4100)&&O!==(O=(u[12]?0:u[2].length)+"")&&De(K,O),(!ue||E[0]&4112)&&_e!==(_e=(u[12]?0:u[4])+"")&&De(ke,_e),(!ue||E[0]&4128)&&ge!==(ge=(u[12]?0:u[5])+"")&&De(we,ge),(!ue||E[0]&1)&&Ce!==(Ce=u[0].unique_name+"")&&De(Ee,Ce),Be===(Be=ct(u))&&V?V.p(u,E):(V&&V.d(1),V=Be&&Be(u),V&&(V.c(),V.m(j,null))),u[12]?M&&(M.d(1),M=null):M?M.p(u,E):(M=At(u),M.c(),M.m(l,Pe)),u[12]?U||(U=Ot(),U.c(),U.m(l,be)):U&&(U.d(1),U=null),u[12]?T&&(nt(),S(T,1,1,()=>{T=null}),lt()):T?(T.p(u,E),E[0]&4096&&y(T,1)):(T=Nt(u),T.c(),y(T,1),T.m(l,Fe));const $e={};E[0]&512|E[1]&16384&&($e.$$scope={dirty:E,ctx:u}),!Ze&&E[0]&512&&(Ze=!0,$e.isOpen=u[9],vt(()=>Ze=!1)),ee.$set($e);const Ve={};!et&&E[0]&2048&&(et=!0,Ve.isOpen=u[11],vt(()=>et=!1)),te.$set(Ve)},i(u){ue||(y(n.$$.fragment,u),y(d),y(T),y(ve.$$.fragment,u),y(W),y(ee.$$.fragment,u),y(te.$$.fragment,u),ue=!0)},o(u){S(n.$$.fragment,u),S(d),S(T),S(ve.$$.fragment,u),S(W),S(ee.$$.fragment,u),S(te.$$.fragment,u),ue=!1},d(u){u&&(c(t),c(s),c(r),c(l),c(Le),c(Re),c(He)),q&&q.d(u),c(e),J(n),ce[p].d(),V&&V.d(),M&&M.d(),U&&U.d(),T&&T.d(),o[28](null),J(ve),W&&W.d(u),J(ee,u),J(te,u),tt=!1,ot(at)}}}let qt=24;function As(o,e,t){let s,r;kt(o,Wt,f=>t(1,s=f)),kt(o,bt,f=>t(13,r=f));let{data:l}=e,n=l.user??{},a=l.posts??[],i=l.boxes??[],b=0,C=0,p=!1,d=!1,v=Me(),w=!1,D=!1,$,O,K=24,F=!1,N=!1;async function je(){var f;if(n.idx)try{const j=Ie(),Z=await fetch(`${de}/posts?userIdx=${n.idx}&offset=${K}&limit=${qt}`,{headers:{Authorization:`Bearer ${j}`,"x-api-version":Vt.POST}});if(!Z.ok)return;const be=((f=(await Z.json()).data)==null?void 0:f.posts)??[];be.length>0?(t(2,a=a.concat(be)),K+=qt):O.unobserve($)}catch{}}Rt(async()=>{O=new IntersectionObserver(f=>{f[0].isIntersecting&&je()},{rootMargin:"10%"}),O.observe($)}),Ht(()=>O.unobserve($));function Ae(){fetch(`${de}/auth/followers?targetTable=users&subjectTable=users&subjectIdx=${s.params.idx}`).then(f=>f.json()).then(f=>{t(5,C=f.data.length)})}let P=!1;async function ne(){z.emit("openModal",{title:`${n.unique_name}님을 신고하시겠어요?`,description:"상대방에게는 회원님이 신고했다는 정보를 알리지 않습니다.",buttonGroup:[{text:"취소",color:"text-gray-500",onClick:()=>{z.emit("closeModal")}},{text:"신고",color:"text-red-500",onClick:()=>{_e()}}]})}async function _e(){if(!P){P=!0,z.emit("loading",!0);try{const f=new URL(`${de}/auth/reports`);if(t(9,D=!1),!(await fetch(f,{method:"PUT",headers:{Authorization:`Bearer ${Ie()}`},body:JSON.stringify({targetTable:"users",targetIdx:s.params.idx,relation:"etc"})})).ok)throw new Error("신고에 실패했습니다.");z.emit("pushSnackbar",{message:"신고가 접수되었습니다."})}catch(f){throw z.emit("pushSnackbar",{message:"신고에 실패했습니다."}),f}finally{P=!1,z.emit("loading",!1),z.emit("closeModal")}}}function ke(){z.emit("openModal",{title:`${n.unique_name}님을 차단하시겠어요?`,description:"상대방에게는 회원님이 차단했다는 정보를 알리지 않습니다. 설정에서 언제든지 차단을 해제할 수 있습니다.",buttonGroup:[{text:"취소",color:"text-gray-500",onClick:f=>{z.emit("closeModal")}},{text:"차단",color:"text-red-500",onClick:()=>{Te()}}]})}async function Te(){if(!P){P=!0,z.emit("loading",!0);try{const f=new URL(`${de}/auth/filters`);if(!(await fetch(f,{method:"PUT",headers:{Authorization:`Bearer ${Ie()}`},body:JSON.stringify({targetTable:"users",targetIdx:s.params.idx,relation:"blocked"})})).ok)throw new Error("차단에 실패했습니다.");z.emit("pushSnackbar",{message:`${n.unique_name}님이 차단됨`}),t(12,N=!0)}catch(f){throw z.emit("pushSnackbar",{message:"차단에 실패했습니다."}),f}finally{P=!1,z.emit("loading",!1),z.emit("closeModal")}}}async function X(){const f=new URL(`${de}/auth/filters`);f.searchParams.set("targetTable","users"),f.searchParams.set("targetIdx",s.params.idx);const Z=(await(await fetch(f,{headers:{Authorization:`Bearer ${Ie()}`}})).json()).data;return Z?Z.relation==="blocked":!1}async function Ue(){const f=new URL(`${de}/auth/filters`);if(!(await fetch(f,{method:"DELETE",headers:{Authorization:`Bearer ${Ie()}`},body:JSON.stringify({targetTable:"users",targetIdx:s.params.idx})})).ok)throw new Error("차단 해제에 실패했습니다.");t(12,N=!1),location.reload()}const Se=async()=>{await me("/search")},Q=()=>{p?me(`/users/${s.params.idx}/setting`):t(9,D=!0)},oe=async()=>{const f=`/users/${s.params.idx}/followers?tab=followers`;await me(f)},ge=async()=>{const f=`/users/${s.params.idx}/followers?tab=followings`;await me(f)},we=async()=>{if(se)return t(11,F=!0);await me(`/users/${s.params.idx}/setting/profile`)},Oe=async()=>{if(se)return t(11,F=!0);w||(t(8,w=!0),await ls({targetIdx:s.params.idx,subjectIdx:Me()}),t(7,d=!1),t(4,b-=1),t(8,w=!1))},Y=async()=>{if(se)return t(11,F=!0);const f=Me();if(!f){z.emit("showSignInModal");return}w||(t(8,w=!0),await ns({targetIdx:s.params.idx,subjectIdx:f}),t(7,d=!0),t(4,b+=1),t(8,w=!1))},ze=f=>{me(`/boxes/${f.idx}`)},Ne=async f=>{try{if((n==null?void 0:n.idx)===0)return;Gt(bt,r=a,r),await me(`/viewer?userIdx=${s.params.idx}&postIdx=${f.idx}`,{replaceState:!1,invalidateAll:!1})}catch{}};function ae(f){rt[f?"unshift":"push"](()=>{$=f,t(10,$)})}const ie=()=>{os(`${location.pathname}${location.search}`),t(9,D=!1)};function Ce(f){D=f,t(9,D)}function Ee(f){F=f,t(11,F)}return o.$$set=f=>{"data"in f&&t(17,l=f.data)},o.$$.update=()=>{if(o.$$.dirty[0]&393219&&l.user&&s.params.idx&&s.params.idx!=="0"&&(t(0,n=l.user),t(2,a=l.posts),t(3,i=l.boxes),t(18,v=Me()),t(6,p=String(n==null?void 0:n.idx)===String(v)),ss({targetIdx:s.params.idx}).then(f=>{t(4,b=f)}),Ae(),v&&rs({targetIdx:s.params.idx,subjectIdx:v}).then(f=>{t(7,d=f)}),X().then(f=>{t(12,N=f)})),o.$$.dirty[0]&131074&&!l.user&&s.params.idx==="0")try{ds({replace:"1"},{replace:!0})}catch{}},[n,s,a,i,b,C,p,d,w,D,$,F,N,r,ne,ke,Ue,l,v,Se,Q,oe,ge,we,Oe,Y,ze,Ne,ae,ie,Ce,Ee]}class ir extends Kt{constructor(e){super(),Qt(this,e,As,ys,Mt,{data:17},null,[-1,-1])}}const Ts=async({params:o,fetch:e,depends:t,url:s})=>{var n;t("app:user");const r=Me(),l=Ie();if(o.idx==="0"&&r===null)return{};if(o.idx==="0"&&r!==null)return me(`/users/${String(r)}`,{replaceState:s.searchParams.get("replace")==="1"});if(o.idx!=="0")try{const[a,i]=await Promise.all([e(`${de}/auth/users/${o.idx}`,{headers:{Authorization:`Bearer ${l}`}}),e(`${de}/posts?userIdx=${o.idx}&limit=24`,{headers:{Authorization:`Bearer ${l}`,"x-api-version":Vt.POST}})]);if(!a.ok||!i.ok)throw Qe(500,"Failed to fetch data");const b=await a.json(),C=await i.json();let p=[];const d=String(r)===o.idx;if(d&&Bt(st).length!==0)p=Bt(st);else{const v=await Jt(l,o.idx);if(!v.ok)throw Qe(500,"Failed to fetch data");const w=await v.json();d&&st.set(w.data),p=w.data}return Ft.set(!0),{user:{...b.data,idx:Number(o.idx)},posts:((n=C.data)==null?void 0:n.posts)??[],boxes:p}}catch{throw Qe(500,"An error occurred while loading data")}throw Qe(404,"Not found")},ur=Object.freeze(Object.defineProperty({__proto__:null,load:Ts},Symbol.toStringTag,{value:"Module"}));export{ir as component,ur as universal};
