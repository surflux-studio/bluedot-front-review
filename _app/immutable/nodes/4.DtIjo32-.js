import{s as nt,I as P,i as w,f as h,k as j,e as I,a as x,c as M,b as L,m as q,g as y,o as C,h as T,p as S,v as ft,C as ut,D as ct,n as ot,z as mt}from"../chunks/scheduler.BIy9gGKi.js";import{S as rt,i as it,t as g,g as W,a as $,f as Z,c as E,b as V,m as A,d as N}from"../chunks/index.BETvqhaq.js";import{a as U,b as J,c as dt,C as pt,I as ht,m as _t,o as bt}from"../chunks/optionCard.DdvrHR5F.js";import{d as gt}from"../chunks/IconChevronRightV2.B_DO9ov7.js";import{I as kt}from"../chunks/IconPlus.BN8BhGP0.js";import{O as vt,m as wt}from"../chunks/map.C7MrUMM9.js";import{g as lt,i as Ct,a as $t}from"../chunks/sign.Cl6bdCIL.js";import{e as H}from"../chunks/emitter.E5P-NQ8u.js";import{c as z,f as at,a as R,d as It,b as K,h as G,g as Q,A as Mt,k as Tt}from"../chunks/store.C3f-MM0q.js";import{c as xt}from"../chunks/createCard.BP_iAFmU.js";import{g as yt}from"../chunks/uuid.BbJUX8XE.js";import{C as Ot}from"../chunks/CardDeck.CTGKyvQc.js";import{D as Dt}from"../chunks/Dot.b30pHZfy.js";import{M as Lt}from"../chunks/Map.-MQNuWc5.js";function X(c){let e,s,t,r='<div class="bottom-island-sun svelte-806knn"></div>',l,m,i,a,d='<div class="bottom-island-moon svelte-806knn"></div>',_,k,v,O,n,f,u,o,p;return f=new kt({}),{c(){e=I("div"),s=I("div"),t=I("button"),t.innerHTML=r,l=x(),m=I("div"),i=x(),a=I("button"),a.innerHTML=d,_=x(),k=I("div"),O=x(),n=I("button"),E(f.$$.fragment),this.h()},l(b){e=M(b,"DIV",{class:!0});var B=L(e);s=M(B,"DIV",{class:!0});var D=L(s);t=M(D,"BUTTON",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-nvhq4c"&&(t.innerHTML=r),l=y(D),m=M(D,"DIV",{class:!0}),L(m).forEach(h),i=y(D),a=M(D,"BUTTON",{class:!0,"data-svelte-h":!0}),q(a)!=="svelte-k08wib"&&(a.innerHTML=d),_=y(D),k=M(D,"DIV",{class:!0}),L(k).forEach(h),O=y(D),n=M(D,"BUTTON",{class:!0});var F=L(n);V(f.$$.fragment,F),F.forEach(h),D.forEach(h),B.forEach(h),this.h()},h(){C(t,"class","bottom-island-sun-part svelte-806knn"),C(m,"class","flex-auto"),C(a,"class","bottom-island-moon-part svelte-806knn"),C(k,"class",v="bottom-island-active "+(c[0]==="sun"?"moon-to-sun":"sun-to-moon")+" svelte-806knn"),C(n,"class","bottom-island-create-button svelte-806knn"),C(s,"class","bottom-island svelte-806knn"),C(e,"class","bottom-island-container svelte-806knn")},m(b,B){w(b,e,B),T(e,s),T(s,t),T(s,l),T(s,m),T(s,i),T(s,a),T(s,_),T(s,k),T(s,O),T(s,n),A(f,n,null),u=!0,o||(p=[S(t,"click",c[3]),S(a,"click",c[4]),S(n,"click",xt)],o=!0)},p(b,B){(!u||B&1&&v!==(v="bottom-island-active "+(b[0]==="sun"?"moon-to-sun":"sun-to-moon")+" svelte-806knn"))&&C(k,"class",v)},i(b){u||(g(f.$$.fragment,b),u=!0)},o(b){$(f.$$.fragment,b),u=!1},d(b){b&&h(e),N(f),o=!1,ft(p)}}}function Ht(c){let e,s,t=c[1]&&X(c);return{c(){t&&t.c(),e=P()},l(r){t&&t.l(r),e=P()},m(r,l){t&&t.m(r,l),w(r,e,l),s=!0},p(r,[l]){r[1]?t?(t.p(r,l),l&2&&g(t,1)):(t=X(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(W(),$(t,1,1,()=>{t=null}),Z())},i(r){s||(g(t),s=!0)},o(r){$(t),s=!1},d(r){r&&h(e),t&&t.d(r)}}}function Et(c,e,s){let t;j(c,z,_=>s(1,t=_));let r="sun";const l=document.createElement("div");l.style.width="100%",l.style.height="100%";const m=new vt({element:l,stopEvent:!1,positioning:"top-left",className:"overlay-map-light"});wt.addOverlay(m);function i(_){if(r!==_){if(_==="moon"&&!lt()){H.emit("pushCard",{idx:yt(),type:"signIn",pushAnimation:"pop",unflippable:!0});return}s(0,r=_),at.set(r),r==="sun"?(l.classList.add("to-bright"),l.classList.remove("to-dark")):(l.classList.add("to-dark"),l.classList.remove("to-bright"))}}return[r,t,i,()=>{i("sun")},()=>{i("moon")}]}class Vt extends rt{constructor(e){super(),it(this,e,Et,Ht,nt,{})}}function Y(c){let e,s;return e=new pt({}),{c(){E(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,r){A(e,t,r),s=!0},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function tt(c){let e,s='<svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 2H16" stroke="#222222" stroke-width="2.5" stroke-linecap="round"></path><path d="M2 8H16" stroke="#222222" stroke-width="2.5" stroke-linecap="round"></path><path d="M2 14H16" stroke="#222222" stroke-width="2.5" stroke-linecap="round"></path></svg>',t,r,l,m,i=c[3]==="moon"&&et(c);return{c(){e=I("button"),e.innerHTML=s,t=x(),i&&i.c(),r=P(),this.h()},l(a){e=M(a,"BUTTON",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-1noa7nl"&&(e.innerHTML=s),t=y(a),i&&i.l(a),r=P(),this.h()},h(){C(e,"class","bg-white rounded-full w-10 h-10 flex justify-center items-center shadow-[0.934762px,0.934762px,5.60857px,rgba(0,0,0,0.1)]")},m(a,d){w(a,e,d),w(a,t,d),i&&i.m(a,d),w(a,r,d),l||(m=S(e,"click",c[7]),l=!0)},p(a,d){a[3]==="moon"?i?i.p(a,d):(i=et(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){a&&(h(e),h(t),h(r)),i&&i.d(a),l=!1,m()}}}function et(c){let e,s='<svg width="18" height="22" viewBox="0 0 18 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.99658 1H14.9966C16.1012 1 16.9966 1.89543 16.9966 3V15C16.9966 16.1046 16.1012 17 14.9966 17H6.99658C5.89201 17 4.99658 16.1046 4.99658 15V3C4.99658 1.89543 5.89201 1 6.99658 1Z" fill="white" stroke="black" stroke-width="2"></path><path d="M3.00293 5H11.0029C12.1075 5 13.0029 5.89543 13.0029 7V19C13.0029 20.1046 12.1075 21 11.0029 21H3.00293C1.89836 21 1.00293 20.1046 1.00293 19V7C1.00293 5.89543 1.89836 5 3.00293 5Z" fill="white" stroke="black" stroke-width="2"></path></svg>',t,r;return{c(){e=I("button"),e.innerHTML=s,this.h()},l(l){e=M(l,"BUTTON",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-1e1eezb"&&(e.innerHTML=s),this.h()},h(){C(e,"class","bg-white rounded-full w-10 h-10 flex justify-center items-center shadow-[0.934762px,0.934762px,5.60857px,rgba(0,0,0,0.1)]")},m(l,m){w(l,e,m),t||(r=S(e,"click",c[8]),t=!0)},p:ot,d(l){l&&h(e),t=!1,r()}}}function st(c){let e,s,t,r,l;return s=new ht({}),{c(){e=I("button"),E(s.$$.fragment),this.h()},l(m){e=M(m,"BUTTON",{class:!0});var i=L(e);V(s.$$.fragment,i),i.forEach(h),this.h()},h(){C(e,"class","px-[9px] py-[5px] bg-white rounded-lg shadow-[1px_4px_16px_rgba(0,0,0,0.08)] z-50")},m(m,i){w(m,e,i),A(s,e,null),t=!0,r||(l=S(e,"click",mt(c[5])),r=!0)},p:ot,i(m){t||(g(s.$$.fragment,m),t=!0)},o(m){$(s.$$.fragment,m),t=!1},d(m){m&&h(e),N(s),r=!1,l()}}}function At(c){let e,s,t,r,l,m,i,a,d,_,k,v,O;e=new Dt({}),r=new Lt({}),m=new Ot({});let n=c[1]&&Y(),f=c[2]&&tt(c),u=c[4]&&st(c);return v=new Vt({}),{c(){E(e.$$.fragment),s=x(),t=I("div"),E(r.$$.fragment),l=x(),E(m.$$.fragment),i=x(),n&&n.c(),a=x(),d=I("div"),f&&f.c(),_=x(),u&&u.c(),k=x(),E(v.$$.fragment),this.h()},l(o){V(e.$$.fragment,o),s=y(o),t=M(o,"DIV",{class:!0});var p=L(t);V(r.$$.fragment,p),p.forEach(h),l=y(o),V(m.$$.fragment,o),i=y(o),n&&n.l(o),a=y(o),d=M(o,"DIV",{class:!0});var b=L(d);f&&f.l(b),_=y(b),u&&u.l(b),b.forEach(h),k=y(o),V(v.$$.fragment,o),this.h()},h(){C(t,"class","fixed inset-0"),C(d,"class","top-right-floating fixed top-[54px] right-4 flex flex-col gap-2.5 z-50")},m(o,p){A(e,o,p),w(o,s,p),w(o,t,p),A(r,t,null),w(o,l,p),A(m,o,p),w(o,i,p),n&&n.m(o,p),w(o,a,p),w(o,d,p),f&&f.m(d,null),T(d,_),u&&u.m(d,null),w(o,k,p),A(v,o,p),O=!0},p(o,[p]){o[1]?n?p&2&&g(n,1):(n=Y(),n.c(),g(n,1),n.m(a.parentNode,a)):n&&(W(),$(n,1,1,()=>{n=null}),Z()),o[2]?f?f.p(o,p):(f=tt(o),f.c(),f.m(d,_)):f&&(f.d(1),f=null),o[4]?u?(u.p(o,p),p&16&&g(u,1)):(u=st(o),u.c(),g(u,1),u.m(d,null)):u&&(W(),$(u,1,1,()=>{u=null}),Z())},i(o){O||(g(e.$$.fragment,o),g(r.$$.fragment,o),g(m.$$.fragment,o),g(n),g(u),g(v.$$.fragment,o),O=!0)},o(o){$(e.$$.fragment,o),$(r.$$.fragment,o),$(m.$$.fragment,o),$(n),$(u),$(v.$$.fragment,o),O=!1},d(o){o&&(h(s),h(t),h(l),h(i),h(a),h(d),h(k)),N(e,o),N(r),N(m,o),n&&n.d(o),f&&f.d(),u&&u.d(),N(v,o)}}}function Nt(c,e,s){let t,r,l,m;j(c,R,n=>s(9,t=n)),j(c,G,n=>s(2,r=n)),j(c,at,n=>s(3,l=n)),j(c,K,n=>s(4,m=n));let i=!1,a=!1;R.subscribe(n=>{if(n.length===0){k();return}const f=n.at(-1);f&&(f.rotateDegree=0);const u=n.at(-2);u&&(u.rotateDegree=void 0)}),It.subscribe(async n=>{if(n){const f=await d();console.log(f),s(6,U[0].endCount=f.length,U),s(6,U[0].onClick=()=>{H.emit("pushCard",{idx:"1",type:"option",left:"",right:"",unflippable:!0,optionList:f.map(u=>({startIcon:gt,name:`사용자 #${u.target_idx}`,onClick:()=>{}}))})},U)}else H.emit("setCards",[]),s(0,i=!1)});async function d(){const n=`${Mt}/auth/filters`;return(await(await fetch(n,{headers:{Authorization:`Bearer ${lt()}`}})).json()).data}function _(){const n=t.at(-1);if((n==null?void 0:n.idx)!=="-1"&&n&&n.ownerIdx){const f=$t();Tt.set(n);const u=n.ownerIdx===`${f}`?_t:bt;H.emit("pushCard",u)}}function k(){s(0,i=!1),K.set(!1)}ut(()=>{H.on("showAlbum",n=>{s(1,a=n)})}),ct(()=>{H.off("showAlbum")});const v=()=>s(0,i=!0),O=()=>s(1,a=!0);return c.$$.update=()=>{if(c.$$.dirty&65)if(i){const n={...J,optionList:[...Ct()?U:dt,...J.optionList]};H.emit("pushCard",n),z.set(!1)}else z.set(!0);c.$$.dirty&2&&(a?(z.set(!1),G.set(!1),Q.set(!1)):(z.set(!0),G.set(!0),Q.set(!0)))},[i,a,r,l,m,_,U,v,O]}class Qt extends rt{constructor(e){super(),it(this,e,Nt,At,nt,{})}}export{Qt as component};
