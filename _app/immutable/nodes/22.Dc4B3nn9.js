import{h as Oe,e as De,A as de,g as _e,l as Ie,r as Pe,m as ae,n as Se}from"../chunks/sign.DAu4KAMA.js";import{e as ne}from"../chunks/index.BEwhUcAi.js";import{l as Te,s as ee,e as E,c as V,b as $,f as g,x as a,i as N,t as ue,a as S,d as ce,g as T,h as k,y as W,S as Ne,j as pe,n as J,E as U,F as K,v as Z,w as Q,z as ge,k as be,q as Ye,r as Fe,ad as Me,D as je}from"../chunks/scheduler.B6RFReyk.js";import{g as oe}from"../chunks/entry.CNKC8QBQ.js";import{S as te,i as ie,g as se,f as re,t as x,a as B,c as F,b as M,m as j,d as H,e as X}from"../chunks/index.DLC1-nrr.js";import{r as Ee,H as Ve}from"../chunks/Header.DwDN9eoa.js";import{V as xe}from"../chunks/Viewer.B--DGS5m.js";/* empty css                                                   *//* empty css                                                     *//* empty css                                                   */import{p as He}from"../chunks/stores.dPe_C5Z7.js";import{e as fe,u as Be,o as Ae}from"../chunks/each.BdHWekAj.js";import{I as Le}from"../chunks/IconChevronRight.Bou04O79.js";import{B as Re}from"../chunks/BottomNavigationPadder.DatRvrw2.js";import{A as qe}from"../chunks/ActionSheet.Cc-yrJos.js";/* empty css                                                            */const Je=async({fetch:s,url:e})=>{console.warn("viewer/edit/+page.ts load");const t=e.searchParams.get("type");if(t===null||!["post","patch"].includes(t))return ne(400,"Bad Request");if(t==="post"){console.log("viewer/edit/+page.ts load type post");const i=Oe();return{posts:[{user_idx:i==null?void 0:i.sub,unique_name:i==null?void 0:i.uni,profile_image_url:i==null?void 0:i.pic,place_idx:e.searchParams.get("placeIdx"),place_name:e.searchParams.get("placeName"),media:Te(Ie),mediaIdx:0,text:""}]}}if(t==="patch"){console.log("viewer/edit/+page.ts load type patch");const i=e.searchParams.get("postIdx");if(i==="null")return De.emit("pushSnackbar",{message:"페이지 접근에 문제가 발생했습니다"}),oe("/viewer",{replaceState:!0});i||ne(404,"Not Found");const l=await s(`${de}/posts/${i}`,{method:"GET",headers:{Authorization:"Bearer "+_e()}}).then(r=>r.json()).then(r=>r.data);return l.error&&ne(404,"Not Found"),{posts:[{...l,mediaIdx:0}]}}return ne(404,"Not Found")},Pt=Object.freeze(Object.defineProperty({__proto__:null,load:Je},Symbol.toStringTag,{value:"Module"}));var ve;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(ve||(ve={}));var we;(function(s){s.Body="body",s.Ionic="ionic",s.Native="native",s.None="none"})(we||(we={}));const he=Pe("Keyboard");function ke(s,e,t){const i=s.slice();return i[1]=e[t],i[3]=t,i}function ze(s){let e;return{c(){e=E("div"),this.h()},l(t){e=V(t,"DIV",{class:!0}),$(e).forEach(g),this.h()},h(){a(e,"class","w-0.5")},m(t,i){N(t,e,i)},i:J,o:J,d(t){t&&g(e)}}}function Ge(s){let e,t;return e=new Le({props:{fill:"#6B7280",length:"1.25"}}),{c(){F(e.$$.fragment)},l(i){M(e.$$.fragment,i)},m(i,l){j(e,i,l),t=!0},i(i){t||(x(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){H(e,i)}}}function ye(s,e){let t,i,l=e[1].title+"",r,n,o,u,d=e[1].value+"",c,f,h,p,_,v,w,P,C;const I=[Ge,ze],y=[];function Y(A,O){return A[1].onClick?0:1}return h=Y(e),p=y[h]=I[h](e),{key:s,first:null,c(){t=E("div"),i=E("span"),r=ue(l),n=S(),o=E("div"),u=E("span"),c=ue(d),f=S(),p.c(),_=S(),this.h()},l(A){t=V(A,"DIV",{class:!0});var O=$(t);i=V(O,"SPAN",{class:!0});var L=$(i);r=ce(L,l),L.forEach(g),n=T(O),o=V(O,"DIV",{class:!0});var R=$(o);u=V(R,"SPAN",{class:!0});var b=$(u);c=ce(b,d),b.forEach(g),f=T(R),p.l(R),R.forEach(g),_=T(O),O.forEach(g),this.h()},h(){a(i,"class","text-white text-base"),a(u,"class","text-gray-500 text-sm font-medium"),a(o,"class","flex items-center gap-2"),a(t,"class",v=`flex items-center justify-between w-full p-4 border-b bg-black border-white/10
      ${e[1].onClick?"cursor-pointer hover:bg-white/10 active:bg-white/20":"cursor-default"} 
      ${e[3]===0?"border-t":""}
      transition-colors`),this.first=t},m(A,O){N(A,t,O),k(t,i),k(i,r),k(t,n),k(t,o),k(o,u),k(u,c),k(o,f),y[h].m(o,null),k(t,_),w=!0,P||(C=W(t,"click",function(){Ne(e[1].onClick)&&e[1].onClick.apply(this,arguments)}),P=!0)},p(A,O){e=A,(!w||O&1)&&l!==(l=e[1].title+"")&&pe(r,l),(!w||O&1)&&d!==(d=e[1].value+"")&&pe(c,d);let L=h;h=Y(e),h!==L&&(se(),B(y[L],1,1,()=>{y[L]=null}),re(),p=y[h],p||(p=y[h]=I[h](e),p.c()),x(p,1),p.m(o,null)),(!w||O&1&&v!==(v=`flex items-center justify-between w-full p-4 border-b bg-black border-white/10
      ${e[1].onClick?"cursor-pointer hover:bg-white/10 active:bg-white/20":"cursor-default"} 
      ${e[3]===0?"border-t":""}
      transition-colors`))&&a(t,"class",v)},i(A){w||(x(p),w=!0)},o(A){B(p),w=!1},d(A){A&&g(t),y[h].d(),P=!1,C()}}}function Ue(s){let e,t=[],i=new Map,l,r=fe(s[0]);const n=o=>o[1].id;for(let o=0;o<r.length;o+=1){let u=ke(s,r,o),d=n(u);i.set(d,t[o]=ye(d,u))}return{c(){e=E("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0});var u=$(e);for(let d=0;d<t.length;d+=1)t[d].l(u);u.forEach(g),this.h()},h(){a(e,"class","flex flex-col w-full")},m(o,u){N(o,e,u);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);l=!0},p(o,[u]){u&1&&(r=fe(o[0]),se(),t=Be(t,u,n,1,o,r,i,e,Ae,ye,null,ke),re())},i(o){if(!l){for(let u=0;u<r.length;u+=1)x(t[u]);l=!0}},o(o){for(let u=0;u<t.length;u+=1)B(t[u]);l=!1},d(o){o&&g(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function Ke(s,e,t){let{items:i=[{id:1,title:"장소",value:"팔발라 삼정본점"},{id:2,title:"공개 여부",value:"팔로워 공개"}]}=e;return s.$$set=l=>{"items"in l&&t(0,i=l.items)},[i]}class We extends te{constructor(e){super(),ie(this,e,Ke,Ue,ee,{items:0})}}function Ze(s){let e,t,i,l;return{c(){e=U("svg"),t=U("rect"),i=U("rect"),l=U("path"),this.h()},l(r){e=K(r,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=$(e);t=K(n,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,fill:!0}),$(t).forEach(g),i=K(n,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0}),$(i).forEach(g),l=K(n,"path",{d:!0,fill:!0}),$(l).forEach(g),n.forEach(g),this.h()},h(){a(t,"x","6.5"),a(t,"y","6.5"),a(t,"width","19"),a(t,"height","19"),a(t,"rx","9.5"),a(t,"fill",s[0]),a(i,"x","6.5"),a(i,"y","6.5"),a(i,"width","19"),a(i,"height","19"),a(i,"rx","9.5"),a(i,"stroke",s[1]),a(l,"d","M16 22.5C19.5899 22.5 22.5 19.5899 22.5 16C22.5 12.4101 19.5899 9.5 16 9.5C12.4101 9.5 9.5 12.4101 9.5 16C9.5 19.5899 12.4101 22.5 16 22.5Z"),a(l,"fill",s[1]),a(e,"width",s[2]),a(e,"height",s[2]),a(e,"viewBox","0 0 32 32"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(r,n){N(r,e,n),k(e,t),k(e,i),k(e,l)},p(r,[n]){n&1&&a(t,"fill",r[0]),n&2&&a(i,"stroke",r[1]),n&2&&a(l,"fill",r[1]),n&4&&a(e,"width",r[2]),n&4&&a(e,"height",r[2])},i:J,o:J,d(r){r&&g(e)}}}function Qe(s,e,t){let i,{fill:l="#5f6368"}=e,{stroke:r="#000000"}=e,{length:n="1.75"}=e;return s.$$set=o=>{"fill"in o&&t(0,l=o.fill),"stroke"in o&&t(1,r=o.stroke),"length"in o&&t(3,n=o.length)},s.$$.update=()=>{s.$$.dirty&8&&t(2,i=Ee(n))},[l,r,i,n]}class Xe extends te{constructor(e){super(),ie(this,e,Qe,Ze,ee,{fill:0,stroke:1,length:3})}}function et(s){let e,t,i;return{c(){e=U("svg"),t=U("rect"),i=U("rect"),this.h()},l(l){e=K(l,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var r=$(e);t=K(r,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,fill:!0}),$(t).forEach(g),i=K(r,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0}),$(i).forEach(g),r.forEach(g),this.h()},h(){a(t,"x","6.5"),a(t,"y","6.5"),a(t,"width","19"),a(t,"height","19"),a(t,"rx","9.5"),a(t,"fill",s[0]),a(i,"x","6.5"),a(i,"y","6.5"),a(i,"width","19"),a(i,"height","19"),a(i,"rx","9.5"),a(i,"stroke",s[1]),a(e,"width",s[2]),a(e,"height",s[2]),a(e,"viewBox","0 0 32 32"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(l,r){N(l,e,r),k(e,t),k(e,i)},p(l,[r]){r&1&&a(t,"fill",l[0]),r&2&&a(i,"stroke",l[1]),r&4&&a(e,"width",l[2]),r&4&&a(e,"height",l[2])},i:J,o:J,d(l){l&&g(e)}}}function tt(s,e,t){let i,{fill:l="#5f6368"}=e,{stroke:r="#C9CDD2"}=e,{length:n="1.75"}=e;return s.$$set=o=>{"fill"in o&&t(0,l=o.fill),"stroke"in o&&t(1,r=o.stroke),"length"in o&&t(3,n=o.length)},s.$$.update=()=>{s.$$.dirty&8&&t(2,i=Ee(n))},[l,r,i,n]}class it extends te{constructor(e){super(),ie(this,e,tt,et,ee,{fill:0,stroke:1,length:3})}}function Ce(s,e,t){const i=s.slice();return i[5]=e[t],i[7]=t,i}function st(s){let e,t;return e=new it({props:{fill:"white",stroke:"#C9CDD2"}}),{c(){F(e.$$.fragment)},l(i){M(e.$$.fragment,i)},m(i,l){j(e,i,l),t=!0},i(i){t||(x(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){H(e,i)}}}function rt(s){let e,t;return e=new Xe({props:{fill:"white",stroke:"black"}}),{c(){F(e.$$.fragment)},l(i){M(e.$$.fragment,i)},m(i,l){j(e,i,l),t=!0},i(i){t||(x(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){H(e,i)}}}function $e(s,e){let t,i,l,r,n,o,u=ae[e[5]]+"",d,c,f,h,p;const _=[rt,st],v=[];function w(C,I){return C[1]===C[5]?0:1}l=w(e),r=v[l]=_[l](e);function P(){return e[3](e[5])}return{key:s,first:null,c(){t=E("div"),i=E("button"),r.c(),n=S(),o=E("div"),d=ue(u),c=S(),this.h()},l(C){t=V(C,"DIV",{class:!0});var I=$(t);i=V(I,"BUTTON",{class:!0});var y=$(i);r.l(y),n=T(y),o=V(y,"DIV",{});var Y=$(o);d=ce(Y,u),Y.forEach(g),y.forEach(g),c=T(I),I.forEach(g),this.h()},h(){a(i,"class","flex items-center gap-1"),a(t,"class","flex items-center gap-1 flex-wrap"),this.first=t},m(C,I){N(C,t,I),k(t,i),v[l].m(i,null),k(i,n),k(i,o),k(o,d),k(t,c),f=!0,h||(p=W(i,"click",P),h=!0)},p(C,I){e=C;let y=l;l=w(e),l!==y&&(se(),B(v[y],1,1,()=>{v[y]=null}),re(),r=v[l],r||(r=v[l]=_[l](e),r.c()),x(r,1),r.m(i,n)),(!f||I&4)&&u!==(u=ae[e[5]]+"")&&pe(d,u)},i(C){f||(x(r),f=!0)},o(C){B(r),f=!1},d(C){C&&g(t),v[l].d(),h=!1,p()}}}function lt(s){let e,t,i="공개 여부",l,r,n=[],o=new Map,u,d=fe(s[2]);const c=f=>f[5];for(let f=0;f<d.length;f+=1){let h=Ce(s,d,f),p=c(h);o.set(p,n[f]=$e(p,h))}return{c(){e=E("div"),t=E("header"),t.textContent=i,l=S(),r=E("div");for(let f=0;f<n.length;f+=1)n[f].c();this.h()},l(f){e=V(f,"DIV",{class:!0});var h=$(e);t=V(h,"HEADER",{class:!0,"data-svelte-h":!0}),ge(t)!=="svelte-16g896e"&&(t.textContent=i),l=T(h),r=V(h,"DIV",{class:!0});var p=$(r);for(let _=0;_<n.length;_+=1)n[_].l(p);p.forEach(g),h.forEach(g),this.h()},h(){a(t,"class","py-4 text-white font-bold"),a(r,"class","flex flex-col gap-4 text-white flex-wrap"),a(e,"class","px-8 pb-8")},m(f,h){N(f,e,h),k(e,t),k(e,l),k(e,r);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(r,null);u=!0},p(f,h){h&6&&(d=fe(f[2]),se(),n=Be(n,h,c,1,f,d,o,r,Ae,$e,null,Ce),re())},i(f){if(!u){for(let h=0;h<d.length;h+=1)x(n[h]);u=!0}},o(f){for(let h=0;h<n.length;h+=1)B(n[h]);u=!1},d(f){f&&g(e);for(let h=0;h<n.length;h+=1)n[h].d()}}}function nt(s){let e,t,i;function l(n){s[4](n)}let r={fixed:!0,noHandle:!0,$$slots:{default:[lt]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.isOpen=s[0]),e=new qe({props:r}),Z.push(()=>X(e,"isOpen",l)),{c(){F(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,o){j(e,n,o),i=!0},p(n,[o]){const u={};o&262&&(u.$$scope={dirty:o,ctx:n}),!t&&o&1&&(t=!0,u.isOpen=n[0],Q(()=>t=!1)),e.$set(u)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){H(e,n)}}}function ot(s,e,t){let{isOpen:i=!1}=e,{availableVisibilities:l=["public","follower","private"]}=e,{selectedVisibility:r="public"}=e;const n=u=>t(1,r=u);function o(u){i=u,t(0,i)}return s.$$set=u=>{"isOpen"in u&&t(0,i=u.isOpen),"availableVisibilities"in u&&t(2,l=u.availableVisibilities),"selectedVisibility"in u&&t(1,r=u.selectedVisibility)},[i,r,l,n,o]}class at extends te{constructor(e){super(),ie(this,e,ot,nt,ee,{isOpen:0,availableVisibilities:2,selectedVisibility:1})}}function ut(s){let e,t,i,l,r,n;e=new Ve({props:{position:"fixed",leftBack:"white",$$slots:{right:[ft]},$$scope:{ctx:s}}});function o(c){s[20](c)}function u(c){s[21](c)}let d={dontMoveVertically:!0};return s[1]!==void 0&&(d.posts=s[1]),s[5]!==void 0&&(d.keyboardY=s[5]),i=new xe({props:d}),Z.push(()=>X(i,"posts",o)),Z.push(()=>X(i,"keyboardY",u)),{c(){F(e.$$.fragment),t=S(),F(i.$$.fragment)},l(c){M(e.$$.fragment,c),t=T(c),M(i.$$.fragment,c)},m(c,f){j(e,c,f),N(c,t,f),j(i,c,f),n=!0},p(c,f){const h={};f&536870912&&(h.$$scope={dirty:f,ctx:c}),e.$set(h);const p={};!l&&f&2&&(l=!0,p.posts=c[1],Q(()=>l=!1)),!r&&f&32&&(r=!0,p.keyboardY=c[5],Q(()=>r=!1)),i.$set(p)},i(c){n||(x(e.$$.fragment,c),x(i.$$.fragment,c),n=!0)},o(c){B(e.$$.fragment,c),B(i.$$.fragment,c),n=!1},d(c){c&&g(t),H(e,c),H(i,c)}}}function ct(s){let e,t,i,l,r,n,o,u,d,c,f=(s[2]||"텍스트 입력하기...")+"",h,p,_,v,w,P,C,I,y,Y,A;t=new Ve({props:{position:"static",leftBack:"white",$$slots:{right:[ht]},$$scope:{ctx:s}}});function O(b){s[14](b)}function L(b){s[15](b)}let R={dontMoveVertically:!0,isEdit:!0};return s[1]!==void 0&&(R.posts=s[1]),s[5]!==void 0&&(R.keyboardY=s[5]),r=new xe({props:R}),Z.push(()=>X(r,"posts",O)),Z.push(()=>X(r,"keyboardY",L)),w=new We({props:{items:[{id:1,title:"장소",value:s[1][0].place_name||""},{id:2,title:"공개 여부",value:ae[s[4]],onClick:s[18]}]}}),I=new Re({}),{c(){e=E("section"),F(t.$$.fragment),i=S(),l=E("div"),F(r.$$.fragment),u=S(),d=E("div"),c=E("div"),h=ue(f),_=S(),v=E("div"),F(w.$$.fragment),P=S(),C=E("div"),F(I.$$.fragment),this.h()},l(b){e=V(b,"SECTION",{class:!0});var D=$(e);M(t.$$.fragment,D),i=T(D),l=V(D,"DIV",{class:!0});var z=$(l);M(r.$$.fragment,z),z.forEach(g),u=T(D),d=V(D,"DIV",{class:!0});var q=$(d);c=V(q,"DIV",{contenteditable:!0,class:!0});var G=$(c);h=ce(G,f),G.forEach(g),q.forEach(g),_=T(D),v=V(D,"DIV",{class:!0});var le=$(v);M(w.$$.fragment,le),le.forEach(g),P=T(D),C=V(D,"DIV",{class:!0});var m=$(C);M(I.$$.fragment,m),m.forEach(g),D.forEach(g),this.h()},h(){a(l,"class","flex flex-grow"),a(c,"contenteditable","true"),a(c,"class",p="w-full h-full bg-black border-0 overflow-y-auto focus:outline-none text-base whitespace-pre-wrap "+(s[6]?"text-gray-400":"text-white")),a(d,"class","h-44 px-5 py-3"),a(v,"class",""),a(C,"class","h-40"),a(e,"class","flex flex-col w-full h-screen bg-black")},m(b,D){N(b,e,D),j(t,e,null),k(e,i),k(e,l),j(r,l,null),k(e,u),k(e,d),k(d,c),k(c,h),k(e,_),k(e,v),j(w,v,null),k(e,P),k(e,C),j(I,C,null),y=!0,Y||(A=[W(c,"input",s[10]),W(c,"focus",s[16]),W(c,"blur",s[17])],Y=!0)},p(b,D){const z={};D&536870913&&(z.$$scope={dirty:D,ctx:b}),t.$set(z);const q={};!n&&D&2&&(n=!0,q.posts=b[1],Q(()=>n=!1)),!o&&D&32&&(o=!0,q.keyboardY=b[5],Q(()=>o=!1)),r.$set(q),(!y||D&4)&&f!==(f=(b[2]||"텍스트 입력하기...")+"")&&Me(h,f),(!y||D&64&&p!==(p="w-full h-full bg-black border-0 overflow-y-auto focus:outline-none text-base whitespace-pre-wrap "+(b[6]?"text-gray-400":"text-white")))&&a(c,"class",p);const G={};D&26&&(G.items=[{id:1,title:"장소",value:b[1][0].place_name||""},{id:2,title:"공개 여부",value:ae[b[4]],onClick:b[18]}]),w.$set(G)},i(b){y||(x(t.$$.fragment,b),x(r.$$.fragment,b),x(w.$$.fragment,b),x(I.$$.fragment,b),y=!0)},o(b){B(t.$$.fragment,b),B(r.$$.fragment,b),B(w.$$.fragment,b),B(I.$$.fragment,b),y=!1},d(b){b&&g(e),H(t),H(r),H(w),H(I),Y=!1,je(A)}}}function ft(s){let e,t="완료",i,l;return{c(){e=E("div"),e.textContent=t,this.h()},l(r){e=V(r,"DIV",{slot:!0,class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-11t55ng"&&(e.textContent=t),this.h()},h(){a(e,"slot","right"),a(e,"class","text-white")},m(r,n){N(r,e,n),i||(l=W(e,"click",s[19]),i=!0)},p:J,d(r){r&&g(e),i=!1,l()}}}function ht(s){let e,t="다음",i,l;return{c(){e=E("div"),e.textContent=t,this.h()},l(r){e=V(r,"DIV",{slot:!0,class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-1nvebws"&&(e.textContent=t),this.h()},h(){a(e,"slot","right"),a(e,"class","text-white")},m(r,n){N(r,e,n),i||(l=W(e,"click",s[13]),i=!0)},p:J,d(r){r&&g(e),i=!1,l()}}}function dt(s){let e,t,i,l,r,n,o;const u=[ct,ut],d=[];function c(_,v){return _[0]===0?0:_[0]===1?1:-1}~(e=c(s))&&(t=d[e]=u[e](s));function f(_){s[22](_)}function h(_){s[23](_)}let p={};return s[3]!==void 0&&(p.isOpen=s[3]),s[4]!==void 0&&(p.selectedVisibility=s[4]),l=new at({props:p}),Z.push(()=>X(l,"isOpen",f)),Z.push(()=>X(l,"selectedVisibility",h)),{c(){t&&t.c(),i=S(),F(l.$$.fragment)},l(_){t&&t.l(_),i=T(_),M(l.$$.fragment,_)},m(_,v){~e&&d[e].m(_,v),N(_,i,v),j(l,_,v),o=!0},p(_,[v]){let w=e;e=c(_),e===w?~e&&d[e].p(_,v):(t&&(se(),B(d[w],1,1,()=>{d[w]=null}),re()),~e?(t=d[e],t?t.p(_,v):(t=d[e]=u[e](_),t.c()),x(t,1),t.m(i.parentNode,i)):t=null);const P={};!r&&v&8&&(r=!0,P.isOpen=_[3],Q(()=>r=!1)),!n&&v&16&&(n=!0,P.selectedVisibility=_[4],Q(()=>n=!1)),l.$set(P)},i(_){o||(x(t),x(l.$$.fragment,_),o=!0)},o(_){B(t),B(l.$$.fragment,_),o=!1},d(_){_&&g(i),~e&&d[e].d(_),H(l,_)}}}function _t(s){const e=s.target;e.innerText==="텍스트 입력하기..."&&(e.innerText="")}function pt(s){const e=s.target;e.innerText.trim()||(e.innerText="텍스트 입력하기...")}function gt(s,e,t){let i,l,r;be(s,He,m=>t(25,l=m)),be(s,Ie,m=>t(12,r=m));const n=Se.getPlatform()!=="web",o=l.url.searchParams.get("type");let u=0,{data:d}=e,c=d.posts,f=c[0].text||"",h=!1,p="public";async function _(){(await fetch(`${de}/posts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_e()}`},body:JSON.stringify({placeIdx:l.url.searchParams.get("placeIdx"),text:f,media:i,permission:p})})).ok&&await oe("/users/0",{replaceState:!0,invalidateAll:!0})}async function v(){try{const m=await fetch(`${de}/posts/${l.url.searchParams.get("postIdx")}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_e()}`},body:JSON.stringify({text:f})});if(!m.ok){(await m.json()).status===401&&(De.emit("pushSnackbar",{message:"접근할 수 없습니다"}),oe(`/viewer?postIdx=${l.url.searchParams.get("postIdx")}`));return}await oe("/users/0",{replaceState:!0,invalidateAll:!0})}catch{}}let w=0;function P(){he.addListener("keyboardWillShow",m=>{t(5,w=m.keyboardHeight*-1)}),he.addListener("keyboardWillHide",()=>{t(5,w=0)})}function C(){he.removeAllListeners()}Ye(()=>{n&&P()}),Fe(()=>{n&&C()});function I(m){const me=m.target;t(2,f=me.innerText),t(1,c[0]={...c[0],text:f},c)}let y=f.trim()==="";const Y=()=>t(0,u=1);function A(m){c=m,t(1,c)}function O(m){w=m,t(5,w)}const L=m=>{_t(m),t(6,y=!1)},R=m=>{pt(m),t(6,y=!f.trim())},b=()=>{t(3,h=!0)},D=()=>{o==="post"?_():o==="patch"&&v()};function z(m){c=m,t(1,c)}function q(m){w=m,t(5,w)}function G(m){h=m,t(3,h)}function le(m){p=m,t(4,p)}return s.$$set=m=>{"data"in m&&t(11,d=m.data)},s.$$.update=()=>{s.$$.dirty&4096&&(i=r)},[u,c,f,h,p,w,y,o,_,v,I,d,r,Y,A,O,L,R,b,D,z,q,G,le]}class St extends te{constructor(e){super(),ie(this,e,gt,dt,ee,{data:11})}}export{St as component,Pt as universal};
