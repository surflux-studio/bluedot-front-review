import{g as pe}from"../chunks/entry.C9m624fl.js";import{s as Se,q as Re,r as Le,b as $,f as d,v as _,i as P,h,n as te,y as Ae,e as k,a as F,t as Z,D as Ue,c as w,g as R,d as G,B as je,C as we,A as fe,z as Me,j as de,F as ye,k as qe,P as Oe,H as Ie,G as Ne,J as ut}from"../chunks/scheduler.BTWb34i-.js";import{S as at,i as ct,e as Pe,c as re,b as oe,m as ae,a as y,f as be,t as S,d as ce,g as ge}from"../chunks/index.D8fgSKXR.js";import{e as me,u as dt,d as ht}from"../chunks/each.Co5Upyp2.js";import{H as _t,w as mt,I as pt}from"../chunks/Header.B4ZdURB9.js";import{s as De,k as bt,e as $e,g as ze,A as He,l as Je}from"../chunks/sign.D1hvpANE.js";import{s as xe}from"../chunks/s32cloudfront.r_FDhqrw.js";import{p as gt}from"../chunks/stores.BuR131Dn.js";import{F as vt}from"../chunks/Field.cvwonUDa.js";import{I as kt}from"../chunks/IconLink.DXMQXwBj.js";import{f as wt,u as $t}from"../chunks/follow.Bp_2Ysz3.js";import{C as Fe}from"../chunks/CircleImage.Bdg0rf02.js";import{N as xt}from"../chunks/NavigationBar.xrgyMeCO.js";import{A as ft}from"../chunks/ActionSheet.DTZHMjb4.js";import{I as Ct}from"../chunks/IconDelete.CAr5oXeH.js";function Et(s){let e,l;return{c(){e=Re("svg"),l=Re("path"),this.h()},l(t){e=Le(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=$(e);l=Le(i,"path",{d:!0}),$(l).forEach(d),i.forEach(d),this.h()},h(){_(l,"d","M10.4853 6.45739L9.54267 5.51472L3.4212 11.6362C3.36494 11.6924 3.33333 11.7688 3.33333 11.8483V12.3667C3.33333 12.5324 3.46765 12.6667 3.63333 12.6667H4.15174C4.2313 12.6667 4.30761 12.6351 4.36387 12.5789L10.4853 6.45739ZM11.428 5.51472L12.3707 4.57206L11.428 3.62939L10.4853 4.57206L11.428 5.51472ZM4.91587 13.9122C4.85961 13.9685 4.7833 14.0001 4.70374 14.0001H2.3C2.13431 14.0001 2 13.8657 2 13.7001V11.2957C2 11.2161 2.03161 11.1398 2.08787 11.0835L10.9567 2.21472C11.0817 2.08974 11.2512 2.01953 11.428 2.01953C11.6048 2.01953 11.7743 2.08974 11.8993 2.21472L13.7853 4.10072C13.9103 4.22574 13.9805 4.39528 13.9805 4.57206C13.9805 4.74883 13.9103 4.91837 13.7853 5.04339L4.91587 13.9122Z"),_(e,"width",s[0]),_(e,"height",s[1]),_(e,"viewBox","0 0 16 16"),_(e,"fill",s[2]),_(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){P(t,e,i),h(e,l)},p(t,[i]){i&1&&_(e,"width",t[0]),i&2&&_(e,"height",t[1]),i&4&&_(e,"fill",t[2])},i:te,o:te,d(t){t&&d(e)}}}function It(s,e,l){let{width:t="16"}=e,{height:i="16"}=e,{fill:o="#F1F1F1"}=e;return s.$$set=n=>{"width"in n&&l(0,t=n.width),"height"in n&&l(1,i=n.height),"fill"in n&&l(2,o=n.fill)},[t,i,o]}class Dt extends at{constructor(e){super(),ct(this,e,It,Et,Se,{width:0,height:1,fill:2})}}const Vt=async({params:s,parent:e})=>{if(s.idx==="-1")return pe("/boxes");const t=await e();return t.error||!t.data?pe("/boxes"):t.data},nl=Object.freeze(Object.defineProperty({__proto__:null,load:Vt},Symbol.toStringTag,{value:"Module"}));function We(s,e,l){const t=s.slice();return t[45]=e[l],t}function Ze(s,e,l){const t=s.slice();return t[45]=e[l],t}function Ge(s,e,l){const t=s.slice();return t[50]=e[l],t}function Xe(s,e,l){const t=s.slice();return t[53]=e[l],t}function Bt(s){let e,l,t=s[0].name+"",i,o,n,r,c=s[0].follower_count+"",u,m,f=s[0].place_count+"",p,v;return{c(){e=k("div"),l=k("div"),i=Z(t),o=F(),n=k("div"),r=Z("구독자 "),u=Z(c),m=Z("명 ･ 장소 "),p=Z(f),v=Z("개"),this.h()},l(x){e=w(x,"DIV",{class:!0});var D=$(e);l=w(D,"DIV",{class:!0});var C=$(l);i=G(C,t),C.forEach(d),o=R(D),n=w(D,"DIV",{class:!0});var V=$(n);r=G(V,"구독자 "),u=G(V,c),m=G(V,"명 ･ 장소 "),p=G(V,f),v=G(V,"개"),V.forEach(d),D.forEach(d),this.h()},h(){_(l,"class","text-white text-[15px] font-semibold"),_(n,"class","flex text-center text-[#A6A9AB] text-xs font-normal"),_(e,"class","flex flex-col justify-center items-center")},m(x,D){P(x,e,D),h(e,l),h(l,i),h(e,o),h(e,n),h(n,r),h(n,u),h(n,m),h(n,p),h(n,v)},p(x,D){D[0]&1&&t!==(t=x[0].name+"")&&de(i,t),D[0]&1&&c!==(c=x[0].follower_count+"")&&de(u,c),D[0]&1&&f!==(f=x[0].place_count+"")&&de(p,f)},d(x){x&&d(e)}}}function Tt(s){let e,l,t,i,o,n,r,c,u;return t=new kt({}),n=new pt({}),{c(){e=k("div"),l=k("button"),re(t.$$.fragment),i=F(),o=k("button"),re(n.$$.fragment),this.h()},l(m){e=w(m,"DIV",{slot:!0,class:!0});var f=$(e);l=w(f,"BUTTON",{});var p=$(l);oe(t.$$.fragment,p),p.forEach(d),i=R(f),o=w(f,"BUTTON",{});var v=$(o);oe(n.$$.fragment,v),v.forEach(d),f.forEach(d),this.h()},h(){_(e,"slot","right"),_(e,"class","flex items-center gap-2")},m(m,f){P(m,e,f),h(e,l),ae(t,l,null),h(e,i),h(e,o),ae(n,o,null),r=!0,c||(u=[fe(l,"click",s[21]),fe(o,"click",s[22])],c=!0)},p:te,i(m){r||(S(t.$$.fragment,m),S(n.$$.fragment,m),r=!0)},o(m){y(t.$$.fragment,m),y(n.$$.fragment,m),r=!1},d(m){m&&d(e),ce(t),ce(n),c=!1,ye(u)}}}function Ot(s){let e;return{c(){e=k("div"),this.h()},l(l){e=w(l,"DIV",{class:!0}),$(e).forEach(d),this.h()},h(){_(e,"class","absolute w-[70px] h-[70px] bg-[rgb(73,73,73)] rounded-full")},m(l,t){P(l,e,t)},p:te,i:te,o:te,d(l){l&&d(e)}}}function jt(s){let e,l;return e=new Fe({props:{src:xe(s[0].image??"",500),width:"70px",strokeWidth:"0"}}),{c(){re(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,i){ae(e,t,i),l=!0},p(t,i){const o={};i[0]&1&&(o.src=xe(t[0].image??"",500)),e.$set(o)},i(t){l||(S(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){ce(e,t)}}}function Ke(s){let e,l,t=s[0].description+"",i;return{c(){e=k("section"),l=k("p"),i=Z(t),this.h()},l(o){e=w(o,"SECTION",{class:!0});var n=$(e);l=w(n,"P",{class:!0});var r=$(l);i=G(r,t),r.forEach(d),n.forEach(d),this.h()},h(){_(l,"class","text-start font-normal text-xs text-[#A6A9AB] line-clamp-2 whitespace-pre-line"),_(e,"class","flex-none px-5 py-2 mb-1.5")},m(o,n){P(o,e,n),h(e,l),h(l,i)},p(o,n){n[0]&1&&t!==(t=o[0].description+"")&&de(i,t)},d(o){o&&d(e)}}}function Nt(s){let e,l,t=s[0].visibility==="follower"?"소유자의 팔로워만 볼 수 있는 박스입니다.":"기타 정보를 볼 수 있는 권한이 없습니다",i;return{c(){e=k("div"),l=k("p"),i=Z(t),this.h()},l(o){e=w(o,"DIV",{class:!0});var n=$(e);l=w(n,"P",{class:!0});var r=$(l);i=G(r,t),r.forEach(d),n.forEach(d),this.h()},h(){_(l,"class","font-normal text-sm leading-5 text-[#B3B8BD]"),_(e,"class","flex-auto flex items-center justify-center")},m(o,n){P(o,e,n),h(e,l),h(l,i)},p(o,n){n[0]&1&&t!==(t=o[0].visibility==="follower"?"소유자의 팔로워만 볼 수 있는 박스입니다.":"기타 정보를 볼 수 있는 권한이 없습니다")&&de(i,t)},i:te,o:te,d(o){o&&d(e)}}}function St(s){var ee,le;let e,l,t,i,o,n=s[0].place_count+"",r,c,u,m,f=s[11].includes(s[0].role??""),p,v=`${((le=(ee=s[7])==null?void 0:ee.getClientRects()[0])==null?void 0:le.height)??0}px`,x,D,C,V,O,E,j,M,ne,U=f&&Qe(s),A=s[3]==="member"&&Ye(s),Q=me(s[9]),N=[];for(let b=0;b<Q.length;b+=1)N[b]=et(Xe(s,Q,b));const q=b=>y(N[b],1,1,()=>{N[b]=null});let L=me(s[2]),B=[];for(let b=0;b<L.length;b+=1)B[b]=nt(Ze(s,L,b));const se=b=>y(B[b],1,1,()=>{B[b]=null});return{c(){e=k("div"),l=k("div"),t=k("div"),i=k("button"),o=Z("장소("),r=Z(n),c=Z(")"),m=F(),U&&U.c(),p=F(),A&&A.c(),x=F(),D=k("div"),C=k("div"),V=k("div");for(let b=0;b<N.length;b+=1)N[b].c();O=F(),E=k("div");for(let b=0;b<B.length;b+=1)B[b].c();this.h()},l(b){e=w(b,"DIV",{class:!0});var I=$(e);l=w(I,"DIV",{class:!0});var J=$(l);t=w(J,"DIV",{class:!0});var ue=$(t);i=w(ue,"BUTTON",{class:!0});var T=$(i);o=G(T,"장소("),r=G(T,n),c=G(T,")"),T.forEach(d),ue.forEach(d),m=R(J),U&&U.l(J),J.forEach(d),p=R(I),A&&A.l(I),I.forEach(d),x=R(b),D=w(b,"DIV",{class:!0});var X=$(D);C=w(X,"DIV",{class:!0});var he=$(C);V=w(he,"DIV",{class:!0});var W=$(V);for(let ie=0;ie<N.length;ie+=1)N[ie].l(W);W.forEach(d),O=R(he),E=w(he,"DIV",{class:!0});var ve=$(E);for(let ie=0;ie<B.length;ie+=1)B[ie].l(ve);ve.forEach(d),he.forEach(d),X.forEach(d),this.h()},h(){_(i,"class",u=s[3]==="place"?Ve:Be),_(t,"class","tab-place w-1/2"),_(l,"class","tab h-10 flex justify-center text-center"),_(e,"class","flex-none sticky w-full bg-inherit z-10"),we(e,"top",v),_(V,"class","w-full flex flex-col px-5"),Ie(V,"hidden",s[3]!=="place"),_(E,"class","w-full flex flex-col absolute left-full top-0 px-5"),Ie(E,"hidden",s[3]!=="member"),_(C,"class","h-full w-full transition-transform"),we(C,"transform",`translateX(${s[3]==="place"?0:-100}%)`),_(D,"class","content flex-auto")},m(b,I){P(b,e,I),h(e,l),h(l,t),h(t,i),h(i,o),h(i,r),h(i,c),h(l,m),U&&U.m(l,null),h(e,p),A&&A.m(e,null),P(b,x,I),P(b,D,I),h(D,C),h(C,V);for(let J=0;J<N.length;J+=1)N[J]&&N[J].m(V,null);h(C,O),h(C,E);for(let J=0;J<B.length;J+=1)B[J]&&B[J].m(E,null);j=!0,M||(ne=fe(i,"click",s[25]),M=!0)},p(b,I){var J,ue;if((!j||I[0]&1)&&n!==(n=b[0].place_count+"")&&de(r,n),(!j||I[0]&8&&u!==(u=b[3]==="place"?Ve:Be))&&_(i,"class",u),I[0]&1&&(f=b[11].includes(b[0].role??"")),f?U?U.p(b,I):(U=Qe(b),U.c(),U.m(l,null)):U&&(U.d(1),U=null),b[3]==="member"?A?(A.p(b,I),I[0]&8&&S(A,1)):(A=Ye(b),A.c(),S(A,1),A.m(e,null)):A&&(ge(),y(A,1,1,()=>{A=null}),be()),I[0]&128&&v!==(v=`${((ue=(J=b[7])==null?void 0:J.getClientRects()[0])==null?void 0:ue.height)??0}px`)&&we(e,"top",v),I[0]&513){Q=me(b[9]);let T;for(T=0;T<Q.length;T+=1){const X=Xe(b,Q,T);N[T]?(N[T].p(X,I),S(N[T],1)):(N[T]=et(X),N[T].c(),S(N[T],1),N[T].m(V,null))}for(ge(),T=Q.length;T<N.length;T+=1)q(T);be()}if((!j||I[0]&8)&&Ie(V,"hidden",b[3]!=="place"),I[0]&90148){L=me(b[2]);let T;for(T=0;T<L.length;T+=1){const X=Ze(b,L,T);B[T]?(B[T].p(X,I),S(B[T],1)):(B[T]=nt(X),B[T].c(),S(B[T],1),B[T].m(E,null))}for(ge(),T=L.length;T<B.length;T+=1)se(T);be()}(!j||I[0]&8)&&Ie(E,"hidden",b[3]!=="member"),I[0]&8&&we(C,"transform",`translateX(${b[3]==="place"?0:-100}%)`)},i(b){if(!j){S(A);for(let I=0;I<Q.length;I+=1)S(N[I]);for(let I=0;I<L.length;I+=1)S(B[I]);j=!0}},o(b){y(A),N=N.filter(Boolean);for(let I=0;I<N.length;I+=1)y(N[I]);B=B.filter(Boolean);for(let I=0;I<B.length;I+=1)y(B[I]);j=!1},d(b){b&&(d(e),d(x),d(D)),U&&U.d(),A&&A.d(),Ne(N,b),Ne(B,b),M=!1,ne()}}}function Qe(s){let e,l,t,i=s[1].length+"",o,n,r,c,u;return{c(){e=k("div"),l=k("button"),t=Z("멤버("),o=Z(i),n=Z(")"),this.h()},l(m){e=w(m,"DIV",{class:!0});var f=$(e);l=w(f,"BUTTON",{class:!0});var p=$(l);t=G(p,"멤버("),o=G(p,i),n=G(p,")"),p.forEach(d),f.forEach(d),this.h()},h(){_(l,"class",r=s[3]==="member"?Ve:Be),_(e,"class","tab-member w-1/2")},m(m,f){P(m,e,f),h(e,l),h(l,t),h(l,o),h(l,n),c||(u=fe(l,"click",s[26]),c=!0)},p(m,f){f[0]&2&&i!==(i=m[1].length+"")&&de(o,i),f[0]&8&&r!==(r=m[3]==="member"?Ve:Be)&&_(l,"class",r)},d(m){m&&d(e),c=!1,u()}}}function Ye(s){let e,l,t,i;function o(r){s[27](r)}let n={placeholder:"멤버 검색",padding:"px-3.5 py-2.5",backgroundColor:"bg-[#383838]/30",fontSize:"font-normal text-sm",fontColor:"text-[#757D86]",round:!0,clear:!0,onInput:s[18]};return s[4]!==void 0&&(n.value=s[4]),l=new vt({props:n}),Ae.push(()=>Pe(l,"value",o)),{c(){e=k("section"),re(l.$$.fragment),this.h()},l(r){e=w(r,"SECTION",{class:!0});var c=$(e);oe(l.$$.fragment,c),c.forEach(d),this.h()},h(){_(e,"class","box-search px-5 py-3")},m(r,c){P(r,e,c),ae(l,e,null),i=!0},p(r,c){const u={};!t&&c[0]&16&&(t=!0,u.value=r[4],Me(()=>t=!1)),l.$set(u)},i(r){i||(S(l.$$.fragment,r),i=!0)},o(r){y(l.$$.fragment,r),i=!1},d(r){r&&d(e),ce(l)}}}function At(s){let e;return{c(){e=k("div"),this.h()},l(l){e=w(l,"DIV",{class:!0}),$(e).forEach(d),this.h()},h(){_(e,"class","w-full h-full bg-[#D9D9D9] rounded-full")},m(l,t){P(l,e,t)},p:te,i:te,o:te,d(l){l&&d(e)}}}function Mt(s){let e,l;return e=new Fe({props:{src:xe(s[53].media.at(0)??"",500),width:"44px",strokeWidth:"0"}}),{c(){re(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,i){ae(e,t,i),l=!0},p:te,i(t){l||(S(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){ce(e,t)}}}function et(s){let e,l,t,i,o,n,r,c,u=s[53].name+"",m,f,p,v=s[53].categories.join(" | ")+"",x,D,C,V=s[53].road_address+"",O,E,j,M,ne;const U=[Mt,At],A=[];function Q(q,L){var B;return(B=q[53].media)!=null&&B.at(0)?0:1}t=Q(s),i=A[t]=U[t](s);function N(){return s[28](s[53])}return{c(){e=k("div"),l=k("div"),i.c(),o=F(),n=k("div"),r=k("div"),c=k("div"),m=Z(u),f=F(),p=k("div"),x=Z(v),D=F(),C=k("div"),O=Z(V),E=F(),this.h()},l(q){e=w(q,"DIV",{class:!0,"aria-hidden":!0});var L=$(e);l=w(L,"DIV",{class:!0});var B=$(l);i.l(B),B.forEach(d),o=R(L),n=w(L,"DIV",{class:!0});var se=$(n);r=w(se,"DIV",{class:!0});var ee=$(r);c=w(ee,"DIV",{class:!0});var le=$(c);m=G(le,u),le.forEach(d),f=R(ee),p=w(ee,"DIV",{class:!0});var b=$(p);x=G(b,v),b.forEach(d),ee.forEach(d),D=R(se),C=w(se,"DIV",{class:!0});var I=$(C);O=G(I,V),I.forEach(d),se.forEach(d),E=R(L),L.forEach(d),this.h()},h(){_(l,"class","flex-none w-11 h-11"),_(c,"class","font-medium text-sm leading-[17px] text-white truncate"),_(p,"class","flex-none max-w-16 truncate font-medium text-xs leading-[18px] tracking-[-0.6px] text-[#757D86]"),_(r,"class","flex flex-row items-center gap-1.5 w-full"),_(C,"class","w-full truncate font-normal text-xs text-[#757D86]"),_(n,"class","flex-auto min-w-0 flex flex-col items-start gap-0.5"),_(e,"class","py-3 flex gap-3 items-center"),_(e,"aria-hidden","")},m(q,L){P(q,e,L),h(e,l),A[t].m(l,null),h(e,o),h(e,n),h(n,r),h(r,c),h(c,m),h(r,f),h(r,p),h(p,x),h(n,D),h(n,C),h(C,O),h(e,E),j=!0,M||(ne=fe(e,"click",N),M=!0)},p(q,L){s=q,i.p(s,L)},i(q){j||(S(i),j=!0)},o(q){y(i),j=!1},d(q){q&&d(e),A[t].d(),M=!1,ne()}}}function yt(s){let e;return{c(){e=k("div"),this.h()},l(l){e=w(l,"DIV",{class:!0}),$(e).forEach(d),this.h()},h(){_(e,"class","w-full h-full bg-[#D9D9D9] rounded-full")},m(l,t){P(l,e,t)},p:te,i:te,o:te,d(l){l&&d(e)}}}function Pt(s){let e,l;return e=new Fe({props:{src:xe(s[50].profile_image_url,500),width:"38px",strokeWidth:"0"}}),{c(){re(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,i){ae(e,t,i),l=!0},p(t,i){const o={};i[0]&4&&(o.src=xe(t[50].profile_image_url,500)),e.$set(o)},i(t){l||(S(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){ce(e,t)}}}function tt(s){let e,l=s[50].idx,t=lt(s);return{c(){e=k("div"),t.c(),this.h()},l(i){e=w(i,"DIV",{class:!0});var o=$(e);t.l(o),o.forEach(d),this.h()},h(){_(e,"class","flex-none")},m(i,o){P(i,e,o),t.m(e,null)},p(i,o){o[0]&4&&Se(l,l=i[50].idx)?(t.d(1),t=lt(i),t.c(),t.m(e,null)):t.p(i,o)},d(i){i&&d(e),t.d(i)}}}function lt(s){let e,l,t,i;function o(...n){return s[29](s[50],...n)}return{c(){e=k("input"),this.h()},l(n){e=w(n,"INPUT",{class:!0,type:!0}),this.h()},h(){_(e,"class","m-2 focus:outline-none focus:ring-0 focus:ring-offset-0"),_(e,"type","checkbox"),e.checked=l=s[5].includes(s[50].idx)},m(n,r){P(n,e,r),t||(i=fe(e,"click",ut(o)),t=!0)},p(n,r){s=n,r[0]&36&&l!==(l=s[5].includes(s[50].idx))&&(e.checked=l)},d(n){n&&d(e),t=!1,i()}}}function st(s){let e,l,t,i,o,n,r=s[50].unique_name+"",c,u,m,f,p;const v=[Pt,yt],x=[];function D(O,E){return O[50].profile_image_url?0:1}t=D(s),i=x[t]=v[t](s);let C=s[50].role!=="owner"&&s[13]&&tt(s);function V(){return s[30](s[50])}return{c(){e=k("div"),l=k("div"),i.c(),o=F(),n=k("p"),c=Z(r),u=F(),C&&C.c(),this.h()},l(O){e=w(O,"DIV",{class:!0,"aria-hidden":!0});var E=$(e);l=w(E,"DIV",{class:!0});var j=$(l);i.l(j),j.forEach(d),o=R(E),n=w(E,"P",{class:!0});var M=$(n);c=G(M,r),M.forEach(d),u=R(E),C&&C.l(E),E.forEach(d),this.h()},h(){_(l,"class","flex-none w-[38px] h-[38px]"),_(n,"class","flex-auto font-medium text-sm leading-[17px] text-white"),_(e,"class","py-3 relative flex flex-row gap-2.5 items-center"),_(e,"aria-hidden","")},m(O,E){P(O,e,E),h(e,l),x[t].m(l,null),h(e,o),h(e,n),h(n,c),h(e,u),C&&C.m(e,null),m=!0,f||(p=fe(e,"click",V),f=!0)},p(O,E){s=O;let j=t;t=D(s),t===j?x[t].p(s,E):(ge(),y(x[j],1,1,()=>{x[j]=null}),be(),i=x[t],i?i.p(s,E):(i=x[t]=v[t](s),i.c()),S(i,1),i.m(l,null)),(!m||E[0]&4)&&r!==(r=s[50].unique_name+"")&&de(c,r),s[50].role!=="owner"&&s[13]?C?C.p(s,E):(C=tt(s),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},i(O){m||(S(i),m=!0)},o(O){y(i),m=!1},d(O){O&&d(e),x[t].d(),C&&C.d(),f=!1,p()}}}function nt(s){let e,l=Je[s[45]]+"",t,i,o,n,r,c=me(s[14](s[45])),u=[];for(let f=0;f<c.length;f+=1)u[f]=st(Ge(s,c,f));const m=f=>y(u[f],1,1,()=>{u[f]=null});return{c(){e=k("p"),t=Z(l),i=F(),o=k("div");for(let f=0;f<u.length;f+=1)u[f].c();n=F(),this.h()},l(f){e=w(f,"P",{class:!0});var p=$(e);t=G(p,l),p.forEach(d),i=R(f),o=w(f,"DIV",{class:!0});var v=$(o);for(let x=0;x<u.length;x+=1)u[x].l(v);n=R(v),v.forEach(d),this.h()},h(){_(e,"class","py-2.5 font-normal text-sm leading-5 text-[#757D86]"),_(o,"class","flex flex-col")},m(f,p){P(f,e,p),h(e,t),P(f,i,p),P(f,o,p);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m(o,null);h(o,n),r=!0},p(f,p){if((!r||p[0]&4)&&l!==(l=Je[f[45]]+"")&&de(t,l),p[0]&90148){c=me(f[14](f[45]));let v;for(v=0;v<c.length;v+=1){const x=Ge(f,c,v);u[v]?(u[v].p(x,p),S(u[v],1)):(u[v]=st(x),u[v].c(),S(u[v],1),u[v].m(o,n))}for(ge(),v=c.length;v<u.length;v+=1)m(v);be()}},i(f){if(!r){for(let p=0;p<c.length;p+=1)S(u[p]);r=!0}},o(f){u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)y(u[p]);r=!1},d(f){f&&(d(e),d(i),d(o)),Ne(u,f)}}}function it(s,e){let l,t,i,o=e[45]+"",n,r,c,u;function m(){return e[31](e[45])}return{key:s,first:null,c(){l=k("div"),t=k("button"),i=k("div"),n=Z(o),r=F(),this.h()},l(f){l=w(f,"DIV",{class:!0});var p=$(l);t=w(p,"BUTTON",{class:!0});var v=$(t);i=w(v,"DIV",{});var x=$(i);n=G(x,o),x.forEach(d),v.forEach(d),r=R(p),p.forEach(d),this.h()},h(){_(t,"class","flex items-center gap-1"),_(l,"class","flex items-center gap-1 flex-wrap"),this.first=l},m(f,p){P(f,l,p),h(l,t),h(t,i),h(i,n),h(l,r),c||(u=fe(t,"click",m),c=!0)},p(f,p){e=f},d(f){f&&d(l),c=!1,u()}}}function Ft(s){let e,l,t=[],i=new Map,o=me(s[12]);const n=r=>r[45];for(let r=0;r<o.length;r+=1){let c=We(s,o,r),u=n(c);i.set(u,t[r]=it(u,c))}return{c(){e=k("div"),l=k("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=w(r,"DIV",{class:!0});var c=$(e);l=w(c,"DIV",{class:!0});var u=$(l);for(let m=0;m<t.length;m+=1)t[m].l(u);u.forEach(d),c.forEach(d),this.h()},h(){_(l,"class","flex flex-col gap-4 text-white flex-wrap"),_(e,"class","p-5")},m(r,c){P(r,e,c),h(e,l);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(l,null)},p(r,c){c[0]&135168&&(o=me(r[12]),t=dt(t,c,n,1,r,o,i,l,ht,it,null,We))},d(r){r&&d(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function rt(s){let e,l,t;function i(n){s[34](n)}let o={fixed:!0,noHandle:!0,$$slots:{default:[Rt]},$$scope:{ctx:s}};return s[6]!==void 0&&(o.isOpen=s[6]),e=new ft({props:o}),Ae.push(()=>Pe(e,"isOpen",i)),{c(){re(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,r){ae(e,n,r),t=!0},p(n,r){const c={};r[0]&1|r[1]&33554432&&(c.$$scope={dirty:r,ctx:n}),!l&&r[0]&64&&(l=!0,c.isOpen=n[6],Me(()=>l=!1)),e.$set(c)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Rt(s){let e,l,t,i,o,n,r="수정",c,u,m,f,p,v="삭제",x,D,C;return i=new Dt({props:{width:"24",height:"24",fill:"white"}}),m=new Ct({props:{width:"24",height:"24",fill:"white"}}),{c(){e=k("div"),l=k("div"),t=k("div"),re(i.$$.fragment),o=F(),n=k("button"),n.textContent=r,c=F(),u=k("div"),re(m.$$.fragment),f=F(),p=k("button"),p.textContent=v,this.h()},l(V){e=w(V,"DIV",{class:!0});var O=$(e);l=w(O,"DIV",{class:!0});var E=$(l);t=w(E,"DIV",{class:!0,"aria-hidden":!0});var j=$(t);oe(i.$$.fragment,j),o=R(j),n=w(j,"BUTTON",{class:!0,"data-svelte-h":!0}),je(n)!=="svelte-2x8z4c"&&(n.textContent=r),j.forEach(d),c=R(E),u=w(E,"DIV",{class:!0,"aria-hidden":!0});var M=$(u);oe(m.$$.fragment,M),f=R(M),p=w(M,"BUTTON",{class:!0,"data-svelte-h":!0}),je(p)!=="svelte-16jhj3q"&&(p.textContent=v),M.forEach(d),E.forEach(d),O.forEach(d),this.h()},h(){_(n,"class","font-medium text-sm leading-[17px]"),_(t,"class","flex items-center gap-2"),_(t,"aria-hidden",""),_(p,"class","font-medium text-sm leading-[17px]"),_(u,"class","flex items-center gap-2"),_(u,"aria-hidden",""),_(l,"class","flex flex-col gap-3 text-white"),_(e,"class","p-5")},m(V,O){P(V,e,O),h(e,l),h(l,t),ae(i,t,null),h(t,o),h(t,n),h(l,c),h(l,u),ae(m,u,null),h(u,f),h(u,p),x=!0,D||(C=[fe(t,"click",s[33]),fe(u,"click",s[19])],D=!0)},p:te,i(V){x||(S(i.$$.fragment,V),S(m.$$.fragment,V),x=!0)},o(V){y(i.$$.fragment,V),y(m.$$.fragment,V),x=!1},d(V){V&&d(e),ce(i),ce(m),D=!1,ye(C)}}}function Lt(s){var Ce,Ee;let e,l,t,i,o=`${((Ee=(Ce=s[7])==null?void 0:Ce.getClientRects()[0])==null?void 0:Ee.height)??0}px`,n,r,c,u,m,f,p,v,x,D,C=s[0].is_subcribed?"구독중":"구독",V,O,E,j,M,ne="지도에서 보기",U,A,Q,N,q,L,B,se,ee,le,b,I;function J(g){s[23](g)}let ue={position:"fixed",backgroundColor:"bg-black",contentPosition:"items-center",leftBack:!0,$$slots:{right:[Tt],default:[Bt]},$$scope:{ctx:s}};s[7]!==void 0&&(ue.header=s[7]),t=new _t({props:ue}),Ae.push(()=>Pe(t,"header",J));const T=[jt,Ot],X=[];function he(g,a){return g[0].image?0:1}m=he(s),f=X[m]=T[m](s);let W=s[0].description&&Ke(s);const ve=[St,Nt],ie=[];function Te(g,a){return g[10]?0:1}A=Te(s),Q=ie[A]=ve[A](s),q=new xt({}),B=new ft({props:{fixed:!0,noHandle:!0,isOpen:s[3]==="member"&&s[5].length>0,onClose:s[32],$$slots:{default:[Ft]},$$scope:{ctx:s}}});let H=s[0].role==="owner"&&rt(s);return{c(){e=k("div"),l=k("div"),re(t.$$.fragment),n=F(),r=k("div"),c=k("div"),u=F(),f.c(),p=F(),W&&W.c(),v=F(),x=k("div"),D=k("button"),V=Z(C),j=F(),M=k("button"),M.textContent=ne,U=F(),Q.c(),N=F(),re(q.$$.fragment),L=F(),re(B.$$.fragment),se=F(),H&&H.c(),ee=Ue(),this.h()},l(g){e=w(g,"DIV",{class:!0});var a=$(e);l=w(a,"DIV",{class:!0});var z=$(l);oe(t.$$.fragment,z),z.forEach(d),n=R(a),r=w(a,"DIV",{class:!0});var Y=$(r);c=w(Y,"DIV",{class:!0}),$(c).forEach(d),u=R(Y),f.l(Y),Y.forEach(d),p=R(a),W&&W.l(a),v=R(a),x=w(a,"DIV",{class:!0});var K=$(x);D=w(K,"BUTTON",{class:!0});var _e=$(D);V=G(_e,C),_e.forEach(d),j=R(K),M=w(K,"BUTTON",{class:!0,"data-svelte-h":!0}),je(M)!=="svelte-ggc3ul"&&(M.textContent=ne),K.forEach(d),U=R(a),Q.l(a),a.forEach(d),N=R(g),oe(q.$$.fragment,g),L=R(g),oe(B.$$.fragment,g),se=R(g),H&&H.l(g),ee=Ue(),this.h()},h(){_(l,"class","flex-none"),we(l,"height",o),_(c,"class","absolute w-full h-full bg-[rgba(56,56,56,0.7)] rounded-full shadow-[1px_1px_6px_rgba(0,0,0,0.1)]"),_(r,"class","flex-none mt-3 mb-2 w-[78px] h-[78px] mx-auto relative flex justify-center items-center"),_(D,"class",O="w-full h-full rounded-[50px] p-2.5 "+(s[0].is_subcribed?"border border-[#0C79FE] text-[#0C79FE]":"bg-[#0C79FE] text-white")+" disabled:bg-[rgba(56,56,56,0.7)] font-medium text-sm leading-[17px] disabled:text-[#757475]"),D.disabled=E=s[0].role==="owner",_(M,"class","w-full h-full rounded-[50px] p-2.5 border border-[#0C79FE] font-medium text-sm leading-[17px] text-[#0C79FE]"),_(x,"class","flex-none flex gap-1.5 px-5 py-3 w-full mb-2.5 justify-between items-center"),_(e,"class","flex flex-col w-dvw h-dvh overflow-x-hidden bg-black pb-[82px]")},m(g,a){P(g,e,a),h(e,l),ae(t,l,null),h(e,n),h(e,r),h(r,c),h(r,u),X[m].m(r,null),h(e,p),W&&W.m(e,null),h(e,v),h(e,x),h(x,D),h(D,V),h(x,j),h(x,M),h(e,U),ie[A].m(e,null),P(g,N,a),ae(q,g,a),P(g,L,a),ae(B,g,a),P(g,se,a),H&&H.m(g,a),P(g,ee,a),le=!0,b||(I=[fe(D,"click",s[15]),fe(M,"click",s[24])],b=!0)},p(g,a){var _e,ke;const z={};a[0]&321|a[1]&33554432&&(z.$$scope={dirty:a,ctx:g}),!i&&a[0]&128&&(i=!0,z.header=g[7],Me(()=>i=!1)),t.$set(z),a[0]&128&&o!==(o=`${((ke=(_e=g[7])==null?void 0:_e.getClientRects()[0])==null?void 0:ke.height)??0}px`)&&we(l,"height",o);let Y=m;m=he(g),m===Y?X[m].p(g,a):(ge(),y(X[Y],1,1,()=>{X[Y]=null}),be(),f=X[m],f?f.p(g,a):(f=X[m]=T[m](g),f.c()),S(f,1),f.m(r,null)),g[0].description?W?W.p(g,a):(W=Ke(g),W.c(),W.m(e,v)):W&&(W.d(1),W=null),(!le||a[0]&1)&&C!==(C=g[0].is_subcribed?"구독중":"구독")&&de(V,C),(!le||a[0]&1&&O!==(O="w-full h-full rounded-[50px] p-2.5 "+(g[0].is_subcribed?"border border-[#0C79FE] text-[#0C79FE]":"bg-[#0C79FE] text-white")+" disabled:bg-[rgba(56,56,56,0.7)] font-medium text-sm leading-[17px] disabled:text-[#757475]"))&&_(D,"class",O),(!le||a[0]&1&&E!==(E=g[0].role==="owner"))&&(D.disabled=E),Q.p(g,a);const K={};a[0]&40&&(K.isOpen=g[3]==="member"&&g[5].length>0),a[0]&32&&(K.onClose=g[32]),a[1]&33554432&&(K.$$scope={dirty:a,ctx:g}),B.$set(K),g[0].role==="owner"?H?(H.p(g,a),a[0]&1&&S(H,1)):(H=rt(g),H.c(),S(H,1),H.m(ee.parentNode,ee)):H&&(ge(),y(H,1,1,()=>{H=null}),be())},i(g){le||(S(t.$$.fragment,g),S(f),S(Q),S(q.$$.fragment,g),S(B.$$.fragment,g),S(H),le=!0)},o(g){y(t.$$.fragment,g),y(f),y(Q),y(q.$$.fragment,g),y(B.$$.fragment,g),y(H),le=!1},d(g){g&&(d(e),d(N),d(L),d(se),d(ee)),ce(t),X[m].d(),W&&W.d(),ie[A].d(),ce(q,g),ce(B,g),H&&H.d(g),b=!1,ye(I)}}}let Ve="h-full font-medium text-sm leading-[17px] text-white border-b-2 border-white",Be="h-full font-medium text-sm leading-[17px] text-[#757D86]";function ot(s){return Object.groupBy(s,({role:e})=>e??"none")}function Ut(s,e,l){let t,i;qe(s,De,a=>l(37,t=a)),qe(s,gt,a=>l(8,i=a));let{data:o}=e,n=o.box,r=o.places,c=o.members,u=ot(c),m=o.hasPermission;const f=["owner","manager"],p=["writer","reader"],v=[...f,...p],x=["manager",...p,"none"],D=f.includes(n.role??"");let C=D?[...v,"none"]:v,V="place",O="",E=[],j=!1,M;function ne(a){u=ot(a),l(2,C=[...C])}function U(a){return C.includes(a)}function A(a){return U(a)?u[a]??[]:[]}async function Q(){const a=bt();if(!a)return $e.emit("showSignInModal",{removable:!0});const z=BigInt(a.sub);n.is_subcribed?await q(a,z):await N(a,z)}async function N(a,z){await wt({targetTable:"boxes",targetIdx:BigInt(n.idx),subjectIdx:z}),l(0,n.is_subcribed=!0,n),Oe(De,t=[{...n,role:"none"},...t],t),!c.some(Y=>Y.idx===a.sub)&&(l(1,c=[...c,{idx:a.sub,unique_name:a.uni,profile_image_url:a.pic??"",role:n.role??"none"}]),ne(c),n.follower_count&&l(0,n.follower_count=`${Number(n.follower_count)+1}`,n))}async function q(a,z){await $t({targetTable:"boxes",targetIdx:BigInt(n.idx),subjectIdx:z}),l(0,n.is_subcribed=!1,n),Oe(De,t=t.filter(K=>K.idx!==n.idx),t);const Y=c.find(K=>K.idx===a.sub);Y&&(n.follower_count&&l(0,n.follower_count=`${Number(n.follower_count)-1}`,n),!v.includes(Y.role)&&(l(1,c=c.filter(K=>K.idx!==a.sub)),ne(c)))}function L(a,z){z&&!E.includes(a)?l(5,E=[...E,a]):!z&&E.includes(a)&&l(5,E=E.filter(Y=>Y!==a))}async function B(a){if(!D||!U(a))return;const z=ze();if(!z)return $e.emit("showSignInModal",{removable:!0});const Y=[];E.forEach(K=>{const _e=c.find(ke=>ke.idx===K);_e&&(Y.push(fetch(`${He}/auth/permissions?targetTable=boxes&targetIdx=${n.idx}&subjectTable=users&subjectIdx=${K}&relation=${a}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`}}).then(ke=>{if(!ke.ok)throw"error"})),_e.role=a)});try{await Promise.all(Y),ne(c),l(5,E=[])}catch{$e.emit("pushSnackbar",{message:"일시적으로 장애가 발생했습니다."})}}let se;function ee(){clearTimeout(se),se=setTimeout(le,300)}function le(){ne(c.filter(a=>a.unique_name.includes(O)))}async function b(){const a=ze();if(!a)return $e.emit("showSignInModal",{removable:!0});await fetch(`${He}/boxes/${n.idx}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}),Oe(De,t=t.filter(z=>z.idx!==n.idx),t),$e.emit("pushSnackbar",{message:`${n.name} 박스를 삭제했습니다.`}),pe("/boxes")}const I=()=>mt(i.url),J=()=>{n.role==="owner"&&l(6,j=!0)};function ue(a){M=a,l(7,M)}const T=()=>{m?pe(`/boxes/${n.idx}/map`):console.log("권한이 없다!")},X=()=>l(3,V="place"),he=()=>l(3,V="member");function W(a){O=a,l(4,O)}const ve=a=>pe(`/places/${a.idx}?boxIdx=${n.idx}`),ie=(a,z)=>L(a.idx,z.currentTarget.checked),Te=a=>pe(`/users/${a.idx}`),H=a=>B(a),Ce=()=>l(5,E=[]),Ee=()=>pe(`/boxes/${n.idx}/setting`);function g(a){j=a,l(6,j)}return s.$$set=a=>{"data"in a&&l(20,o=a.data)},[n,c,C,V,O,E,j,M,i,r,m,v,x,D,A,Q,L,B,ee,b,o,I,J,ue,T,X,he,W,ve,ie,Te,H,Ce,Ee,g]}class il extends at{constructor(e){super(),ct(this,e,Ut,Lt,Se,{data:20},null,[-1,-1])}}export{il as component,nl as universal};
