import{g as k}from"../chunks/entry.HhnoEqxw.js";import{s as B,a as I,g as P,i as b,f as u,k as E,w as F,x as L,e as O,t as C,c as S,b as T,d as D,v as y,h as H,n as j,A as q}from"../chunks/scheduler.D0BZyuSu.js";import{S as z,i as A,c as $,b as d,m as g,t as h,a as _,d as x}from"../chunks/index.ChpzTwUX.js";import{F as U,I as Z}from"../chunks/IconLocation.C4QN02u3.js";import{H as G}from"../chunks/Header.qQo8TaTT.js";import{M as J}from"../chunks/Map.4mpelpRV.js";import{N as K}from"../chunks/NavigationBar.BTQXgkiq.js";import{a as p,v as Q}from"../chunks/map.DMCeYNCq.js";import{p as R}from"../chunks/stores.C7k_nspT.js";import{e as M}from"../chunks/sign.DRIg_EgT.js";import{f as V}from"../chunks/proj.DXH8zrwl.js";import{s as W}from"../chunks/s32cloudfront.CnU82HkL.js";const X=async({params:l,parent:e})=>{var a;if(l.idx==="-1")return k("/boxes");const n=await e();return n.error||!n.data?k("/boxes"):(a=n.data)!=null&&a.hasPermission?n.data:k(`/boxes/${l.idx}`)},dt=Object.freeze(Object.defineProperty({__proto__:null,load:X},Symbol.toStringTag,{value:"Module"}));function Y(l){let e,r=(l[0].name??"")+"",n;return{c(){e=O("p"),n=C(r),this.h()},l(a){e=S(a,"P",{class:!0});var s=T(e);n=D(s,r),s.forEach(u),this.h()},h(){y(e,"class","font-semibold text-[15px] text-black")},m(a,s){b(a,e,s),H(e,n)},p:j,d(a){a&&u(e)}}}function tt(l){let e,r,n,a,s;return r=new Z({}),{c(){e=O("button"),$(r.$$.fragment),this.h()},l(i){e=S(i,"BUTTON",{slot:!0,class:!0});var f=T(e);d(r.$$.fragment,f),f.forEach(u),this.h()},h(){y(e,"slot","right"),y(e,"class","flex justify-center items-center w-10 h-10 rounded-full bg-[rgba(56,56,56,0.7)] pointer-events-auto")},m(i,f){b(i,e,f),g(r,e,null),n=!0,a||(s=q(e,"click",l[2]),a=!0)},p:j,i(i){n||(h(r.$$.fragment,i),n=!0)},o(i){_(r.$$.fragment,i),n=!1},d(i){i&&u(e),x(r),a=!1,s()}}}function et(l){let e,r,n,a,s,i,f,c;return e=new G({props:{position:"fixed",leftBack:"black",contentPosition:"items-center",$$slots:{default:[Y]},$$scope:{ctx:l}}}),n=new J({}),s=new U({props:{position:"fixed",$$slots:{right:[tt]},$$scope:{ctx:l}}}),f=new K({}),{c(){$(e.$$.fragment),r=I(),$(n.$$.fragment),a=I(),$(s.$$.fragment),i=I(),$(f.$$.fragment)},l(t){d(e.$$.fragment,t),r=P(t),d(n.$$.fragment,t),a=P(t),d(s.$$.fragment,t),i=P(t),d(f.$$.fragment,t)},m(t,m){g(e,t,m),b(t,r,m),g(n,t,m),b(t,a,m),g(s,t,m),b(t,i,m),g(f,t,m),c=!0},p(t,[m]){const v={};m&512&&(v.$$scope={dirty:m,ctx:t}),e.$set(v);const o={};m&512&&(o.$$scope={dirty:m,ctx:t}),s.$set(o)},i(t){c||(h(e.$$.fragment,t),h(n.$$.fragment,t),h(s.$$.fragment,t),h(f.$$.fragment,t),c=!0)},o(t){_(e.$$.fragment,t),_(n.$$.fragment,t),_(s.$$.fragment,t),_(f.$$.fragment,t),c=!1},d(t){t&&(u(r),u(a),u(i)),x(e,t),x(n,t),x(s,t),x(f,t)}}}const w=60;function nt(l,e,r){let n;E(l,R,o=>r(4,n=o));let{data:a}=e,s=a.box,i=a.places;F(()=>{t()}),L(()=>{p.un("change",m)});const f=[];let c=[];function t(){i.length!==0&&(c=i.filter(o=>!o.longitude||!o.latitude||f.includes(o.idx)?!1:(f.push(o.idx),!0)),!n.url.searchParams.get("location")&&c.length>0&&p.on("change",m),M.emit("addIcons",c.map(o=>{var N;return{idx:Number(o.idx),coordinate:V([o.longitude,o.latitude]),image:W(((N=o.media)==null?void 0:N.at(0))??"",500),shape:"point",type:"place",link:`/places/${o.idx}?boxIdx=${s.idx}`,rank:1,name:o.name,width:38,height:46}})))}function m(){if(p.getFeatures().length!==c.length)return;p.un("change",m);const o=p.getExtent();Q.fit(o,{padding:[w,w,w,w],duration:500,maxZoom:16})}const v=()=>{M.emit("flyToCurrentPosition")};return l.$$set=o=>{"data"in o&&r(1,a=o.data)},[s,a,v]}class gt extends z{constructor(e){super(),A(this,e,nt,et,B,{data:1})}}export{gt as component,dt as universal};
