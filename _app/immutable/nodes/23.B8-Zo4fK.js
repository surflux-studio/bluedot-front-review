import{e as Ge}from"../chunks/index.HVI8U2Wx.js";import{a as Ve,b as Kt,g as ot}from"../chunks/sign.BRsHEAVz.js";import{I as ee,c as xt,A as qe,e as Be,b as Lt,s as lt,d as Wt}from"../chunks/store.yog8tTTa.js";import{g as ie}from"../chunks/entry.8J5CcqAQ.js";import{s as it,q as Ne,r as je,b as C,f as c,v as i,i as S,h as d,n as te,w as at,D as We,a as $,e as _,t as ue,P as Xt,g as A,c as g,d as ce,z as $e,A as R,j as xe,x as $t,M as At,F as ut,k as St,y as Qt,B as Yt,U as es,C as yt,R as Ot,l as Tt}from"../chunks/scheduler.CIbz-4tf.js";import{g as ts}from"../chunks/boxRequest.CFLShwtH.js";import{S as Rt,i as Ht,b as Pt,c as F,d as U,m as z,a as B,e as Dt,t as P,f as L,g as Bt}from"../chunks/index.gvaMc9LH.js";import{e as Ke}from"../chunks/each.Cdd7o6io.js";import{p as ss}from"../chunks/stores.m2Z_-5TV.js";import{H as rs}from"../chunks/Header.BeQUO8m8.js";import{C as ns}from"../chunks/CircleImage.CZpdYjea.js";import{a as ls}from"../chunks/link_preview.DfKqbwsY.js";import"../chunks/ImageShaper.DEAJmI5j.js";import{N as os}from"../chunks/NavigationBar.DqEn28u7.js";import{s as Xe}from"../chunks/s32cloudfront.CrmJHo_d.js";import{B as as}from"../chunks/BottomNavigationPadder.Cae4ZwnI.js";import{g as is,i as us,u as cs,f as fs}from"../chunks/follow.DgP98OGt.js";/* empty css                                                   */import{w as ms,I as ds}from"../chunks/utils.CmiVKMGx.js";import{I as hs}from"../chunks/IconMore.BQ1nArCe.js";import{A as ps}from"../chunks/ActionSheet.Rw9zQ-jT.js";import{I as _s}from"../chunks/IconSearch.Deap0mXU.js";import{F as gs}from"../chunks/Figure.H6B7gYG6.js";import{g as Nt}from"../chunks/color.C_Jm4JAr.js";import{r as bs}from"../chunks/units.BJZU6p1c.js";import{i as vs}from"../chunks/device.BuWhri9c.js";import{u as ks}from"../chunks/searchParams.Cc0VM5g0.js";import{A as ws}from"../chunks/ActionSheetOpenApp.P--K6Dxl.js";function Cs(r){let e,t,s,l,n,o;return{c(){e=Ne("svg"),t=Ne("path"),s=Ne("path"),l=Ne("path"),n=Ne("path"),this.h()},l(u){e=je(u,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var f=C(e);t=je(f,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),C(t).forEach(c),s=je(f,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),C(s).forEach(c),l=je(f,"path",{d:!0,fill:!0}),C(l).forEach(c),n=je(f,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linejoin":!0}),C(n).forEach(c),f.forEach(c),this.h()},h(){i(t,"d","M2 22V21C2 18.79 3.79 17 6 17H10C12.21 17 14 18.79 14 21V22"),i(t,"stroke",r[1]),i(t,"stroke-width","1.5"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(s,"d","M8 14C6.34 14 5 12.66 5 11C5 9.34 6.34 8 8 8C9.66 8 11 9.34 11 11C11 12.66 9.66 14 8 14Z"),i(s,"stroke",r[1]),i(s,"stroke-width","1.5"),i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(l,"d","M18.5018 6.68182C18.3812 6.68182 18.2656 6.63393 18.1804 6.54868C18.0951 6.46344 18.0472 6.34783 18.0472 6.22727L18.0472 3.95455C18.0472 3.83399 18.0951 3.71838 18.1804 3.63313C18.2656 3.54789 18.3812 3.5 18.5018 3.5C18.6223 3.5 18.7379 3.54789 18.8232 3.63313C18.9084 3.71838 18.9563 3.83399 18.9563 3.95455L18.9563 6.22727C18.9563 6.34783 18.9084 6.46344 18.8232 6.54868C18.7379 6.63393 18.6223 6.68182 18.5018 6.68182ZM17.82 7.81818C17.82 7.63735 17.8918 7.46393 18.0197 7.33606C18.1475 7.2082 18.3209 7.13636 18.5018 7.13636C18.6826 7.13636 18.856 7.2082 18.9839 7.33606C19.1118 7.46393 19.1836 7.63735 19.1836 7.81818C19.1836 7.99901 19.1118 8.17243 18.9839 8.3003C18.856 8.42817 18.6826 8.5 18.5018 8.5C18.3209 8.5 18.1475 8.42817 18.0197 8.3003C17.8918 8.17243 17.82 7.99901 17.82 7.81818Z"),i(l,"fill",r[0]),i(n,"d","M19.8856 2.2C19.2698 1.13333 17.7302 1.13333 17.1144 2.2L14.0833 7.45C13.4674 8.51667 14.2372 9.85 15.4689 9.85H21.5311C22.7628 9.85 23.5326 8.51667 22.9167 7.45L19.8856 2.2Z"),i(n,"stroke",r[1]),i(n,"stroke-width","1.2"),i(n,"stroke-linejoin","round"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"width",r[2]),i(e,"height",r[2]),i(e,"viewBox",o="0 0 "+r[2]+" "+r[2]),i(e,"fill","none")},m(u,f){S(u,e,f),d(e,t),d(e,s),d(e,l),d(e,n)},p(u,[f]){f&2&&i(t,"stroke",u[1]),f&2&&i(s,"stroke",u[1]),f&1&&i(l,"fill",u[0]),f&2&&i(n,"stroke",u[1]),f&4&&i(e,"width",u[2]),f&4&&i(e,"height",u[2]),f&4&&o!==(o="0 0 "+u[2]+" "+u[2])&&i(e,"viewBox",o)},i:te,o:te,d(u){u&&c(e)}}}function Es(r,e,t){let s,{fill:l="#FF4F1E"}=e,{stroke:n="#FF4F1E"}=e,{length:o="1.5"}=e;return r.$$set=u=>{"fill"in u&&t(0,l=u.fill),"stroke"in u&&t(1,n=u.stroke),"length"in u&&t(3,o=u.length)},r.$$.update=()=>{r.$$.dirty&8&&t(2,s=bs(o))},[l,n,s,o]}class Is extends Rt{constructor(e){super(),Ht(this,e,Es,Cs,it,{fill:0,stroke:1,length:3})}}function jt(r,e,t){const s=r.slice();return s[34]=e[t],s[36]=t,s}function Vt(r,e,t){const s=r.slice();return s[37]=e[t],s[36]=t,s}function qt(r){let e,t,s,l,n,o,u,f,k,w,p;return document.title=e=`블루닷 - ${r[0].unique_name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`,{c(){t=$(),s=_("meta"),n=$(),o=_("meta"),f=$(),k=_("meta"),w=$(),p=_("meta"),this.h()},l(m){t=A(m),s=g(m,"META",{property:!0,content:!0}),n=A(m),o=g(m,"META",{property:!0,content:!0}),f=A(m),k=g(m,"META",{property:!0,content:!0}),w=A(m),p=g(m,"META",{property:!0,content:!0}),this.h()},h(){i(s,"property","og:title"),i(s,"content",l=`블루닷${r[0].unique_name?` - ${r[0].unique_name} 님 계정`:""}`),i(o,"property","og:description"),i(o,"content",u=r[0].unique_name?`사용자 ${r[0].unique_name} 님의 계정`:"사람과 장소 그리고 순간을 의미 있게 만들다"),i(k,"property","og:image"),i(k,"content",ls),i(p,"property","og:image:alt"),i(p,"content","bluedot logo")},m(m,b){S(m,t,b),S(m,s,b),S(m,n,b),S(m,o,b),S(m,f,b),S(m,k,b),S(m,w,b),S(m,p,b)},p(m,b){b[0]&1&&e!==(e=`블루닷 - ${m[0].unique_name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`)&&(document.title=e),b[0]&1&&l!==(l=`블루닷${m[0].unique_name?` - ${m[0].unique_name} 님 계정`:""}`)&&i(s,"content",l),b[0]&1&&u!==(u=m[0].unique_name?`사용자 ${m[0].unique_name} 님의 계정`:"사람과 장소 그리고 순간을 의미 있게 만들다")&&i(o,"content",u)},d(m){m&&(c(t),c(s),c(n),c(o),c(f),c(k),c(w),c(p))}}}function xs(r){let e,t,s,l,n,o,u,f,k;return s=new _s({props:{width:"24",height:"24"}}),o=new hs({}),{c(){e=_("div"),t=_("button"),F(s.$$.fragment),l=$(),n=_("button"),F(o.$$.fragment),this.h()},l(w){e=g(w,"DIV",{class:!0});var p=C(e);t=g(p,"BUTTON",{});var m=C(t);U(s.$$.fragment,m),m.forEach(c),l=A(p),n=g(p,"BUTTON",{});var b=C(n);U(o.$$.fragment,b),b.forEach(c),p.forEach(c),this.h()},h(){i(e,"class","flex items-center gap-2")},m(w,p){S(w,e,p),d(e,t),z(s,t,null),d(e,l),d(e,n),z(o,n,null),u=!0,f||(k=[R(t,"click",r[16]),R(n,"click",r[17])],f=!0)},p:te,i(w){u||(P(s.$$.fragment,w),P(o.$$.fragment,w),u=!0)},o(w){B(s.$$.fragment,w),B(o.$$.fragment,w),u=!1},d(w){w&&c(e),L(s),L(o),f=!1,ut(k)}}}function $s(r){let e,t,s=!ee&&xs(r);return{c(){s&&s.c(),e=We()},l(l){s&&s.l(l),e=We()},m(l,n){s&&s.m(l,n),S(l,e,n),t=!0},p(l,n){ee||s.p(l,n)},i(l){t||(P(s),t=!0)},o(l){B(s),t=!1},d(l){l&&c(e),s&&s.d(l)}}}function As(r){var n;let e,t,s=(((n=r[0].unique_name)==null?void 0:n.at(0))??"u")+"",l;return{c(){e=_("div"),t=_("span"),l=ue(s),this.h()},l(o){e=g(o,"DIV",{class:!0,style:!0});var u=C(e);t=g(u,"SPAN",{class:!0});var f=C(t);l=ce(f,s),f.forEach(c),u.forEach(c),this.h()},h(){i(t,"class","text-2xl font-semibold text-black"),i(e,"class","w-full h-full flex items-center justify-center"),yt(e,"background-color",Nt(r[0].unique_name))},m(o,u){S(o,e,u),d(e,t),d(t,l)},p(o,u){var f;u[0]&1&&s!==(s=(((f=o[0].unique_name)==null?void 0:f.at(0))??"u")+"")&&xe(l,s),u[0]&1&&yt(e,"background-color",Nt(o[0].unique_name))},i:te,o:te,d(o){o&&c(e)}}}function Ss(r){let e,t;return e=new ns({props:{src:Xe(r[0].profile_image_url,500),width:"4.375rem",strokeWidth:"0"}}),{c(){F(e.$$.fragment)},l(s){U(e.$$.fragment,s)},m(s,l){z(e,s,l),t=!0},p(s,l){const n={};l[0]&1&&(n.src=Xe(s[0].profile_image_url,500)),e.$set(n)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function ys(r){let e;function t(n,o){return n[7]==!0?Ps:Ts}let s=t(r),l=s(r);return{c(){e=_("div"),l.c()},l(n){e=g(n,"DIV",{});var o=C(e);l.l(o),o.forEach(c)},m(n,o){S(n,e,o),l.m(e,null)},p(n,o){s===(s=t(n))&&l?l.p(n,o):(l.d(1),l=s(n),l&&(l.c(),l.m(e,null)))},d(n){n&&c(e),l.d()}}}function Os(r){let e,t,s="프로필 편집",l,n;return{c(){e=_("div"),t=_("button"),t.textContent=s,this.h()},l(o){e=g(o,"DIV",{});var u=C(e);t=g(u,"BUTTON",{class:!0,"data-svelte-h":!0}),$e(t)!=="svelte-19n2ifp"&&(t.textContent=s),u.forEach(c),this.h()},h(){i(t,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(o,u){S(o,e,u),d(e,t),l||(n=R(t,"click",r[20]),l=!0)},p:te,d(o){o&&c(e),l=!1,n()}}}function Ts(r){let e,t,s="팔로우",l,n;return{c(){e=_("button"),t=_("div"),t.textContent=s,this.h()},l(o){e=g(o,"BUTTON",{class:!0});var u=C(e);t=g(u,"DIV",{"data-svelte-h":!0}),$e(t)!=="svelte-1sbe5nn"&&(t.textContent=s),u.forEach(c),this.h()},h(){i(e,"class","w-full bg-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-white p-2.5 ")},m(o,u){S(o,e,u),d(e,t),l||(n=R(t,"click",r[22]),l=!0)},p:te,d(o){o&&c(e),l=!1,n()}}}function Ps(r){let e,t="팔로잉",s,l;return{c(){e=_("button"),e.textContent=t,this.h()},l(n){e=g(n,"BUTTON",{class:!0,"data-svelte-h":!0}),$e(e)!=="svelte-18fzixz"&&(e.textContent=t),this.h()},h(){i(e,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(n,o){S(n,e,o),s||(l=R(e,"click",r[21]),s=!0)},p:te,d(n){n&&c(e),s=!1,l()}}}function Mt(r){let e,t,s;return{c(){e=_("img"),this.h()},l(l){e=g(l,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){i(e,"class","w-full h-full object-cover bg-[#D9D9D9] brightness-75"),Ot(e.src,t=Xe(r[37].image,500))||i(e,"src",t),i(e,"alt",s=r[37].name)},m(l,n){S(l,e,n)},p(l,n){n[0]&8&&!Ot(e.src,t=Xe(l[37].image,500))&&i(e,"src",t),n[0]&8&&s!==(s=l[37].name)&&i(e,"alt",s)},d(l){l&&c(e)}}}function Ft(r){let e,t,s,l=r[37].name+"",n,o,u=r[37].image,f,k,w,p=Mt(r);function m(){return r[23](r[37])}return{c(){e=_("div"),t=_("div"),s=_("span"),n=ue(l),o=$(),p.c(),f=$(),this.h()},l(b){e=g(b,"DIV",{class:!0});var E=C(e);t=g(E,"DIV",{class:!0});var y=C(t);s=g(y,"SPAN",{class:!0});var N=C(s);n=ce(N,l),N.forEach(c),o=A(y),p.l(y),y.forEach(c),f=A(E),E.forEach(c),this.h()},h(){i(s,"class","absolute inset-0 flex items-center justify-center z-10 text-xs text-center font-medium leading-[1.125rem] tracking-[-0.0375rem] "),i(t,"class","relative w-full h-full rounded-full overflow-hidden border-4 border-white/15 "),i(e,"class","w-[4.875rem] h-[4.875rem] flex-shrink-0")},m(b,E){S(b,e,E),d(e,t),d(t,s),d(s,n),d(t,o),p.m(t,null),d(e,f),k||(w=R(t,"click",m),k=!0)},p(b,E){r=b,E[0]&8&&l!==(l=r[37].name+"")&&xe(n,l),E[0]&8&&it(u,u=r[37].image)?(p.d(1),p=Mt(r),p.c(),p.m(t,null)):p.p(r,E)},d(b){b&&c(e),p.d(b),k=!1,w()}}}function Ut(r){let e,t,s,l,n,o;t=new gs({props:{src:r[34].media[0],post:r[34],isThumbnail:!0,loading:"lazy",useThumbnailInVideo:vs,fetchpriority:r[36]<=9?"high":"low",imgSize:500}});function u(){return r[24](r[34])}return{c(){e=_("div"),F(t.$$.fragment),s=$(),this.h()},l(f){e=g(f,"DIV",{class:!0});var k=C(e);U(t.$$.fragment,k),s=A(k),k.forEach(c),this.h()},h(){i(e,"class","aspect-square overflow-hidden relative")},m(f,k){S(f,e,k),z(t,e,null),d(e,s),l=!0,n||(o=R(e,"click",u),n=!0)},p(f,k){r=f;const w={};k[0]&4&&(w.src=r[34].media[0]),k[0]&4&&(w.post=r[34]),t.$set(w)},i(f){l||(P(t.$$.fragment,f),l=!0)},o(f){B(t.$$.fragment,f),l=!1},d(f){f&&c(e),L(t),n=!1,o()}}}function Ds(r){let e,t;return e=new os({}),{c(){F(e.$$.fragment)},l(s){U(e.$$.fragment,s)},m(s,l){z(e,s,l),t=!0},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function Bs(r){let e,t,s,l,n,o,u,f,k,w,p;return s=new ds({props:{length:1.5,fill:"white"}}),u=new Is({}),{c(){e=_("div"),t=_("button"),F(s.$$.fragment),l=ue(`
      링크 복사`),n=$(),o=_("button"),F(u.$$.fragment),f=ue(`
      계정 신고하기`),this.h()},l(m){e=g(m,"DIV",{class:!0});var b=C(e);t=g(b,"BUTTON",{class:!0});var E=C(t);U(s.$$.fragment,E),l=ce(E,`
      링크 복사`),E.forEach(c),n=A(b),o=g(b,"BUTTON",{class:!0});var y=C(o);U(u.$$.fragment,y),f=ce(y,`
      계정 신고하기`),y.forEach(c),b.forEach(c),this.h()},h(){i(t,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),i(o,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),i(e,"class","px-5")},m(m,b){S(m,e,b),d(e,t),z(s,t,null),d(t,l),d(e,n),d(e,o),z(u,o,null),d(o,f),k=!0,w||(p=[R(t,"click",r[26]),R(o,"click",r[13])],w=!0)},p:te,i(m){k||(P(s.$$.fragment,m),P(u.$$.fragment,m),k=!0)},o(m){B(s.$$.fragment,m),B(u.$$.fragment,m),k=!1},d(m){m&&c(e),L(s),L(u),w=!1,ut(p)}}}function Ns(r){let e,t,s,l,n,o,u,f,k,w,p,m,b,E,y,N,H=r[2].length+"",fe,Z,K,Me="포스트",me,V,se,ve,Ae,W,Fe="팔로워",Se,q,re,ke,ye,X,Ue="팔로잉",Oe,h,T,ne=r[0].unique_name+"",Te,we,de,Qe,Ce,he,Ye,pe,et,Pe,tt,_e,ze,Le,Q,st,Re,Y,rt,le,nt,ct,j=r[0].idx&&qt(r);o=new rs({props:{position:ee?"sticky":"static",leftLogo:ee,leftBack:ee?"":"white",backgroundColor:"bg-black",$$slots:{right:[$s]},$$scope:{ctx:r}}});const ft=[Ss,As],oe=[];function mt(a,v){return a[0].profile_image_url?0:1}p=mt(r),m=oe[p]=ft[p](r);function dt(a,v){return a[6]?Os:ys}let He=dt(r),M=He(r),Ee=Ke(r[3]),D=[];for(let a=0;a<Ee.length;a+=1)D[a]=Ft(Vt(r,Ee,a));let ge=Ke(r[2]),O=[];for(let a=0;a<ge.length;a+=1)O[a]=Ut(jt(r,ge,a));const Zt=a=>B(O[a],1,1,()=>{O[a]=null});_e=new as({});let J=!ee&&Ds();function Jt(a){r[27](a)}let ht={fixed:!0,noHandle:!0,$$slots:{default:[Bs]},$$scope:{ctx:r}};r[9]!==void 0&&(ht.isOpen=r[9]),Q=new ps({props:ht}),at.push(()=>Pt(Q,"isOpen",Jt));function Gt(a){r[28](a)}let pt={};return r[11]!==void 0&&(pt.isOpen=r[11]),Y=new ws({props:pt}),at.push(()=>Pt(Y,"isOpen",Gt)),{c(){j&&j.c(),e=We(),t=$(),s=_("div"),l=$(),n=_("div"),F(o.$$.fragment),u=$(),f=_("section"),k=_("div"),w=_("div"),m.c(),b=$(),E=_("div"),y=_("div"),N=_("span"),fe=ue(H),Z=$(),K=_("span"),K.textContent=Me,me=$(),V=_("div"),se=_("span"),ve=ue(r[4]),Ae=$(),W=_("span"),W.textContent=Fe,Se=$(),q=_("div"),re=_("span"),ke=ue(r[5]),ye=$(),X=_("span"),X.textContent=Ue,Oe=$(),h=_("section"),T=_("span"),Te=ue(ne),we=$(),de=_("section"),M.c(),Qe=$(),Ce=_("section"),he=_("div");for(let a=0;a<D.length;a+=1)D[a].c();Ye=$(),pe=_("div");for(let a=0;a<O.length;a+=1)O[a].c();et=$(),Pe=_("div"),tt=$(),F(_e.$$.fragment),ze=$(),J&&J.c(),Le=$(),F(Q.$$.fragment),Re=$(),F(Y.$$.fragment),this.h()},l(a){const v=Xt("svelte-9hxaoi",document.head);j&&j.l(v),e=We(),v.forEach(c),t=A(a),s=g(a,"DIV",{class:!0}),C(s).forEach(c),l=A(a),n=g(a,"DIV",{class:!0});var x=C(n);U(o.$$.fragment,x),u=A(x),f=g(x,"SECTION",{class:!0});var ae=C(f);k=g(ae,"DIV",{class:!0});var Ie=C(k);w=g(Ie,"DIV",{class:!0});var De=C(w);m.l(De),De.forEach(c),Ie.forEach(c),b=A(ae),E=g(ae,"DIV",{class:!0});var I=C(E);y=g(I,"DIV",{class:!0});var G=C(y);N=g(G,"SPAN",{class:!0});var _t=C(N);fe=ce(_t,H),_t.forEach(c),Z=A(G),K=g(G,"SPAN",{class:!0,"data-svelte-h":!0}),$e(K)!=="svelte-13hqbuq"&&(K.textContent=Me),G.forEach(c),me=A(I),V=g(I,"DIV",{class:!0});var Ze=C(V);se=g(Ze,"SPAN",{class:!0});var gt=C(se);ve=ce(gt,r[4]),gt.forEach(c),Ae=A(Ze),W=g(Ze,"SPAN",{class:!0,"data-svelte-h":!0}),$e(W)!=="svelte-1nb7yum"&&(W.textContent=Fe),Ze.forEach(c),Se=A(I),q=g(I,"DIV",{class:!0});var Je=C(q);re=g(Je,"SPAN",{class:!0});var bt=C(re);ke=ce(bt,r[5]),bt.forEach(c),ye=A(Je),X=g(Je,"SPAN",{class:!0,"data-svelte-h":!0}),$e(X)!=="svelte-ugas5h"&&(X.textContent=Ue),Je.forEach(c),I.forEach(c),ae.forEach(c),Oe=A(x),h=g(x,"SECTION",{class:!0});var vt=C(h);T=g(vt,"SPAN",{class:!0});var kt=C(T);Te=ce(kt,ne),kt.forEach(c),vt.forEach(c),we=A(x),de=g(x,"SECTION",{class:!0});var wt=C(de);M.l(wt),wt.forEach(c),Qe=A(x),Ce=g(x,"SECTION",{class:!0});var Ct=C(Ce);he=g(Ct,"DIV",{class:!0});var Et=C(he);for(let be=0;be<D.length;be+=1)D[be].l(Et);Et.forEach(c),Ct.forEach(c),Ye=A(x),pe=g(x,"DIV",{class:!0});var It=C(pe);for(let be=0;be<O.length;be+=1)O[be].l(It);It.forEach(c),et=A(x),Pe=g(x,"DIV",{}),C(Pe).forEach(c),tt=A(x),U(_e.$$.fragment,x),x.forEach(c),ze=A(a),J&&J.l(a),Le=A(a),U(Q.$$.fragment,a),Re=A(a),U(Y.$$.fragment,a),this.h()},h(){i(s,"class","fixed w-full h-full bg-black -z-10"),i(w,"class","w-[4.375rem] h-[4.375rem] rounded-full overflow-hidden"),i(k,"class","flex flex-col gap-2 items-center"),i(N,"class","text-[0.8125rem] font-semibold"),i(K,"class","text-xs"),i(y,"class","flex flex-col items-center"),i(se,"class","text-[0.8125rem] font-semibold"),i(W,"class","text-xs"),i(V,"class","flex flex-col items-center"),i(re,"class","text-[0.8125rem] font-semibold"),i(X,"class","text-xs"),i(q,"class","flex flex-col items-center"),i(E,"class","flex gap-8 justify-start"),i(f,"class","flex px-5 pt-3.5 gap-6 items-center"),i(T,"class","text-sm font-medium"),i(h,"class","mt-[1.125rem] px-5"),i(de,"class","px-5 pt-[0.88rem]"),i(he,"class","flex overflow-x-auto space-x-5 px-5 pb-[1.5rem]"),i(Ce,"class","mt-[1.69rem]"),i(pe,"class","grid grid-cols-3 gap-[0.19rem]"),i(n,"class","w-full h-full text-white")},m(a,v){j&&j.m(document.head,null),d(document.head,e),S(a,t,v),S(a,s,v),S(a,l,v),S(a,n,v),z(o,n,null),d(n,u),d(n,f),d(f,k),d(k,w),oe[p].m(w,null),d(f,b),d(f,E),d(E,y),d(y,N),d(N,fe),d(y,Z),d(y,K),d(E,me),d(E,V),d(V,se),d(se,ve),d(V,Ae),d(V,W),d(E,Se),d(E,q),d(q,re),d(re,ke),d(q,ye),d(q,X),d(n,Oe),d(n,h),d(h,T),d(T,Te),d(n,we),d(n,de),M.m(de,null),d(n,Qe),d(n,Ce),d(Ce,he);for(let x=0;x<D.length;x+=1)D[x]&&D[x].m(he,null);d(n,Ye),d(n,pe);for(let x=0;x<O.length;x+=1)O[x]&&O[x].m(pe,null);d(n,et),d(n,Pe),r[25](Pe),d(n,tt),z(_e,n,null),S(a,ze,v),J&&J.m(a,v),S(a,Le,v),z(Q,a,v),S(a,Re,v),z(Y,a,v),le=!0,nt||(ct=[R(V,"click",r[18]),R(q,"click",r[19])],nt=!0)},p(a,v){a[0].idx?j?j.p(a,v):(j=qt(a),j.c(),j.m(e.parentNode,e)):j&&(j.d(1),j=null);const x={};v[0]&578|v[1]&256&&(x.$$scope={dirty:v,ctx:a}),o.$set(x);let ae=p;if(p=mt(a),p===ae?oe[p].p(a,v):(Bt(),B(oe[ae],1,1,()=>{oe[ae]=null}),Dt(),m=oe[p],m?m.p(a,v):(m=oe[p]=ft[p](a),m.c()),P(m,1),m.m(w,null)),(!le||v[0]&4)&&H!==(H=a[2].length+"")&&xe(fe,H),(!le||v[0]&16)&&xe(ve,a[4]),(!le||v[0]&32)&&xe(ke,a[5]),(!le||v[0]&1)&&ne!==(ne=a[0].unique_name+"")&&xe(Te,ne),He===(He=dt(a))&&M?M.p(a,v):(M.d(1),M=He(a),M&&(M.c(),M.m(de,null))),v[0]&8){Ee=Ke(a[3]);let I;for(I=0;I<Ee.length;I+=1){const G=Vt(a,Ee,I);D[I]?D[I].p(G,v):(D[I]=Ft(G),D[I].c(),D[I].m(he,null))}for(;I<D.length;I+=1)D[I].d(1);D.length=Ee.length}if(v[0]&4103){ge=Ke(a[2]);let I;for(I=0;I<ge.length;I+=1){const G=jt(a,ge,I);O[I]?(O[I].p(G,v),P(O[I],1)):(O[I]=Ut(G),O[I].c(),P(O[I],1),O[I].m(pe,null))}for(Bt(),I=ge.length;I<O.length;I+=1)Zt(I);Dt()}const Ie={};v[0]&512|v[1]&256&&(Ie.$$scope={dirty:v,ctx:a}),!st&&v[0]&512&&(st=!0,Ie.isOpen=a[9],$t(()=>st=!1)),Q.$set(Ie);const De={};!rt&&v[0]&2048&&(rt=!0,De.isOpen=a[11],$t(()=>rt=!1)),Y.$set(De)},i(a){if(!le){P(o.$$.fragment,a),P(m);for(let v=0;v<ge.length;v+=1)P(O[v]);P(_e.$$.fragment,a),P(J),P(Q.$$.fragment,a),P(Y.$$.fragment,a),le=!0}},o(a){B(o.$$.fragment,a),B(m),O=O.filter(Boolean);for(let v=0;v<O.length;v+=1)B(O[v]);B(_e.$$.fragment,a),B(J),B(Q.$$.fragment,a),B(Y.$$.fragment,a),le=!1},d(a){a&&(c(t),c(s),c(l),c(n),c(ze),c(Le),c(Re)),j&&j.d(a),c(e),L(o),oe[p].d(),M.d(),At(D,a),At(O,a),r[25](null),L(_e),J&&J.d(a),L(Q,a),L(Y,a),nt=!1,ut(ct)}}}let zt=24;function js(r,e,t){let s,l;St(r,ss,h=>t(1,s=h)),St(r,xt,h=>t(12,l=h));let{data:n}=e,o=n.user??{},u=n.posts??[],f=n.boxes??[],k=0,w=0,p=!1,m=!1,b=Ve(),E=!1,y=!1,N,H,fe=24,Z=!1;async function K(){var h;if(o.idx)try{const T=ot(),ne=await fetch(`${qe}/posts?userIdx=${o.idx}&offset=${fe}&limit=${zt}`,{headers:{Authorization:`Bearer ${T}`,"x-api-version":Lt.POST}});if(!ne.ok)return;const we=((h=(await ne.json()).data)==null?void 0:h.posts)??[];we.length>0?(t(2,u=u.concat(we)),fe+=zt):H.unobserve(N)}catch{}}Qt(()=>{H=new IntersectionObserver(h=>{h[0].isIntersecting&&K()},{rootMargin:"10%"}),H.observe(N)}),Yt(()=>H.unobserve(N));function Me(){fetch(`${qe}/auth/followers?targetTable=users&subjectTable=users&subjectIdx=${s.params.idx}`).then(h=>h.json()).then(h=>{t(5,w=h.data.length)})}let me=!1;async function V(){if(window.confirm("계정을 신고하시겠어요?")&&!me){me=!0,Be.emit("loading",!0);try{const T=new URL(`${qe}/auth/permissions`);T.searchParams.set("targetTable","users"),T.searchParams.set("targetIdx",s.params.idx),T.searchParams.set("relation","reported"),T.searchParams.set("subjectTable","users"),T.searchParams.set("subjectIdx",Kt().sub),T.searchParams.set("metadata",JSON.stringify({text:"계정 신고",value:"account"})),t(9,y=!1),await fetch(T,{method:"PUT",headers:{Authorization:`Bearer ${ot()}`}}),Be.emit("pushSnackbar",{message:"신고가 접수되었습니다."})}catch(T){throw Be.emit("pushSnackbar",{message:"신고에 실패했습니다."}),T}finally{me=!1,Be.emit("loading",!1)}}}const se=async()=>{await ie("/search")},ve=()=>{p?ie(`/users/${s.params.idx}/setting`):t(9,y=!0)},Ae=async()=>{const h=`/users/${s.params.idx}/followers?tab=followers`;console.log(h),await ie(h)},W=async()=>{const h=`/users/${s.params.idx}/followers?tab=followings`;console.log(h),await ie(h)},Fe=async()=>{if(ee)return t(11,Z=!0);await ie(`/users/${s.params.idx}/setting/profile`)},Se=async()=>{if(ee)return t(11,Z=!0);E||(t(8,E=!0),await cs({targetIdx:s.params.idx,subjectIdx:Ve()}),t(7,m=!1),t(4,k-=1),t(8,E=!1))},q=async()=>{if(ee)return t(11,Z=!0);const h=Ve();if(!h){Be.emit("showSignInModal");return}E||(t(8,E=!0),await fs({targetIdx:s.params.idx,subjectIdx:h}),t(7,m=!0),t(4,k+=1),t(8,E=!1))},re=h=>{ie(`/boxes/${h.idx}`)},ke=async h=>{try{if((o==null?void 0:o.idx)===0)return;es(xt,l=u,l),await ie(`/viewer?userIdx=${s.params.idx}&postIdx=${h.idx}`,{replaceState:!1,invalidateAll:!1})}catch{}};function ye(h){at[h?"unshift":"push"](()=>{N=h,t(10,N)})}const X=()=>{ms(`${location.pathname}${location.search}`),t(9,y=!1)};function Ue(h){y=h,t(9,y)}function Oe(h){Z=h,t(11,Z)}return r.$$set=h=>{"data"in h&&t(14,n=h.data)},r.$$.update=()=>{if(r.$$.dirty[0]&49155&&n.user&&s.params.idx&&s.params.idx!=="0"&&(t(0,o=n.user),t(2,u=n.posts),t(3,f=n.boxes),t(15,b=Ve()),t(6,p=String(o==null?void 0:o.idx)===String(b)),is({targetIdx:s.params.idx}).then(h=>{t(4,k=h)}),Me(),b&&us({targetIdx:s.params.idx,subjectIdx:b}).then(h=>{t(7,m=h)})),r.$$.dirty[0]&16386&&!n.user&&s.params.idx==="0")try{ks({replace:"1"},{replace:!0})}catch{}},[o,s,u,f,k,w,p,m,E,y,N,Z,l,V,n,b,se,ve,Ae,W,Fe,Se,q,re,ke,ye,X,Ue,Oe]}class mr extends Rt{constructor(e){super(),Ht(this,e,js,Ns,it,{data:14},null,[-1,-1])}}const Vs=async({params:r,fetch:e,depends:t,url:s})=>{var o;t("app:user");const l=Ve(),n=ot();if(r.idx==="0"&&l===null)return{};if(r.idx==="0"&&l!==null)return ie(`/users/${String(l)}`,{replaceState:s.searchParams.get("replace")==="1"});if(r.idx!=="0")try{const[u,f]=await Promise.all([e(`${qe}/auth/users/${r.idx}`,{headers:{Authorization:`Bearer ${n}`}}),e(`${qe}/posts?userIdx=${r.idx}&limit=24`,{headers:{Authorization:`Bearer ${n}`,"x-api-version":Lt.POST}})]);if(!u.ok||!f.ok)throw Ge(500,"Failed to fetch data");const k=await u.json(),w=await f.json();let p=[];const m=String(l)===r.idx;if(m&&Tt(lt).length!==0)p=Tt(lt);else{const b=await ts(n,r.idx);if(!b.ok)throw Ge(500,"Failed to fetch data");const E=await b.json();m&&lt.set(E.data),p=E.data}return Wt.set(!0),{user:{...k.data,idx:Number(r.idx)},posts:((o=w.data)==null?void 0:o.posts)??[],boxes:p}}catch{throw Ge(500,"An error occurred while loading data")}throw Ge(404,"Not found")},dr=Object.freeze(Object.defineProperty({__proto__:null,load:Vs},Symbol.toStringTag,{value:"Module"}));export{mr as component,dr as universal};
