import{d as ct,k as ht,A as K}from"../chunks/sign.CLnRHnng.js";import"../chunks/index.UA_J-n_c.js";import{s as Q,G as L,H as F,b as y,f as g,q as f,i as E,h as T,n as A,C as tt,a as P,g as S,D as et,k as st,A as dt,B as mt,e as C,c as $,E as z,v as J,y as it}from"../chunks/scheduler.BfXeYOVV.js";import{S as W,i as X,e as nt,c as N,b as M,m as D,a as B,f as pt,t as V,d as Z,g as gt}from"../chunks/index.d8i3XbWJ.js";import{r as rt,H as _t}from"../chunks/Header.DwUPIg32.js";import{V as bt}from"../chunks/Viewer.p1ZIOaqI.js";import{g as lt}from"../chunks/entry.D281RLaW.js";/* empty css                                                   */import"../chunks/heic2any.Bd_FL8EI.js";/* empty css                                                     */import{p as vt}from"../chunks/stores.CdZ7l0eb.js";import{N as wt}from"../chunks/NavigationBar.BxpKcsU8.js";import{A as xt}from"../chunks/ActionSheet.C6DbQFqC.js";/* empty css                                                   */import{M as kt}from"../chunks/Modal.DlUeNeXc.js";function Tt(i){let t,e;return{c(){t=L("svg"),e=L("path"),this.h()},l(n){t=F(n,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var s=y(t);e=F(s,"path",{d:!0}),y(e).forEach(g),s.forEach(g),this.h()},h(){f(e,"d","M200-200h57l391-391-57-57-391 391v57Zm-40 80q-17 0-28.5-11.5T120-160v-97q0-16 6-30.5t17-25.5l505-504q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L313-143q-11 11-25.5 17t-30.5 6h-97Zm600-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 -960 960 960"),f(t,"width",i[1]),f(t,"height",i[1]),f(t,"fill",i[0])},m(n,s){E(n,t,s),T(t,e)},p(n,[s]){s&2&&f(t,"width",n[1]),s&2&&f(t,"height",n[1]),s&1&&f(t,"fill",n[0])},i:A,o:A,d(n){n&&g(t)}}}function It(i,t,e){let n,{fill:s="#5f6368"}=t,{length:r="1.75"}=t,{alt:c="Edit"}=t;return i.$$set=a=>{"fill"in a&&e(0,s=a.fill),"length"in a&&e(2,r=a.length),"alt"in a&&e(3,c=a.alt)},i.$$.update=()=>{i.$$.dirty&4&&e(1,n=rt(r))},[s,n,r,c]}class qt extends W{constructor(t){super(),X(this,t,It,Tt,Q,{fill:0,length:2,alt:3})}}function Ct(i){let t,e;return{c(){t=L("svg"),e=L("path"),this.h()},l(n){t=F(n,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var s=y(t);e=F(s,"path",{d:!0}),y(e).forEach(g),s.forEach(g),this.h()},h(){f(e,"d","M280-120q-33 0-56.5-23.5T200-200v-520q-17 0-28.5-11.5T160-760q0-17 11.5-28.5T200-800h160q0-17 11.5-28.5T400-840h160q17 0 28.5 11.5T600-800h160q17 0 28.5 11.5T800-760q0 17-11.5 28.5T760-720v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM400-280q17 0 28.5-11.5T440-320v-280q0-17-11.5-28.5T400-640q-17 0-28.5 11.5T360-600v280q0 17 11.5 28.5T400-280Zm160 0q17 0 28.5-11.5T600-320v-280q0-17-11.5-28.5T560-640q-17 0-28.5 11.5T520-600v280q0 17 11.5 28.5T560-280ZM280-720v520-520Z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 -960 960 960"),f(t,"width",i[1]),f(t,"height",i[1]),f(t,"fill",i[0])},m(n,s){E(n,t,s),T(t,e)},p(n,[s]){s&2&&f(t,"width",n[1]),s&2&&f(t,"height",n[1]),s&1&&f(t,"fill",n[0])},i:A,o:A,d(n){n&&g(t)}}}function $t(i,t,e){let n,{fill:s="#5f6368"}=t,{length:r="1.75"}=t,{alt:c="Delete"}=t;return i.$$set=a=>{"fill"in a&&e(0,s=a.fill),"length"in a&&e(2,r=a.length),"alt"in a&&e(3,c=a.alt)},i.$$.update=()=>{i.$$.dirty&4&&e(1,n=rt(r))},[s,n,r,c]}class yt extends W{constructor(t){super(),X(this,t,$t,Ct,Q,{fill:0,length:2,alt:3})}}function Et(i){let t,e,n;return e=new bt({props:{posts:i[0].posts,index:i[0].index}}),{c(){t=C("div"),N(e.$$.fragment),this.h()},l(s){t=$(s,"DIV",{class:!0});var r=y(t);M(e.$$.fragment,r),r.forEach(g),this.h()},h(){f(t,"class","fixed top-0 left-0 w-full h-full")},m(s,r){E(s,t,r),D(e,t,null),n=!0},p(s,r){const c={};r&1&&(c.posts=s[0].posts),r&1&&(c.index=s[0].index),e.$set(c)},i(s){n||(V(e.$$.fragment,s),n=!0)},o(s){B(e.$$.fragment,s),n=!1},d(s){s&&g(t),Z(e)}}}function Pt(i){let t;return{c(){t=C("div"),this.h()},l(e){t=$(e,"DIV",{class:!0}),y(t).forEach(g),this.h()},h(){f(t,"class","bg-black w-screen h-screen")},m(e,n){E(e,t,n)},p:A,i:A,o:A,d(e){e&&g(t)}}}function St(i){let t,e,n,s,r,c="수정",a,o,u,b,d,v="삭제",w,k,_;return n=new qt({props:{fill:"white",length:1.4}}),u=new yt({props:{fill:"red",length:1.4}}),{c(){t=C("div"),e=C("button"),N(n.$$.fragment),s=P(),r=C("span"),r.textContent=c,a=P(),o=C("button"),N(u.$$.fragment),b=P(),d=C("span"),d.textContent=v,this.h()},l(m){t=$(m,"DIV",{class:!0});var x=y(t);e=$(x,"BUTTON",{class:!0});var I=y(e);M(n.$$.fragment,I),s=S(I),r=$(I,"SPAN",{"data-svelte-h":!0}),z(r)!=="svelte-17aljrl"&&(r.textContent=c),I.forEach(g),a=S(x),o=$(x,"BUTTON",{class:!0});var O=y(o);M(u.$$.fragment,O),b=S(O),d=$(O,"SPAN",{"data-svelte-h":!0}),z(d)!=="svelte-1k1dgz"&&(d.textContent=v),O.forEach(g),x.forEach(g),this.h()},h(){f(e,"class","w-full py-3 flex items-center gap-2 justify-center text-base font-medium tracking-wider text-white rounded-t-xl bg-[#3335] border-b border-[#333] border-collapse"),f(o,"class","w-full py-3 flex items-center gap-2 justify-center text-base font-medium tracking-wider text-[red] rounded-b-xl bg-[#3336] border-t border-[#333] border-collapse"),f(t,"class","flex flex-col items-center px-6 py-4")},m(m,x){E(m,t,x),T(t,e),D(n,e,null),T(e,s),T(e,r),T(t,a),T(t,o),D(u,o,null),T(o,b),T(o,d),w=!0,k||(_=[J(e,"click",i[11]),J(o,"click",i[12])],k=!0)},p:A,i(m){w||(V(n.$$.fragment,m),V(u.$$.fragment,m),w=!0)},o(m){B(n.$$.fragment,m),B(u.$$.fragment,m),w=!1},d(m){m&&g(t),Z(n),Z(u),k=!1,it(_)}}}function Bt(i){let t,e,n="정말로 삭제하시겠습니까?",s,r,c="이 작업은 취소할 수 없습니다. 계속 진행하시겠습니까?",a,o,u,b="삭제",d,v,w="취소",k,_;return{c(){t=C("div"),e=C("h2"),e.textContent=n,s=P(),r=C("p"),r.textContent=c,a=P(),o=C("div"),u=C("button"),u.textContent=b,d=P(),v=C("button"),v.textContent=w,this.h()},l(m){t=$(m,"DIV",{class:!0});var x=y(t);e=$(x,"H2",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1yzhdkj"&&(e.textContent=n),s=S(x),r=$(x,"P",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-26p028"&&(r.textContent=c),a=S(x),o=$(x,"DIV",{class:!0});var I=y(o);u=$(I,"BUTTON",{class:!0,"data-svelte-h":!0}),z(u)!=="svelte-1q4epan"&&(u.textContent=b),d=S(I),v=$(I,"BUTTON",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-1rzg9yy"&&(v.textContent=w),I.forEach(g),x.forEach(g),this.h()},h(){f(e,"class","text-lg font-semibold mb-2"),f(r,"class","text-gray-600 mb-4"),f(u,"class","bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition"),f(v,"class","bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition"),f(o,"class","flex justify-center space-x-4"),f(t,"class","text-center")},m(m,x){E(m,t,x),T(t,e),T(t,s),T(t,r),T(t,a),T(t,o),T(o,u),T(o,d),T(o,v),k||(_=[J(u,"click",i[14]),J(v,"click",i[15])],k=!0)},p:A,d(m){m&&g(t),k=!1,it(_)}}}function Vt(i){let t,e,n,s,r,c,a,o,u,b,d,v,w;t=new _t({props:{position:"fixed",leftBack:i[4]?"":"white",rightSearch:"white",rightPostSetting:{visible:i[3],fill:"white",onClick:i[10]}}});const k=[Pt,Et],_=[];function m(l,p){return l[0].posts.length===0?0:1}n=m(i),s=_[n]=k[n](i),c=new wt({});function x(l){i[13](l)}let I={defaultHeight:16*16,maxHeight:16*16,$$slots:{default:[St]},$$scope:{ctx:i}};i[1]!==void 0&&(I.isOpen=i[1]),o=new xt({props:I}),tt.push(()=>nt(o,"isOpen",x));function O(l){i[16](l)}let R={$$slots:{default:[Bt]},$$scope:{ctx:i}};return i[2]!==void 0&&(R.modalVisible=i[2]),d=new kt({props:R}),tt.push(()=>nt(d,"modalVisible",O)),{c(){N(t.$$.fragment),e=P(),s.c(),r=P(),N(c.$$.fragment),a=P(),N(o.$$.fragment),b=P(),N(d.$$.fragment)},l(l){M(t.$$.fragment,l),e=S(l),s.l(l),r=S(l),M(c.$$.fragment,l),a=S(l),M(o.$$.fragment,l),b=S(l),M(d.$$.fragment,l)},m(l,p){D(t,l,p),E(l,e,p),_[n].m(l,p),E(l,r,p),D(c,l,p),E(l,a,p),D(o,l,p),E(l,b,p),D(d,l,p),w=!0},p(l,[p]){const U={};p&16&&(U.leftBack=l[4]?"":"white"),p&10&&(U.rightPostSetting={visible:l[3],fill:"white",onClick:l[10]}),t.$set(U);let h=n;n=m(l),n===h?_[n].p(l,p):(gt(),B(_[h],1,1,()=>{_[h]=null}),pt(),s=_[n],s?s.p(l,p):(s=_[n]=k[n](l),s.c()),V(s,1),s.m(r.parentNode,r));const j={};p&2097158&&(j.$$scope={dirty:p,ctx:l}),!u&&p&2&&(u=!0,j.isOpen=l[1],et(()=>u=!1)),o.$set(j);const G={};p&2097156&&(G.$$scope={dirty:p,ctx:l}),!v&&p&4&&(v=!0,G.modalVisible=l[2],et(()=>v=!1)),d.$set(G)},i(l){w||(V(t.$$.fragment,l),V(s),V(c.$$.fragment,l),V(o.$$.fragment,l),V(d.$$.fragment,l),w=!0)},o(l){B(t.$$.fragment,l),B(s),B(c.$$.fragment,l),B(o.$$.fragment,l),B(d.$$.fragment,l),w=!1},d(l){l&&(g(e),g(r),g(a),g(b)),Z(t,l),_[n].d(l),Z(c,l),Z(o,l),Z(d,l)}}}function At(i,t,e){let n,s,r,c,a,o,u;st(i,ht,h=>e(18,o=h)),st(i,vt,h=>e(9,u=h));let b={posts:[],index:0};const d=sessionStorage.getItem("jwt"),v=ct();let w=!1,k=!1,_;dt(async()=>{const h=Number(u.url.searchParams.get("postIdx")||0),j=Number(u.url.searchParams.get("mediaIdx")||0),G=0,ot=30,at=`&offset=${G}`,ft=`&limit=${ot}`;let H=[];(s||n)&&o.length>0?(H=o.map(q=>q.idx===h?{...q,mediaIdx:j}:{...q,mediaIdx:0}),e(0,b.index=H.findIndex(q=>q.idx===String(h)),b)):(_=new AbortController,h&&(H=[await fetch(`${K}/posts/${h}`,{method:"GET",headers:{Authorization:"Bearer "+d},signal:_.signal}).then(q=>q.json()).then(q=>q.data)]),H=[...H,...await fetch(`${K}/posts?${at}${ft}`,{method:"GET",headers:{Authorization:"Bearer "+d},signal:_.signal}).then(q=>q.json()).then(q=>{var Y;return(Y=q.data)==null?void 0:Y.posts.filter(ut=>ut.idx!==String(h))})||[]]),e(0,b.posts=H,b)}),mt(()=>{_&&_.abort()});function m(){var h;fetch(`${K}/posts/${(h=window.location.search.split("postIdx=")[1])==null?void 0:h.split("&")[0]}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`}}).then(j=>j.json()).then(()=>lt(`/users/${v}`,{replaceState:!0,invalidateAll:!0}))}const x=()=>{e(1,w=!0)},I=()=>{var h;e(1,w=!1),lt(`/viewer/edit?type=patch&postIdx=${(h=window.location.search.split("postIdx=")[1])==null?void 0:h.split("&")[0]}`,{replaceState:!1,invalidateAll:!1})},O=()=>{e(1,w=!1),e(2,k=!0)};function R(h){w=h,e(1,w)}const l=()=>{m(),e(2,k=!1)},p=()=>{e(2,k=!1)};function U(h){k=h,e(2,k)}return i.$$.update=()=>{var h;i.$$.dirty&512&&e(6,n=u.url.searchParams.get("placeIdx")),i.$$.dirty&512&&e(7,s=u.url.searchParams.get("userIdx")),i.$$.dirty&1&&e(8,r=(h=b.posts[b.index])==null?void 0:h.user_idx),i.$$.dirty&192&&e(4,c=!n&&!s),i.$$.dirty&256&&e(3,a=v!==null&&String(v)===String(r))},[b,w,k,a,c,m,n,s,r,u,x,I,O,R,l,p,U]}class Qt extends W{constructor(t){super(),X(this,t,At,Vt,Q,{})}}const Wt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Qt as component,Wt as universal};
