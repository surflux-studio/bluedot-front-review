import{c as Nt,e as J,f as Pe,g as jt,s as He,m as Fe,A as it,I as Ee,b as lt}from"../chunks/store.C9gcVE2I.js";import{s as Xe,q as at,r as rt,b as $,f as _,v as p,i as ee,h as m,n as be,w as je,a as R,g as L,x as ze,k as Ne,m as zt,u as Mt,o as Rt,p as Lt,e as v,t as he,c as C,d as ge,A as ve,j as we,U as Oe,M as ot,z as Ze,F as Dt,P as Ut,O as Ht,C as We,a1 as qt,y as Zt,N as Je}from"../chunks/scheduler.CIbz-4tf.js";import{S as Qe,i as et,b as Me,c as K,d as Y,m as X,t as S,a as x,f as Q,g as De,e as Se}from"../chunks/index.gvaMc9LH.js";import{e as Ve}from"../chunks/each.Cdd7o6io.js";import{H as St}from"../chunks/Header.B6oSGUbu.js";import{p as xt}from"../chunks/stores.CcN5nOBZ.js";/* empty css                                                   */import{a as pt}from"../chunks/link_preview.DfKqbwsY.js";import{C as At}from"../chunks/CircleImage.CZpdYjea.js";import{g as ht}from"../chunks/entry.Di29JZxr.js";import{N as Gt}from"../chunks/NavigationBar.CbGomYPw.js";import{i as Ge,g as Te}from"../chunks/sign.CUItAdIG.js";import{g as qe,u as ut,s as Wt}from"../chunks/searchParams.B0T0NSNL.js";import{f as Jt}from"../chunks/proj.DXH8zrwl.js";import{g as Ke,a as ft,s as Re}from"../chunks/s32cloudfront.BUnobDZ3.js";import{B as Kt}from"../chunks/BottomNavigationPadder.DH-faMMZ.js";import{C as Yt,I as Xt,a as Qt}from"../chunks/ChipInstagram.CIMm6hR7.js";import{I as en}from"../chunks/IconEarth.wHBIBDgt.js";import{C as tn,I as gt,a as nn}from"../chunks/IconCamera.MP3a_bBh.js";import{r as Ft}from"../chunks/units.BJZU6p1c.js";import{C as ln,F as an,a as rn,c as sn,u as ct,t as on,b as un}from"../chunks/photo.DbWRfl2t.js";import{A as Ot}from"../chunks/ActionSheet.BIWm96Cn.js";import{F as Tt}from"../chunks/Field.sEKQ2dwN.js";import{i as Ye,C as Pt}from"../chunks/device.DknIEsqX.js";import{I as dt}from"../chunks/IconAdd.PrfhF7dI.js";import{F as Vt}from"../chunks/Figure.B74YKkZm.js";import{g as _t}from"../chunks/color.C_Jm4JAr.js";/* empty css                                                   */import{w as fn,I as cn}from"../chunks/utils.B6pI8jjU.js";import{g as dn,p as mn}from"../chunks/boxRequest.CQua4RtZ.js";import"../chunks/ActionSheet.svelte_svelte_type_style_lang.BPug75Ph.js";import{A as pn}from"../chunks/ActionSheetOpenApp.BbBDJ2G9.js";import{i as hn}from"../chunks/isVideoFile.DGBlGWVm.js";function gn(){Nt.set(!0)}const yl=Object.freeze(Object.defineProperty({__proto__:null,load:gn},Symbol.toStringTag,{value:"Module"}));function _n(l){let e,n,t;return{c(){e=at("svg"),n=at("path"),t=at("path"),this.h()},l(a){e=rt(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=$(e);n=rt(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),$(n).forEach(_),t=rt(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),$(t).forEach(_),o.forEach(_),this.h()},h(){p(n,"fill-rule","evenodd"),p(n,"clip-rule","evenodd"),p(n,"d","M8.20491 8.01013C8.20491 7.75488 8.48122 7.59535 8.70227 7.72298L12.3012 9.80084C12.5223 9.92846 12.5223 10.2475 12.3012 10.3751L8.70227 12.453C8.48122 12.5806 8.20491 12.4211 8.20491 12.1659V8.01013ZM11.3776 10.088L8.91543 11.5095V8.66649L11.3776 10.088Z"),p(n,"fill",l[0]),p(t,"fill-rule","evenodd"),p(t,"clip-rule","evenodd"),p(t,"d","M16.4036 16.0081C17.6446 15.9003 18.653 14.9592 18.793 13.7213C18.9286 12.5224 19 11.2772 19 9.99977C19 8.72237 18.9286 7.47716 18.793 6.27822C18.653 5.04038 17.6446 4.09927 16.4036 3.99143C14.3775 3.81539 12.2275 3.7207 9.99998 3.7207C7.77252 3.7207 5.62246 3.81538 3.59642 3.99143C2.35536 4.09926 1.34697 5.04037 1.207 6.27822C1.07143 7.47716 1 8.72236 1 9.99977C1 11.2772 1.07143 12.5224 1.207 13.7213C1.34697 14.9592 2.35536 15.9003 3.59642 16.0081C5.62246 16.1842 7.77252 16.2788 9.99998 16.2788C12.2275 16.2788 14.3775 16.1842 16.4036 16.0081ZM18.0526 9.99977C18.0526 11.242 17.9832 12.4517 17.8516 13.6149C17.7646 14.3843 17.1342 14.9937 16.3216 15.0643C14.3236 15.2379 12.2009 15.3315 9.99998 15.3315C7.79908 15.3315 5.6764 15.2379 3.67843 15.0643C2.86583 14.9937 2.23536 14.3843 2.14837 13.6149C2.01684 12.4517 1.94737 11.242 1.94737 9.99977C1.94737 8.75755 2.01684 7.54789 2.14837 6.38466C2.23536 5.61529 2.86583 5.00585 3.67843 4.93524C5.6764 4.76164 7.79908 4.66807 9.99998 4.66807C12.2009 4.66807 14.3236 4.76164 16.3216 4.93525C17.1342 5.00585 17.7646 5.61529 17.8516 6.38467C17.9832 7.54789 18.0526 8.75755 18.0526 9.99977Z"),p(t,"fill",l[0]),p(e,"width",l[1]),p(e,"height",l[1]),p(e,"viewBox","0 0 20 20"),p(e,"fill","none"),p(e,"xmlns","http://www.w3.org/2000/svg")},m(a,o){ee(a,e,o),m(e,n),m(e,t)},p(a,[o]){o&1&&p(n,"fill",a[0]),o&1&&p(t,"fill",a[0]),o&2&&p(e,"width",a[1]),o&2&&p(e,"height",a[1])},i:be,o:be,d(a){a&&_(e)}}}function bn(l,e,n){let t,{fill:a="#5f6368"}=e,{length:o="1.75"}=e;return l.$$set=r=>{"fill"in r&&n(0,a=r.fill),"length"in r&&n(2,o=r.length)},l.$$.update=()=>{l.$$.dirty&4&&n(1,t=Ft(o))},[a,t,o]}class bt extends Qe{constructor(e){super(),et(this,e,bn,_n,Xe,{fill:0,length:2})}}async function vn(l={limit:12}){try{if(Ye&&(await ln.requestPermissions({permissions:["photos"]})).photos!=="granted")return J.emit("pushSnackbar",{message:"사진에 접근할 수 없습니다. 권한을 허용해주세요."}),console.warn("Photos permission not granted"),[];const e=(await an.pickImages({readData:!0,limit:l.limit||12,ordered:!0})).files;J.emit("loading",!0);const n=[];for await(const t of e){if(!t.data)continue;const a=await rn.gps(t.data).catch(w=>(console.warn("GPS 정보 추출 실패:",w),null));let o=atob(t.data),r=new Array(o.length);for(let w=0;w<o.length;w++)r[w]=o.charCodeAt(w);let s=new Uint8Array(r),i=new Blob([s],{type:t.mimeType}),u=new File([i],"photo.jpg",{type:t.mimeType}),c=await Cn(u,1024),h=await sn(c,.7),g=await ct([{file:h,latitude:a==null?void 0:a.latitude,longitude:a==null?void 0:a.longitude}]);J.emit("loading",!0),n.push(...g),h=null,u=null,c=null,i=null,o=null,r=null,s=null,await new Promise(w=>setTimeout(w,500)),window.gc&&window.gc()}return J.emit("loading",!1),n}catch(e){return J.emit("loading",!1),console.error(e),[]}}async function Cn(l,e=2048){return new Promise(n=>{const t=new Image;t.onload=()=>{const a=document.createElement("canvas");let o=t.width,r=t.height;(o>e||r>e)&&(o>r?(r=Math.round(r*e/o),o=e):(o=Math.round(o*e/r),r=e)),a.width=o,a.height=r;const s=a.getContext("2d");s==null||s.drawImage(t,0,0,o,r),a.toBlob(i=>{i&&n(new File([i],"resized.jpg",{type:"image/jpeg"})),URL.revokeObjectURL(t.src),a.width=0,a.height=0},"image/jpeg",.7)},t.src=URL.createObjectURL(l)})}function wn(l){let e;const n=l[8].default,t=zt(n,l,l[12],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,o){t&&t.m(a,o),e=!0},p(a,o){t&&t.p&&(!e||o&4096)&&Mt(t,n,a,a[12],e?Lt(n,a[12],o,null):Rt(a[12]),null)},i(a){e||(S(t,a),e=!0)},o(a){x(t,a),e=!1},d(a){t&&t.d(a)}}}function $n(l){let e,n,t,a=l[1]==="youtube"?"유튜브 링크":"인스타그램 링크",o,r,s,i,u,c,h,g,w,f,D,F;function I(y){l[9](y)}let E={round:"rounded-lg",border:"border border-[#3F3F3F]",backgroundColor:"bg-transparent",fontSize:"font-normal text-sm",fontColor:"text-white placeholder:text-[#757475]",placeholder:"URL 붙여넣기",onInput:l[4]};return l[2]!==void 0&&(E.value=l[2]),g=new Tt({props:E}),je.push(()=>Me(g,"value",I)),{c(){e=v("div"),n=v("div"),t=v("p"),o=he(a),r=R(),s=v("button"),i=he("첨부"),c=R(),h=v("div"),K(g.$$.fragment),this.h()},l(y){e=C(y,"DIV",{class:!0});var A=$(e);n=C(A,"DIV",{class:!0});var N=$(n);t=C(N,"P",{class:!0});var j=$(t);o=ge(j,a),j.forEach(_),r=L(N),s=C(N,"BUTTON",{class:!0});var P=$(s);i=ge(P,"첨부"),P.forEach(_),N.forEach(_),c=L(A),h=C(A,"DIV",{class:!0});var b=$(h);Y(g.$$.fragment,b),b.forEach(_),A.forEach(_),this.h()},h(){p(t,"class","text-white text-sm font-semibold leading-[17px]"),p(s,"class","text-sm font-normal text-primary-500 disabled:text-[#757475]"),s.disabled=u=l[2]===""||l[1]==="youtube"&&!Ke(l[2])||l[1]==="instagram"&&!ft(l[2]),p(n,"class","flex justify-between items-center py-2.5"),p(h,"class","py-1"),p(e,"class","px-5 text-white")},m(y,A){ee(y,e,A),m(e,n),m(n,t),m(t,o),m(n,r),m(n,s),m(s,i),m(e,c),m(e,h),X(g,h,null),f=!0,D||(F=ve(s,"click",l[5]),D=!0)},p(y,A){(!f||A&2)&&a!==(a=y[1]==="youtube"?"유튜브 링크":"인스타그램 링크")&&we(o,a),(!f||A&6&&u!==(u=y[2]===""||y[1]==="youtube"&&!Ke(y[2])||y[1]==="instagram"&&!ft(y[2])))&&(s.disabled=u);const N={};!w&&A&4&&(w=!0,N.value=y[2],ze(()=>w=!1)),g.$set(N)},i(y){f||(S(g.$$.fragment,y),f=!0)},o(y){x(g.$$.fragment,y),f=!1},d(y){y&&_(e),Q(g),D=!1,F()}}}function kn(l){let e,n,t,a,o;e=new tn({props:{shrink:!1,ydistance:9.5+12,items:l[3],$$slots:{default:[wn]},$$scope:{ctx:l}}});function r(i){l[11](i)}let s={sheetBackground:"bg-[#222222]",noHandle:!0,fixed:!0,onClose:l[10],$$slots:{default:[$n]},$$scope:{ctx:l}};return l[0]!==void 0&&(s.isOpen=l[0]),t=new Ot({props:s}),je.push(()=>Me(t,"isOpen",r)),{c(){K(e.$$.fragment),n=R(),K(t.$$.fragment)},l(i){Y(e.$$.fragment,i),n=L(i),Y(t.$$.fragment,i)},m(i,u){X(e,i,u),ee(i,n,u),X(t,i,u),o=!0},p(i,[u]){const c={};u&4096&&(c.$$scope={dirty:u,ctx:i}),e.$set(c);const h={};u&7&&(h.onClose=i[10]),u&4102&&(h.$$scope={dirty:u,ctx:i}),!a&&u&1&&(a=!0,h.isOpen=i[0],ze(()=>a=!1)),t.$set(h)},i(i){o||(S(e.$$.fragment,i),S(t.$$.fragment,i),o=!0)},o(i){x(e.$$.fragment,i),x(t.$$.fragment,i),o=!1},d(i){i&&_(n),Q(e,i),Q(t,i)}}}function In(l,e,n){let t;Ne(l,Pe,b=>n(15,t=b));let{$$slots:a={},$$scope:o}=e,{placeIdx:r=0}=e,{placeName:s=""}=e,{isOpenEmbedSeet:i=!1}=e;const u=Pt.isNativePlatform();let c,h="",g=!1,w=!1;async function f(){const b=await vn({limit:12});b.length!==0&&(Oe(Pe,t=b,t),await qe("/viewer/edit",{type:"post",placeIdx:String(r),placeName:s},{replaceState:!1,invalidateAll:!1}))}async function D(){const b=await on(),z=await ct(b);Oe(Pe,t=z,t),await qe("/viewer/edit",{type:"post",placeIdx:String(r),placeName:s},{replaceState:!1,invalidateAll:!1})}async function F(){const b=await un({limit:12}),z=await ct(b);Oe(Pe,t=z,t),await qe("/viewer/edit",{type:"post",placeIdx:String(r),placeName:s},{replaceState:!1,invalidateAll:!1})}const I=u?[{name:"사진 선택",icon:gt,onClick:f},{name:"사진 촬영",icon:nn,onClick:D},{name:"유튜브",icon:bt,onClick:()=>{n(1,c="youtube"),E()}}]:[{name:"파일 첨부",icon:gt,onClick:F},{name:"유튜브",icon:bt,onClick:()=>{n(1,c="youtube"),E()}}];function E(){if(!Ge()){J.emit("showSignInModal",{removable:!0});return}n(0,i=!0)}function y(){if(c==="youtube"&&Ke(h)){if(g)return;g=!0}else g&&(g=!1)}async function A(){if(w)return;w=!0;const b=Ke(h),z=ft(h);if(!b&&!z)return w=!1;if(b!=null&&Pe.set([h]),z!=null){const M=new URL(h),G=M.origin+M.pathname;J.emit("loading",!0);const te=await fetch(`https://azit.surflux.studio/crawler/instagram?url=${G}`,{headers:{Authorization:`Bearer ${Te()}`,"x-api-version":"1.0.0"}}).finally(()=>{J.emit("loading",!1),n(2,h=""),w=!1,n(0,i=!1)});if(!te.ok){J.emit("pushSnackbar",{message:"인스타그램 등록에 실패했습니다."});return}const oe=(await te.json()).data;M.searchParams.set("utm_source","bluedot"),M.searchParams.set("utm_medium","post_link"),Pe.set(oe.media),jt.set({origin:"instagram",url:M.toString(),name:oe.igUsername,text:oe.text})}await qe("/viewer/edit",{type:"post",placeIdx:String(r),placeName:s},{replaceState:!1,invalidateAll:!1})}function N(b){h=b,n(2,h)}const j=()=>{n(2,h=""),n(1,c=void 0),n(0,i=!1)};function P(b){i=b,n(0,i)}return l.$$set=b=>{"placeIdx"in b&&n(6,r=b.placeIdx),"placeName"in b&&n(7,s=b.placeName),"isOpenEmbedSeet"in b&&n(0,i=b.isOpenEmbedSeet),"$$scope"in b&&n(12,o=b.$$scope)},[i,c,h,I,y,A,r,s,a,N,j,P,o]}class En extends Qe{constructor(e){super(),et(this,e,In,kn,Xe,{placeIdx:6,placeName:7,isOpenEmbedSeet:0})}}function vt(l,e,n){const t=l.slice();return t[24]=e[n],t[26]=n,t}function yn(l){let e;return{c(){e=v("div"),this.h()},l(n){e=C(n,"DIV",{class:!0}),$(e).forEach(_),this.h()},h(){p(e,"class","absolute w-12 h-12 bg-[#D9D9D9] rounded-full")},m(n,t){ee(n,e,t)},p:be,i:be,o:be,d(n){n&&_(e)}}}function Bn(l){let e,n;return e=new At({props:{src:Re(l[24].image,500),width:"48px",strokeWidth:"0"}}),{c(){K(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){X(e,t,a),n=!0},p(t,a){const o={};a&1&&(o.src=Re(t[24].image,500)),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Ct(l){let e,n,t,a,o,r,s,i,u,c,h=l[24].name+"",g,w,f,D,F;const I=[Bn,yn],E=[];function y(N,j){return N[24].image?0:1}s=y(l),i=E[s]=I[s](l);function A(){return l[11](l[24])}return{c(){e=v("div"),n=v("div"),t=v("div"),a=v("div"),r=R(),i.c(),u=R(),c=v("p"),g=he(h),w=R(),this.h()},l(N){e=C(N,"DIV",{class:!0,"aria-hidden":!0});var j=$(e);n=C(j,"DIV",{class:!0});var P=$(n);t=C(P,"DIV",{class:!0});var b=$(t);a=C(b,"DIV",{class:!0}),$(a).forEach(_),r=L(b),i.l(b),b.forEach(_),P.forEach(_),u=L(j),c=C(j,"P",{class:!0});var z=$(c);g=ge(z,h),z.forEach(_),w=L(j),j.forEach(_),this.h()},h(){p(a,"class",o=`absolute w-full h-full rounded-full shadow-[1px_1px_6px_rgba(0,0,0,0.1)] ${l[2]!==l[24]?"bg-[rgba(56,56,56,0.8)]":"bg-[linear-gradient(135deg,var(--tw-gradient-stops))] from-[rgba(0,236,179,0.6)] from-[-23.08%] to-[rgba(12,121,254,0.6)] to-[116.67%]"}`),p(t,"class","flex w-full h-full justify-center items-center touch-pan-y"),p(n,"class","w-[54px] h-[54px] relative flex-shrink-0"),p(c,"class","text-center text-white font-normal text-xs leading-[18px] tracking-[-0.6px] overflow-hidden truncate whitespace-normal line-clamp-2"),p(e,"class","w-full flex flex-col gap-1.5 place-items-center"),p(e,"aria-hidden","")},m(N,j){ee(N,e,j),m(e,n),m(n,t),m(t,a),m(t,r),E[s].m(t,null),m(e,u),m(e,c),m(c,g),m(e,w),f=!0,D||(F=ve(e,"click",A),D=!0)},p(N,j){l=N,(!f||j&5&&o!==(o=`absolute w-full h-full rounded-full shadow-[1px_1px_6px_rgba(0,0,0,0.1)] ${l[2]!==l[24]?"bg-[rgba(56,56,56,0.8)]":"bg-[linear-gradient(135deg,var(--tw-gradient-stops))] from-[rgba(0,236,179,0.6)] from-[-23.08%] to-[rgba(12,121,254,0.6)] to-[116.67%]"}`))&&p(a,"class",o);let P=s;s=y(l),s===P?E[s].p(l,j):(De(),x(E[P],1,1,()=>{E[P]=null}),Se(),i=E[s],i?i.p(l,j):(i=E[s]=I[s](l),i.c()),S(i,1),i.m(t,null)),(!f||j&1)&&h!==(h=l[24].name+"")&&we(g,h)},i(N){f||(S(i),f=!0)},o(N){x(i),f=!1},d(N){N&&_(e),E[s].d(),D=!1,F()}}}function Dn(l){let e,n,t,a,o,r,s,i;function u(f){l[10](f)}let c={id:"focus",round:!0,placeholder:"박스 검색",fontSize:"font-normal text-sm",fontColor:"text-[#757D86]",clear:!0,backgroundColor:"bg-[#383838]/30",onInput:l[5]};l[3]!==void 0&&(c.value=l[3]),a=new Tt({props:c}),je.push(()=>Me(a,"value",u));let h=Ve(l[0]),g=[];for(let f=0;f<h.length;f+=1)g[f]=Ct(vt(l,h,f));const w=f=>x(g[f],1,1,()=>{g[f]=null});return{c(){e=v("div"),n=v("div"),t=v("section"),K(a.$$.fragment),r=R(),s=v("div");for(let f=0;f<g.length;f+=1)g[f].c();this.h()},l(f){e=C(f,"DIV",{class:!0});var D=$(e);n=C(D,"DIV",{class:!0});var F=$(n);t=C(F,"SECTION",{class:!0});var I=$(t);Y(a.$$.fragment,I),I.forEach(_),F.forEach(_),r=L(D),s=C(D,"DIV",{class:!0});var E=$(s);for(let y=0;y<g.length;y+=1)g[y].l(E);E.forEach(_),D.forEach(_),this.h()},h(){p(t,"class","box-search py-3"),p(n,"class","modal-header flex-none w-full px-5"),p(s,"class","flex-grow w-full grid grid-cols-3 gap-4 p-5 justify-items-center text-center overflow-y-auto touch-pan-y"),p(e,"class","w-full h-full flex flex-col")},m(f,D){ee(f,e,D),m(e,n),m(n,t),X(a,t,null),m(e,r),m(e,s);for(let F=0;F<g.length;F+=1)g[F]&&g[F].m(s,null);i=!0},p(f,D){const F={};if(!o&&D&8&&(o=!0,F.value=f[3],ze(()=>o=!1)),a.$set(F),D&5){h=Ve(f[0]);let I;for(I=0;I<h.length;I+=1){const E=vt(f,h,I);g[I]?(g[I].p(E,D),S(g[I],1)):(g[I]=Ct(E),g[I].c(),S(g[I],1),g[I].m(s,null))}for(De(),I=h.length;I<g.length;I+=1)w(I);Se()}},i(f){if(!i){S(a.$$.fragment,f);for(let D=0;D<h.length;D+=1)S(g[D]);i=!0}},o(f){x(a.$$.fragment,f),g=g.filter(Boolean);for(let D=0;D<g.length;D+=1)x(g[D]);i=!1},d(f){f&&_(e),Q(a),ot(g,f)}}}function Sn(l){let e,n,t,a,o,r,s="박스 추가",i,u,c,h,g,w,f="링크 복사",D,F,I;return a=new dt({props:{width:"24",height:"24"}}),h=new cn({props:{width:"24",height:"24"}}),{c(){e=v("div"),n=v("div"),t=v("button"),K(a.$$.fragment),o=R(),r=v("p"),r.textContent=s,i=R(),u=v("div"),c=v("button"),K(h.$$.fragment),g=R(),w=v("p"),w.textContent=f,this.h()},l(E){e=C(E,"DIV",{class:!0});var y=$(e);n=C(y,"DIV",{class:!0});var A=$(n);t=C(A,"BUTTON",{class:!0});var N=$(t);Y(a.$$.fragment,N),N.forEach(_),o=L(A),r=C(A,"P",{class:!0,"data-svelte-h":!0}),Ze(r)!=="svelte-16b9bbj"&&(r.textContent=s),A.forEach(_),i=L(y),u=C(y,"DIV",{class:!0});var j=$(u);c=C(j,"BUTTON",{class:!0});var P=$(c);Y(h.$$.fragment,P),P.forEach(_),g=L(j),w=C(j,"P",{class:!0,"data-svelte-h":!0}),Ze(w)!=="svelte-144ozvw"&&(w.textContent=f),j.forEach(_),y.forEach(_),this.h()},h(){p(t,"class","w-[45px] h-[45px] bg-[#2C2C2E] rounded-full flex justify-center items-center"),p(r,"class","font-normal text-xs text-white"),p(n,"class","flex flex-col gap-1.5 place-items-center"),p(c,"class","w-[45px] h-[45px] bg-[#2C2C2E] rounded-full flex justify-center items-center"),p(w,"class","font-normal text-xs text-white"),p(u,"class","flex flex-col gap-1.5 place-items-center"),p(e,"class","flex gap-10 px-5")},m(E,y){ee(E,e,y),m(e,n),m(n,t),X(a,t,null),m(n,o),m(n,r),m(e,i),m(e,u),m(u,c),X(h,c,null),m(u,g),m(u,w),D=!0,F||(I=[ve(t,"click",l[8]),ve(c,"click",l[9])],F=!0)},p:be,i(E){D||(S(a.$$.fragment,E),S(h.$$.fragment,E),D=!0)},o(E){x(a.$$.fragment,E),x(h.$$.fragment,E),D=!1},d(E){E&&_(e),Q(a),Q(h),F=!1,Dt(I)}}}function xn(l){var h;let e,n,t=((h=l[2])==null?void 0:h.name)+"",a,o,r,s,i="확인",u,c;return{c(){e=v("div"),n=v("p"),a=he(t),o=he("에 담으시겠습니까?"),r=R(),s=v("button"),s.textContent=i,this.h()},l(g){e=C(g,"DIV",{class:!0});var w=$(e);n=C(w,"P",{class:!0});var f=$(n);a=ge(f,t),o=ge(f,"에 담으시겠습니까?"),f.forEach(_),r=L(w),s=C(w,"BUTTON",{class:!0,"data-svelte-h":!0}),Ze(s)!=="svelte-1r994n9"&&(s.textContent=i),w.forEach(_),this.h()},h(){p(n,"class","pb-3.5 font-normal text-sm text-white"),p(s,"class","w-full p-2.5 bg-[#0C79FE] rounded-[50px] font-medium text-sm leading-[17px] text-white"),p(e,"class","w-full bg-[#222222]")},m(g,w){ee(g,e,w),m(e,n),m(n,a),m(n,o),m(e,r),m(e,s),u||(c=ve(s,"click",l[6]),u=!0)},p(g,w){var f;w&4&&t!==(t=((f=g[2])==null?void 0:f.name)+"")&&we(a,t)},i:be,o:be,d(g){g&&_(e),u=!1,c()}}}function An(l){let e,n,t,a;const o=[xn,Sn],r=[];function s(i,u){return i[2]?0:1}return n=s(l),t=r[n]=o[n](l),{c(){e=v("div"),t.c(),this.h()},l(i){e=C(i,"DIV",{slot:!0,class:!0});var u=$(e);t.l(u),u.forEach(_),this.h()},h(){p(e,"slot","footer"),p(e,"class","modal-footer flex-none w-full pt-3 px-5 flex flex-row gap-3 justify-start border-t-[0.5px] border-[#3F3F3F] pointer-events-auto")},m(i,u){ee(i,e,u),r[n].m(e,null),a=!0},p(i,u){let c=n;n=s(i),n===c?r[n].p(i,u):(De(),x(r[c],1,1,()=>{r[c]=null}),Se(),t=r[n],t?t.p(i,u):(t=r[n]=o[n](i),t.c()),S(t,1),t.m(e,null))},i(i){a||(S(t),a=!0)},o(i){x(t),a=!1},d(i){i&&_(e),r[n].d()}}}function Fn(l){let e,n,t;function a(r){l[12](r)}let o={useDefaultHeight:!0,defaultHeight:Ft(30),slotFullHeight:!0,hFull:!0,$$slots:{footer:[An],default:[Dn]},$$scope:{ctx:l}};return l[4]!==void 0&&(o.isOpen=l[4]),e=new Ot({props:o}),je.push(()=>Me(e,"isOpen",a)),{c(){K(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,s){X(e,r,s),t=!0},p(r,[s]){const i={};s&134217743&&(i.$$scope={dirty:s,ctx:r}),!n&&s&16&&(n=!0,i.isOpen=r[4],ze(()=>n=!1)),e.$set(i)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){x(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function On(l,e,n){let t,a,o;Ne(l,He,b=>n(17,t=b)),Ne(l,xt,b=>n(18,a=b)),Ne(l,Fe,b=>n(4,o=b)),Pt.isNativePlatform();const r=["owner","manager","writer"];let s=[],i=[];He.subscribe(b=>{n(0,i=s=b.filter(z=>r.includes(z.role??"")))});let u="",c;Fe.subscribe(b=>{b?g():n(2,c=void 0)});let h=!1;function g(){if(t.length!==0||h)return;h=!0;const b=Te();if(!b)return h=!1;dn(b).then(z=>z.json()).then(z=>{z.data&&He.set(z.data)}).finally(()=>h=!1)}let w="",f;function D(b){clearTimeout(f),f=setTimeout(F,300)}function F(){n(0,i=w?s.filter(b=>b.name.includes(w)):s)}async function I(){const b=Te();if(!b)return ut({onshare:"1"},{replace:!0}),J.emit("showSignInModal",{removable:!0});if(!c||!a.params.idx)return;let z=!0;const M=c.idx;try{const G=await mn(b,M,a.params.idx);if(!G.ok)throw new Error;if((await G.json()).data==="already")return z=!1,J.emit("pushSnackbar",{message:"이미 포함된 장소입니다."});Oe(He,t=t.map(re=>re.idx===M?{...re,place_count:re.place_count?`${Number(re.place_count)+1}`:"0"}:re),t),J.emit("pushSnackbar",{message:"장소를 박스에 담았습니다"})}catch{J.emit("pushSnackbar",{message:"일시적으로 장애가 발생했습니다."})}finally{n(2,c=void 0)}}async function E(){const b=Te();if(!b)return ut({onshare:"1"},{replace:!0}),J.emit("showSignInModal",{removable:!0});const z=u.trim();if(z)try{J.emit("loading",!0);const M=await fetch(`${it}/boxes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({name:z,visibility:"follower"})});if(!M.ok)throw new Error;M.json().then(G=>{const te=G.data;te.role="owner",te.visibility="follower",te.is_subcribed=!1,te.place_count="0",te.follower_count="0",Oe(He,t=[te,...t],t)}),J.emit("pushSnackbar",{message:"새 박스를 만들었습니다"})}catch{J.emit("pushSnackbar",{message:"일시적으로 장애가 발생했습니다."})}finally{J.emit("loading",!1)}}const y=()=>{n(1,u=prompt("박스 이름을 입력해주세요")),String(u||"").trim()&&E()},A=()=>fn(`${location.pathname}${location.search}`);function N(b){w=b,n(3,w)}const j=b=>{c===b?n(2,c=void 0):n(2,c=b)};function P(b){o=b,Fe.set(o)}return[i,u,c,w,o,D,I,E,y,A,N,j,P]}class Tn extends Qe{constructor(e){super(),et(this,e,On,Fn,Xe,{})}}function wt(l,e,n){const t=l.slice();return t[34]=e[n],t[36]=n,t}function $t(l,e,n){const t=l.slice();return t[34]=e[n],t[36]=n,t}function st(l){var t;const e=l.slice(),n=(t=e[34].media)==null?void 0:t.at(0);return e[38]=n,e}function Pn(l){let e,n;return e=new St({props:{position:"static",backgroundColor:"bg-black",leftLogo:!0}}),{c(){K(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){X(e,t,a),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Vn(l){let e,n,t=l[4].name+"",a,o,r,s=(l[4].roadAddress||l[4].lotAddress||"")+"",i;return{c(){e=v("div"),n=v("p"),a=he(t),o=R(),r=v("div"),i=he(s),this.h()},l(u){e=C(u,"DIV",{class:!0});var c=$(e);n=C(c,"P",{class:!0});var h=$(n);a=ge(h,t),h.forEach(_),o=L(c),r=C(c,"DIV",{class:!0});var g=$(r);i=ge(g,s),g.forEach(_),c.forEach(_),this.h()},h(){p(n,"class","text-white text-[15px] leading-[18px] font-semibold line-clamp-1"),p(r,"class","text-center text-[#A6A9AB] text-xs leading-[17px] font-normal line-clamp-2"),p(e,"class","flex flex-col justify-center items-center gap-1")},m(u,c){ee(u,e,c),m(e,n),m(n,a),m(e,o),m(e,r),m(r,i)},p(u,c){c[0]&16&&t!==(t=u[4].name+"")&&we(a,t),c[0]&16&&s!==(s=(u[4].roadAddress||u[4].lotAddress||"")+"")&&we(i,s)},d(u){u&&_(e)}}}function Nn(l){let e,n,t,a,o,r;return t=new en({}),{c(){e=v("div"),n=v("button"),K(t.$$.fragment),this.h()},l(s){e=C(s,"DIV",{class:!0});var i=$(e);n=C(i,"BUTTON",{});var u=$(n);Y(t.$$.fragment,u),u.forEach(_),i.forEach(_),this.h()},h(){p(e,"class","flex items-center gap-2")},m(s,i){ee(s,e,i),m(e,n),X(t,n,null),a=!0,o||(r=ve(n,"click",l[15]),o=!0)},p:be,i(s){a||(S(t.$$.fragment,s),a=!0)},o(s){x(t.$$.fragment,s),a=!1},d(s){s&&_(e),Q(t),o=!1,r()}}}function jn(l){let e,n,t,a,o="포스트",r,s,i;return n=new dt({props:{width:"14",height:"14",fill:"white",strokeColor:"white"}}),{c(){e=v("div"),K(n.$$.fragment),t=R(),a=v("p"),a.textContent=o,this.h()},l(u){e=C(u,"DIV",{class:!0});var c=$(e);Y(n.$$.fragment,c),t=L(c),a=C(c,"P",{class:!0,"data-svelte-h":!0}),Ze(a)!=="svelte-bo4d3u"&&(a.textContent=o),c.forEach(_),this.h()},h(){p(a,"class","font-medium text-sm leading-[17px] text-white"),p(e,"class","flex justify-center gap-1.5 items-center")},m(u,c){ee(u,e,c),X(n,e,null),m(e,t),m(e,a),r=!0,s||(i=ve(e,"click",l[17]),s=!0)},p:be,i(u){r||(S(n.$$.fragment,u),r=!0)},o(u){x(n.$$.fragment,u),r=!1},d(u){u&&_(e),Q(n),s=!1,i()}}}function zn(l){var o;let e,n,t=(((o=l[34].unique_name)==null?void 0:o.at(0))??"u")+"",a;return{c(){e=v("div"),n=v("span"),a=he(t),this.h()},l(r){e=C(r,"DIV",{class:!0,style:!0});var s=$(e);n=C(s,"SPAN",{class:!0});var i=$(n);a=ge(i,t),i.forEach(_),s.forEach(_),this.h()},h(){p(n,"class","text-base font-semibold text-black"),p(e,"class","w-[26px] h-[26px] flex items-center justify-center rounded-full"),We(e,"background-color",_t(l[34].unique_name))},m(r,s){ee(r,e,s),m(e,n),m(n,a)},p(r,s){var i;s[0]&64&&t!==(t=(((i=r[34].unique_name)==null?void 0:i.at(0))??"u")+"")&&we(a,t),s[0]&64&&We(e,"background-color",_t(r[34].unique_name))},i:be,o:be,d(r){r&&_(e)}}}function Mn(l){let e,n;return e=new At({props:{src:Re(l[34].profile_image_url,500),width:"26px",strokeWidth:"0"}}),{c(){K(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){X(e,t,a),n=!0},p(t,a){const o={};a[0]&64&&(o.src=Re(t[34].profile_image_url,500)),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function kt(l){let e,n,t=l[12](l[34].text)+"",a,o,r=l[34].text.length>85&&It(l);return{c(){e=v("div"),n=v("p"),a=he(t),o=R(),r&&r.c(),this.h()},l(s){e=C(s,"DIV",{class:!0});var i=$(e);n=C(i,"P",{});var u=$(n);a=ge(u,t),o=L(u),r&&r.l(u),u.forEach(_),i.forEach(_),this.h()},h(){p(e,"class","pt-0.5 pb-2 typo-body3 text-[#F1F1F1] relative")},m(s,i){ee(s,e,i),m(e,n),m(n,a),m(n,o),r&&r.m(n,null)},p(s,i){i[0]&64&&t!==(t=s[12](s[34].text)+"")&&we(a,t),s[34].text.length>85?r?r.p(s,i):(r=It(s),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},d(s){s&&_(e),r&&r.d()}}}function It(l){let e,n=l[2]?"더 보기":"간단히",t,a,o;return{c(){e=v("span"),t=he(n),this.h()},l(r){e=C(r,"SPAN",{class:!0,"aria-hidden":!0});var s=$(e);t=ge(s,n),s.forEach(_),this.h()},h(){p(e,"class","text-[#B3B8BD]"),p(e,"aria-hidden","")},m(r,s){ee(r,e,s),m(e,t),a||(o=ve(e,"click",l[13]),a=!0)},p(r,s){s[0]&4&&n!==(n=r[2]?"더 보기":"간단히")&&we(t,n)},d(r){r&&_(e),a=!1,o()}}}function Et(l){let e,n;return e=new Vt({props:{isThumbnail:!0,src:l[38],post:l[34]}}),{c(){K(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){X(e,t,a),n=!0},p(t,a){const o={};a[0]&64&&(o.src=t[38]),a[0]&64&&(o.post=t[34]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Rn(l){let e,n;return e=new Xt({props:{length:"1.25",fill:"#F1F1F1"}}),{c(){K(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){X(e,t,a),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Ln(l){let e,n;return e=new Qt({props:{length:"1.25",fill:"#EA3323"}}),{c(){K(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){X(e,t,a),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function yt(l){var $e,q;let e,n,t,a,o,r,s,i,u,c,h=l[34].unique_name+"",g,w,f,D,F=l[11](l[34].created_at)+"",I,E,y,A,N=($e=l[34].media)==null?void 0:$e.at(0),j,P,b,z,M,G,te,re,oe=(l[34].reactionCount||"")+"",de,Ie,ue,fe,B,T,ne,le;const _e=[Mn,zn],W=[];function ye(ae,V){return ae[34].profile_image_url?0:1}o=ye(l),r=W[o]=_e[o](l);let se=l[34].text&&kt(l),U=N&&Et(st(l));function tt(){return l[20](l[34])}const Le=[Ln,Rn],ce=[];function H(ae,V){return ae[34].myReaction?0:1}M=H(l),G=ce[M]=Le[M](l);function nt(){return l[21](l[34])}return fe=new Yt({props:{dark:!0,url:(q=l[34].reference)==null?void 0:q.url}}),{c(){e=v("div"),n=v("div"),t=v("div"),a=v("a"),r.c(),i=R(),u=v("div"),c=v("a"),g=he(h),f=R(),D=v("span"),I=he(F),E=R(),se&&se.c(),y=R(),A=v("div"),U&&U.c(),j=R(),P=v("div"),b=v("div"),z=v("button"),G.c(),te=R(),re=v("span"),de=he(oe),Ie=R(),ue=v("div"),K(fe.$$.fragment),B=R(),this.h()},l(ae){e=C(ae,"DIV",{class:!0});var V=$(e);n=C(V,"DIV",{class:!0});var ie=$(n);t=C(ie,"DIV",{class:!0});var ke=$(t);a=C(ke,"A",{href:!0});var Be=$(a);r.l(Be),Be.forEach(_),i=L(ke),u=C(ke,"DIV",{});var d=$(u);c=C(d,"A",{href:!0,class:!0});var k=$(c);g=ge(k,h),k.forEach(_),f=L(d),D=C(d,"SPAN",{class:!0});var Z=$(D);I=ge(Z,F),Z.forEach(_),d.forEach(_),ke.forEach(_),E=L(ie),se&&se.l(ie),ie.forEach(_),y=L(V),A=C(V,"DIV",{class:!0});var pe=$(A);U&&U.l(pe),pe.forEach(_),j=L(V),P=C(V,"DIV",{class:!0});var me=$(P);b=C(me,"DIV",{});var O=$(b);z=C(O,"BUTTON",{});var Ce=$(z);G.l(Ce),Ce.forEach(_),te=L(O),re=C(O,"SPAN",{});var xe=$(re);de=ge(xe,oe),xe.forEach(_),O.forEach(_),Ie=L(me),ue=C(me,"DIV",{class:!0});var Ue=$(ue);Y(fe.$$.fragment,Ue),Ue.forEach(_),me.forEach(_),B=L(V),V.forEach(_),this.h()},h(){var ae;p(a,"href",s="/users/"+l[34].user_idx),p(c,"href",w="/users/"+l[34].user_idx),p(c,"class","font-medium text-sm leading-[17px] text-white"),p(D,"class","pl-1.5 font-normal text-xs text-[#757D86]"),p(t,"class","py-2.5 flex justify-start items-center gap-2.5"),p(n,"class","px-3"),p(A,"class","w-full h-[244px] bg-[#D9D9D9]"),p(ue,"class","-mr-3"),Je(ue,"hidden",((ae=l[34].reference)==null?void 0:ae.origin)!=="instagram"),p(P,"class","px-4 py-3 text-[#F1F1F1] typo-body3 flex items-center gap-2.5 justify-between "),p(e,"class","bg-[#222222] relative rounded-[10px] w-full my-2.5")},m(ae,V){ee(ae,e,V),m(e,n),m(n,t),m(t,a),W[o].m(a,null),m(t,i),m(t,u),m(u,c),m(c,g),m(u,f),m(u,D),m(D,I),m(n,E),se&&se.m(n,null),m(e,y),m(e,A),U&&U.m(A,null),m(e,j),m(e,P),m(P,b),m(b,z),ce[M].m(z,null),m(b,te),m(b,re),m(re,de),m(P,Ie),m(P,ue),X(fe,ue,null),m(e,B),T=!0,ne||(le=[ve(A,"click",tt),ve(z,"click",nt)],ne=!0)},p(ae,V){var d,k,Z;l=ae;let ie=o;o=ye(l),o===ie?W[o].p(l,V):(De(),x(W[ie],1,1,()=>{W[ie]=null}),Se(),r=W[o],r?r.p(l,V):(r=W[o]=_e[o](l),r.c()),S(r,1),r.m(a,null)),(!T||V[0]&64&&s!==(s="/users/"+l[34].user_idx))&&p(a,"href",s),(!T||V[0]&64)&&h!==(h=l[34].unique_name+"")&&we(g,h),(!T||V[0]&64&&w!==(w="/users/"+l[34].user_idx))&&p(c,"href",w),(!T||V[0]&64)&&F!==(F=l[11](l[34].created_at)+"")&&we(I,F),l[34].text?se?se.p(l,V):(se=kt(l),se.c(),se.m(n,null)):se&&(se.d(1),se=null),V[0]&64&&(N=(d=l[34].media)==null?void 0:d.at(0)),N?U?(U.p(st(l),V),V[0]&64&&S(U,1)):(U=Et(st(l)),U.c(),S(U,1),U.m(A,null)):U&&(De(),x(U,1,1,()=>{U=null}),Se());let ke=M;M=H(l),M!==ke&&(De(),x(ce[ke],1,1,()=>{ce[ke]=null}),Se(),G=ce[M],G||(G=ce[M]=Le[M](l),G.c()),S(G,1),G.m(z,null)),(!T||V[0]&64)&&oe!==(oe=(l[34].reactionCount||"")+"")&&we(de,oe);const Be={};V[0]&64&&(Be.url=(k=l[34].reference)==null?void 0:k.url),fe.$set(Be),(!T||V[0]&64)&&Je(ue,"hidden",((Z=l[34].reference)==null?void 0:Z.origin)!=="instagram")},i(ae){T||(S(r),S(U),S(G),S(fe.$$.fragment,ae),T=!0)},o(ae){x(r),x(U),x(G),x(fe.$$.fragment,ae),T=!1},d(ae){ae&&_(e),W[o].d(),se&&se.d(),U&&U.d(),ce[M].d(),Q(fe),ne=!1,Dt(le)}}}function Bt(l){let e,n,t,a,o,r;n=new Vt({props:{src:l[34].media.at(0),post:l[34],fetchpriority:l[36]<=8?"high":"low",isThumbnail:!0,useThumbnailInVideo:Ye,imgSize:500}});function s(){return l[22](l[34])}function i(...u){return l[23](l[34],...u)}return{c(){e=v("div"),K(n.$$.fragment),t=R(),this.h()},l(u){e=C(u,"DIV",{class:!0,"aria-hidden":!0});var c=$(e);Y(n.$$.fragment,c),t=L(c),c.forEach(_),this.h()},h(){p(e,"class","aspect-square overflow-hidden relative rounded-xl"),p(e,"aria-hidden",""),Je(e,"hidden",l[6].some(i))},m(u,c){ee(u,e,c),X(n,e,null),m(e,t),a=!0,o||(r=ve(e,"click",s),o=!0)},p(u,c){l=u;const h={};c[0]&32&&(h.src=l[34].media.at(0)),c[0]&32&&(h.post=l[34]),n.$set(h),(!a||c[0]&96)&&Je(e,"hidden",l[6].some(i))},i(u){a||(S(n.$$.fragment,u),a=!0)},o(u){x(n.$$.fragment,u),a=!1},d(u){u&&_(e),Q(n),o=!1,r()}}}function Un(l){let e,n;return e=new Gt({props:{zindex:l[1]}}),{c(){K(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){X(e,t,a),n=!0},p(t,a){const o={};a[0]&2&&(o.zindex=t[1]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Hn(l){let e,n;return e=new Tn({}),{c(){K(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){X(e,t,a),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function qn(l){let e,n,t,a,o,r,s,i,u,c,h,g,w,f,D,F,I,E,y,A,N,j,P,b,z,M,G="장소 담기",te,re,oe,de,Ie,ue,fe=`${l[3]??0}px`,B,T,ne,le,_e,W,ye,se;document.title=e=`블루닷 - ${l[4].name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`;let U=Ee&&Pn();f=new St({props:{position:"static",backgroundColor:"bg-black",useTopPaddingTop:!Ee,leftBack:Ee?"":"white",$$slots:{right:[Nn],default:[Vn]},$$scope:{ctx:l}}});function tt(d){l[18](d)}let Le={placeIdx:l[4].placeIdx,placeName:l[4].name,$$slots:{default:[jn]},$$scope:{ctx:l}};l[0]!==void 0&&(Le.isOpenEmbedSeet=l[0]),A=new En({props:Le}),je.push(()=>Me(A,"isOpenEmbedSeet",tt)),b=new dt({props:{width:"14",height:"14"}});let ce=Ve(l[6]),H=[];for(let d=0;d<ce.length;d+=1)H[d]=yt($t(l,ce,d));const nt=d=>x(H[d],1,1,()=>{H[d]=null});let $e=Ve(l[5]),q=[];for(let d=0;d<$e.length;d+=1)q[d]=Bt(wt(l,$e,d));const ae=d=>x(q[d],1,1,()=>{q[d]=null});ue=new Kt({});let V=!Ee&&Un(l),ie=!Ee&&Hn();function ke(d){l[24](d)}let Be={};return l[7]!==void 0&&(Be.isOpen=l[7]),le=new pn({props:Be}),je.push(()=>Me(le,"isOpen",ke)),{c(){n=v("meta"),a=v("meta"),r=v("meta"),i=v("meta"),c=R(),h=v("div"),g=v("div"),U&&U.c(),w=R(),K(f.$$.fragment),F=R(),I=v("div"),E=v("section"),y=v("button"),K(A.$$.fragment),j=R(),P=v("button"),K(b.$$.fragment),z=R(),M=v("p"),M.textContent=G,te=R();for(let d=0;d<H.length;d+=1)H[d].c();re=R(),oe=v("section"),de=v("div");for(let d=0;d<q.length;d+=1)q[d].c();Ie=R(),K(ue.$$.fragment),B=R(),V&&V.c(),T=R(),ie&&ie.c(),ne=R(),K(le.$$.fragment),this.h()},l(d){const k=Ut("svelte-urgghn",document.head);n=C(k,"META",{property:!0,content:!0}),a=C(k,"META",{property:!0,content:!0}),r=C(k,"META",{property:!0,content:!0}),i=C(k,"META",{property:!0,content:!0}),k.forEach(_),c=L(d),h=C(d,"DIV",{class:!0});var Z=$(h);g=C(Z,"DIV",{class:!0});var pe=$(g);U&&U.l(pe),w=L(pe),Y(f.$$.fragment,pe),pe.forEach(_),F=L(Z),I=C(Z,"DIV",{class:!0});var me=$(I);E=C(me,"SECTION",{class:!0});var O=$(E);y=C(O,"BUTTON",{class:!0});var Ce=$(y);Y(A.$$.fragment,Ce),Ce.forEach(_),j=L(O),P=C(O,"BUTTON",{class:!0});var xe=$(P);Y(b.$$.fragment,xe),z=L(xe),M=C(xe,"P",{class:!0,"data-svelte-h":!0}),Ze(M)!=="svelte-1k5moer"&&(M.textContent=G),xe.forEach(_),O.forEach(_),te=L(me);for(let Ae=0;Ae<H.length;Ae+=1)H[Ae].l(me);re=L(me),oe=C(me,"SECTION",{class:!0});var Ue=$(oe);de=C(Ue,"DIV",{class:!0});var mt=$(de);for(let Ae=0;Ae<q.length;Ae+=1)q[Ae].l(mt);mt.forEach(_),Ue.forEach(_),me.forEach(_),Ie=L(Z),Y(ue.$$.fragment,Z),Z.forEach(_),B=L(d),V&&V.l(d),T=L(d),ie&&ie.l(d),ne=L(d),Y(le.$$.fragment,d),this.h()},h(){p(n,"property","og:title"),p(n,"content",t=`블루닷${l[4].name?` - ${l[4].name}`:""}`),p(a,"property","og:description"),p(a,"content",o=l[4].categories&&l[4].categories.length>0?`${l[4].categories.join(" | ")}`:"사람과 장소 그리고 순간을 의미 있게 만들다"),p(r,"property","og:image"),p(r,"content",s=l[8]??pt),p(i,"property","og:image:alt"),p(i,"content",u=l[4].name),p(g,"class","fixed top-0 left-0 z-20"),Ht(()=>l[16].call(g)),p(y,"class","flex-1 w-full h-8 rounded-[50px] bg-[#0C79FE]"),p(M,"class","font-medium text-sm leading-[17px] text-[#0C79FE]"),p(P,"class","flex-1 w-full h-8 rounded-[50px] border border-[#0C79FE] flex justify-center gap-1.5 items-center"),p(E,"class","flex gap-1.5 py-3 w-full bg-inherit z-10"),p(de,"class","grid grid-cols-2 gap-[3px]"),p(oe,"class","py-3"),p(I,"class","px-5"),p(h,"class","bg-black min-h-dvh"),We(h,"padding-top",fe)},m(d,k){m(document.head,n),m(document.head,a),m(document.head,r),m(document.head,i),ee(d,c,k),ee(d,h,k),m(h,g),U&&U.m(g,null),m(g,w),X(f,g,null),D=qt(g,l[16].bind(g)),m(h,F),m(h,I),m(I,E),m(E,y),X(A,y,null),m(E,j),m(E,P),X(b,P,null),m(P,z),m(P,M),m(I,te);for(let Z=0;Z<H.length;Z+=1)H[Z]&&H[Z].m(I,null);m(I,re),m(I,oe),m(oe,de);for(let Z=0;Z<q.length;Z+=1)q[Z]&&q[Z].m(de,null);m(h,Ie),X(ue,h,null),ee(d,B,k),V&&V.m(d,k),ee(d,T,k),ie&&ie.m(d,k),ee(d,ne,k),X(le,d,k),W=!0,ye||(se=ve(P,"click",l[19]),ye=!0)},p(d,k){(!W||k[0]&16)&&e!==(e=`블루닷 - ${d[4].name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`)&&(document.title=e),(!W||k[0]&16&&t!==(t=`블루닷${d[4].name?` - ${d[4].name}`:""}`))&&p(n,"content",t),(!W||k[0]&16&&o!==(o=d[4].categories&&d[4].categories.length>0?`${d[4].categories.join(" | ")}`:"사람과 장소 그리고 순간을 의미 있게 만들다"))&&p(a,"content",o),(!W||k[0]&256&&s!==(s=d[8]??pt))&&p(r,"content",s),(!W||k[0]&16&&u!==(u=d[4].name))&&p(i,"content",u);const Z={};k[0]&528|k[1]&256&&(Z.$$scope={dirty:k,ctx:d}),f.$set(Z);const pe={};if(k[0]&16&&(pe.placeIdx=d[4].placeIdx),k[0]&16&&(pe.placeName=d[4].name),k[0]&128|k[1]&256&&(pe.$$scope={dirty:k,ctx:d}),!N&&k[0]&1&&(N=!0,pe.isOpenEmbedSeet=d[0],ze(()=>N=!1)),A.$set(pe),k[0]&31972){ce=Ve(d[6]);let O;for(O=0;O<ce.length;O+=1){const Ce=$t(d,ce,O);H[O]?(H[O].p(Ce,k),S(H[O],1)):(H[O]=yt(Ce),H[O].c(),S(H[O],1),H[O].m(I,re))}for(De(),O=ce.length;O<H.length;O+=1)nt(O);Se()}if(k[0]&1136){$e=Ve(d[5]);let O;for(O=0;O<$e.length;O+=1){const Ce=wt(d,$e,O);q[O]?(q[O].p(Ce,k),S(q[O],1)):(q[O]=Bt(Ce),q[O].c(),S(q[O],1),q[O].m(de,null))}for(De(),O=$e.length;O<q.length;O+=1)ae(O);Se()}k[0]&8&&fe!==(fe=`${d[3]??0}px`)&&We(h,"padding-top",fe),Ee||V.p(d,k);const me={};!_e&&k[0]&128&&(_e=!0,me.isOpen=d[7],ze(()=>_e=!1)),le.$set(me)},i(d){if(!W){S(U),S(f.$$.fragment,d),S(A.$$.fragment,d),S(b.$$.fragment,d);for(let k=0;k<ce.length;k+=1)S(H[k]);for(let k=0;k<$e.length;k+=1)S(q[k]);S(ue.$$.fragment,d),S(V),S(ie),S(le.$$.fragment,d),W=!0}},o(d){x(U),x(f.$$.fragment,d),x(A.$$.fragment,d),x(b.$$.fragment,d),H=H.filter(Boolean);for(let k=0;k<H.length;k+=1)x(H[k]);q=q.filter(Boolean);for(let k=0;k<q.length;k+=1)x(q[k]);x(ue.$$.fragment,d),x(V),x(ie),x(le.$$.fragment,d),W=!1},d(d){d&&(_(c),_(h),_(B),_(T),_(ne)),_(n),_(a),_(r),_(i),U&&U.d(),Q(f),D(),Q(A),Q(b),ot(H,d),ot(q,d),Q(ue),V&&V.d(d),ie&&ie.d(d),Q(le,d),ye=!1,se()}}}function Zn(l,e,n){let t,a;Ne(l,xt,B=>n(9,t=B)),Ne(l,lt,B=>n(10,a=B));const o={name:"",latitude:0,longitude:0,categories:[],options:[]};let r="z-50";Fe.subscribe(B=>n(1,r=B?"z-0":"z-50"));let s=!1;const i=new Intl.DateTimeFormat("ko-KR",{dateStyle:"short",timeStyle:"short",hour12:!1});let u=0,c=!1,h=!1,g=o,w=[],f=[],D=!1,F=!1,I;Zt(async()=>{await E(),Fe.set(D),ut({onshare:""},{replace:!0}),A()});async function E(){const B=new URL(t.url.toString()),T=t.params;D=B.searchParams.get("onshare")==="1"&&Ge();const ne=B.searchParams.get("boxIdx"),le=await fetch(`${it}/places/${T.idx}${ne?`?boxIdx=${ne}`:""}`,{headers:{Authorization:`Bearer ${Te()}`}});if(!le.ok)return;const _e=await le.json();if(n(4,g=_e.data.place),[...g.categories,...g.options],n(5,w=_e.data.posts),ne){const W=w.find(ye=>ye.is_card);W&&n(6,f=[W])}y()}async function y(){const B=f[0]??w[0];if(!B)return n(8,I=void 0);let T=B.media[0];if(T){const ne=Re(T);if(ne.includes("youtu"))n(8,I=ne);else{const le=await hn(ne);n(8,I=le?Re(T+"-thumbnail"):ne)}}else n(8,I=void 0)}async function A(){if(!(f!=null&&f.length))return;const B=Te();n(6,f=await Promise.all(f.map(async T=>{var W;const le=await(await fetch(`${it}/vote/reactions?targetTable=posts&targetId=${T.idx}`,{method:"GET",headers:{Authorization:"Bearer "+B}})).json(),_e=Number((W=le.data.reactions[0])==null?void 0:W.count);return T.reactionCount=Number.isNaN(_e)?0:_e,T.myReaction=le.data.myReaction,T})))}function N(B){return i.format(new Date(B))}function j(B){return B.length<=85||s?B:`${B.slice(0,85)}...`}function P(){n(2,s=!s)}function b(B){if(!(f!=null&&f.length)||h)return;h=!0;const T=f.findIndex(ne=>ne.idx===B);if(T===-1)return h=!1;if(!Ge())return n(6,f[T].needReactionReload=!0,f),h=!1,J.emit("showSignInModal",{removable:!0,callback:Ye?()=>{A()}:void 0});f[T].myReaction?f[T].myReaction==="❤️"?J.emit("setReaction",{target:"posts",targetId:B,reaction:null,callback:()=>{n(6,f[T].myReaction=null,f),n(6,f[T].reactionCount=f[T].reactionCount>0?f[T].reactionCount-1:0,f),h=!1}}):J.emit("setReaction",{target:"posts",targetId:B,reaction:"❤️",callback:()=>{n(6,f[T].myReaction="❤️",f),h=!1}}):J.emit("setReaction",{target:"posts",targetId:B,reaction:"❤️",callback:()=>{n(6,f[T].myReaction="❤️",f),n(6,f[T].reactionCount+=1,f),h=!1}})}const z=()=>{qe(`/places/${t.params.idx}/map`,{location:Jt([Number(g.longitude),Number(g.latitude)]).join(),placeIdx:g.placeIdx,placeName:g.name})};function M(){u=this.clientHeight,n(3,u)}const G=async()=>{if(Ee)return n(7,F=!0);await Te()||J.emit("showSignInModal",{removable:!0})};function te(B){c=B,n(0,c)}const re=()=>{if(Ee)return n(7,F=!0);Ge()?Fe.set(!0):(Ye||Wt({onshare:"1"}),J.emit("showSignInModal",{removable:!0,callback:()=>{Fe.set(!0)}}))},oe=async B=>{Oe(lt,a=w,a),await ht(`/viewer?placeIdx=${B.place_idx}&postIdx=${B.idx}`)},de=B=>{if(Ee)return n(7,F=!0);b(B.idx)},Ie=async B=>{B!=null&&B.media&&(Oe(lt,a=w,a),await ht(`/viewer?placeIdx=${g.placeIdx}&postIdx=${B.idx}`,{replaceState:!1,invalidateAll:!1}))},ue=(B,T)=>T.idx===B.idx;function fe(B){F=B,n(7,F)}return l.$$.update=()=>{l.$$.dirty[0]&1&&n(1,r=c?"z-0":"z-50")},[c,r,s,u,g,w,f,F,I,t,a,N,j,P,b,z,M,G,te,re,oe,de,Ie,ue,fe]}class Bl extends Qe{constructor(e){super(),et(this,e,Zn,qn,Xe,{},null,[-1,-1])}}export{Bl as component,yl as universal};
