import{e as Ze}from"../chunks/index.CTAXnm9R.js";import{a as je,b as Lt,g as st}from"../chunks/sign.D-HOBb5V.js";import{I as Y,d as kt,A as Ve,s as tt}from"../chunks/store.D8rYgsha.js";import{g as ue}from"../chunks/entry.B-O-GRQm.js";import{s as lt,q as Ne,r as Te,b as v,f as m,v as u,i as y,h as f,n as ee,w as rt,e as p,a as $,t as ce,c as _,g as A,d as fe,z as $e,A as L,j as Ee,x as wt,L as Ct,F as nt,k as xt,y as Rt,B as Ht,D as It,Q as Zt,C as Et,P as $t,l as At}from"../chunks/scheduler.DAfLlBmd.js";import{g as Jt}from"../chunks/boxRequest.DUXcHQlG.js";import{S as Ft,i as Mt,b as St,c as M,d as q,m as z,a as T,e as Dt,t as O,f as U,g as Ot}from"../chunks/index.CPgTt4Co.js";import{e as Je}from"../chunks/each.D2XP5b8G.js";import{p as Gt}from"../chunks/stores.B3RMkvZp.js";import{H as Kt}from"../chunks/Header.yhfzDooK.js";import{C as Qt}from"../chunks/CircleImage.CeixdqIC.js";import{e as Pe}from"../chunks/emitter.E5P-NQ8u.js";import"../chunks/ImageShaper.DEAJmI5j.js";import{N as Wt}from"../chunks/NavigationBar.O9s8mYWp.js";import{s as Ge}from"../chunks/s32cloudfront.BJZlXW17.js";import{B as Xt}from"../chunks/BottomNavigationPadder.Dgfe-igV.js";import{g as Yt,i as es,u as ts,f as ss}from"../chunks/follow.DWtMNlYh.js";/* empty css                                                   */import{w as rs,I as ls}from"../chunks/utils.WuhppIyb.js";import{I as ns}from"../chunks/IconMore.YZMthXy7.js";import{A as os}from"../chunks/ActionSheet.CFjQlTo9.js";import{I as as}from"../chunks/IconSearch.tyl1RP-f.js";import{F as is}from"../chunks/Figure.CyoR5ygB.js";import{g as yt}from"../chunks/color.C_Jm4JAr.js";import{r as us}from"../chunks/units.BJZU6p1c.js";import{i as cs}from"../chunks/device.Bw-85Nqb.js";import{u as fs}from"../chunks/searchParams.CJMptUHq.js";import{A as ms}from"../chunks/ActionSheetOpenApp.DX0cwfQM.js";function ds(r){let e,s,t,l,n,o;return{c(){e=Ne("svg"),s=Ne("path"),t=Ne("path"),l=Ne("path"),n=Ne("path"),this.h()},l(i){e=Te(i,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var c=v(e);s=Te(c,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),v(s).forEach(m),t=Te(c,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),v(t).forEach(m),l=Te(c,"path",{d:!0,fill:!0}),v(l).forEach(m),n=Te(c,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linejoin":!0}),v(n).forEach(m),c.forEach(m),this.h()},h(){u(s,"d","M2 22V21C2 18.79 3.79 17 6 17H10C12.21 17 14 18.79 14 21V22"),u(s,"stroke",r[1]),u(s,"stroke-width","1.5"),u(s,"stroke-linecap","round"),u(s,"stroke-linejoin","round"),u(t,"d","M8 14C6.34 14 5 12.66 5 11C5 9.34 6.34 8 8 8C9.66 8 11 9.34 11 11C11 12.66 9.66 14 8 14Z"),u(t,"stroke",r[1]),u(t,"stroke-width","1.5"),u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(l,"d","M18.5018 6.68182C18.3812 6.68182 18.2656 6.63393 18.1804 6.54868C18.0951 6.46344 18.0472 6.34783 18.0472 6.22727L18.0472 3.95455C18.0472 3.83399 18.0951 3.71838 18.1804 3.63313C18.2656 3.54789 18.3812 3.5 18.5018 3.5C18.6223 3.5 18.7379 3.54789 18.8232 3.63313C18.9084 3.71838 18.9563 3.83399 18.9563 3.95455L18.9563 6.22727C18.9563 6.34783 18.9084 6.46344 18.8232 6.54868C18.7379 6.63393 18.6223 6.68182 18.5018 6.68182ZM17.82 7.81818C17.82 7.63735 17.8918 7.46393 18.0197 7.33606C18.1475 7.2082 18.3209 7.13636 18.5018 7.13636C18.6826 7.13636 18.856 7.2082 18.9839 7.33606C19.1118 7.46393 19.1836 7.63735 19.1836 7.81818C19.1836 7.99901 19.1118 8.17243 18.9839 8.3003C18.856 8.42817 18.6826 8.5 18.5018 8.5C18.3209 8.5 18.1475 8.42817 18.0197 8.3003C17.8918 8.17243 17.82 7.99901 17.82 7.81818Z"),u(l,"fill",r[0]),u(n,"d","M19.8856 2.2C19.2698 1.13333 17.7302 1.13333 17.1144 2.2L14.0833 7.45C13.4674 8.51667 14.2372 9.85 15.4689 9.85H21.5311C22.7628 9.85 23.5326 8.51667 22.9167 7.45L19.8856 2.2Z"),u(n,"stroke",r[1]),u(n,"stroke-width","1.2"),u(n,"stroke-linejoin","round"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"width",r[2]),u(e,"height",r[2]),u(e,"viewBox",o="0 0 "+r[2]+" "+r[2]),u(e,"fill","none")},m(i,c){y(i,e,c),f(e,s),f(e,t),f(e,l),f(e,n)},p(i,[c]){c&2&&u(s,"stroke",i[1]),c&2&&u(t,"stroke",i[1]),c&1&&u(l,"fill",i[0]),c&2&&u(n,"stroke",i[1]),c&4&&u(e,"width",i[2]),c&4&&u(e,"height",i[2]),c&4&&o!==(o="0 0 "+i[2]+" "+i[2])&&u(e,"viewBox",o)},i:ee,o:ee,d(i){i&&m(e)}}}function hs(r,e,s){let t,{fill:l="#FF4F1E"}=e,{stroke:n="#FF4F1E"}=e,{length:o="1.5"}=e;return r.$$set=i=>{"fill"in i&&s(0,l=i.fill),"stroke"in i&&s(1,n=i.stroke),"length"in i&&s(3,o=i.length)},r.$$.update=()=>{r.$$.dirty&8&&s(2,t=us(o))},[l,n,t,o]}class ps extends Ft{constructor(e){super(),Mt(this,e,hs,ds,lt,{fill:0,stroke:1,length:3})}}function Bt(r,e,s){const t=r.slice();return t[34]=e[s],t[36]=s,t}function Nt(r,e,s){const t=r.slice();return t[37]=e[s],t[36]=s,t}function _s(r){let e,s,t,l,n,o,i,c,g;return t=new as({props:{width:"24",height:"24"}}),o=new ns({}),{c(){e=p("div"),s=p("button"),M(t.$$.fragment),l=$(),n=p("button"),M(o.$$.fragment),this.h()},l(b){e=_(b,"DIV",{class:!0});var x=v(e);s=_(x,"BUTTON",{});var w=v(s);q(t.$$.fragment,w),w.forEach(m),l=A(x),n=_(x,"BUTTON",{});var k=v(n);q(o.$$.fragment,k),k.forEach(m),x.forEach(m),this.h()},h(){u(e,"class","flex items-center gap-2")},m(b,x){y(b,e,x),f(e,s),z(t,s,null),f(e,l),f(e,n),z(o,n,null),i=!0,c||(g=[L(s,"click",r[16]),L(n,"click",r[17])],c=!0)},p:ee,i(b){i||(O(t.$$.fragment,b),O(o.$$.fragment,b),i=!0)},o(b){T(t.$$.fragment,b),T(o.$$.fragment,b),i=!1},d(b){b&&m(e),U(t),U(o),c=!1,nt(g)}}}function gs(r){let e,s,t=!Y&&_s(r);return{c(){t&&t.c(),e=It()},l(l){t&&t.l(l),e=It()},m(l,n){t&&t.m(l,n),y(l,e,n),s=!0},p(l,n){Y||t.p(l,n)},i(l){s||(O(t),s=!0)},o(l){T(t),s=!1},d(l){l&&m(e),t&&t.d(l)}}}function bs(r){var n;let e,s,t=(((n=r[0].unique_name)==null?void 0:n.at(0))??"u")+"",l;return{c(){e=p("div"),s=p("span"),l=ce(t),this.h()},l(o){e=_(o,"DIV",{class:!0,style:!0});var i=v(e);s=_(i,"SPAN",{class:!0});var c=v(s);l=fe(c,t),c.forEach(m),i.forEach(m),this.h()},h(){u(s,"class","text-2xl font-semibold text-black"),u(e,"class","w-full h-full flex items-center justify-center"),Et(e,"background-color",yt(r[0].unique_name))},m(o,i){y(o,e,i),f(e,s),f(s,l)},p(o,i){var c;i[0]&1&&t!==(t=(((c=o[0].unique_name)==null?void 0:c.at(0))??"u")+"")&&Ee(l,t),i[0]&1&&Et(e,"background-color",yt(o[0].unique_name))},i:ee,o:ee,d(o){o&&m(e)}}}function vs(r){let e,s;return e=new Qt({props:{src:Ge(r[0].profile_image_url,500),width:"4.375rem",strokeWidth:"0"}}),{c(){M(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},p(t,l){const n={};l[0]&1&&(n.src=Ge(t[0].profile_image_url,500)),e.$set(n)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){T(e.$$.fragment,t),s=!1},d(t){U(e,t)}}}function ks(r){let e;function s(n,o){return n[7]==!0?xs:Cs}let t=s(r),l=t(r);return{c(){e=p("div"),l.c()},l(n){e=_(n,"DIV",{});var o=v(e);l.l(o),o.forEach(m)},m(n,o){y(n,e,o),l.m(e,null)},p(n,o){t===(t=s(n))&&l?l.p(n,o):(l.d(1),l=t(n),l&&(l.c(),l.m(e,null)))},d(n){n&&m(e),l.d()}}}function ws(r){let e,s,t="프로필 편집",l,n;return{c(){e=p("div"),s=p("button"),s.textContent=t,this.h()},l(o){e=_(o,"DIV",{});var i=v(e);s=_(i,"BUTTON",{class:!0,"data-svelte-h":!0}),$e(s)!=="svelte-19n2ifp"&&(s.textContent=t),i.forEach(m),this.h()},h(){u(s,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(o,i){y(o,e,i),f(e,s),l||(n=L(s,"click",r[20]),l=!0)},p:ee,d(o){o&&m(e),l=!1,n()}}}function Cs(r){let e,s,t="팔로우",l,n;return{c(){e=p("button"),s=p("div"),s.textContent=t,this.h()},l(o){e=_(o,"BUTTON",{class:!0});var i=v(e);s=_(i,"DIV",{"data-svelte-h":!0}),$e(s)!=="svelte-1sbe5nn"&&(s.textContent=t),i.forEach(m),this.h()},h(){u(e,"class","w-full bg-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-white p-2.5 ")},m(o,i){y(o,e,i),f(e,s),l||(n=L(s,"click",r[22]),l=!0)},p:ee,d(o){o&&m(e),l=!1,n()}}}function xs(r){let e,s="팔로잉",t,l;return{c(){e=p("button"),e.textContent=s,this.h()},l(n){e=_(n,"BUTTON",{class:!0,"data-svelte-h":!0}),$e(e)!=="svelte-18fzixz"&&(e.textContent=s),this.h()},h(){u(e,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(n,o){y(n,e,o),t||(l=L(e,"click",r[21]),t=!0)},p:ee,d(n){n&&m(e),t=!1,l()}}}function Tt(r){let e,s,t;return{c(){e=p("img"),this.h()},l(l){e=_(l,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){u(e,"class","w-full h-full object-cover bg-[#D9D9D9] brightness-75"),$t(e.src,s=Ge(r[37].image,500))||u(e,"src",s),u(e,"alt",t=r[37].name)},m(l,n){y(l,e,n)},p(l,n){n[0]&8&&!$t(e.src,s=Ge(l[37].image,500))&&u(e,"src",s),n[0]&8&&t!==(t=l[37].name)&&u(e,"alt",t)},d(l){l&&m(e)}}}function Pt(r){let e,s,t,l=r[37].name+"",n,o,i=r[37].image,c,g,b,x=Tt(r);function w(){return r[23](r[37])}return{c(){e=p("div"),s=p("div"),t=p("span"),n=ce(l),o=$(),x.c(),c=$(),this.h()},l(k){e=_(k,"DIV",{class:!0});var I=v(e);s=_(I,"DIV",{class:!0});var S=v(s);t=_(S,"SPAN",{class:!0});var P=v(t);n=fe(P,l),P.forEach(m),o=A(S),x.l(S),S.forEach(m),c=A(I),I.forEach(m),this.h()},h(){u(t,"class","absolute inset-0 flex items-center justify-center z-10 text-xs text-center font-medium leading-[1.125rem] tracking-[-0.0375rem] "),u(s,"class","relative w-full h-full rounded-full overflow-hidden border-4 border-white/15 "),u(e,"class","w-[4.875rem] h-[4.875rem] flex-shrink-0")},m(k,I){y(k,e,I),f(e,s),f(s,t),f(t,n),f(s,o),x.m(s,null),f(e,c),g||(b=L(s,"click",w),g=!0)},p(k,I){r=k,I[0]&8&&l!==(l=r[37].name+"")&&Ee(n,l),I[0]&8&&lt(i,i=r[37].image)?(x.d(1),x=Tt(r),x.c(),x.m(s,null)):x.p(r,I)},d(k){k&&m(e),x.d(k),g=!1,b()}}}function jt(r){let e,s,t,l,n,o;s=new is({props:{src:r[34].media[0],post:r[34],isThumbnail:!0,loading:"lazy",useThumbnailInVideo:cs,fetchpriority:r[36]<=9?"high":"low",imgSize:500}});function i(){return r[24](r[34])}return{c(){e=p("div"),M(s.$$.fragment),t=$(),this.h()},l(c){e=_(c,"DIV",{class:!0});var g=v(e);q(s.$$.fragment,g),t=A(g),g.forEach(m),this.h()},h(){u(e,"class","aspect-square overflow-hidden relative")},m(c,g){y(c,e,g),z(s,e,null),f(e,t),l=!0,n||(o=L(e,"click",i),n=!0)},p(c,g){r=c;const b={};g[0]&4&&(b.src=r[34].media[0]),g[0]&4&&(b.post=r[34]),s.$set(b)},i(c){l||(O(s.$$.fragment,c),l=!0)},o(c){T(s.$$.fragment,c),l=!1},d(c){c&&m(e),U(s),n=!1,o()}}}function Is(r){let e,s;return e=new Wt({}),{c(){M(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){T(e.$$.fragment,t),s=!1},d(t){U(e,t)}}}function Es(r){let e,s,t,l,n,o,i,c,g,b,x;return t=new ls({props:{length:1.5,fill:"white"}}),i=new ps({}),{c(){e=p("div"),s=p("button"),M(t.$$.fragment),l=ce(`
      링크 복사`),n=$(),o=p("button"),M(i.$$.fragment),c=ce(`
      계정 신고하기`),this.h()},l(w){e=_(w,"DIV",{class:!0});var k=v(e);s=_(k,"BUTTON",{class:!0});var I=v(s);q(t.$$.fragment,I),l=fe(I,`
      링크 복사`),I.forEach(m),n=A(k),o=_(k,"BUTTON",{class:!0});var S=v(o);q(i.$$.fragment,S),c=fe(S,`
      계정 신고하기`),S.forEach(m),k.forEach(m),this.h()},h(){u(s,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),u(o,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),u(e,"class","px-5")},m(w,k){y(w,e,k),f(e,s),z(t,s,null),f(s,l),f(e,n),f(e,o),z(i,o,null),f(o,c),g=!0,b||(x=[L(s,"click",r[26]),L(o,"click",r[13])],b=!0)},p:ee,i(w){g||(O(t.$$.fragment,w),O(i.$$.fragment,w),g=!0)},o(w){T(t.$$.fragment,w),T(i.$$.fragment,w),g=!1},d(w){w&&m(e),U(t),U(i),b=!1,nt(x)}}}function $s(r){let e,s,t,l,n,o,i,c,g,b,x,w,k,I,S=r[2].length+"",P,te,R,J="포스트",Ae,j,H,ge,Se,G,Fe="팔로워",De,V,se,be,Oe,K,Me="팔로잉",ye,re,le,h=r[0].unique_name+"",D,ve,ne,ke,we,me,Ke,de,Qe,Be,We,he,qe,ze,Q,Xe,Ue,W,Ye,oe,et,ot;l=new Kt({props:{position:Y?"sticky":"static",leftLogo:Y,leftBack:Y?"":"white",backgroundColor:"bg-black",$$slots:{right:[gs]},$$scope:{ctx:r}}});const at=[vs,bs],ae=[];function it(a,d){return a[0].profile_image_url?0:1}g=it(r),b=ae[g]=at[g](r);function ut(a,d){return a[6]?ws:ks}let Le=ut(r),F=Le(r),Ce=Je(r[3]),B=[];for(let a=0;a<Ce.length;a+=1)B[a]=Pt(Nt(r,Ce,a));let pe=Je(r[2]),E=[];for(let a=0;a<pe.length;a+=1)E[a]=jt(Bt(r,pe,a));const qt=a=>T(E[a],1,1,()=>{E[a]=null});he=new Xt({});let Z=!Y&&Is();function zt(a){r[27](a)}let ct={fixed:!0,noHandle:!0,$$slots:{default:[Es]},$$scope:{ctx:r}};r[9]!==void 0&&(ct.isOpen=r[9]),Q=new os({props:ct}),rt.push(()=>St(Q,"isOpen",zt));function Ut(a){r[28](a)}let ft={};return r[11]!==void 0&&(ft.isOpen=r[11]),W=new ms({props:ft}),rt.push(()=>St(W,"isOpen",Ut)),{c(){e=p("div"),s=$(),t=p("div"),M(l.$$.fragment),n=$(),o=p("section"),i=p("div"),c=p("div"),b.c(),x=$(),w=p("div"),k=p("div"),I=p("span"),P=ce(S),te=$(),R=p("span"),R.textContent=J,Ae=$(),j=p("div"),H=p("span"),ge=ce(r[4]),Se=$(),G=p("span"),G.textContent=Fe,De=$(),V=p("div"),se=p("span"),be=ce(r[5]),Oe=$(),K=p("span"),K.textContent=Me,ye=$(),re=p("section"),le=p("span"),D=ce(h),ve=$(),ne=p("section"),F.c(),ke=$(),we=p("section"),me=p("div");for(let a=0;a<B.length;a+=1)B[a].c();Ke=$(),de=p("div");for(let a=0;a<E.length;a+=1)E[a].c();Qe=$(),Be=p("div"),We=$(),M(he.$$.fragment),qe=$(),Z&&Z.c(),ze=$(),M(Q.$$.fragment),Ue=$(),M(W.$$.fragment),this.h()},l(a){e=_(a,"DIV",{class:!0}),v(e).forEach(m),s=A(a),t=_(a,"DIV",{class:!0});var d=v(t);q(l.$$.fragment,d),n=A(d),o=_(d,"SECTION",{class:!0});var N=v(o);i=_(N,"DIV",{class:!0});var xe=v(i);c=_(xe,"DIV",{class:!0});var Ie=v(c);b.l(Ie),Ie.forEach(m),xe.forEach(m),x=A(N),w=_(N,"DIV",{class:!0});var X=v(w);k=_(X,"DIV",{class:!0});var C=v(k);I=_(C,"SPAN",{class:!0});var ie=v(I);P=fe(ie,S),ie.forEach(m),te=A(C),R=_(C,"SPAN",{class:!0,"data-svelte-h":!0}),$e(R)!=="svelte-13hqbuq"&&(R.textContent=J),C.forEach(m),Ae=A(X),j=_(X,"DIV",{class:!0});var Re=v(j);H=_(Re,"SPAN",{class:!0});var mt=v(H);ge=fe(mt,r[4]),mt.forEach(m),Se=A(Re),G=_(Re,"SPAN",{class:!0,"data-svelte-h":!0}),$e(G)!=="svelte-1nb7yum"&&(G.textContent=Fe),Re.forEach(m),De=A(X),V=_(X,"DIV",{class:!0});var He=v(V);se=_(He,"SPAN",{class:!0});var dt=v(se);be=fe(dt,r[5]),dt.forEach(m),Oe=A(He),K=_(He,"SPAN",{class:!0,"data-svelte-h":!0}),$e(K)!=="svelte-ugas5h"&&(K.textContent=Me),He.forEach(m),X.forEach(m),N.forEach(m),ye=A(d),re=_(d,"SECTION",{class:!0});var ht=v(re);le=_(ht,"SPAN",{class:!0});var pt=v(le);D=fe(pt,h),pt.forEach(m),ht.forEach(m),ve=A(d),ne=_(d,"SECTION",{class:!0});var _t=v(ne);F.l(_t),_t.forEach(m),ke=A(d),we=_(d,"SECTION",{class:!0});var gt=v(we);me=_(gt,"DIV",{class:!0});var bt=v(me);for(let _e=0;_e<B.length;_e+=1)B[_e].l(bt);bt.forEach(m),gt.forEach(m),Ke=A(d),de=_(d,"DIV",{class:!0});var vt=v(de);for(let _e=0;_e<E.length;_e+=1)E[_e].l(vt);vt.forEach(m),Qe=A(d),Be=_(d,"DIV",{}),v(Be).forEach(m),We=A(d),q(he.$$.fragment,d),d.forEach(m),qe=A(a),Z&&Z.l(a),ze=A(a),q(Q.$$.fragment,a),Ue=A(a),q(W.$$.fragment,a),this.h()},h(){u(e,"class","fixed w-full h-full bg-black -z-10"),u(c,"class","w-[4.375rem] h-[4.375rem] rounded-full overflow-hidden"),u(i,"class","flex flex-col gap-2 items-center"),u(I,"class","text-[0.8125rem] font-semibold"),u(R,"class","text-xs"),u(k,"class","flex flex-col items-center"),u(H,"class","text-[0.8125rem] font-semibold"),u(G,"class","text-xs"),u(j,"class","flex flex-col items-center"),u(se,"class","text-[0.8125rem] font-semibold"),u(K,"class","text-xs"),u(V,"class","flex flex-col items-center"),u(w,"class","flex gap-8 justify-start"),u(o,"class","flex px-5 pt-3.5 gap-6 items-center"),u(le,"class","text-sm font-medium"),u(re,"class","mt-[1.125rem] px-5"),u(ne,"class","px-5 pt-[0.88rem]"),u(me,"class","flex overflow-x-auto space-x-5 px-5 pb-[1.5rem]"),u(we,"class","mt-[1.69rem]"),u(de,"class","grid grid-cols-3 gap-[0.19rem]"),u(t,"class","w-full h-full text-white")},m(a,d){y(a,e,d),y(a,s,d),y(a,t,d),z(l,t,null),f(t,n),f(t,o),f(o,i),f(i,c),ae[g].m(c,null),f(o,x),f(o,w),f(w,k),f(k,I),f(I,P),f(k,te),f(k,R),f(w,Ae),f(w,j),f(j,H),f(H,ge),f(j,Se),f(j,G),f(w,De),f(w,V),f(V,se),f(se,be),f(V,Oe),f(V,K),f(t,ye),f(t,re),f(re,le),f(le,D),f(t,ve),f(t,ne),F.m(ne,null),f(t,ke),f(t,we),f(we,me);for(let N=0;N<B.length;N+=1)B[N]&&B[N].m(me,null);f(t,Ke),f(t,de);for(let N=0;N<E.length;N+=1)E[N]&&E[N].m(de,null);f(t,Qe),f(t,Be),r[25](Be),f(t,We),z(he,t,null),y(a,qe,d),Z&&Z.m(a,d),y(a,ze,d),z(Q,a,d),y(a,Ue,d),z(W,a,d),oe=!0,et||(ot=[L(j,"click",r[18]),L(V,"click",r[19])],et=!0)},p(a,d){const N={};d[0]&578|d[1]&256&&(N.$$scope={dirty:d,ctx:a}),l.$set(N);let xe=g;if(g=it(a),g===xe?ae[g].p(a,d):(Ot(),T(ae[xe],1,1,()=>{ae[xe]=null}),Dt(),b=ae[g],b?b.p(a,d):(b=ae[g]=at[g](a),b.c()),O(b,1),b.m(c,null)),(!oe||d[0]&4)&&S!==(S=a[2].length+"")&&Ee(P,S),(!oe||d[0]&16)&&Ee(ge,a[4]),(!oe||d[0]&32)&&Ee(be,a[5]),(!oe||d[0]&1)&&h!==(h=a[0].unique_name+"")&&Ee(D,h),Le===(Le=ut(a))&&F?F.p(a,d):(F.d(1),F=Le(a),F&&(F.c(),F.m(ne,null))),d[0]&8){Ce=Je(a[3]);let C;for(C=0;C<Ce.length;C+=1){const ie=Nt(a,Ce,C);B[C]?B[C].p(ie,d):(B[C]=Pt(ie),B[C].c(),B[C].m(me,null))}for(;C<B.length;C+=1)B[C].d(1);B.length=Ce.length}if(d[0]&4103){pe=Je(a[2]);let C;for(C=0;C<pe.length;C+=1){const ie=Bt(a,pe,C);E[C]?(E[C].p(ie,d),O(E[C],1)):(E[C]=jt(ie),E[C].c(),O(E[C],1),E[C].m(de,null))}for(Ot(),C=pe.length;C<E.length;C+=1)qt(C);Dt()}const Ie={};d[0]&514|d[1]&256&&(Ie.$$scope={dirty:d,ctx:a}),!Xe&&d[0]&512&&(Xe=!0,Ie.isOpen=a[9],wt(()=>Xe=!1)),Q.$set(Ie);const X={};!Ye&&d[0]&2048&&(Ye=!0,X.isOpen=a[11],wt(()=>Ye=!1)),W.$set(X)},i(a){if(!oe){O(l.$$.fragment,a),O(b);for(let d=0;d<pe.length;d+=1)O(E[d]);O(he.$$.fragment,a),O(Z),O(Q.$$.fragment,a),O(W.$$.fragment,a),oe=!0}},o(a){T(l.$$.fragment,a),T(b),E=E.filter(Boolean);for(let d=0;d<E.length;d+=1)T(E[d]);T(he.$$.fragment,a),T(Z),T(Q.$$.fragment,a),T(W.$$.fragment,a),oe=!1},d(a){a&&(m(e),m(s),m(t),m(qe),m(ze),m(Ue)),U(l),ae[g].d(),F.d(),Ct(B,a),Ct(E,a),r[25](null),U(he),Z&&Z.d(a),U(Q,a),U(W,a),et=!1,nt(ot)}}}let Vt=24;function As(r,e,s){let t,l;xt(r,Gt,h=>s(1,t=h)),xt(r,kt,h=>s(12,l=h));let{data:n}=e,o=n.user??{},i=n.posts??[],c=n.boxes??[],g=0,b=0,x=!1,w=!1,k=je(),I=!1,S=!1,P,te,R=24,J=!1;async function Ae(){var h;if(o.idx)try{const D=st(),ve=await fetch(`${Ve}/posts?userIdx=${o.idx}&offset=${R}&limit=${Vt}`,{headers:{Authorization:`Bearer ${D}`}});if(!ve.ok)return;const ke=((h=(await ve.json()).data)==null?void 0:h.posts)??[];ke.length>0?(s(2,i=i.concat(ke)),R+=Vt):te.unobserve(P)}catch{}}Rt(()=>{te=new IntersectionObserver(h=>{h[0].isIntersecting&&Ae()},{rootMargin:"10%"}),te.observe(P)}),Ht(()=>te.unobserve(P));function j(){fetch(`${Ve}/auth/followers?targetTable=users&subjectTable=users&subjectIdx=${t.params.idx}`).then(h=>h.json()).then(h=>{s(5,b=h.data.length)})}let H=!1;async function ge(){if(window.confirm("계정을 신고하시겠어요?")&&!H){H=!0,Pe.emit("loading",!0);try{const D=new URL(`${Ve}/auth/permissions`);D.searchParams.set("targetTable","users"),D.searchParams.set("targetIdx",t.params.idx),D.searchParams.set("relation","reported"),D.searchParams.set("subjectTable","users"),D.searchParams.set("subjectIdx",Lt().sub),D.searchParams.set("metadata",JSON.stringify({text:"계정 신고",value:"account"})),s(9,S=!1),await fetch(D,{method:"PUT",headers:{Authorization:`Bearer ${st()}`}}),Pe.emit("pushSnackbar",{message:"신고가 접수되었습니다."})}catch(D){throw Pe.emit("pushSnackbar",{message:"신고에 실패했습니다."}),D}finally{H=!1,Pe.emit("loading",!1)}}}const Se=async()=>{await ue("/search")},G=()=>{x?ue(`/users/${t.params.idx}/setting`):s(9,S=!0)},Fe=async()=>{const h=`/users/${t.params.idx}/followers?tab=followers`;console.log(h),await ue(h)},De=async()=>{const h=`/users/${t.params.idx}/followers?tab=followings`;console.log(h),await ue(h)},V=async()=>{if(Y)return s(11,J=!0);await ue(`/users/${t.params.idx}/setting/profile`)},se=async()=>{if(Y)return s(11,J=!0);I||(s(8,I=!0),await ts({targetIdx:t.params.idx,subjectIdx:je()}),s(7,w=!1),s(4,g-=1),s(8,I=!1))},be=async()=>{if(Y)return s(11,J=!0);const h=je();if(!h){Pe.emit("showSignInModal");return}I||(s(8,I=!0),await ss({targetIdx:t.params.idx,subjectIdx:h}),s(7,w=!0),s(4,g+=1),s(8,I=!1))},Oe=h=>{ue(`/boxes/${h.idx}`)},K=async h=>{try{if((o==null?void 0:o.idx)===0)return;Zt(kt,l=i,l),await ue(`/viewer?userIdx=${t.params.idx}&postIdx=${h.idx}`,{replaceState:!1,invalidateAll:!1})}catch{}};function Me(h){rt[h?"unshift":"push"](()=>{P=h,s(10,P)})}const ye=()=>{rs(t.url),s(9,S=!1)};function re(h){S=h,s(9,S)}function le(h){J=h,s(11,J)}return r.$$set=h=>{"data"in h&&s(14,n=h.data)},r.$$.update=()=>{if(r.$$.dirty[0]&49155&&n.user&&t.params.idx&&t.params.idx!=="0"&&(s(0,o=n.user),s(2,i=n.posts),s(3,c=n.boxes),s(15,k=je()),s(6,x=String(o==null?void 0:o.idx)===String(k)),Yt({targetIdx:t.params.idx}).then(h=>{s(4,g=h)}),j(),k&&es({targetIdx:t.params.idx,subjectIdx:k}).then(h=>{s(7,w=h)})),r.$$.dirty[0]&16386&&!n.user&&t.params.idx==="0")try{fs({replace:"1"},{replace:!0})}catch{}},[o,t,i,c,g,b,x,w,I,S,P,J,l,ge,n,k,Se,G,Fe,De,V,se,be,Oe,K,Me,ye,re,le]}class rr extends Ft{constructor(e){super(),Mt(this,e,As,$s,lt,{data:14},null,[-1,-1])}}const Ss=async({params:r,fetch:e,depends:s,url:t})=>{var o;s("app:user");const l=je(),n=st();if(r.idx==="0"&&l===null)return{};if(r.idx==="0"&&l!==null)return ue(`/users/${String(l)}`,{replaceState:t.searchParams.get("replace")==="1"});if(r.idx!=="0")try{const[i,c]=await Promise.all([e(`${Ve}/auth/users/${r.idx}`,{headers:{Authorization:`Bearer ${n}`}}),e(`${Ve}/posts?userIdx=${r.idx}&limit=24`,{headers:{Authorization:`Bearer ${n}`}})]);if(!i.ok||!c.ok)throw Ze(500,"Failed to fetch data");const g=await i.json(),b=await c.json();let x=[];const w=String(l)===r.idx;if(w&&At(tt).length!==0)x=At(tt);else{const k=await Jt(n,r.idx);if(!k.ok)throw Ze(500,"Failed to fetch data");const I=await k.json();w&&tt.set(I.data),x=I.data}return{user:{...g.data,idx:Number(r.idx)},posts:((o=b.data)==null?void 0:o.posts)??[],boxes:x}}catch{throw Ze(500,"An error occurred while loading data")}throw Ze(404,"Not found")},lr=Object.freeze(Object.defineProperty({__proto__:null,load:Ss},Symbol.toStringTag,{value:"Module"}));export{rr as component,lr as universal};
