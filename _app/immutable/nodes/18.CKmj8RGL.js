import{s as E,d as D,n as y,r as L,o as U,e as G,b as F,f as P}from"../chunks/scheduler.CS_98Wiq.js";import{S as T,i as j,e as J,c as M,a as z,d as p,r as K,g as _,u as S,v as I,t as H,b as V,w as B,h as Q,j as R,x as W,y as q,k as m,s as v,l as d,f as w,m as g,n as h,o as $,p as b}from"../chunks/index.DkGyNcZ4.js";import{H as X}from"../chunks/Header.b1gXKLn1.js";import{V as Y}from"../chunks/Viewer.7vf_e1jl.js";import{F as Z}from"../chunks/Footer.C72tiJLz.js";import{B as ee}from"../chunks/Button.BhVba6S2.js";import{e as O,u as te,d as se}from"../chunks/each.CKz6_1ty.js";import{a as A}from"../chunks/searchParams.CTWHlEBv.js";import{g as ne}from"../chunks/entry.BKZ_6MSL.js";function N(r,t,e){const o=r.slice();return o[4]=t[e],o[6]=e,o}function x(r,t){let e,o=t[4]+"",a,c;return{key:r,first:null,c(){e=J("option"),a=H(o),this.h()},l(i){e=M(i,"OPTION",{});var f=z(e);a=V(f,o),f.forEach(p),this.h()},h(){e.__value=c=t[4],B(e,e.__value),this.first=e},m(i,f){_(i,e,f),Q(e,a)},p(i,f){t=i,f&2&&o!==(o=t[4]+"")&&R(a,o),f&2&&c!==(c=t[4])&&(e.__value=c,B(e,e.__value))},d(i){i&&p(e)}}}function oe(r){let t,e=[],o=new Map,a,c,i=O(r[1]);const f=n=>n[6];for(let n=0;n<i.length;n+=1){let l=N(r,i,n),s=f(l);o.set(s,e[n]=x(s,l))}return{c(){t=J("select");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=M(n,"SELECT",{class:!0});var l=z(t);for(let s=0;s<e.length;s+=1)e[s].l(l);l.forEach(p),this.h()},h(){K(t,"class","border border-gray-200 rounded-[4.75rem] py-[0.38rem] px-[0.88rem] typo-body3 text-gray-900 bg-gray-100"),r[0]===void 0&&D(()=>r[3].call(t))},m(n,l){_(n,t,l);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(t,null);S(t,r[0],!0),a||(c=[I(t,"change",r[3]),I(t,"change",r[2])],a=!0)},p(n,[l]){l&2&&(i=O(n[1]),e=te(e,l,f,1,n,i,o,t,se,x,null,N)),l&3&&S(t,n[0])},i:y,o:y,d(n){n&&p(t);for(let l=0;l<e.length;l+=1)e[l].d();a=!1,L(c)}}}function ae(r,t,e){let{selected:o=""}=t,{options:a=[]}=t;U(()=>{a.length>0&&e(0,o=a[0])});function c(f){G.call(this,r,f)}function i(){o=W(this),e(0,o),e(1,a)}return r.$$set=f=>{"selected"in f&&e(0,o=f.selected),"options"in f&&e(1,a=f.options)},[o,a,c,i]}class re extends T{constructor(t){super(),j(this,t,ae,oe,E,{selected:0,options:1})}}function le(r){let t;return{c(){t=H("게시하기")},l(e){t=V(e,"게시하기")},m(e,o){_(e,t,o)},d(e){e&&p(t)}}}function ie(r){let t,e,o,a,c;function i(n){r[4](n)}let f={options:["전체 공개","팔로워 공개","비공개"]};return r[1]!==void 0&&(f.selected=r[1]),t=new re({props:f}),F.push(()=>q(t,"selected",i)),a=new ee({props:{backgroundColor:"bg-primary-500",textColor:"text-white",border:"border-none",$$slots:{default:[le]},$$scope:{ctx:r}}}),a.$on("click",r[2]),{c(){m(t.$$.fragment),o=v(),m(a.$$.fragment)},l(n){d(t.$$.fragment,n),o=w(n),d(a.$$.fragment,n)},m(n,l){g(t,n,l),_(n,o,l),g(a,n,l),c=!0},p(n,l){const s={};!e&&l&2&&(e=!0,s.selected=n[1],P(()=>e=!1)),t.$set(s);const u={};l&128&&(u.$$scope={dirty:l,ctx:n}),a.$set(u)},i(n){c||(h(t.$$.fragment,n),h(a.$$.fragment,n),c=!0)},o(n){$(t.$$.fragment,n),$(a.$$.fragment,n),c=!1},d(n){n&&p(o),b(t,n),b(a,n)}}}function fe(r){let t,e,o,a,c,i,f;t=new X({props:{position:"fixed",leftBack:"white"}});function n(s){r[3](s)}let l={};return r[0]!==void 0&&(l.posts=r[0]),o=new Y({props:l}),F.push(()=>q(o,"posts",n)),i=new Z({props:{position:"fixed",$$slots:{default:[ie]},$$scope:{ctx:r}}}),{c(){m(t.$$.fragment),e=v(),m(o.$$.fragment),c=v(),m(i.$$.fragment)},l(s){d(t.$$.fragment,s),e=w(s),d(o.$$.fragment,s),c=w(s),d(i.$$.fragment,s)},m(s,u){g(t,s,u),_(s,e,u),g(o,s,u),_(s,c,u),g(i,s,u),f=!0},p(s,[u]){const C={};!a&&u&1&&(a=!0,C.posts=s[0],P(()=>a=!1)),o.$set(C);const k={};u&130&&(k.$$scope={dirty:u,ctx:s}),i.$set(k)},i(s){f||(h(t.$$.fragment,s),h(o.$$.fragment,s),h(i.$$.fragment,s),f=!0)},o(s){$(t.$$.fragment,s),$(o.$$.fragment,s),$(i.$$.fragment,s),f=!1},d(s){s&&(p(e),p(c)),b(t,s),b(o,s),b(i,s)}}}function ce(r,t,e){const o=JSON.parse(sessionStorage.getItem("postMedia")||"[]");let a=[{user:{idx:null,name:JSON.parse(sessionStorage.getItem("user")).display_name},place:{idx:null,name:A("placeName")},medias:o,mediaIdx:0,text:""}],c;const i={"전체 공개":"public","팔로워 공개":"follower",비공개:"private"};async function f(){var u;(await fetch("https://azit.surflux.studio/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("jwt")}`},body:JSON.stringify({placeIdx:A("placeIdx"),text:((u=a.at(0))==null?void 0:u.text)||"",media:o,permission:i[c]})})).ok&&ne("/viewer")}function n(s){a=s,e(0,a)}function l(s){c=s,e(1,c)}return[a,c,f,n,l]}class ve extends T{constructor(t){super(),j(this,t,ce,fe,E,{})}}export{ve as component};
