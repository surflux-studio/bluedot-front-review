import{g as he}from"../chunks/entry.72j06AYb.js";import{s as Ve,q as Ie,r as xe,b as x,f as d,v as u,i as G,h as a,n as oe,e as v,a as A,c as $,g as Z,k as Se,t as R,d as z,j as ae,B as de,O as ge,A as ce,F as tt,P as He,L as Ce,M as je,K as De,y as lt,z as rt,C as qe,N as Te,G as nt}from"../chunks/scheduler.DobTUrUU.js";import{S as Be,i as Me,c as W,b as Y,m as ee,a as F,f as Pe,t as L,d as te,g as Ne,e as st}from"../chunks/index.BzbOx6Bd.js";import{e as me}from"../chunks/each.C4gaqrOA.js";import{r as ot,H as at,w as it}from"../chunks/Header.BWVlw1P1.js";import{F as ct}from"../chunks/Footer.Czdb_qn5.js";import{s as Ee,o as Ae,e as ie,g as Ze,A as Re,i as ut}from"../chunks/sign.D2LB2NXZ.js";import{s as be}from"../chunks/s32cloudfront.BUx3valO.js";import{I as ft}from"../chunks/IconMaterialBoxRounded.BWPo3mSX.js";import{p as dt}from"../chunks/stores.B22jY-hJ.js";import{H as ht}from"../chunks/HexImage.D5KOfVR1.js";import{s as mt}from"../chunks/search.BhpZG1Ux.js";import{F as _t}from"../chunks/Field.d7TevMmM.js";import{B as ve}from"../chunks/Button.Bk_oUUZ6.js";import{I as pt}from"../chunks/IconGlobe.Bg6uBYh5.js";import{I as gt}from"../chunks/IconLink.Bt3nkGAK.js";import{f as bt,u as vt}from"../chunks/follow.BTH9Rxdc.js";const $t="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_1181_30623)'%3e%3cpath%20d='M12%2022C6.477%2022%202%2017.523%202%2012C2%206.477%206.477%202%2012%202C17.523%202%2022%206.477%2022%2012C22%2017.523%2017.523%2022%2012%2022ZM7.013%2018.256C8.42855%2019.3877%2010.1877%2020.0029%2012%2020C13.97%2020%2015.773%2019.288%2017.167%2018.108C16.5157%2017.4397%2015.7371%2016.9089%2014.877%2016.5468C14.017%2016.1847%2013.0931%2015.9988%2012.16%2016C11.1926%2015.9989%2010.2355%2016.1989%209.34947%2016.5872C8.46343%2016.9756%207.66778%2017.5439%207.013%2018.256ZM5.616%2016.82C6.45645%2015.9281%207.47067%2015.2177%208.59614%2014.7327C9.72161%2014.2477%2010.9345%2013.9984%2012.16%2014C13.3417%2013.9985%2014.512%2014.2304%2015.6037%2014.6824C16.6955%2015.1344%2017.6873%2015.7976%2018.522%2016.634C19.3781%2015.4291%2019.8836%2014.0106%2019.9826%2012.5359C20.0815%2011.0612%2019.77%209.58789%2019.0825%208.27946C18.395%206.97102%2017.3585%205.87862%2016.088%205.12345C14.8174%204.36827%2013.3625%203.97984%2011.8846%204.00125C10.4067%204.02267%208.96366%204.45308%207.71552%205.24476C6.46738%206.03643%205.46296%207.1584%204.81369%208.4862C4.16442%209.814%203.89569%2011.2957%204.03732%2012.7669C4.17894%2014.2382%204.72537%2015.6414%205.616%2016.821V16.82ZM12%2013C10.9391%2013%209.92172%2012.5786%209.17157%2011.8284C8.42143%2011.0783%208%2010.0609%208%209C8%207.93913%208.42143%206.92172%209.17157%206.17157C9.92172%205.42143%2010.9391%205%2012%205C13.0609%205%2014.0783%205.42143%2014.8284%206.17157C15.5786%206.92172%2016%207.93913%2016%209C16%2010.0609%2015.5786%2011.0783%2014.8284%2011.8284C14.0783%2012.5786%2013.0609%2013%2012%2013ZM12%2011C12.5304%2011%2013.0391%2010.7893%2013.4142%2010.4142C13.7893%2010.0391%2014%209.53043%2014%209C14%208.46957%2013.7893%207.96086%2013.4142%207.58579C13.0391%207.21071%2012.5304%207%2012%207C11.4696%207%2010.9609%207.21071%2010.5858%207.58579C10.2107%207.96086%2010%208.46957%2010%209C10%209.53043%2010.2107%2010.0391%2010.5858%2010.4142C10.9609%2010.7893%2011.4696%2011%2012%2011Z'%20fill='%239DA5B4'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_1181_30623'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e";function Ct(r){let e,l;return{c(){e=Ie("svg"),l=Ie("path"),this.h()},l(t){e=xe(t,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var n=x(e);l=xe(n,"path",{d:!0}),x(l).forEach(d),n.forEach(d),this.h()},h(){u(l,"d","M240-400q-33 0-56.5-23.5T160-480q0-33 23.5-56.5T240-560q33 0 56.5 23.5T320-480q0 33-23.5 56.5T240-400Zm240 0q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm240 0q-33 0-56.5-23.5T640-480q0-33 23.5-56.5T720-560q33 0 56.5 23.5T800-480q0 33-23.5 56.5T720-400Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 -960 960 960"),u(e,"width",r[1]),u(e,"height",r[1]),u(e,"fill",r[0])},m(t,n){G(t,e,n),a(e,l)},p(t,[n]){n&2&&u(e,"width",t[1]),n&2&&u(e,"height",t[1]),n&1&&u(e,"fill",t[0])},i:oe,o:oe,d(t){t&&d(e)}}}function wt(r,e,l){let t,{fill:n="#5f6368"}=e,{length:o="1.75"}=e;return r.$$set=s=>{"fill"in s&&l(0,n=s.fill),"length"in s&&l(2,o=s.length)},r.$$.update=()=>{r.$$.dirty&4&&l(1,t=ot(o))},[n,t,o]}class kt extends Be{constructor(e){super(),Me(this,e,wt,Ct,Ve,{fill:0,length:2})}}const It=async({params:r,parent:e})=>{if(r.idx==="-1")return he("/boxes");const t=await e();return t.error||!t.data?he("/boxes"):t.data},ol=Object.freeze(Object.defineProperty({__proto__:null,load:It},Symbol.toStringTag,{value:"Module"}));function xt(r){let e,l;return{c(){e=Ie("svg"),l=Ie("path"),this.h()},l(t){e=xe(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=x(e);l=xe(n,"path",{d:!0}),x(l).forEach(d),n.forEach(d),this.h()},h(){u(l,"d","M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"),u(e,"width","24"),u(e,"height","24"),u(e,"viewBox","0 0 24 24"),u(e,"fill",r[0]),u(e,"xmlns","http://www.w3.org/2000/svg")},m(t,n){G(t,e,n),a(e,l)},p(t,[n]){n&1&&u(e,"fill",t[0])},i:oe,o:oe,d(t){t&&d(e)}}}function yt(r,e,l){let{fill:t="white"}=e;return r.$$set=n=>{"fill"in n&&l(0,t=n.fill)},[t]}class Et extends Be{constructor(e){super(),Me(this,e,yt,xt,Ve,{fill:0})}}function ze(r,e,l){const t=r.slice();return t[42]=e[l],t}function Le(r,e,l){const t=r.slice();return t[45]=e[l],t}function Ue(r,e,l){const t=r.slice();return t[48]=e[l],t}function Tt(r){let e,l,t,n,o,s=r[0].name+"",c,i,h,g,k=r[0].member_count+"",_,I,p=r[0].place_count+"",b,E,V;return t=new ft({props:{length:1.25}}),{c(){e=v("div"),l=v("div"),W(t.$$.fragment),n=A(),o=v("div"),c=R(s),i=A(),h=v("div"),g=R("멤버 "),_=R(k),I=R("명 ･ 장소 "),b=R(p),E=R("개"),this.h()},l(T){e=$(T,"DIV",{class:!0});var B=x(e);l=$(B,"DIV",{class:!0});var H=x(l);Y(t.$$.fragment,H),n=Z(H),o=$(H,"DIV",{class:!0});var D=x(o);c=z(D,s),D.forEach(d),H.forEach(d),i=Z(B),h=$(B,"DIV",{class:!0});var P=x(h);g=z(P,"멤버 "),_=z(P,k),I=z(P,"명 ･ 장소 "),b=z(P,p),E=z(P,"개"),P.forEach(d),B.forEach(d),this.h()},h(){u(o,"class","typo-sub-h3 text-gray-900"),u(l,"class","flex flex-row justify-center items-center gap-1"),u(h,"class","flex typo-caption2 text-gray-500 text-center"),u(e,"class","flex flex-col justify-center items-center")},m(T,B){G(T,e,B),a(e,l),ee(t,l,null),a(l,n),a(l,o),a(o,c),a(e,i),a(e,h),a(h,g),a(h,_),a(h,I),a(h,b),a(h,E),V=!0},p(T,B){(!V||B[0]&1)&&s!==(s=T[0].name+"")&&ae(c,s),(!V||B[0]&1)&&k!==(k=T[0].member_count+"")&&ae(_,k),(!V||B[0]&1)&&p!==(p=T[0].place_count+"")&&ae(b,p)},i(T){V||(L(t.$$.fragment,T),V=!0)},o(T){F(t.$$.fragment,T),V=!1},d(T){T&&d(e),te(t)}}}function Vt(r){let e,l;return e=new pt({props:{fill:"white"}}),{c(){W(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){ee(e,t,n),l=!0},p:oe,i(t){l||(L(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){te(e,t)}}}function Dt(r){let e,l;return e=new gt({}),{c(){W(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){ee(e,t,n),l=!0},i(t){l||(L(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){te(e,t)}}}function Bt(r){let e,l;return e=new ve({props:{className:"h-full",backgroundColor:"bg-gradient-to-br from-primary-400 from-0% to-emerald-400 to-80%",textColor:"text-white",border:"border-none",$$slots:{default:[Nt]},$$scope:{ctx:r}}}),e.$on("click",r[14]),{c(){W(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){ee(e,t,n),l=!0},p(t,n){const o={};n[1]&1048576&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(L(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){te(e,t)}}}function Mt(r){let e,l;return e=new ve({props:{className:"h-full",backgroundColor:"bg-gray-300",textColor:"text-white",border:"border-none",$$slots:{default:[Ot]},$$scope:{ctx:r}}}),e.$on("click",r[15]),{c(){W(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){ee(e,t,n),l=!0},p(t,n){const o={};n[1]&1048576&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(L(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){te(e,t)}}}function Pt(r){let e,l;return e=new ve({props:{$$slots:{default:[St]},$$scope:{ctx:r}}}),e.$on("click",r[24]),{c(){W(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){ee(e,t,n),l=!0},p(t,n){const o={};n[1]&1048576&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(L(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){te(e,t)}}}function Nt(r){let e;return{c(){e=R("구독")},l(l){e=z(l,"구독")},m(l,t){G(l,e,t)},d(l){l&&d(e)}}}function Ot(r){let e;return{c(){e=R("구독 취소")},l(l){e=z(l,"구독 취소")},m(l,t){G(l,e,t)},d(l){l&&d(e)}}}function St(r){let e,l;return e=new kt({}),{c(){W(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){ee(e,t,n),l=!0},i(t){l||(L(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){te(e,t)}}}function Fe(r){let e,l,t=r[0].description+"",n;return{c(){e=v("section"),l=v("p"),n=R(t),this.h()},l(o){e=$(o,"SECTION",{class:!0});var s=x(e);l=$(s,"P",{class:!0});var c=x(l);n=z(c,t),c.forEach(d),s.forEach(d),this.h()},h(){u(l,"class","typo-body3 text-gray-600"),u(e,"class","flex-none bg-primary-50 p-3 mx-4 rounded-lg")},m(o,s){G(o,e,s),a(e,l),a(l,n)},p(o,s){s[0]&1&&t!==(t=o[0].description+"")&&ae(n,t)},d(o){o&&d(e)}}}function Ht(r){let e,l='<p class="typo-body1 text-gray-500">기타 정보를 볼 수 있는 권한이 없습니다</p>';return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=$(t,"DIV",{class:!0,"data-svelte-h":!0}),de(e)!=="svelte-1v93n7g"&&(e.innerHTML=l),this.h()},h(){u(e,"class","flex-auto flex items-center justify-center")},m(t,n){G(t,e,n)},p:oe,i:oe,o:oe,d(t){t&&d(e)}}}function jt(r){let e,l,t,n,o,s,c,i=r[0].member_count+"",h,g,k,_,I,p,b,E,V=r[0].place_count+"",T,B,H,D,P,N,y,U,M,X,J,se,j,f=r[11]&&r[6]==="member"&&Ge(r),w=r[11]&&qt(r),Q=me(r[1]),q=[];for(let C=0;C<Q.length;C+=1)q[C]=Qe(ze(r,Q,C));return{c(){e=v("div"),l=v("div"),t=v("div"),n=v("button"),o=R(`멤버
            `),s=v("span"),c=R("("),h=R(i),g=R(")"),_=A(),I=v("button"),p=R(`장소
            `),b=v("span"),E=R("("),T=R(V),B=R(")"),D=A(),f&&f.c(),P=A(),N=v("div"),y=v("div"),U=v("div"),w&&w.c(),M=A(),X=v("div");for(let C=0;C<q.length;C+=1)q[C].c();this.h()},l(C){e=$(C,"DIV",{class:!0});var O=x(e);l=$(O,"DIV",{class:!0});var S=x(l);t=$(S,"DIV",{class:!0});var re=x(t);n=$(re,"BUTTON",{class:!0});var _e=x(n);o=z(_e,`멤버
            `),s=$(_e,"SPAN",{class:!0});var ue=x(s);c=z(ue,"("),h=z(ue,i),g=z(ue,")"),ue.forEach(d),_e.forEach(d),_=Z(re),I=$(re,"BUTTON",{class:!0});var pe=x(I);p=z(pe,`장소
            `),b=$(pe,"SPAN",{class:!0});var fe=x(b);E=z(fe,"("),T=z(fe,V),B=z(fe,")"),fe.forEach(d),pe.forEach(d),re.forEach(d),S.forEach(d),D=Z(O),f&&f.l(O),O.forEach(d),P=Z(C),N=$(C,"DIV",{class:!0});var $e=x(N);y=$($e,"DIV",{class:!0});var m=x(y);U=$(m,"DIV",{class:!0});var K=x(U);w&&w.l(K),K.forEach(d),M=Z(m),X=$(m,"DIV",{class:!0});var ne=x(X);for(let le=0;le<q.length;le+=1)q[le].l(ne);ne.forEach(d),m.forEach(d),$e.forEach(d),this.h()},h(){u(s,"class","typo-caption2 text-gray-500"),u(n,"class",k=`tab-map w-full px-8 py-2.5 ${r[6]==="member"?we:ke}`),u(b,"class","typo-caption2 text-gray-500"),u(I,"class",H=`tab-list w-full px-8 py-2.5 ${r[6]==="place"?we:ke}`),u(t,"class","tab-category w-full flex flex-row text-center"),u(l,"class","tab w-full px-4 pt-2.5 pb-0.5"),u(e,"class","flex-none w-full sticky top-[100px] z-10 bg-white"),u(U,"class","w-full flex flex-col gap-6"),Ce(U,"hidden",r[6]!=="member"),u(X,"class","absolute left-full top-0 w-screen flex flex-col items-center gap-6 pt-3 pb-20"),Ce(X,"hidden",r[6]!=="place"),u(y,"class","h-full w-full transition-transform pt-3 pb-6 px-6 mb-14"),je(y,"transform",`translateX(${r[6]==="member"?0:-100}%)`),u(N,"class","content flex-auto")},m(C,O){G(C,e,O),a(e,l),a(l,t),a(t,n),a(n,o),a(n,s),a(s,c),a(s,h),a(s,g),a(t,_),a(t,I),a(I,p),a(I,b),a(b,E),a(b,T),a(b,B),a(e,D),f&&f.m(e,null),G(C,P,O),G(C,N,O),a(N,y),a(y,U),w&&w.m(U,null),a(y,M),a(y,X);for(let S=0;S<q.length;S+=1)q[S]&&q[S].m(X,null);J=!0,se||(j=[ce(n,"click",r[25]),ce(I,"click",r[26])],se=!0)},p(C,O){if((!J||O[0]&1)&&i!==(i=C[0].member_count+"")&&ae(h,i),(!J||O[0]&64&&k!==(k=`tab-map w-full px-8 py-2.5 ${C[6]==="member"?we:ke}`))&&u(n,"class",k),(!J||O[0]&1)&&V!==(V=C[0].place_count+"")&&ae(T,V),(!J||O[0]&64&&H!==(H=`tab-list w-full px-8 py-2.5 ${C[6]==="place"?we:ke}`))&&u(I,"class",H),C[11]&&C[6]==="member"?f?(f.p(C,O),O[0]&64&&L(f,1)):(f=Ge(C),f.c(),L(f,1),f.m(e,null)):f&&(Ne(),F(f,1,1,()=>{f=null}),Pe()),C[11]&&w.p(C,O),(!J||O[0]&64)&&Ce(U,"hidden",C[6]!=="member"),O[0]&3){Q=me(C[1]);let S;for(S=0;S<Q.length;S+=1){const re=ze(C,Q,S);q[S]?q[S].p(re,O):(q[S]=Qe(re),q[S].c(),q[S].m(X,null))}for(;S<q.length;S+=1)q[S].d(1);q.length=Q.length}(!J||O[0]&64)&&Ce(X,"hidden",C[6]!=="place"),O[0]&64&&je(y,"transform",`translateX(${C[6]==="member"?0:-100}%)`)},i(C){J||(L(f),J=!0)},o(C){F(f),J=!1},d(C){C&&(d(e),d(P),d(N)),f&&f.d(),w&&w.d(),De(q,C),se=!1,tt(j)}}}function Ge(r){let e,l,t,n;function o(c){r[27](c)}let s={round:!0,placeholder:"검색하세요",prefixIcon:mt,prefixPointer:!0,clear:!0,backgroundColor:"bg-gray-50",onInput:r[19]};return r[5]!==void 0&&(s.value=r[5]),l=new _t({props:s}),lt.push(()=>st(l,"value",o)),{c(){e=v("section"),W(l.$$.fragment),this.h()},l(c){e=$(c,"SECTION",{class:!0});var i=x(e);Y(l.$$.fragment,i),i.forEach(d),this.h()},h(){u(e,"class","box-search py-3 px-6")},m(c,i){G(c,e,i),ee(l,e,null),n=!0},p(c,i){const h={};!t&&i[0]&32&&(t=!0,h.value=c[5],rt(()=>t=!1)),l.$set(h)},i(c){n||(L(l.$$.fragment,c),n=!0)},o(c){F(l.$$.fragment,c),n=!1},d(c){c&&d(e),te(l)}}}function qt(r){let e,l=me(r[10]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Ke(Le(r,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=qe()},l(n){for(let o=0;o<t.length;o+=1)t[o].l(n);e=qe()},m(n,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,o);G(n,e,o)},p(n,o){if(o[0]&79365){l=me(n[10]);let s;for(s=0;s<l.length;s+=1){const c=Le(n,l,s);t[s]?t[s].p(c,o):(t[s]=Ke(c),t[s].c(),t[s].m(e.parentNode,e))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&d(e),De(t,n)}}}function Je(r){let e,l,t,n,o;function s(...c){return r[29](r[48],...c)}return{c(){e=v("div"),l=v("input"),this.h()},l(c){e=$(c,"DIV",{class:!0});var i=x(e);l=$(i,"INPUT",{class:!0,type:!0}),i.forEach(d),this.h()},h(){u(l,"class","m-2 focus:outline-none focus:ring-0 focus:ring-offset-0"),u(l,"type","checkbox"),l.checked=t=r[2].includes(r[48].idx),u(e,"class","flex-none")},m(c,i){G(c,e,i),a(e,l),n||(o=ce(l,"click",nt(s)),n=!0)},p(c,i){r=c,i[0]&4&&t!==(t=r[2].includes(r[48].idx))&&(l.checked=t)},d(c){c&&d(e),n=!1,o()}}}function Xe(r){let e,l,t,n,o,s=r[48].unique_name+"",c,i,h=r[48].role!=="owner"&&r[9].includes(r[0].role??""),g,k,_;function I(){return r[28](r[48])}let p=h&&Je(r);return{c(){e=v("div"),l=v("img"),n=A(),o=v("div"),c=R(s),i=A(),p&&p.c(),g=A(),this.h()},l(b){e=$(b,"DIV",{class:!0});var E=x(e);l=$(E,"IMG",{class:!0,alt:!0,src:!0,"aria-hidden":!0}),n=Z(E),o=$(E,"DIV",{class:!0});var V=x(o);c=z(V,s),V.forEach(d),i=Z(E),p&&p.l(E),g=Z(E),E.forEach(d),this.h()},h(){u(l,"class","flex-none h-full object-cover rounded-full"),u(l,"alt","멤버 사진"),Te(l.src,t=r[13](r[48].profile_image_url))||u(l,"src",t),u(l,"aria-hidden",""),u(o,"class","flex-auto p-2.5 typo-body1"),u(e,"class","bg-white h-8 relative flex flex-row items-center")},m(b,E){G(b,e,E),a(e,l),a(e,n),a(e,o),a(o,c),a(e,i),p&&p.m(e,null),a(e,g),k||(_=ce(l,"click",I),k=!0)},p(b,E){r=b,E[0]&1&&(h=r[48].role!=="owner"&&r[9].includes(r[0].role??"")),h?p?p.p(r,E):(p=Je(r),p.c(),p.m(e,g)):p&&(p.d(1),p=null)},d(b){b&&d(e),p&&p.d(),k=!1,_()}}}function Ke(r){let e,l,t=r[45]+"",n,o,s,c,i=me(r[12](r[45])),h=[];for(let g=0;g<i.length;g+=1)h[g]=Xe(Ue(r,i,g));return{c(){e=v("div"),l=v("p"),n=R(t),o=A(),s=v("div");for(let g=0;g<h.length;g+=1)h[g].c();c=A(),this.h()},l(g){e=$(g,"DIV",{});var k=x(e);l=$(k,"P",{class:!0});var _=x(l);n=z(_,t),_.forEach(d),o=Z(k),s=$(k,"DIV",{class:!0});var I=x(s);for(let p=0;p<h.length;p+=1)h[p].l(I);I.forEach(d),c=Z(k),k.forEach(d),this.h()},h(){u(l,"class","typo-sub-h5 text-gray-500 pb-2"),u(s,"class","flex flex-col gap-1")},m(g,k){G(g,e,k),a(e,l),a(l,n),a(e,o),a(e,s);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(s,null);a(e,c)},p(g,k){if(k[0]&79365){i=me(g[12](g[45]));let _;for(_=0;_<i.length;_+=1){const I=Ue(g,i,_);h[_]?h[_].p(I,k):(h[_]=Xe(I),h[_].c(),h[_].m(s,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=i.length}},d(g){g&&d(e),De(h,g)}}}function Qe(r){let e,l,t,n,o,s,c,i,h=r[42].name+"",g,k,_,I=r[42].categories.join(" | ")+"",p,b,E,V=r[42].road_address+"",T,B,H,D;function P(){return r[30](r[42])}return{c(){e=v("div"),l=v("div"),t=v("img"),o=A(),s=v("div"),c=v("div"),i=v("div"),g=R(h),k=A(),_=v("div"),p=R(I),b=A(),E=v("div"),T=R(V),B=A(),this.h()},l(N){e=$(N,"DIV",{class:!0,"aria-hidden":!0});var y=x(e);l=$(y,"DIV",{class:!0});var U=x(l);t=$(U,"IMG",{class:!0,alt:!0,src:!0}),U.forEach(d),o=Z(y),s=$(y,"DIV",{class:!0});var M=x(s);c=$(M,"DIV",{class:!0});var X=x(c);i=$(X,"DIV",{class:!0});var J=x(i);g=z(J,h),J.forEach(d),k=Z(X),_=$(X,"DIV",{class:!0});var se=x(_);p=z(se,I),se.forEach(d),X.forEach(d),b=Z(M),E=$(M,"DIV",{class:!0});var j=x(E);T=z(j,V),j.forEach(d),M.forEach(d),B=Z(y),y.forEach(d),this.h()},h(){var N,y;u(t,"class","w-full h-full object-cover"),u(t,"alt","장소 사진"),Te(t.src,n=be(((y=(N=r[42])==null?void 0:N.media)==null?void 0:y.at(0))??"",500))||u(t,"src",n),u(l,"class","flex-none w-12 h-full relative"),u(i,"class","typo-body1 text-gray-900 truncate"),u(_,"class","flex-none typo-caption1 text-gray-500 max-w-16 truncate"),u(c,"class","flex flex-row items-center gap-1.5 w-full"),u(E,"class","w-full typo-caption1 text-gray-500 truncate"),u(s,"class","flex-auto min-w-0 flex flex-col items-start gap-0.5"),u(e,"class","flex flex-row items-center px-4 gap-2.5 h-12 w-screen"),u(e,"aria-hidden","")},m(N,y){G(N,e,y),a(e,l),a(l,t),a(e,o),a(e,s),a(s,c),a(c,i),a(i,g),a(c,k),a(c,_),a(_,p),a(s,b),a(s,E),a(E,T),a(e,B),H||(D=ce(e,"click",P),H=!0)},p(N,y){var U,M;r=N,y[0]&2&&!Te(t.src,n=be(((M=(U=r[42])==null?void 0:U.media)==null?void 0:M.at(0))??"",500))&&u(t,"src",n),y[0]&2&&h!==(h=r[42].name+"")&&ae(g,h),y[0]&2&&I!==(I=r[42].categories.join(" | ")+"")&&ae(p,I),y[0]&2&&V!==(V=r[42].road_address+"")&&ae(T,V)},d(N){N&&d(e),H=!1,D()}}}function We(r){let e,l,t,n,o="변경할 역할을 선택해주세요",s,c="manager",i,h="writer",g,k="reader",_,I="none",p,b,E,V,T,B,H;return{c(){e=v("div"),l=v("div"),t=v("select"),n=v("option"),n.textContent=o,s=v("option"),s.textContent=c,i=v("option"),i.textContent=h,g=v("option"),g.textContent=k,_=v("option"),_.textContent=I,p=A(),b=v("button"),E=R("변경"),this.h()},l(D){e=$(D,"DIV",{class:!0});var P=x(e);l=$(P,"DIV",{class:!0});var N=x(l);t=$(N,"SELECT",{class:!0});var y=x(t);n=$(y,"OPTION",{"data-svelte-h":!0}),de(n)!=="svelte-mxgpot"&&(n.textContent=o),s=$(y,"OPTION",{"data-svelte-h":!0}),de(s)!=="svelte-1po627k"&&(s.textContent=c),i=$(y,"OPTION",{"data-svelte-h":!0}),de(i)!=="svelte-uka16q"&&(i.textContent=h),g=$(y,"OPTION",{"data-svelte-h":!0}),de(g)!=="svelte-1x9y85q"&&(g.textContent=k),_=$(y,"OPTION",{"data-svelte-h":!0}),de(_)!=="svelte-8dsaj2"&&(_.textContent=I),y.forEach(d),p=Z(N),b=$(N,"BUTTON",{class:!0});var U=x(b);E=z(U,"변경"),U.forEach(d),N.forEach(d),P.forEach(d),this.h()},h(){n.__value="",ge(n,n.__value),s.__value="manager",ge(s,s.__value),i.__value="writer",ge(i,i.__value),g.__value="reader",ge(g,g.__value),_.__value="none",ge(_,_.__value),u(t,"class","flex-auto appearance-none relative w-full h-full border border-gray-400 typo-body3 text-gray-900 bg-white rounded-l-lg"),u(b,"class",V=`flex-none ${r[3]?"bg-primary-500":"bg-gray-300"} rounded-r-lg p-1 pointer-events-auto w-16 h-full text-white typo-body3`),b.disabled=T=!r[3],u(l,"class","relative w-full h-9 flex flex-row items-center"),u(e,"class","absolute bottom-0 w-full p-5 rounded-t-lg border-t-[1px] bg-white")},m(D,P){G(D,e,P),a(e,l),a(l,t),a(t,n),a(t,s),a(t,i),a(t,g),a(t,_),a(l,p),a(l,b),a(b,E),B||(H=[ce(t,"change",r[31]),ce(b,"click",r[18])],B=!0)},p(D,P){P[0]&8&&V!==(V=`flex-none ${D[3]?"bg-primary-500":"bg-gray-300"} rounded-r-lg p-1 pointer-events-auto w-16 h-full text-white typo-body3`)&&u(b,"class",V),P[0]&8&&T!==(T=!D[3])&&(b.disabled=T)},d(D){D&&d(e),B=!1,tt(H)}}}function Ye(r){let e,l,t,n,o;return l=new Et({}),{c(){e=v("button"),W(l.$$.fragment),this.h()},l(s){e=$(s,"BUTTON",{class:!0});var c=x(e);Y(l.$$.fragment,c),c.forEach(d),this.h()},h(){u(e,"class","bg-red-500 rounded-full p-4 pointer-events-auto")},m(s,c){G(s,e,c),ee(l,e,null),t=!0,n||(o=ce(e,"click",r[20]),n=!0)},p:oe,i(s){t||(L(l.$$.fragment,s),t=!0)},o(s){F(l.$$.fragment,s),t=!1},d(s){s&&d(e),te(l),n=!1,o()}}}function At(r){let e,l,t=r[6]==="place"&&r[4].length>0&&Ye(r);return{c(){e=v("div"),t&&t.c(),this.h()},l(n){e=$(n,"DIV",{slot:!0});var o=x(e);t&&t.l(o),o.forEach(d),this.h()},h(){u(e,"slot","right")},m(n,o){G(n,e,o),t&&t.m(e,null),l=!0},p(n,o){n[6]==="place"&&n[4].length>0?t?(t.p(n,o),o[0]&80&&L(t,1)):(t=Ye(n),t.c(),L(t,1),t.m(e,null)):t&&(Ne(),F(t,1,1,()=>{t=null}),Pe())},i(n){l||(L(t),l=!0)},o(n){F(t),l=!1},d(n){n&&d(e),t&&t.d()}}}function Zt(r){let e,l,t,n,o,s,c,i,h,g,k,_,I,p,b,E,V,T,B,H,D,P;t=new at({props:{position:"fixed",backgroundColor:"bg-white",contentPosition:"items-center",leftBack:"black",$$slots:{default:[Tt]},$$scope:{ctx:r}}}),s=new ht({props:{src:be(r[0].image??"",500),width:300,height:300}}),h=new ve({props:{backgroundColor:"bg-gray-200",$$slots:{default:[Vt]},$$scope:{ctx:r}}}),h.$on("click",r[22]),k=new ve({props:{$$slots:{default:[Dt]},$$scope:{ctx:r}}}),k.$on("click",r[23]);const N=[Pt,Mt,Bt],y=[];function U(f,w){return f[0].role==="owner"?0:f[0].is_subcribed?1:2}I=U(r),p=y[I]=N[I](r);let M=r[0].description&&Fe(r);const X=[jt,Ht],J=[];function se(f,w){return f[8]?0:1}V=se(r),T=J[V]=X[V](r);let j=r[6]==="member"&&r[2].length>0&&We(r);return D=new ct({props:{position:"fixed",$$slots:{right:[At]},$$scope:{ctx:r}}}),{c(){e=v("div"),l=v("div"),W(t.$$.fragment),n=A(),o=v("div"),W(s.$$.fragment),c=A(),i=v("div"),W(h.$$.fragment),g=A(),W(k.$$.fragment),_=A(),p.c(),b=A(),M&&M.c(),E=A(),T.c(),B=A(),j&&j.c(),H=A(),W(D.$$.fragment),this.h()},l(f){e=$(f,"DIV",{class:!0});var w=x(e);l=$(w,"DIV",{class:!0});var Q=x(l);Y(t.$$.fragment,Q),Q.forEach(d),n=Z(w),o=$(w,"DIV",{class:!0});var q=x(o);Y(s.$$.fragment,q),q.forEach(d),c=Z(w),i=$(w,"DIV",{class:!0});var C=x(i);Y(h.$$.fragment,C),g=Z(C),Y(k.$$.fragment,C),_=Z(C),p.l(C),C.forEach(d),b=Z(w),M&&M.l(w),E=Z(w),T.l(w),B=Z(w),j&&j.l(w),w.forEach(d),H=Z(f),Y(D.$$.fragment,f),this.h()},h(){u(l,"class","flex-none h-[100px]"),u(o,"class","flex-none w-24 h-24 mx-auto my-2.5"),u(i,"class","flex-none grid grid-cols-3 gap-4 w-full p-4 justify-between items-center"),u(e,"class","flex flex-col w-dvw h-dvh overflow-x-hidden")},m(f,w){G(f,e,w),a(e,l),ee(t,l,null),a(e,n),a(e,o),ee(s,o,null),a(e,c),a(e,i),ee(h,i,null),a(i,g),ee(k,i,null),a(i,_),y[I].m(i,null),a(e,b),M&&M.m(e,null),a(e,E),J[V].m(e,null),a(e,B),j&&j.m(e,null),G(f,H,w),ee(D,f,w),P=!0},p(f,w){const Q={};w[0]&1|w[1]&1048576&&(Q.$$scope={dirty:w,ctx:f}),t.$set(Q);const q={};w[0]&1&&(q.src=be(f[0].image??"",500)),s.$set(q);const C={};w[1]&1048576&&(C.$$scope={dirty:w,ctx:f}),h.$set(C);const O={};w[1]&1048576&&(O.$$scope={dirty:w,ctx:f}),k.$set(O);let S=I;I=U(f),I===S?y[I].p(f,w):(Ne(),F(y[S],1,1,()=>{y[S]=null}),Pe(),p=y[I],p?p.p(f,w):(p=y[I]=N[I](f),p.c()),L(p,1),p.m(i,null)),f[0].description?M?M.p(f,w):(M=Fe(f),M.c(),M.m(e,E)):M&&(M.d(1),M=null),T.p(f,w),f[6]==="member"&&f[2].length>0?j?j.p(f,w):(j=We(f),j.c(),j.m(e,null)):j&&(j.d(1),j=null);const re={};w[0]&80|w[1]&1048576&&(re.$$scope={dirty:w,ctx:f}),D.$set(re)},i(f){P||(L(t.$$.fragment,f),L(s.$$.fragment,f),L(h.$$.fragment,f),L(k.$$.fragment,f),L(p),L(T),L(D.$$.fragment,f),P=!0)},o(f){F(t.$$.fragment,f),F(s.$$.fragment,f),F(h.$$.fragment,f),F(k.$$.fragment,f),F(p),F(T),F(D.$$.fragment,f),P=!1},d(f){f&&(d(e),d(H)),te(t),te(s),te(h),te(k),y[I].d(),M&&M.d(),J[V].d(),j&&j.d(),te(D,f)}}}let we="text-gray-900 typo-sub-h2 border-b-[2.5px] border-gray-900",ke="text-gray-500 typo-sub-h5";function et(r){return Object.groupBy(r,({role:e})=>e??"none")}function Rt(r,e,l){let t,n;Se(r,Ee,m=>l(35,t=m)),Se(r,dt,m=>l(7,n=m));let{data:o}=e,s=o.box,c=o.places,i=o.members,h=et(i),g=o.hasPermission;const k=["owner","manager"],_=["writer","reader"],I=[...k,..._],p=[...I,"none"];let b=[],E,V=[],T="";const B=k.includes(s.role??"");let H=B?"member":"place";function D(m){h=et(m)}function P(m){return p.includes(m)}function N(m){return P(m)?h[m]??[]:[]}function y(m){const K=be(m,500);return K||$t}async function U(){const m=Ae();if(!m)return ie.emit("showSignInModal",{removable:!0});const K=BigInt(m.sub);await bt({targetTable:"boxes",targetIdx:BigInt(s.idx),subjectIdx:K}),l(0,s.is_subcribed=!0,s),He(Ee,t=[{...s,role:"none"},...t],t),!i.some(ne=>ne.idx===m.sub)&&(i=[...i,{idx:m.sub,unique_name:m.uni,profile_image_url:m.pic??"",role:s.role??"none"}],D(i),s.member_count&&l(0,s.member_count=`${Number(s.member_count)+1}`,s))}async function M(){const m=Ae();if(!m)return ie.emit("showSignInModal",{removable:!0});const K=BigInt(m.sub);await vt({targetTable:"boxes",targetIdx:BigInt(s.idx),subjectIdx:K}),l(0,s.is_subcribed=!1,s),He(Ee,t=t.filter(le=>le.idx!==s.idx),t);const ne=i.find(le=>le.idx===m.sub);!ne||I.includes(ne.role)||(s.member_count&&l(0,s.member_count=`${Number(s.member_count)-1}`,s),i=i.filter(le=>le.idx!==m.sub),D(i))}function X(m,K){K&&!b.includes(m)?l(2,b=[...b,m]):!K&&b.includes(m)&&l(2,b=b.filter(ne=>ne!==m))}function J(m){P(m)&&l(3,E=m)}async function se(){if(!E)return;const m=E,K=Ze();if(!K)return ie.emit("showSignInModal",{removable:!0});const ne=[];b.forEach(le=>{const Oe=i.find(ye=>ye.idx===le);Oe&&(ne.push(fetch(`${Re}/auth/permissions?targetTable=boxes&targetIdx=${s.idx}&subjectTable=users&subjectIdx=${le}&relation=${m}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${K}`}}).then(ye=>{if(!ye.ok)throw"error"})),Oe.role=m)});try{await Promise.all(ne),D(i),l(2,b=[])}catch{ie.emit("pushSnackbar",{message:"일시적으로 장애가 발생했습니다."})}}let j;function f(){clearTimeout(j),j=setTimeout(w,300)}function w(){D(i.filter(m=>m.unique_name.includes(T)))}async function Q(){if(!ut())return ie.emit("showSignInModal",{removable:!0});try{if(!(await fetch(`${Re}/boxes/${s.idx}/places`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ze()}`},body:JSON.stringify({places:V})})).ok)throw"apierror";l(1,c=c.filter(K=>!V.includes(K.idx))),l(4,V=[]),ie.emit("pushSnackbar",{message:"박스에서 장소를 제거했습니다."})}catch{ie.emit("pushSnackbar",{message:"일시적으로 장애가 발생했습니다."})}}const q=()=>he(`/boxes/${s.idx}`),C=()=>it(n.url),O=()=>he(`/boxes/${s.idx}/setting`),S=()=>{B?l(6,H="member"):ie.emit("pushSnackbar",{message:"권한이 없습니다.",duration:1e3})},re=()=>l(6,H="place");function _e(m){T=m,l(5,T)}const ue=m=>he(`/users/${m.idx}`),pe=(m,K)=>X(m.idx,K.currentTarget.checked),fe=m=>he(`/places/${m.idx}?boxIdx=${s.idx}`),$e=m=>J(m.currentTarget.value);return r.$$set=m=>{"data"in m&&l(21,o=m.data)},[s,c,b,E,V,T,H,n,g,k,p,B,N,y,U,M,X,J,se,f,Q,o,q,C,O,S,re,_e,ue,pe,fe,$e]}class al extends Be{constructor(e){super(),Me(this,e,Rt,Zt,Ve,{data:21},null,[-1,-1])}}export{al as component,ol as universal};
