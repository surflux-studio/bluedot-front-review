import{s as z,y as J,z as T,a as P,g as S,i as B,n as V,f as k,e as ne,c as se,b as oe,v as ae,k as ie,x as fe,t as G,d as K}from"../chunks/scheduler.DobTUrUU.js";import{S as L,i as Q,e as X,c as _,b as g,m as b,t as l,a as p,d,f as R,g as j}from"../chunks/index.BzbOx6Bd.js";import{U as ue}from"../chunks/UpperBoxes.BWvLgoAi.js";import{g as q}from"../chunks/entry.72j06AYb.js";import{F as Y}from"../chunks/Footer.Czdb_qn5.js";import{H as Z}from"../chunks/Header.BWVlw1P1.js";import{M as le}from"../chunks/Map.DnOan94b.js";import{N as ce}from"../chunks/NavigationBar.Ccwdi6Tw.js";import{B as H}from"../chunks/Button.Bk_oUUZ6.js";import{g as me}from"../chunks/searchParams.B5yS6b20.js";import{a as U,e as E,g as pe}from"../chunks/sign.D2LB2NXZ.js";import{p as $e}from"../chunks/stores.B22jY-hJ.js";import"../chunks/Field.d7TevMmM.js";/* empty css                                                   *//* empty css                                                   */import"../chunks/map.DghcAC1I.js";import"../chunks/ImageShaper.Dix5sBHT.js";/* empty css                                                            */import{A as _e}from"../chunks/ActionSheet.BeV2j9V7.js";import{S as ge}from"../chunks/Search.D55JepQy.js";import{B as be}from"../chunks/BottomNavigationPadder.B0Eyzigo.js";import{p as de,b as he}from"../chunks/boxRequest.BQYDEtc_.js";function ke(a){let e,r,t,o;return e=new ge({}),t=new be({props:{heightPx:120}}),{c(){_(e.$$.fragment),r=P(),_(t.$$.fragment)},l(n){g(e.$$.fragment,n),r=S(n),g(t.$$.fragment,n)},m(n,i){b(e,n,i),B(n,r,i),b(t,n,i),o=!0},p:V,i(n){o||(l(e.$$.fragment,n),l(t.$$.fragment,n),o=!0)},o(n){p(e.$$.fragment,n),p(t.$$.fragment,n),o=!1},d(n){n&&k(r),d(e,n),d(t,n)}}}function we(a){let e,r,t;function o(i){a[1](i)}let n={sheetBackground:"bg-[black]/60 backdrop-blur-sm",$$slots:{default:[ke]},$$scope:{ctx:a}};return a[0]!==void 0&&(n.isOpen=a[0]),e=new _e({props:n}),J.push(()=>X(e,"isOpen",o)),{c(){_(e.$$.fragment)},l(i){g(e.$$.fragment,i)},m(i,c){b(e,i,c),t=!0},p(i,[c]){const m={};c&4&&(m.$$scope={dirty:c,ctx:i}),!r&&c&1&&(r=!0,m.isOpen=i[0],T(()=>r=!1)),e.$set(m)},i(i){t||(l(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){d(e,i)}}}function xe(a,e,r){let{isOpen:t=!1}=e;function o(n){t=n,r(0,t)}return a.$$set=n=>{"isOpen"in n&&r(0,t=n.isOpen)},[t,o]}class Be extends L{constructor(e){super(),Q(this,e,xe,we,z,{isOpen:0})}}function Oe(a){let e,r;return e=new Z({props:{position:"fixed",rightFeed:!0}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function Ce(a){let e,r;return e=new Z({props:{position:"fixed",leftBack:!0}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function W(a){let e,r;return e=new ue({props:{boxes:a[0]}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},p(t,o){const n={};o&1&&(n.boxes=t[0]),e.$set(n)},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function ye(a){let e,r;return e=new Y({props:{position:"fixed",leftReposition:!0,centerSearch:!0,right:"add"}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},p:V,i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function Pe(a){let e,r;return e=new Y({props:{position:"fixed",bottom:"2rem",$$slots:{default:[Ne]},$$scope:{ctx:a}}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},p(t,o){const n={};o&2048&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function Se(a){let e;return{c(){e=G("이 장소가 아니예요")},l(r){e=K(r,"이 장소가 아니예요")},m(r,t){B(r,e,t)},d(r){r&&k(e)}}}function ve(a){let e;return{c(){e=G("이 장소가 맞아요")},l(r){e=K(r,"이 장소가 맞아요")},m(r,t){B(r,e,t)},d(r){r&&k(e)}}}function Ne(a){let e,r,t,o;return e=new H({props:{backgroundColor:"bg-gray-300",textColor:"text-white",$$slots:{default:[Se]},$$scope:{ctx:a}}}),e.$on("click",a[7]),t=new H({props:{backgroundColor:"bg-primary-500",textColor:"text-white",$$slots:{default:[ve]},$$scope:{ctx:a}}}),t.$on("click",a[4]),{c(){_(e.$$.fragment),r=P(),_(t.$$.fragment)},l(n){g(e.$$.fragment,n),r=S(n),g(t.$$.fragment,n)},m(n,i){b(e,n,i),B(n,r,i),b(t,n,i),o=!0},p(n,i){const c={};i&2048&&(c.$$scope={dirty:i,ctx:n}),e.$set(c);const m={};i&2048&&(m.$$scope={dirty:i,ctx:n}),t.$set(m)},i(n){o||(l(e.$$.fragment,n),l(t.$$.fragment,n),o=!0)},o(n){p(e.$$.fragment,n),p(t.$$.fragment,n),o=!1},d(n){n&&k(r),d(e,n),d(t,n)}}}function Ie(a){let e,r,t,o,n,i,c,m,C,O,h,N,v,$,w;const y=[Ce,Oe],x=[];function I(s,f){return s[3]==="post"||s[3]==="box"||s[2]?0:1}e=I(a),r=x[e]=y[e](a),n=new le({props:{onMoveend:a[5]}});let u=a[0].length>0&&W(a);const ee=[Pe,ye],D=[];function te(s,f){return s[3]==="post"||s[3]==="box"?0:1}m=te(a),C=D[m]=ee[m](a);function re(s){a[8](s)}let F={};return a[1]!==void 0&&(F.isOpen=a[1]),h=new Be({props:F}),J.push(()=>X(h,"isOpen",re)),$=new ce({props:{show:a[3]!=="post"}}),{c(){r.c(),t=P(),o=ne("div"),_(n.$$.fragment),i=P(),u&&u.c(),c=P(),C.c(),O=P(),_(h.$$.fragment),v=P(),_($.$$.fragment),this.h()},l(s){r.l(s),t=S(s),o=se(s,"DIV",{class:!0});var f=oe(o);g(n.$$.fragment,f),f.forEach(k),i=S(s),u&&u.l(s),c=S(s),C.l(s),O=S(s),g(h.$$.fragment,s),v=S(s),g($.$$.fragment,s),this.h()},h(){ae(o,"class","fixed top-0 left-0 w-full h-full")},m(s,f){x[e].m(s,f),B(s,t,f),B(s,o,f),b(n,o,null),B(s,i,f),u&&u.m(s,f),B(s,c,f),D[m].m(s,f),B(s,O,f),b(h,s,f),B(s,v,f),b($,s,f),w=!0},p(s,[f]){let A=e;e=I(s),e!==A&&(j(),p(x[A],1,1,()=>{x[A]=null}),R(),r=x[e],r||(r=x[e]=y[e](s),r.c()),l(r,1),r.m(t.parentNode,t)),s[0].length>0?u?(u.p(s,f),f&1&&l(u,1)):(u=W(s),u.c(),l(u,1),u.m(c.parentNode,c)):u&&(j(),p(u,1,1,()=>{u=null}),R()),C.p(s,f);const M={};!N&&f&2&&(N=!0,M.isOpen=s[1],T(()=>N=!1)),h.$set(M)},i(s){w||(l(r),l(n.$$.fragment,s),l(u),l(C),l(h.$$.fragment,s),l($.$$.fragment,s),w=!0)},o(s){p(r),p(n.$$.fragment,s),p(u),p(C),p(h.$$.fragment,s),p($.$$.fragment,s),w=!1},d(s){s&&(k(t),k(o),k(i),k(c),k(O),k(v)),x[e].d(s),d(n),u&&u.d(s),D[m].d(s),d(h,s),d($,s)}}}function De(a,e,r){let t,o;ie(a,$e,$=>r(6,o=$));let n=[];const i=o.url.searchParams.get("type"),c=o.url.searchParams.get("tags");c&&U.set(c.split(","));let m=!1;E.on("openSearch",()=>{r(1,m=!0)}),E.on("closeSearch",()=>{r(1,m=!1)}),fe(()=>{U.set([])});async function C(){if(i==="box"){const $=o.url.searchParams.get("boxIdx"),w=Number(o.url.searchParams.get("boxIdx")),y=pe(),x=o.url.searchParams.get("placeIdx");if(Number.isNaN(w)||!$||!y||!x)return q("/boxes");(await de(y,$,x)).ok||E.emit("pushSnackbar",{message:"장소 추가에 실패했습니다."}),q(`/boxes/${$}/detail`)}else i==="post"&&me("/viewer/edit")}let O;async function h($){try{O&&O.abort("new request"),O=new AbortController;const w=await he($,O);if(!w.ok)return;const y=await w.json();r(0,n=y.data)}catch{}}const N=()=>window.history.back();function v($){m=$,r(1,m)}return a.$$.update=()=>{a.$$.dirty&64&&r(2,t=o.url.searchParams.get("withBack")==="true")},[n,m,t,i,C,h,o,N,v]}class tt extends L{constructor(e){super(),Q(this,e,De,Ie,z,{})}}export{tt as component};
