import{g as Q}from"../chunks/entry.Z5ixVeuu.js";import{A as nt,g as st}from"../chunks/emitter.ayfdCPcU.js";import{s as L,m as U,o as R,b as C,f as g,l as f,i as P,h as x,n as V,x as W,a as E,g as S,z as X,k as lt,e as I,c as q,y as H,u as G,r as tt}from"../chunks/scheduler.nR6IvPDU.js";import{S as F,i as J,e as Y,c as j,a as A,m as M,t as B,b as O,d as Z}from"../chunks/index.BYRHYcqC.js";import{H as rt}from"../chunks/Header.DCrI1re2.js";import{V as it}from"../chunks/Viewer.CWnxc96c.js";/* empty css                                                   */import"../chunks/heic2any.CdeiGWSs.js";/* empty css                                                     */import{p as at}from"../chunks/stores.BobLgOAO.js";import{N as ot}from"../chunks/NavigationBar.DSlnoijg.js";import{A as ft}from"../chunks/ActionSheet.BRTgv1Mv.js";/* empty css                                                   */import{r as et}from"../chunks/units.BJZU6p1c.js";import{M as ct}from"../chunks/Modal.Ds8LVFOn.js";function ut(n){let t,e;return{c(){t=U("svg"),e=U("path"),this.h()},l(s){t=R(s,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var l=C(t);e=R(l,"path",{d:!0}),C(e).forEach(g),l.forEach(g),this.h()},h(){f(e,"d","M200-200h57l391-391-57-57-391 391v57Zm-40 80q-17 0-28.5-11.5T120-160v-97q0-16 6-30.5t17-25.5l505-504q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L313-143q-11 11-25.5 17t-30.5 6h-97Zm600-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 -960 960 960"),f(t,"width",n[1]),f(t,"height",n[1]),f(t,"fill",n[0])},m(s,l){P(s,t,l),x(t,e)},p(s,[l]){l&2&&f(t,"width",s[1]),l&2&&f(t,"height",s[1]),l&1&&f(t,"fill",s[0])},i:V,o:V,d(s){s&&g(t)}}}function dt(n,t,e){let s,{fill:l="#5f6368"}=t,{length:i="1.75"}=t,{alt:h="Home"}=t;return n.$$set=a=>{"fill"in a&&e(0,l=a.fill),"length"in a&&e(2,i=a.length),"alt"in a&&e(3,h=a.alt)},n.$$.update=()=>{n.$$.dirty&4&&e(1,s=et(i))},[l,s,i,h]}class ht extends F{constructor(t){super(),J(this,t,dt,ut,L,{fill:0,length:2,alt:3})}}function mt(n){let t,e;return{c(){t=U("svg"),e=U("path"),this.h()},l(s){t=R(s,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var l=C(t);e=R(l,"path",{d:!0}),C(e).forEach(g),l.forEach(g),this.h()},h(){f(e,"d","M280-120q-33 0-56.5-23.5T200-200v-520q-17 0-28.5-11.5T160-760q0-17 11.5-28.5T200-800h160q0-17 11.5-28.5T400-840h160q17 0 28.5 11.5T600-800h160q17 0 28.5 11.5T800-760q0 17-11.5 28.5T760-720v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM400-280q17 0 28.5-11.5T440-320v-280q0-17-11.5-28.5T400-640q-17 0-28.5 11.5T360-600v280q0 17 11.5 28.5T400-280Zm160 0q17 0 28.5-11.5T600-320v-280q0-17-11.5-28.5T560-640q-17 0-28.5 11.5T520-600v280q0 17 11.5 28.5T560-280ZM280-720v520-520Z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 -960 960 960"),f(t,"width",n[1]),f(t,"height",n[1]),f(t,"fill",n[0])},m(s,l){P(s,t,l),x(t,e)},p(s,[l]){l&2&&f(t,"width",s[1]),l&2&&f(t,"height",s[1]),l&1&&f(t,"fill",s[0])},i:V,o:V,d(s){s&&g(t)}}}function gt(n,t,e){let s,{fill:l="#5f6368"}=t,{length:i="1.75"}=t,{alt:h="Home"}=t;return n.$$set=a=>{"fill"in a&&e(0,l=a.fill),"length"in a&&e(2,i=a.length),"alt"in a&&e(3,h=a.alt)},n.$$.update=()=>{n.$$.dirty&4&&e(1,s=et(i))},[l,s,i,h]}class pt extends F{constructor(t){super(),J(this,t,gt,mt,L,{fill:0,length:2,alt:3})}}function _t(n){let t,e,s;return e=new it({props:{posts:n[5]}}),{c(){t=I("div"),j(e.$$.fragment),this.h()},l(l){t=q(l,"DIV",{class:!0});var i=C(t);A(e.$$.fragment,i),i.forEach(g),this.h()},h(){f(t,"class","fixed top-0 left-0 w-full h-full")},m(l,i){P(l,t,i),M(e,t,null),s=!0},p:V,i(l){s||(B(e.$$.fragment,l),s=!0)},o(l){O(e.$$.fragment,l),s=!1},d(l){l&&g(t),Z(e)}}}function bt(n){let t;return{c(){t=I("div"),this.h()},l(e){t=q(e,"DIV",{class:!0}),C(t).forEach(g),this.h()},h(){f(t,"class","bg-black w-screen h-screen")},m(e,s){P(e,t,s)},p:V,i:V,o:V,d(e){e&&g(t)}}}function vt(n){let t,e,s,l,i,h="수정",a,o,c,p,u,b="삭제",k,y,w;return s=new ht({props:{fill:"white",length:1.4}}),c=new pt({props:{fill:"red",length:1.4}}),{c(){t=I("div"),e=I("button"),j(s.$$.fragment),l=E(),i=I("span"),i.textContent=h,a=E(),o=I("button"),j(c.$$.fragment),p=E(),u=I("span"),u.textContent=b,this.h()},l(d){t=q(d,"DIV",{class:!0});var _=C(t);e=q(_,"BUTTON",{class:!0});var T=C(e);A(s.$$.fragment,T),l=S(T),i=q(T,"SPAN",{"data-svelte-h":!0}),H(i)!=="svelte-17aljrl"&&(i.textContent=h),T.forEach(g),a=S(_),o=q(_,"BUTTON",{class:!0});var $=C(o);A(c.$$.fragment,$),p=S($),u=q($,"SPAN",{"data-svelte-h":!0}),H(u)!=="svelte-1k1dgz"&&(u.textContent=b),$.forEach(g),_.forEach(g),this.h()},h(){f(e,"class","w-full py-3 flex items-center gap-2 justify-center text-base font-medium tracking-wider text-white rounded-t-xl bg-[#3335] border-b border-[#333] border-collapse"),f(o,"class","w-full py-3 flex items-center gap-2 justify-center text-base font-medium tracking-wider text-[red] rounded-b-xl bg-[#3336] border-t border-[#333] border-collapse"),f(t,"class","flex flex-col items-center px-6 py-4")},m(d,_){P(d,t,_),x(t,e),M(s,e,null),x(e,l),x(e,i),x(t,a),x(t,o),M(c,o,null),x(o,p),x(o,u),k=!0,y||(w=[G(e,"click",n[14]),G(o,"click",n[15])],y=!0)},p:V,i(d){k||(B(s.$$.fragment,d),B(c.$$.fragment,d),k=!0)},o(d){O(s.$$.fragment,d),O(c.$$.fragment,d),k=!1},d(d){d&&g(t),Z(s),Z(c),y=!1,tt(w)}}}function xt(n){let t,e,s="정말로 삭제하시겠습니까?",l,i,h="이 작업은 취소할 수 없습니다. 계속 진행하시겠습니까?",a,o,c,p="삭제",u,b,k="취소",y,w;return{c(){t=I("div"),e=I("h2"),e.textContent=s,l=E(),i=I("p"),i.textContent=h,a=E(),o=I("div"),c=I("button"),c.textContent=p,u=E(),b=I("button"),b.textContent=k,this.h()},l(d){t=q(d,"DIV",{class:!0});var _=C(t);e=q(_,"H2",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1yzhdkj"&&(e.textContent=s),l=S(_),i=q(_,"P",{class:!0,"data-svelte-h":!0}),H(i)!=="svelte-26p028"&&(i.textContent=h),a=S(_),o=q(_,"DIV",{class:!0});var T=C(o);c=q(T,"BUTTON",{class:!0,"data-svelte-h":!0}),H(c)!=="svelte-1q4epan"&&(c.textContent=p),u=S(T),b=q(T,"BUTTON",{class:!0,"data-svelte-h":!0}),H(b)!=="svelte-1rzg9yy"&&(b.textContent=k),T.forEach(g),_.forEach(g),this.h()},h(){f(e,"class","text-lg font-semibold mb-2"),f(i,"class","text-gray-600 mb-4"),f(c,"class","bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition"),f(b,"class","bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition"),f(o,"class","flex justify-center space-x-4"),f(t,"class","text-center")},m(d,_){P(d,t,_),x(t,e),x(t,l),x(t,i),x(t,a),x(t,o),x(o,c),x(o,u),x(o,b),y||(w=[G(c,"click",n[17]),G(b,"click",n[18])],y=!0)},p:V,d(d){d&&g(t),y=!1,tt(w)}}}function wt(n){let t,e,s,l,i,h,a,o,c,p,u,b,k;t=new rt({props:{position:"fixed",leftBack:n[4]?"":"white",rightSearch:"white",rightPostSetting:{visible:n[3],fill:"white",onClick:n[13]}}});const y=[bt,_t],w=[];function d(r,m){return r[5].length===0?0:1}s=d(n),l=w[s]=y[s](n),h=new ot({});function _(r){n[16](r)}let T={defaultHeight:16*16,maxHeight:16*16,$$slots:{default:[vt]},$$scope:{ctx:n}};n[0]!==void 0&&(T.isOpen=n[0]),o=new ft({props:T}),W.push(()=>Y(o,"isOpen",_));function $(r){n[19](r)}let D={$$slots:{default:[xt]},$$scope:{ctx:n}};return n[1]!==void 0&&(D.modalVisible=n[1]),u=new ct({props:D}),W.push(()=>Y(u,"modalVisible",$)),{c(){j(t.$$.fragment),e=E(),l.c(),i=E(),j(h.$$.fragment),a=E(),j(o.$$.fragment),p=E(),j(u.$$.fragment)},l(r){A(t.$$.fragment,r),e=S(r),l.l(r),i=S(r),A(h.$$.fragment,r),a=S(r),A(o.$$.fragment,r),p=S(r),A(u.$$.fragment,r)},m(r,m){M(t,r,m),P(r,e,m),w[s].m(r,m),P(r,i,m),M(h,r,m),P(r,a,m),M(o,r,m),P(r,p,m),M(u,r,m),k=!0},p(r,[m]){const N={};m&16&&(N.leftBack=r[4]?"":"white"),m&9&&(N.rightPostSetting={visible:r[3],fill:"white",onClick:r[13]}),t.$set(N),l.p(r,m);const z={};m&8388615&&(z.$$scope={dirty:m,ctx:r}),!c&&m&1&&(c=!0,z.isOpen=r[0],X(()=>c=!1)),o.$set(z);const v={};m&8388610&&(v.$$scope={dirty:m,ctx:r}),!b&&m&2&&(b=!0,v.modalVisible=r[1],X(()=>b=!1)),u.$set(v)},i(r){k||(B(t.$$.fragment,r),B(l),B(h.$$.fragment,r),B(o.$$.fragment,r),B(u.$$.fragment,r),k=!0)},o(r){O(t.$$.fragment,r),O(l),O(h.$$.fragment,r),O(o.$$.fragment,r),O(u.$$.fragment,r),k=!1},d(r){r&&(g(e),g(i),g(a),g(p)),Z(t,r),w[s].d(r),Z(h,r),Z(o,r),Z(u,r)}}}function kt(n,t,e){let s,l,i,h,a,o,c,p;lt(n,at,v=>e(12,p=v));let{data:u}=t,b=u.posts,k=u.tokenIdx,y=u.token,w=!1,d=!1;function _(){fetch(`${nt}/posts/${i}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`}}).then(v=>v.json()).then(()=>Q(`/users/${k}`,{replaceState:!0,invalidateAll:!0}))}const T=()=>{e(0,w=!0)},$=()=>{e(0,w=!1),Q(`/viewer/edit?type=patch&postIdx=${i}`,{replaceState:!1,invalidateAll:!1})},D=()=>{e(0,w=!1),e(1,d=!0)};function r(v){w=v,e(0,w)}const m=()=>{_(),e(1,d=!1)},N=()=>{e(1,d=!1)};function z(v){d=v,e(1,d)}return n.$$set=v=>{"data"in v&&e(7,u=v.data)},n.$$.update=()=>{var v,K;n.$$.dirty&4096&&e(10,s=p.url.searchParams.get("placeIdx")),n.$$.dirty&4096&&e(9,l=p.url.searchParams.get("userIdx")),n.$$.dirty&4096&&e(11,a=p.url.searchParams.get("pidx")),n.$$.dirty&2048&&e(2,i=(v=b[a])==null?void 0:v.idx),n.$$.dirty&2048&&e(8,h=(K=b[a])==null?void 0:K.user_idx),n.$$.dirty&4096&&p.url.searchParams.get("midx"),n.$$.dirty&1536&&e(4,o=!s&&!l),n.$$.dirty&256&&e(3,c=String(k)===String(h))},[w,d,i,c,o,b,_,u,h,l,s,a,p,T,$,D,r,m,N,z]}class Ht extends F{constructor(t){super(),J(this,t,kt,wt,L,{data:7})}}const Tt=async({fetch:n,url:t})=>{console.warn("viewer/+page.ts load");const e=sessionStorage.getItem("jwt"),s=st(),l=t.searchParams.get("placeIdx"),i=t.searchParams.get("userIdx"),h=l?`&placeIdx=${l}`:"",a=i?`&userIdx=${i}`:"";return{posts:await n(`https://azit.surflux.studio/posts?${h}${a}&limit=30`,{method:"GET",headers:{Authorization:"Bearer "+e}}).then(c=>c.json()).then(c=>c.data.map(p=>({...p,mediaIdx:0})))||[],tokenIdx:s,token:e}},Nt=Object.freeze(Object.defineProperty({__proto__:null,load:Tt},Symbol.toStringTag,{value:"Module"}));export{Ht as component,Nt as universal};
