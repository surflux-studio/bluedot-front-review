import{s as U,l as V,a as x,e as W,g as C,c as G,b as J,f as _,m as K,i as k,o as L,k as Q,n as X,t as E,d as F}from"../chunks/scheduler.Bw1HVZ4I.js";import{S as Y,i as Z,e as ee,c as g,a as b,m as d,t as u,b as m,d as h}from"../chunks/index.B-tLs4nj.js";import{g as I}from"../chunks/entry.BXNUqQsT.js";import{F as R}from"../chunks/Footer.b-5cu3wW.js";import{H as z}from"../chunks/Header.Cp1slpPh.js";import{M as te}from"../chunks/Map.B3ZvsewZ.js";import{N as re}from"../chunks/NavigationBar.DmT8hIz5.js";import{B as A}from"../chunks/Button.CrulLpn4.js";import{g as se}from"../chunks/searchParams.DutnsLNr.js";import{e as N}from"../chunks/units.qluQ__4t.js";import{p as ne}from"../chunks/stores.DvKb9PLv.js";import{S as oe}from"../chunks/SearchSheet.7n--_w5u.js";function ae(a){let t,r;return t=new z({props:{position:"fixed",rightFeed:!0}}),{c(){g(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,o){d(t,e,o),r=!0},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){h(t,e)}}}function ie(a){let t,r;return t=new z({props:{position:"fixed",leftBack:!0}}),{c(){g(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,o){d(t,e,o),r=!0},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){h(t,e)}}}function fe(a){let t,r;return t=new R({props:{position:"fixed",leftReposition:!0,centerSearch:!0,right:"add"}}),{c(){g(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,o){d(t,e,o),r=!0},p:X,i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){h(t,e)}}}function le(a){let t,r;return t=new R({props:{position:"fixed",bottom:"2rem",$$slots:{default:[me]},$$scope:{ctx:a}}}),{c(){g(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,o){d(t,e,o),r=!0},p(e,o){const n={};o&64&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){h(t,e)}}}function ce(a){let t;return{c(){t=E("이 장소가 아니예요")},l(r){t=F(r,"이 장소가 아니예요")},m(r,e){k(r,t,e)},d(r){r&&_(t)}}}function ue(a){let t;return{c(){t=E("이 장소가 맞아요")},l(r){t=F(r,"이 장소가 맞아요")},m(r,e){k(r,t,e)},d(r){r&&_(t)}}}function me(a){let t,r,e,o;return t=new A({props:{backgroundColor:"bg-gray-300",textColor:"text-white",$$slots:{default:[ce]},$$scope:{ctx:a}}}),t.$on("click",a[3]),e=new A({props:{backgroundColor:"bg-primary-500",textColor:"text-white",$$slots:{default:[ue]},$$scope:{ctx:a}}}),e.$on("click",a[2]),{c(){g(t.$$.fragment),r=x(),g(e.$$.fragment)},l(n){b(t.$$.fragment,n),r=C(n),b(e.$$.fragment,n)},m(n,f){d(t,n,f),k(n,r,f),d(e,n,f),o=!0},p(n,f){const $={};f&64&&($.$$scope={dirty:f,ctx:n}),t.$set($);const c={};f&64&&(c.$$scope={dirty:f,ctx:n}),e.$set(c)},i(n){o||(u(t.$$.fragment,n),u(e.$$.fragment,n),o=!0)},o(n){m(t.$$.fragment,n),m(e.$$.fragment,n),o=!1},d(n){n&&_(r),h(t,n),h(e,n)}}}function $e(a){let t,r,e,o,n,f,$,c,l,p,B,S,w,y;const H=[ie,ae],O=[];function M(s,i){return s[1]==="post"||s[1]==="box"?0:1}t=M(a),r=O[t]=H[t](a),n=new te({});const j=[le,fe],v=[];function q(s,i){return s[1]==="post"||s[1]==="box"?0:1}$=q(a),c=v[$]=j[$](a);function T(s){a[4](s)}let P={};return a[0]!==void 0&&(P.isOpen=a[0]),p=new oe({props:P}),V.push(()=>ee(p,"isOpen",T)),w=new re({props:{show:a[1]!=="post"}}),{c(){r.c(),e=x(),o=W("div"),g(n.$$.fragment),f=x(),c.c(),l=x(),g(p.$$.fragment),S=x(),g(w.$$.fragment),this.h()},l(s){r.l(s),e=C(s),o=G(s,"DIV",{class:!0});var i=J(o);b(n.$$.fragment,i),i.forEach(_),f=C(s),c.l(s),l=C(s),b(p.$$.fragment,s),S=C(s),b(w.$$.fragment,s),this.h()},h(){K(o,"class","fixed top-0 left-0 w-full h-full")},m(s,i){O[t].m(s,i),k(s,e,i),k(s,o,i),d(n,o,null),k(s,f,i),v[$].m(s,i),k(s,l,i),d(p,s,i),k(s,S,i),d(w,s,i),y=!0},p(s,[i]){c.p(s,i);const D={};!B&&i&1&&(B=!0,D.isOpen=s[0],L(()=>B=!1)),p.$set(D)},i(s){y||(u(r),u(n.$$.fragment,s),u(c),u(p.$$.fragment,s),u(w.$$.fragment,s),y=!0)},o(s){m(r),m(n.$$.fragment,s),m(c),m(p.$$.fragment,s),m(w.$$.fragment,s),y=!1},d(s){s&&(_(e),_(o),_(f),_(l),_(S)),O[t].d(s),h(n),v[$].d(s),h(p,s),h(w,s)}}}function pe(a,t,r){let e;Q(a,ne,l=>r(5,e=l));const o=e.url.searchParams.get("type");let n=!1;N.on("openSearch",()=>{r(0,n=!0)}),N.on("closeSearch",()=>{r(0,n=!1)});async function f(){if(o==="box"){const l=Number(e.url.searchParams.get("boxIdx"));if(Number.isNaN(l)||!l)return I("/boxes");(await fetch(`https://azit.surflux.studio/boxes/${l}/places/${e.url.searchParams.get("placeIdx")}`,{method:"PUT",headers:{Authorization:`Bearer ${sessionStorage.getItem("jwt")}`}})).ok||N.emit("pushSnackbar",{message:"장소 추가에 실패했습니다."}),I(`/boxes/${l}/detail`)}else o==="post"&&se("/viewer/edit")}const $=()=>window.history.back();function c(l){n=l,r(0,n)}return[n,o,f,$,c]}class Oe extends Y{constructor(t){super(),Z(this,t,pe,$e,U,{})}}export{Oe as component};
