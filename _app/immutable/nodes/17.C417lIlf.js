import{g as $e}from"../chunks/entry.BThmTqOk.js";import{a as Ue}from"../chunks/sign.XdbD3LSG.js";import{s as Ve,m as ue,o as he,b as E,f as h,l as c,i as D,h as r,n as O,x as Be,a as T,e as b,t as y,g as q,c as w,d as C,j as R,z as Oe,k as Fe,y as Y,u as ce,r as Me}from"../chunks/scheduler.BRtuPHcG.js";import{S as ye,i as Ce,e as je,c as G,a as L,m as J,t as H,b as N,d as K}from"../chunks/index.B4yC_IY0.js";import{H as Re}from"../chunks/Header.J1W7E7Wa.js";import{V as Ge}from"../chunks/Viewer.DzbGjVuy.js";import"../chunks/emitter.E5P-NQ8u.js";/* empty css                                                   */import"../chunks/heic2any.BTnESp_i.js";/* empty css                                                     */import{p as Le}from"../chunks/stores.BWHdyZYZ.js";import{N as Je}from"../chunks/NavigationBar.BRpbHXCD.js";import{A as Ke}from"../chunks/ActionSheet.BezzKHGc.js";/* empty css                                                   */import{r as Ae}from"../chunks/units.BJZU6p1c.js";import{A as Qe}from"../chunks/constants.bFPGP2yY.js";import{M as We}from"../chunks/Modal.B04i5jop.js";function Xe(l){let e,t;return{c(){e=ue("svg"),t=ue("path"),this.h()},l(n){e=he(n,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var i=E(e);t=he(i,"path",{d:!0}),E(t).forEach(h),i.forEach(h),this.h()},h(){c(t,"d","M200-200h57l391-391-57-57-391 391v57Zm-40 80q-17 0-28.5-11.5T120-160v-97q0-16 6-30.5t17-25.5l505-504q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L313-143q-11 11-25.5 17t-30.5 6h-97Zm600-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 -960 960 960"),c(e,"width",l[1]),c(e,"height",l[1]),c(e,"fill",l[0])},m(n,i){D(n,e,i),r(e,t)},p(n,[i]){i&2&&c(e,"width",n[1]),i&2&&c(e,"height",n[1]),i&1&&c(e,"fill",n[0])},i:O,o:O,d(n){n&&h(e)}}}function Ye(l,e,t){let n,{fill:i="#5f6368"}=e,{length:f="1.75"}=e,{alt:p="Home"}=e;return l.$$set=d=>{"fill"in d&&t(0,i=d.fill),"length"in d&&t(2,f=d.length),"alt"in d&&t(3,p=d.alt)},l.$$.update=()=>{l.$$.dirty&4&&t(1,n=Ae(f))},[i,n,f,p]}class et extends ye{constructor(e){super(),Ce(this,e,Ye,Xe,Ve,{fill:0,length:2,alt:3})}}function tt(l){let e,t;return{c(){e=ue("svg"),t=ue("path"),this.h()},l(n){e=he(n,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var i=E(e);t=he(i,"path",{d:!0}),E(t).forEach(h),i.forEach(h),this.h()},h(){c(t,"d","M280-120q-33 0-56.5-23.5T200-200v-520q-17 0-28.5-11.5T160-760q0-17 11.5-28.5T200-800h160q0-17 11.5-28.5T400-840h160q17 0 28.5 11.5T600-800h160q17 0 28.5 11.5T800-760q0 17-11.5 28.5T760-720v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM400-280q17 0 28.5-11.5T440-320v-280q0-17-11.5-28.5T400-640q-17 0-28.5 11.5T360-600v280q0 17 11.5 28.5T400-280Zm160 0q17 0 28.5-11.5T600-320v-280q0-17-11.5-28.5T560-640q-17 0-28.5 11.5T520-600v280q0 17 11.5 28.5T560-280ZM280-720v520-520Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 -960 960 960"),c(e,"width",l[1]),c(e,"height",l[1]),c(e,"fill",l[0])},m(n,i){D(n,e,i),r(e,t)},p(n,[i]){i&2&&c(e,"width",n[1]),i&2&&c(e,"height",n[1]),i&1&&c(e,"fill",n[0])},i:O,o:O,d(n){n&&h(e)}}}function lt(l,e,t){let n,{fill:i="#5f6368"}=e,{length:f="1.75"}=e,{alt:p="Home"}=e;return l.$$set=d=>{"fill"in d&&t(0,i=d.fill),"length"in d&&t(2,f=d.length),"alt"in d&&t(3,p=d.alt)},l.$$.update=()=>{l.$$.dirty&4&&t(1,n=Ae(f))},[i,n,f,p]}class st extends ye{constructor(e){super(),Ce(this,e,lt,tt,Ve,{fill:0,length:2,alt:3})}}function nt(l){let e,t,n;return t=new Ge({props:{posts:l[8]}}),{c(){e=b("div"),G(t.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0});var f=E(e);L(t.$$.fragment,f),f.forEach(h),this.h()},h(){c(e,"class","fixed top-0 left-0 w-full h-full")},m(i,f){D(i,e,f),J(t,e,null),n=!0},p:O,i(i){n||(H(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){i&&h(e),K(t)}}}function it(l){let e;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),E(e).forEach(h),this.h()},h(){c(e,"class","bg-black w-screen h-screen")},m(t,n){D(t,e,n)},p:O,i:O,o:O,d(t){t&&h(e)}}}function rt(l){let e,t,n,i,f,p="수정",d,o,u,x,v,I="삭제",k,S,V;return n=new et({props:{fill:"white",length:1.4}}),u=new st({props:{fill:"red",length:1.4}}),{c(){e=b("div"),t=b("button"),G(n.$$.fragment),i=T(),f=b("span"),f.textContent=p,d=T(),o=b("button"),G(u.$$.fragment),x=T(),v=b("span"),v.textContent=I,this.h()},l(m){e=w(m,"DIV",{class:!0});var g=E(e);t=w(g,"BUTTON",{class:!0});var P=E(t);L(n.$$.fragment,P),i=q(P),f=w(P,"SPAN",{"data-svelte-h":!0}),Y(f)!=="svelte-17aljrl"&&(f.textContent=p),P.forEach(h),d=q(g),o=w(g,"BUTTON",{class:!0});var $=E(o);L(u.$$.fragment,$),x=q($),v=w($,"SPAN",{"data-svelte-h":!0}),Y(v)!=="svelte-1k1dgz"&&(v.textContent=I),$.forEach(h),g.forEach(h),this.h()},h(){c(t,"class","w-full py-3 flex items-center gap-2 justify-center text-base font-medium tracking-wider text-white rounded-t-xl bg-[#3335] border-b border-[#333] border-collapse"),c(o,"class","w-full py-3 flex items-center gap-2 justify-center text-base font-medium tracking-wider text-[red] rounded-b-xl bg-[#3336] border-t border-[#333] border-collapse"),c(e,"class","flex flex-col items-center px-6 py-4")},m(m,g){D(m,e,g),r(e,t),J(n,t,null),r(t,i),r(t,f),r(e,d),r(e,o),J(u,o,null),r(o,x),r(o,v),k=!0,S||(V=[ce(t,"click",l[15]),ce(o,"click",l[16])],S=!0)},p:O,i(m){k||(H(n.$$.fragment,m),H(u.$$.fragment,m),k=!0)},o(m){N(n.$$.fragment,m),N(u.$$.fragment,m),k=!1},d(m){m&&h(e),K(n),K(u),S=!1,Me(V)}}}function at(l){let e,t,n="정말로 삭제하시겠습니까?",i,f,p="이 작업은 취소할 수 없습니다. 계속 진행하시겠습니까?",d,o,u,x="삭제",v,I,k="취소",S,V;return{c(){e=b("div"),t=b("h2"),t.textContent=n,i=T(),f=b("p"),f.textContent=p,d=T(),o=b("div"),u=b("button"),u.textContent=x,v=T(),I=b("button"),I.textContent=k,this.h()},l(m){e=w(m,"DIV",{class:!0});var g=E(e);t=w(g,"H2",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-1yzhdkj"&&(t.textContent=n),i=q(g),f=w(g,"P",{class:!0,"data-svelte-h":!0}),Y(f)!=="svelte-26p028"&&(f.textContent=p),d=q(g),o=w(g,"DIV",{class:!0});var P=E(o);u=w(P,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(u)!=="svelte-1q4epan"&&(u.textContent=x),v=q(P),I=w(P,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(I)!=="svelte-1rzg9yy"&&(I.textContent=k),P.forEach(h),g.forEach(h),this.h()},h(){c(t,"class","text-lg font-semibold mb-2"),c(f,"class","text-gray-600 mb-4"),c(u,"class","bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition"),c(I,"class","bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition"),c(o,"class","flex justify-center space-x-4"),c(e,"class","text-center")},m(m,g){D(m,e,g),r(e,t),r(e,i),r(e,f),r(e,d),r(e,o),r(o,u),r(o,v),r(o,I),S||(V=[ce(u,"click",l[18]),ce(I,"click",l[19])],S=!0)},p:O,d(m){m&&h(e),S=!1,Me(V)}}}function ot(l){let e,t,n,i,f,p,d,o,u,x,v,I,k,S,V,m,g,P,$,ee,A,te,Q,le,_,W,re,me,se=typeof l[3],ae,pe,Z,ge,_e,ve,Pe=typeof l[9],be,we,X,Ie,oe,fe,j,xe,de,M,ke,B;e=new Re({props:{position:"fixed",leftBack:l[2]?"":"white",rightSearch:"white",rightPostSetting:{visible:l[1],fill:"white",onClick:l[14]}}});const Ze=[it,nt],Te=[];function He(s,a){return s[8].length===0?0:1}n=He(l),i=Te[n]=Ze[n](l),p=new Je({});function Ne(s){l[17](s)}let Se={defaultHeight:16*16,maxHeight:16*16,$$slots:{default:[rt]},$$scope:{ctx:l}};l[6]!==void 0&&(Se.isOpen=l[6]),j=new Ke({props:Se}),Be.push(()=>je(j,"isOpen",Ne));function ze(s){l[20](s)}let De={$$slots:{default:[at]},$$scope:{ctx:l}};return l[7]!==void 0&&(De.modalVisible=l[7]),M=new We({props:De}),Be.push(()=>je(M,"modalVisible",ze)),{c(){G(e.$$.fragment),t=T(),i.c(),f=T(),G(p.$$.fragment),d=T(),o=b("div"),u=b("div"),x=y("isFeed "),v=y(l[2]),I=T(),k=b("div"),S=y("userIdx "),V=y(l[4]),m=T(),g=b("div"),P=y("placeIdx "),$=y(l[5]),ee=T(),A=b("div"),te=y("postIdx "),Q=y(l[0]),le=T(),_=b("div"),W=y("ownerIdx "),re=y(l[3]),me=T(),ae=y(se),pe=T(),Z=b("div"),ge=y("tokenIdx "),_e=y(l[9]),ve=T(),be=y(Pe),we=T(),X=b("div"),Ie=y("isMine "),oe=y(l[1]),fe=T(),G(j.$$.fragment),de=T(),G(M.$$.fragment),this.h()},l(s){L(e.$$.fragment,s),t=q(s),i.l(s),f=q(s),L(p.$$.fragment,s),d=q(s),o=w(s,"DIV",{class:!0});var a=E(o);u=w(a,"DIV",{});var z=E(u);x=C(z,"isFeed "),v=C(z,l[2]),z.forEach(h),I=q(a),k=w(a,"DIV",{});var U=E(k);S=C(U,"userIdx "),V=C(U,l[4]),U.forEach(h),m=q(a),g=w(a,"DIV",{});var F=E(g);P=C(F,"placeIdx "),$=C(F,l[5]),F.forEach(h),ee=q(a),A=w(a,"DIV",{});var qe=E(A);te=C(qe,"postIdx "),Q=C(qe,l[0]),qe.forEach(h),le=q(a),_=w(a,"DIV",{});var ne=E(_);W=C(ne,"ownerIdx "),re=C(ne,l[3]),me=q(ne),ae=C(ne,se),ne.forEach(h),pe=q(a),Z=w(a,"DIV",{});var ie=E(Z);ge=C(ie,"tokenIdx "),_e=C(ie,l[9]),ve=q(ie),be=C(ie,Pe),ie.forEach(h),we=q(a),X=w(a,"DIV",{});var Ee=E(X);Ie=C(Ee,"isMine "),oe=C(Ee,l[1]),Ee.forEach(h),a.forEach(h),fe=q(s),L(j.$$.fragment,s),de=q(s),L(M.$$.fragment,s),this.h()},h(){c(o,"class","fixed left-1/2 top-1/2 text-white")},m(s,a){J(e,s,a),D(s,t,a),Te[n].m(s,a),D(s,f,a),J(p,s,a),D(s,d,a),D(s,o,a),r(o,u),r(u,x),r(u,v),r(o,I),r(o,k),r(k,S),r(k,V),r(o,m),r(o,g),r(g,P),r(g,$),r(o,ee),r(o,A),r(A,te),r(A,Q),r(o,le),r(o,_),r(_,W),r(_,re),r(_,me),r(_,ae),r(o,pe),r(o,Z),r(Z,ge),r(Z,_e),r(Z,ve),r(Z,be),r(o,we),r(o,X),r(X,Ie),r(X,oe),D(s,fe,a),J(j,s,a),D(s,de,a),J(M,s,a),B=!0},p(s,[a]){const z={};a&4&&(z.leftBack=s[2]?"":"white"),a&66&&(z.rightPostSetting={visible:s[1],fill:"white",onClick:s[14]}),e.$set(z),i.p(s,a),(!B||a&4)&&R(v,s[2]),(!B||a&16)&&R(V,s[4]),(!B||a&32)&&R($,s[5]),(!B||a&1)&&R(Q,s[0]),(!B||a&8)&&R(re,s[3]),(!B||a&8)&&se!==(se=typeof s[3])&&R(ae,se),(!B||a&2)&&R(oe,s[1]);const U={};a&8388801&&(U.$$scope={dirty:a,ctx:s}),!xe&&a&64&&(xe=!0,U.isOpen=s[6],Oe(()=>xe=!1)),j.$set(U);const F={};a&8388736&&(F.$$scope={dirty:a,ctx:s}),!ke&&a&128&&(ke=!0,F.modalVisible=s[7],Oe(()=>ke=!1)),M.$set(F)},i(s){B||(H(e.$$.fragment,s),H(i),H(p.$$.fragment,s),H(j.$$.fragment,s),H(M.$$.fragment,s),B=!0)},o(s){N(e.$$.fragment,s),N(i),N(p.$$.fragment,s),N(j.$$.fragment,s),N(M.$$.fragment,s),B=!1},d(s){s&&(h(t),h(f),h(d),h(o),h(fe),h(de)),K(e,s),Te[n].d(s),K(p,s),K(j,s),K(M,s)}}}function ft(l,e,t){let n,i,f,p,d,o,u,x;Fe(l,Le,_=>t(13,x=_));let{data:v}=e,I=v.posts,k=v.tokenIdx,S=v.token,V=!1,m=!1;function g(){fetch(`${Qe}/posts/${f}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`}}).then(_=>_.json()).then(()=>$e(`/users/${k}`,{replaceState:!0,invalidateAll:!0}))}const P=()=>{t(6,V=!0)},$=()=>{t(6,V=!1),$e(`/viewer/edit?type=patch&postIdx=${f}`,{replaceState:!1,invalidateAll:!1})},ee=()=>{t(6,V=!1),t(7,m=!0)};function A(_){V=_,t(6,V)}const te=()=>{g(),t(7,m=!1)},Q=()=>{t(7,m=!1)};function le(_){m=_,t(7,m)}return l.$$set=_=>{"data"in _&&t(11,v=_.data)},l.$$.update=()=>{var _,W;l.$$.dirty&8192&&t(5,n=x.url.searchParams.get("placeIdx")),l.$$.dirty&8192&&t(4,i=x.url.searchParams.get("userIdx")),l.$$.dirty&8192&&t(12,d=x.url.searchParams.get("pidx")),l.$$.dirty&4096&&t(0,f=(_=I[d])==null?void 0:_.idx),l.$$.dirty&4096&&t(3,p=(W=I[d])==null?void 0:W.user_idx),l.$$.dirty&8192&&x.url.searchParams.get("midx"),l.$$.dirty&48&&t(2,o=!n&&!i),l.$$.dirty&8&&t(1,u=String(k)===String(p)),l.$$.dirty&63&&console.info({placeIdx:n,userIdx:i,posts:I,tokenIdx:k,postIdx:f,ownerIdx:p,isFeed:o,isMine:u,token:S})},[f,u,o,p,i,n,V,m,I,k,g,v,d,x,P,$,ee,A,te,Q,le]}class yt extends ye{constructor(e){super(),Ce(this,e,ft,ot,Ve,{data:11})}}const dt=async({fetch:l,url:e})=>{console.warn("viewer/+page.ts load");const t=sessionStorage.getItem("jwt"),n=Ue(),i=e.searchParams.get("placeIdx"),f=e.searchParams.get("userIdx"),p=i?`&placeIdx=${i}`:"",d=f?`&userIdx=${f}`:"";return{posts:await l(`https://azit.surflux.studio/posts?${p}${d}&limit=30`,{method:"GET",headers:{Authorization:"Bearer "+t}}).then(u=>u.json()).then(u=>u.data.map(x=>({...x,mediaIdx:0})))||[],tokenIdx:n,token:t}},Ct=Object.freeze(Object.defineProperty({__proto__:null,load:dt},Symbol.toStringTag,{value:"Module"}));export{yt as component,Ct as universal};
