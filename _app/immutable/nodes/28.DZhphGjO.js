import{l as U,s as Z,e as _,a as B,t as J,c as h,b as k,f as i,g as N,A as L,d as M,v as u,i as I,h as c,N as G,B as R,j as ee,F as te,k as ae,O as se}from"../chunks/scheduler.BVPf9D5l.js";import{c as P,d as re,A as K,b as Q,g as W,f as X,e as Y}from"../chunks/sign.Dh6oTB_X.js";import{r as le}from"../chunks/index.g5YcAAdQ.js";import{S as ne,i as ie,c as ue,d as oe,m as ce,t as de,a as me,e as fe}from"../chunks/index.CyEs2R8T.js";import{g as pe}from"../chunks/entry.065KSUm9.js";import{H as _e}from"../chunks/Header.D1U0DLlI.js";const he=async({})=>{if(U(P)!==!0||U(re)!==!0)throw le(302,"/")},ke=Object.freeze(Object.defineProperty({__proto__:null,load:he},Symbol.toStringTag,{value:"Module"}));function ve(n){let p,d,o,v,t,l,g="블루닷에서 사용할<br/>이름을 등록해주세요.",w,m,E="설정한 이름은 프로필 편집에서 변경 가능합니다.",q,s,r,b,f,D=(n[0].length>0&&n[1].uniqueName?n[1].uniqueName:"")+"",S,$,x,C,V,A,y,j,T;return o=new _e({props:{leftBack:"white"}}),{c(){p=_("div"),d=B(),ue(o.$$.fragment),v=B(),t=_("div"),l=_("div"),l.innerHTML=g,w=B(),m=_("div"),m.textContent=E,q=B(),s=_("div"),r=_("input"),b=B(),f=_("div"),S=J(D),$=B(),x=_("div"),C=_("div"),V=J("등록"),this.h()},l(e){p=h(e,"DIV",{class:!0}),k(p).forEach(i),d=N(e),oe(o.$$.fragment,e),v=N(e),t=h(e,"DIV",{class:!0});var a=k(t);l=h(a,"DIV",{class:!0,"data-svelte-h":!0}),L(l)!=="svelte-11nwzub"&&(l.innerHTML=g),w=N(a),m=h(a,"DIV",{class:!0,"data-svelte-h":!0}),L(m)!=="svelte-1851eu9"&&(m.textContent=E),q=N(a),s=h(a,"DIV",{class:!0});var z=k(s);r=h(z,"INPUT",{type:!0,class:!0,placeholder:!0}),z.forEach(i),b=N(a),f=h(a,"DIV",{class:!0});var H=k(f);S=M(H,D),H.forEach(i),a.forEach(i),$=N(e),x=h(e,"DIV",{class:!0});var O=k(x);C=h(O,"DIV",{class:!0});var F=k(C);V=M(F,"등록"),F.forEach(i),O.forEach(i),this.h()},h(){u(p,"class","fixed w-full h-full bg-black -z-10"),u(l,"class","mt-12 text-2xl leading-[1.95rem] tracking-[-0.003rem] font-bold text-start break-words"),u(m,"class","mt-3 text-sm"),u(r,"type","text"),u(r,"class","flex-grow py-2.5 px-1 bg-black border-0 cursor-not-allowed text-sm read-only:text-[#B3B8BD] border-b border-[#3F3F3F] placeholder:text-[#757475] "),u(r,"placeholder","본명 혹은 닉네임을 입력하세요"),u(s,"class","mt-9 flex flex-col gap-2"),u(f,"class","mt-2 text-xs text-[#757475]"),u(t,"class","flex flex-col px-5 text-white"),u(C,"class",A="w-full py-3.5 px-4 rounded-[62.5rem] text-white text-center font-semibold text-base "+(n[2]?"bg-primary-500":"bg-[#383838CC]")),u(x,"class","fixed bottom-[2.13rem] left-0 right-0 w-full px-5")},m(e,a){I(e,p,a),I(e,d,a),ce(o,e,a),I(e,v,a),I(e,t,a),c(t,l),c(t,w),c(t,m),c(t,q),c(t,s),c(s,r),G(r,n[0]),c(t,b),c(t,f),c(f,S),I(e,$,a),I(e,x,a),c(x,C),c(C,V),y=!0,j||(T=[R(r,"input",n[4]),R(C,"click",n[5])],j=!0)},p(e,[a]){a&1&&r.value!==e[0]&&G(r,e[0]),(!y||a&3)&&D!==(D=(e[0].length>0&&e[1].uniqueName?e[1].uniqueName:"")+"")&&ee(S,D),(!y||a&4&&A!==(A="w-full py-3.5 px-4 rounded-[62.5rem] text-white text-center font-semibold text-base "+(e[2]?"bg-primary-500":"bg-[#383838CC]")))&&u(C,"class",A)},i(e){y||(de(o.$$.fragment,e),y=!0)},o(e){me(o.$$.fragment,e),y=!1},d(e){e&&(i(p),i(d),i(v),i(t),i($),i(x)),fe(o,e),j=!1,te(T)}}}function Ce(n,p,d){let o,v;ae(n,P,s=>d(7,v=s));let t="",l={uniqueName:""},g=!1;function w(s){let r=!0;return d(1,l.uniqueName="",l),/^[a-z0-9._]{1,30}$/.test(s)||(d(1,l.uniqueName="영어 소문자, 숫자, ., _ 로 최대 30자 까지만 허용됩니다.",l),r=!1),r}async function m(){if(!w(t)||g)return;g=!0;let s=await fetch(`${K}/auth/users/${Q()}`,{method:"PATCH",headers:{Authorization:`Bearer ${W()}`,"Content-Type":"application/json"},body:JSON.stringify({uniqueName:t})});if(s.ok)X((await s.json()).data.access);else{const b=await s.json(),f=b.error.message;throw console.warn(f),f.includes("users_unique_name_key")?Y.emit("pushSnackbar",{message:"중복된 이름입니다."}):Y.emit("pushSnackbar",{message:b.error.message}),g=!1,new Error(f)}s=await fetch(`${K}/auth/users/${Q()}`,{method:"PATCH",headers:{Authorization:`Bearer ${W()}`,"Content-Type":"application/json"},body:JSON.stringify({signedUp:!0})});const r=await s.json();X(r.data.access),se(P,v=!1,v),g=!1}function E(){t=this.value,d(0,t)}const q=async()=>{o?(await m(),await pe("/users")):(checked1=!0,checked2=!0,checked3=!0)};return n.$$.update=()=>{n.$$.dirty&1&&d(2,o=w(t))},[t,l,o,m,E,q]}class Ne extends ne{constructor(p){super(),ie(this,p,Ce,ve,Z,{})}}export{Ne as component,ke as universal};
