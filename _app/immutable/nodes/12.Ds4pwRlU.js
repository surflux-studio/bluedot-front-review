import{d as jt,e as J,g as Te,h as Rt,s as He,n as Fe,A as it,b as xt,I as Ee,c as lt}from"../chunks/store.mQmyAdCo.js";import{s as Ye,q as at,r as rt,b as $,f as _,v as p,i as ee,h as m,n as be,w as je,a as L,g as M,x as Re,k as Ne,m as zt,u as Lt,o as Mt,p as Ut,e as v,t as he,c as C,d as ge,A as ve,j as we,W as Oe,O as ot,z as We,I as St,R as Ht,Q as qt,C as Ge,a3 as Wt,y as Zt,P as Je}from"../chunks/scheduler.CXaZJLX8.js";import{S as Qe,i as et,b as ze,c as K,d as X,m as Y,t as S,a as D,f as Q,g as xe,e as Se}from"../chunks/index.BKOkOgp0.js";import{e as Ve}from"../chunks/each.BZq74coQ.js";import{H as Dt}from"../chunks/Header.Up7H--wX.js";import{p as At}from"../chunks/stores.BM436znX.js";/* empty css                                                   */import{a as pt}from"../chunks/link_preview.DfKqbwsY.js";import{C as Ft}from"../chunks/CircleImage.DfILX9QQ.js";import{g as ht}from"../chunks/entry.DkKUt85L.js";import{N as Gt}from"../chunks/NavigationBar.CacLP1LW.js";import{i as Ze,g as Pe}from"../chunks/sign.MjN5cNxG.js";import{g as qe,u as ut,s as Jt}from"../chunks/searchParams.BnAD7qVt.js";import{f as Kt}from"../chunks/proj.C890k1jX.js";import{g as Ke,a as ft,s as Le}from"../chunks/s32cloudfront.DPtLQakp.js";import{B as Xt}from"../chunks/BottomNavigationPadder.Bqi_Gg5i.js";import{C as Yt,I as Qt,a as en}from"../chunks/ChipInstagram.CZ7hyquG.js";import{I as tn}from"../chunks/IconEarth.xQFLkIYb.js";import{C as nn,I as gt,a as ln}from"../chunks/IconCamera.TT9gk9SA.js";import{r as Ot}from"../chunks/units.BJZU6p1c.js";import{C as an,F as rn,a as sn,c as on,u as ct,t as un,b as fn}from"../chunks/photo.B_P8CKZB.js";import{A as Pt}from"../chunks/ActionSheet.DhUuq427.js";import{F as Tt}from"../chunks/Field.CeCU-VKa.js";import{i as Xe,C as Vt}from"../chunks/device.vong-IOQ.js";import{I as dt}from"../chunks/IconAdd.OCGhkPl8.js";import{F as Nt}from"../chunks/Figure.C5nLO9QV.js";import{g as _t}from"../chunks/color.C_Jm4JAr.js";/* empty css                                                   */import{w as cn,I as dn}from"../chunks/utils.BsMd-0wK.js";import{g as mn,p as pn}from"../chunks/boxRequest.Cr5FIcXQ.js";import"../chunks/ActionSheet.svelte_svelte_type_style_lang.BOGpJOF2.js";import{A as hn}from"../chunks/ActionSheetOpenApp.D51_icIt.js";import{i as gn}from"../chunks/isVideoFile.DGBlGWVm.js";function _n(){jt.set(!0)}const Bl=Object.freeze(Object.defineProperty({__proto__:null,load:_n},Symbol.toStringTag,{value:"Module"}));function bn(l){let e,n,t;return{c(){e=at("svg"),n=at("path"),t=at("path"),this.h()},l(a){e=rt(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=$(e);n=rt(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),$(n).forEach(_),t=rt(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),$(t).forEach(_),o.forEach(_),this.h()},h(){p(n,"fill-rule","evenodd"),p(n,"clip-rule","evenodd"),p(n,"d","M8.20491 8.01013C8.20491 7.75488 8.48122 7.59535 8.70227 7.72298L12.3012 9.80084C12.5223 9.92846 12.5223 10.2475 12.3012 10.3751L8.70227 12.453C8.48122 12.5806 8.20491 12.4211 8.20491 12.1659V8.01013ZM11.3776 10.088L8.91543 11.5095V8.66649L11.3776 10.088Z"),p(n,"fill",l[0]),p(t,"fill-rule","evenodd"),p(t,"clip-rule","evenodd"),p(t,"d","M16.4036 16.0081C17.6446 15.9003 18.653 14.9592 18.793 13.7213C18.9286 12.5224 19 11.2772 19 9.99977C19 8.72237 18.9286 7.47716 18.793 6.27822C18.653 5.04038 17.6446 4.09927 16.4036 3.99143C14.3775 3.81539 12.2275 3.7207 9.99998 3.7207C7.77252 3.7207 5.62246 3.81538 3.59642 3.99143C2.35536 4.09926 1.34697 5.04037 1.207 6.27822C1.07143 7.47716 1 8.72236 1 9.99977C1 11.2772 1.07143 12.5224 1.207 13.7213C1.34697 14.9592 2.35536 15.9003 3.59642 16.0081C5.62246 16.1842 7.77252 16.2788 9.99998 16.2788C12.2275 16.2788 14.3775 16.1842 16.4036 16.0081ZM18.0526 9.99977C18.0526 11.242 17.9832 12.4517 17.8516 13.6149C17.7646 14.3843 17.1342 14.9937 16.3216 15.0643C14.3236 15.2379 12.2009 15.3315 9.99998 15.3315C7.79908 15.3315 5.6764 15.2379 3.67843 15.0643C2.86583 14.9937 2.23536 14.3843 2.14837 13.6149C2.01684 12.4517 1.94737 11.242 1.94737 9.99977C1.94737 8.75755 2.01684 7.54789 2.14837 6.38466C2.23536 5.61529 2.86583 5.00585 3.67843 4.93524C5.6764 4.76164 7.79908 4.66807 9.99998 4.66807C12.2009 4.66807 14.3236 4.76164 16.3216 4.93525C17.1342 5.00585 17.7646 5.61529 17.8516 6.38467C17.9832 7.54789 18.0526 8.75755 18.0526 9.99977Z"),p(t,"fill",l[0]),p(e,"width",l[1]),p(e,"height",l[1]),p(e,"viewBox","0 0 20 20"),p(e,"fill","none"),p(e,"xmlns","http://www.w3.org/2000/svg")},m(a,o){ee(a,e,o),m(e,n),m(e,t)},p(a,[o]){o&1&&p(n,"fill",a[0]),o&1&&p(t,"fill",a[0]),o&2&&p(e,"width",a[1]),o&2&&p(e,"height",a[1])},i:be,o:be,d(a){a&&_(e)}}}function vn(l,e,n){let t,{fill:a="#5f6368"}=e,{length:o="1.75"}=e;return l.$$set=r=>{"fill"in r&&n(0,a=r.fill),"length"in r&&n(2,o=r.length)},l.$$.update=()=>{l.$$.dirty&4&&n(1,t=Ot(o))},[a,t,o]}class bt extends Qe{constructor(e){super(),et(this,e,vn,bn,Ye,{fill:0,length:2})}}async function Cn(l={limit:12}){try{if(Xe){const t=await an.requestPermissions({permissions:["photos"]});if(t.photos!=="granted"&&t.photos!=="limited")return J.emit("pushSnackbar",{message:"사진에 접근할 수 없습니다. 권한을 허용해주세요."}),console.warn("Photos permission not granted"),[]}const e=(await rn.pickImages({readData:!0,limit:l.limit||12,ordered:!0})).files;J.emit("loading",!0);const n=[];for await(const t of e){if(!t.data)continue;const a=await sn.gps(t.data).catch(w=>(console.warn("GPS 정보 추출 실패:",w),null));let o=atob(t.data),r=new Array(o.length);for(let w=0;w<o.length;w++)r[w]=o.charCodeAt(w);let s=new Uint8Array(r),i=new Blob([s],{type:t.mimeType}),u=new File([i],"photo.jpg",{type:t.mimeType}),c=await wn(u,1024),h=await on(c,.7),g=await ct([{file:h,latitude:a==null?void 0:a.latitude,longitude:a==null?void 0:a.longitude}]);J.emit("loading",!0),n.push(...g),h=null,u=null,c=null,i=null,o=null,r=null,s=null,await new Promise(w=>setTimeout(w,500)),window.gc&&window.gc()}return J.emit("loading",!1),n}catch(e){return J.emit("loading",!1),console.error(e),[]}}async function wn(l,e=2048){return new Promise(n=>{const t=new Image;t.onload=()=>{const a=document.createElement("canvas");let o=t.width,r=t.height;(o>e||r>e)&&(o>r?(r=Math.round(r*e/o),o=e):(o=Math.round(o*e/r),r=e)),a.width=o,a.height=r;const s=a.getContext("2d");s==null||s.drawImage(t,0,0,o,r),a.toBlob(i=>{i&&n(new File([i],"resized.jpg",{type:"image/jpeg"})),URL.revokeObjectURL(t.src),a.width=0,a.height=0},"image/jpeg",.7)},t.src=URL.createObjectURL(l)})}function $n(l){let e;const n=l[8].default,t=zt(n,l,l[12],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,o){t&&t.m(a,o),e=!0},p(a,o){t&&t.p&&(!e||o&4096)&&Lt(t,n,a,a[12],e?Ut(n,a[12],o,null):Mt(a[12]),null)},i(a){e||(S(t,a),e=!0)},o(a){D(t,a),e=!1},d(a){t&&t.d(a)}}}function kn(l){let e,n,t,a=l[1]==="youtube"?"유튜브 링크":"인스타그램 링크",o,r,s,i,u,c,h,g,w,f,x,F;function I(y){l[9](y)}let E={round:"rounded-lg",border:"border border-[#3F3F3F]",backgroundColor:"bg-transparent",fontSize:"font-normal text-sm",fontColor:"text-white placeholder:text-[#757475]",placeholder:"URL 붙여넣기",onInput:l[4]};return l[2]!==void 0&&(E.value=l[2]),g=new Tt({props:E}),je.push(()=>ze(g,"value",I)),{c(){e=v("div"),n=v("div"),t=v("p"),o=he(a),r=L(),s=v("button"),i=he("첨부"),c=L(),h=v("div"),K(g.$$.fragment),this.h()},l(y){e=C(y,"DIV",{class:!0});var A=$(e);n=C(A,"DIV",{class:!0});var N=$(n);t=C(N,"P",{class:!0});var j=$(t);o=ge(j,a),j.forEach(_),r=M(N),s=C(N,"BUTTON",{class:!0});var T=$(s);i=ge(T,"첨부"),T.forEach(_),N.forEach(_),c=M(A),h=C(A,"DIV",{class:!0});var b=$(h);X(g.$$.fragment,b),b.forEach(_),A.forEach(_),this.h()},h(){p(t,"class","text-white text-sm font-semibold leading-[17px]"),p(s,"class","text-sm font-normal text-primary-500 disabled:text-[#757475]"),s.disabled=u=l[2]===""||l[1]==="youtube"&&!Ke(l[2])||l[1]==="instagram"&&!ft(l[2]),p(n,"class","flex justify-between items-center py-2.5"),p(h,"class","py-1"),p(e,"class","px-5 text-white")},m(y,A){ee(y,e,A),m(e,n),m(n,t),m(t,o),m(n,r),m(n,s),m(s,i),m(e,c),m(e,h),Y(g,h,null),f=!0,x||(F=ve(s,"click",l[5]),x=!0)},p(y,A){(!f||A&2)&&a!==(a=y[1]==="youtube"?"유튜브 링크":"인스타그램 링크")&&we(o,a),(!f||A&6&&u!==(u=y[2]===""||y[1]==="youtube"&&!Ke(y[2])||y[1]==="instagram"&&!ft(y[2])))&&(s.disabled=u);const N={};!w&&A&4&&(w=!0,N.value=y[2],Re(()=>w=!1)),g.$set(N)},i(y){f||(S(g.$$.fragment,y),f=!0)},o(y){D(g.$$.fragment,y),f=!1},d(y){y&&_(e),Q(g),x=!1,F()}}}function In(l){let e,n,t,a,o;e=new nn({props:{shrink:!1,ydistance:9.5+12,items:l[3],$$slots:{default:[$n]},$$scope:{ctx:l}}});function r(i){l[11](i)}let s={sheetBackground:"bg-[#222222]",noHandle:!0,fixed:!0,onClose:l[10],$$slots:{default:[kn]},$$scope:{ctx:l}};return l[0]!==void 0&&(s.isOpen=l[0]),t=new Pt({props:s}),je.push(()=>ze(t,"isOpen",r)),{c(){K(e.$$.fragment),n=L(),K(t.$$.fragment)},l(i){X(e.$$.fragment,i),n=M(i),X(t.$$.fragment,i)},m(i,u){Y(e,i,u),ee(i,n,u),Y(t,i,u),o=!0},p(i,[u]){const c={};u&4096&&(c.$$scope={dirty:u,ctx:i}),e.$set(c);const h={};u&7&&(h.onClose=i[10]),u&4102&&(h.$$scope={dirty:u,ctx:i}),!a&&u&1&&(a=!0,h.isOpen=i[0],Re(()=>a=!1)),t.$set(h)},i(i){o||(S(e.$$.fragment,i),S(t.$$.fragment,i),o=!0)},o(i){D(e.$$.fragment,i),D(t.$$.fragment,i),o=!1},d(i){i&&_(n),Q(e,i),Q(t,i)}}}function En(l,e,n){let t;Ne(l,Te,b=>n(15,t=b));let{$$slots:a={},$$scope:o}=e,{placeIdx:r=0}=e,{placeName:s=""}=e,{isOpenEmbedSeet:i=!1}=e;const u=Vt.isNativePlatform();let c,h="",g=!1,w=!1;async function f(){const b=await Cn({limit:12});b.length!==0&&(Oe(Te,t=b,t),await qe("/viewer/edit",{type:"post",placeIdx:String(r),placeName:s},{replaceState:!1,invalidateAll:!1}))}async function x(){const b=await un(),R=await ct(b);Oe(Te,t=R,t),await qe("/viewer/edit",{type:"post",placeIdx:String(r),placeName:s},{replaceState:!1,invalidateAll:!1})}async function F(){const b=await fn({limit:12}),R=await ct(b);Oe(Te,t=R,t),await qe("/viewer/edit",{type:"post",placeIdx:String(r),placeName:s},{replaceState:!1,invalidateAll:!1})}const I=u?[{name:"사진 선택",icon:gt,onClick:f},{name:"사진 촬영",icon:ln,onClick:x},{name:"유튜브",icon:bt,onClick:()=>{n(1,c="youtube"),E()}}]:[{name:"파일 첨부",icon:gt,onClick:F},{name:"유튜브",icon:bt,onClick:()=>{n(1,c="youtube"),E()}}];function E(){if(!Ze()){J.emit("showSignInModal",{removable:!0});return}n(0,i=!0)}function y(){if(c==="youtube"&&Ke(h)){if(g)return;g=!0}else g&&(g=!1)}async function A(){if(w)return;w=!0;const b=Ke(h),R=ft(h);if(!b&&!R)return w=!1;if(b!=null&&Te.set([h]),R!=null){const z=new URL(h),Z=z.origin+z.pathname;J.emit("loading",!0);const te=await fetch(`https://azit.surflux.studio/crawler/instagram?url=${Z}`,{headers:{Authorization:`Bearer ${Pe()}`,"x-api-version":"1.0.0"}}).finally(()=>{J.emit("loading",!1),n(2,h=""),w=!1,n(0,i=!1)});if(!te.ok){J.emit("pushSnackbar",{message:"인스타그램 등록에 실패했습니다."});return}const oe=(await te.json()).data;z.searchParams.set("utm_source","bluedot"),z.searchParams.set("utm_medium","post_link"),Te.set(oe.media),Rt.set({origin:"instagram",url:z.toString(),name:oe.igUsername,text:oe.text})}await qe("/viewer/edit",{type:"post",placeIdx:String(r),placeName:s},{replaceState:!1,invalidateAll:!1})}function N(b){h=b,n(2,h)}const j=()=>{n(2,h=""),n(1,c=void 0),n(0,i=!1)};function T(b){i=b,n(0,i)}return l.$$set=b=>{"placeIdx"in b&&n(6,r=b.placeIdx),"placeName"in b&&n(7,s=b.placeName),"isOpenEmbedSeet"in b&&n(0,i=b.isOpenEmbedSeet),"$$scope"in b&&n(12,o=b.$$scope)},[i,c,h,I,y,A,r,s,a,N,j,T,o]}class yn extends Qe{constructor(e){super(),et(this,e,En,In,Ye,{placeIdx:6,placeName:7,isOpenEmbedSeet:0})}}function vt(l,e,n){const t=l.slice();return t[24]=e[n],t[26]=n,t}function Bn(l){let e;return{c(){e=v("div"),this.h()},l(n){e=C(n,"DIV",{class:!0}),$(e).forEach(_),this.h()},h(){p(e,"class","absolute w-12 h-12 bg-[#D9D9D9] rounded-full")},m(n,t){ee(n,e,t)},p:be,i:be,o:be,d(n){n&&_(e)}}}function xn(l){let e,n;return e=new Ft({props:{src:Le(l[24].image,500),width:"48px",strokeWidth:"0"}}),{c(){K(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,a){Y(e,t,a),n=!0},p(t,a){const o={};a&1&&(o.src=Le(t[24].image,500)),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Ct(l){let e,n,t,a,o,r,s,i,u,c,h=l[24].name+"",g,w,f,x,F;const I=[xn,Bn],E=[];function y(N,j){return N[24].image?0:1}s=y(l),i=E[s]=I[s](l);function A(){return l[11](l[24])}return{c(){e=v("div"),n=v("div"),t=v("div"),a=v("div"),r=L(),i.c(),u=L(),c=v("p"),g=he(h),w=L(),this.h()},l(N){e=C(N,"DIV",{class:!0,"aria-hidden":!0});var j=$(e);n=C(j,"DIV",{class:!0});var T=$(n);t=C(T,"DIV",{class:!0});var b=$(t);a=C(b,"DIV",{class:!0}),$(a).forEach(_),r=M(b),i.l(b),b.forEach(_),T.forEach(_),u=M(j),c=C(j,"P",{class:!0});var R=$(c);g=ge(R,h),R.forEach(_),w=M(j),j.forEach(_),this.h()},h(){p(a,"class",o=`absolute w-full h-full rounded-full shadow-[1px_1px_6px_rgba(0,0,0,0.1)] ${l[2]!==l[24]?"bg-[rgba(56,56,56,0.8)]":"bg-[linear-gradient(135deg,var(--tw-gradient-stops))] from-[rgba(0,236,179,0.6)] from-[-23.08%] to-[rgba(12,121,254,0.6)] to-[116.67%]"}`),p(t,"class","flex w-full h-full justify-center items-center touch-pan-y"),p(n,"class","w-[54px] h-[54px] relative flex-shrink-0"),p(c,"class","text-center text-white font-normal text-xs leading-[18px] tracking-[-0.6px] overflow-hidden truncate whitespace-normal line-clamp-2"),p(e,"class","w-full flex flex-col gap-1.5 place-items-center"),p(e,"aria-hidden","")},m(N,j){ee(N,e,j),m(e,n),m(n,t),m(t,a),m(t,r),E[s].m(t,null),m(e,u),m(e,c),m(c,g),m(e,w),f=!0,x||(F=ve(e,"click",A),x=!0)},p(N,j){l=N,(!f||j&5&&o!==(o=`absolute w-full h-full rounded-full shadow-[1px_1px_6px_rgba(0,0,0,0.1)] ${l[2]!==l[24]?"bg-[rgba(56,56,56,0.8)]":"bg-[linear-gradient(135deg,var(--tw-gradient-stops))] from-[rgba(0,236,179,0.6)] from-[-23.08%] to-[rgba(12,121,254,0.6)] to-[116.67%]"}`))&&p(a,"class",o);let T=s;s=y(l),s===T?E[s].p(l,j):(xe(),D(E[T],1,1,()=>{E[T]=null}),Se(),i=E[s],i?i.p(l,j):(i=E[s]=I[s](l),i.c()),S(i,1),i.m(t,null)),(!f||j&1)&&h!==(h=l[24].name+"")&&we(g,h)},i(N){f||(S(i),f=!0)},o(N){D(i),f=!1},d(N){N&&_(e),E[s].d(),x=!1,F()}}}function Sn(l){let e,n,t,a,o,r,s,i;function u(f){l[10](f)}let c={id:"focus",round:!0,placeholder:"박스 검색",fontSize:"font-normal text-sm",fontColor:"text-[#757D86]",clear:!0,backgroundColor:"bg-[#383838]/30",onInput:l[5]};l[3]!==void 0&&(c.value=l[3]),a=new Tt({props:c}),je.push(()=>ze(a,"value",u));let h=Ve(l[0]),g=[];for(let f=0;f<h.length;f+=1)g[f]=Ct(vt(l,h,f));const w=f=>D(g[f],1,1,()=>{g[f]=null});return{c(){e=v("div"),n=v("div"),t=v("section"),K(a.$$.fragment),r=L(),s=v("div");for(let f=0;f<g.length;f+=1)g[f].c();this.h()},l(f){e=C(f,"DIV",{class:!0});var x=$(e);n=C(x,"DIV",{class:!0});var F=$(n);t=C(F,"SECTION",{class:!0});var I=$(t);X(a.$$.fragment,I),I.forEach(_),F.forEach(_),r=M(x),s=C(x,"DIV",{class:!0});var E=$(s);for(let y=0;y<g.length;y+=1)g[y].l(E);E.forEach(_),x.forEach(_),this.h()},h(){p(t,"class","box-search py-3"),p(n,"class","modal-header flex-none w-full px-5"),p(s,"class","flex-grow w-full grid grid-cols-3 gap-4 p-5 justify-items-center text-center overflow-y-auto touch-pan-y"),p(e,"class","w-full h-full flex flex-col")},m(f,x){ee(f,e,x),m(e,n),m(n,t),Y(a,t,null),m(e,r),m(e,s);for(let F=0;F<g.length;F+=1)g[F]&&g[F].m(s,null);i=!0},p(f,x){const F={};if(!o&&x&8&&(o=!0,F.value=f[3],Re(()=>o=!1)),a.$set(F),x&5){h=Ve(f[0]);let I;for(I=0;I<h.length;I+=1){const E=vt(f,h,I);g[I]?(g[I].p(E,x),S(g[I],1)):(g[I]=Ct(E),g[I].c(),S(g[I],1),g[I].m(s,null))}for(xe(),I=h.length;I<g.length;I+=1)w(I);Se()}},i(f){if(!i){S(a.$$.fragment,f);for(let x=0;x<h.length;x+=1)S(g[x]);i=!0}},o(f){D(a.$$.fragment,f),g=g.filter(Boolean);for(let x=0;x<g.length;x+=1)D(g[x]);i=!1},d(f){f&&_(e),Q(a),ot(g,f)}}}function Dn(l){let e,n,t,a,o,r,s="박스 추가",i,u,c,h,g,w,f="링크 복사",x,F,I;return a=new dt({props:{width:"24",height:"24"}}),h=new dn({props:{width:"24",height:"24"}}),{c(){e=v("div"),n=v("div"),t=v("button"),K(a.$$.fragment),o=L(),r=v("p"),r.textContent=s,i=L(),u=v("div"),c=v("button"),K(h.$$.fragment),g=L(),w=v("p"),w.textContent=f,this.h()},l(E){e=C(E,"DIV",{class:!0});var y=$(e);n=C(y,"DIV",{class:!0});var A=$(n);t=C(A,"BUTTON",{class:!0});var N=$(t);X(a.$$.fragment,N),N.forEach(_),o=M(A),r=C(A,"P",{class:!0,"data-svelte-h":!0}),We(r)!=="svelte-16b9bbj"&&(r.textContent=s),A.forEach(_),i=M(y),u=C(y,"DIV",{class:!0});var j=$(u);c=C(j,"BUTTON",{class:!0});var T=$(c);X(h.$$.fragment,T),T.forEach(_),g=M(j),w=C(j,"P",{class:!0,"data-svelte-h":!0}),We(w)!=="svelte-144ozvw"&&(w.textContent=f),j.forEach(_),y.forEach(_),this.h()},h(){p(t,"class","w-[45px] h-[45px] bg-[#2C2C2E] rounded-full flex justify-center items-center"),p(r,"class","font-normal text-xs text-white"),p(n,"class","flex flex-col gap-1.5 place-items-center"),p(c,"class","w-[45px] h-[45px] bg-[#2C2C2E] rounded-full flex justify-center items-center"),p(w,"class","font-normal text-xs text-white"),p(u,"class","flex flex-col gap-1.5 place-items-center"),p(e,"class","flex gap-10 px-5")},m(E,y){ee(E,e,y),m(e,n),m(n,t),Y(a,t,null),m(n,o),m(n,r),m(e,i),m(e,u),m(u,c),Y(h,c,null),m(u,g),m(u,w),x=!0,F||(I=[ve(t,"click",l[8]),ve(c,"click",l[9])],F=!0)},p:be,i(E){x||(S(a.$$.fragment,E),S(h.$$.fragment,E),x=!0)},o(E){D(a.$$.fragment,E),D(h.$$.fragment,E),x=!1},d(E){E&&_(e),Q(a),Q(h),F=!1,St(I)}}}function An(l){var h;let e,n,t=((h=l[2])==null?void 0:h.name)+"",a,o,r,s,i="확인",u,c;return{c(){e=v("div"),n=v("p"),a=he(t),o=he("에 담으시겠습니까?"),r=L(),s=v("button"),s.textContent=i,this.h()},l(g){e=C(g,"DIV",{class:!0});var w=$(e);n=C(w,"P",{class:!0});var f=$(n);a=ge(f,t),o=ge(f,"에 담으시겠습니까?"),f.forEach(_),r=M(w),s=C(w,"BUTTON",{class:!0,"data-svelte-h":!0}),We(s)!=="svelte-1r994n9"&&(s.textContent=i),w.forEach(_),this.h()},h(){p(n,"class","pb-3.5 font-normal text-sm text-white"),p(s,"class","w-full p-2.5 bg-[#0C79FE] rounded-[50px] font-medium text-sm leading-[17px] text-white"),p(e,"class","w-full bg-[#222222]")},m(g,w){ee(g,e,w),m(e,n),m(n,a),m(n,o),m(e,r),m(e,s),u||(c=ve(s,"click",l[6]),u=!0)},p(g,w){var f;w&4&&t!==(t=((f=g[2])==null?void 0:f.name)+"")&&we(a,t)},i:be,o:be,d(g){g&&_(e),u=!1,c()}}}function Fn(l){let e,n,t,a;const o=[An,Dn],r=[];function s(i,u){return i[2]?0:1}return n=s(l),t=r[n]=o[n](l),{c(){e=v("div"),t.c(),this.h()},l(i){e=C(i,"DIV",{slot:!0,class:!0});var u=$(e);t.l(u),u.forEach(_),this.h()},h(){p(e,"slot","footer"),p(e,"class","modal-footer flex-none w-full pt-3 px-5 flex flex-row gap-3 justify-start border-t-[0.5px] border-[#3F3F3F] pointer-events-auto")},m(i,u){ee(i,e,u),r[n].m(e,null),a=!0},p(i,u){let c=n;n=s(i),n===c?r[n].p(i,u):(xe(),D(r[c],1,1,()=>{r[c]=null}),Se(),t=r[n],t?t.p(i,u):(t=r[n]=o[n](i),t.c()),S(t,1),t.m(e,null))},i(i){a||(S(t),a=!0)},o(i){D(t),a=!1},d(i){i&&_(e),r[n].d()}}}function On(l){let e,n,t;function a(r){l[12](r)}let o={useDefaultHeight:!0,defaultHeight:Ot(30),slotFullHeight:!0,hFull:!0,$$slots:{footer:[Fn],default:[Sn]},$$scope:{ctx:l}};return l[4]!==void 0&&(o.isOpen=l[4]),e=new Pt({props:o}),je.push(()=>ze(e,"isOpen",a)),{c(){K(e.$$.fragment)},l(r){X(e.$$.fragment,r)},m(r,s){Y(e,r,s),t=!0},p(r,[s]){const i={};s&134217743&&(i.$$scope={dirty:s,ctx:r}),!n&&s&16&&(n=!0,i.isOpen=r[4],Re(()=>n=!1)),e.$set(i)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function Pn(l,e,n){let t,a,o;Ne(l,He,b=>n(17,t=b)),Ne(l,At,b=>n(18,a=b)),Ne(l,Fe,b=>n(4,o=b)),Vt.isNativePlatform();const r=["owner","manager","writer"];let s=[],i=[];He.subscribe(b=>{n(0,i=s=b.filter(R=>r.includes(R.role??"")))});let u="",c;Fe.subscribe(b=>{b?g():n(2,c=void 0)});let h=!1;function g(){if(t.length!==0||h)return;h=!0;const b=Pe();if(!b)return h=!1;mn(b).then(R=>R.json()).then(R=>{R.data&&He.set(R.data)}).finally(()=>h=!1)}let w="",f;function x(b){clearTimeout(f),f=setTimeout(F,300)}function F(){n(0,i=w?s.filter(b=>b.name.includes(w)):s)}async function I(){const b=Pe();if(!b)return ut({onshare:"1"},{replace:!0}),J.emit("showSignInModal",{removable:!0});if(!c||!a.params.idx)return;let R=!0;const z=c.idx;try{const Z=await pn(b,z,a.params.idx);if(!Z.ok)throw new Error;if((await Z.json()).data==="already")return R=!1,J.emit("pushSnackbar",{message:"이미 포함된 장소입니다."});Oe(He,t=t.map(re=>re.idx===z?{...re,place_count:re.place_count?`${Number(re.place_count)+1}`:"0"}:re),t),J.emit("pushSnackbar",{message:"장소를 박스에 담았습니다"})}catch{J.emit("pushSnackbar",{message:"일시적으로 장애가 발생했습니다."})}finally{n(2,c=void 0)}}async function E(){const b=Pe();if(!b)return ut({onshare:"1"},{replace:!0}),J.emit("showSignInModal",{removable:!0});const R=u.trim();if(R)try{J.emit("loading",!0);const z=await fetch(`${it}/boxes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`,"x-api-version":xt.BOX},body:JSON.stringify({name:R,visibility:"follower"})});if(!z.ok)throw new Error;z.json().then(Z=>{const te=Z.data;te.role="owner",te.visibility="follower",te.is_subcribed=!1,te.place_count="0",te.follower_count="0",Oe(He,t=[te,...t],t)}),J.emit("pushSnackbar",{message:"새 박스를 만들었습니다"})}catch{J.emit("pushSnackbar",{message:"일시적으로 장애가 발생했습니다."})}finally{J.emit("loading",!1)}}const y=()=>{n(1,u=prompt("박스 이름을 입력해주세요")),String(u||"").trim()&&E()},A=()=>cn(`${location.pathname}${location.search}`);function N(b){w=b,n(3,w)}const j=b=>{c===b?n(2,c=void 0):n(2,c=b)};function T(b){o=b,Fe.set(o)}return[i,u,c,w,o,x,I,E,y,A,N,j,T]}class Tn extends Qe{constructor(e){super(),et(this,e,Pn,On,Ye,{})}}function wt(l,e,n){const t=l.slice();return t[33]=e[n],t[35]=n,t}function $t(l,e,n){const t=l.slice();return t[33]=e[n],t[35]=n,t}function st(l){var t;const e=l.slice(),n=(t=e[33].media)==null?void 0:t.at(0);return e[37]=n,e}function Vn(l){let e,n;return e=new Dt({props:{position:"static",backgroundColor:"bg-black",leftLogo:!0}}),{c(){K(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,a){Y(e,t,a),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Nn(l){let e,n,t=l[4].name+"",a,o,r,s=(l[4].roadAddress||l[4].lotAddress||"")+"",i;return{c(){e=v("div"),n=v("p"),a=he(t),o=L(),r=v("div"),i=he(s),this.h()},l(u){e=C(u,"DIV",{class:!0});var c=$(e);n=C(c,"P",{class:!0});var h=$(n);a=ge(h,t),h.forEach(_),o=M(c),r=C(c,"DIV",{class:!0});var g=$(r);i=ge(g,s),g.forEach(_),c.forEach(_),this.h()},h(){p(n,"class","text-white text-[15px] leading-[18px] font-semibold line-clamp-1"),p(r,"class","text-center text-[#A6A9AB] text-xs leading-[17px] font-normal line-clamp-2"),p(e,"class","flex flex-col justify-center items-center gap-1")},m(u,c){ee(u,e,c),m(e,n),m(n,a),m(e,o),m(e,r),m(r,i)},p(u,c){c[0]&16&&t!==(t=u[4].name+"")&&we(a,t),c[0]&16&&s!==(s=(u[4].roadAddress||u[4].lotAddress||"")+"")&&we(i,s)},d(u){u&&_(e)}}}function jn(l){let e,n,t,a,o,r;return t=new tn({}),{c(){e=v("div"),n=v("button"),K(t.$$.fragment),this.h()},l(s){e=C(s,"DIV",{class:!0});var i=$(e);n=C(i,"BUTTON",{});var u=$(n);X(t.$$.fragment,u),u.forEach(_),i.forEach(_),this.h()},h(){p(e,"class","flex items-center gap-2")},m(s,i){ee(s,e,i),m(e,n),Y(t,n,null),a=!0,o||(r=ve(n,"click",l[15]),o=!0)},p:be,i(s){a||(S(t.$$.fragment,s),a=!0)},o(s){D(t.$$.fragment,s),a=!1},d(s){s&&_(e),Q(t),o=!1,r()}}}function Rn(l){let e,n,t,a,o="포스트",r,s,i;return n=new dt({props:{width:"14",height:"14",fill:"white",strokeColor:"white"}}),{c(){e=v("div"),K(n.$$.fragment),t=L(),a=v("p"),a.textContent=o,this.h()},l(u){e=C(u,"DIV",{class:!0});var c=$(e);X(n.$$.fragment,c),t=M(c),a=C(c,"P",{class:!0,"data-svelte-h":!0}),We(a)!=="svelte-bo4d3u"&&(a.textContent=o),c.forEach(_),this.h()},h(){p(a,"class","font-medium text-sm leading-[17px] text-white"),p(e,"class","flex justify-center gap-1.5 items-center")},m(u,c){ee(u,e,c),Y(n,e,null),m(e,t),m(e,a),r=!0,s||(i=ve(e,"click",l[17]),s=!0)},p:be,i(u){r||(S(n.$$.fragment,u),r=!0)},o(u){D(n.$$.fragment,u),r=!1},d(u){u&&_(e),Q(n),s=!1,i()}}}function zn(l){var o;let e,n,t=(((o=l[33].unique_name)==null?void 0:o.at(0))??"u")+"",a;return{c(){e=v("div"),n=v("span"),a=he(t),this.h()},l(r){e=C(r,"DIV",{class:!0,style:!0});var s=$(e);n=C(s,"SPAN",{class:!0});var i=$(n);a=ge(i,t),i.forEach(_),s.forEach(_),this.h()},h(){p(n,"class","text-base font-semibold text-black"),p(e,"class","w-[26px] h-[26px] flex items-center justify-center rounded-full"),Ge(e,"background-color",_t(l[33].unique_name))},m(r,s){ee(r,e,s),m(e,n),m(n,a)},p(r,s){var i;s[0]&64&&t!==(t=(((i=r[33].unique_name)==null?void 0:i.at(0))??"u")+"")&&we(a,t),s[0]&64&&Ge(e,"background-color",_t(r[33].unique_name))},i:be,o:be,d(r){r&&_(e)}}}function Ln(l){let e,n;return e=new Ft({props:{src:Le(l[33].profile_image_url,500),width:"26px",strokeWidth:"0"}}),{c(){K(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,a){Y(e,t,a),n=!0},p(t,a){const o={};a[0]&64&&(o.src=Le(t[33].profile_image_url,500)),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function kt(l){let e,n,t=l[12](l[33].text)+"",a,o,r=l[33].text.length>85&&It(l);return{c(){e=v("div"),n=v("p"),a=he(t),o=L(),r&&r.c(),this.h()},l(s){e=C(s,"DIV",{class:!0});var i=$(e);n=C(i,"P",{});var u=$(n);a=ge(u,t),o=M(u),r&&r.l(u),u.forEach(_),i.forEach(_),this.h()},h(){p(e,"class","pt-0.5 pb-2 typo-body3 text-[#F1F1F1] relative")},m(s,i){ee(s,e,i),m(e,n),m(n,a),m(n,o),r&&r.m(n,null)},p(s,i){i[0]&64&&t!==(t=s[12](s[33].text)+"")&&we(a,t),s[33].text.length>85?r?r.p(s,i):(r=It(s),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},d(s){s&&_(e),r&&r.d()}}}function It(l){let e,n=l[2]?"더 보기":"간단히",t,a,o;return{c(){e=v("span"),t=he(n),this.h()},l(r){e=C(r,"SPAN",{class:!0,"aria-hidden":!0});var s=$(e);t=ge(s,n),s.forEach(_),this.h()},h(){p(e,"class","text-[#B3B8BD]"),p(e,"aria-hidden","")},m(r,s){ee(r,e,s),m(e,t),a||(o=ve(e,"click",l[13]),a=!0)},p(r,s){s[0]&4&&n!==(n=r[2]?"더 보기":"간단히")&&we(t,n)},d(r){r&&_(e),a=!1,o()}}}function Et(l){let e,n;return e=new Nt({props:{isThumbnail:!0,src:l[37],post:l[33]}}),{c(){K(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,a){Y(e,t,a),n=!0},p(t,a){const o={};a[0]&64&&(o.src=t[37]),a[0]&64&&(o.post=t[33]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Mn(l){let e,n;return e=new Qt({props:{length:"1.25",fill:"#F1F1F1"}}),{c(){K(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,a){Y(e,t,a),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Un(l){let e,n;return e=new en({props:{length:"1.25",fill:"#EA3323"}}),{c(){K(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,a){Y(e,t,a),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function yt(l){var $e,q;let e,n,t,a,o,r,s,i,u,c,h=l[33].unique_name+"",g,w,f,x,F=l[11](l[33].created_at)+"",I,E,y,A,N=($e=l[33].media)==null?void 0:$e.at(0),j,T,b,R,z,Z,te,re,oe=(l[33].reactionCount||"")+"",de,Ie,ue,fe,B,P,ne,le;const _e=[Ln,zn],G=[];function ye(ae,V){return ae[33].profile_image_url?0:1}o=ye(l),r=G[o]=_e[o](l);let se=l[33].text&&kt(l),U=N&&Et(st(l));function tt(){return l[20](l[33])}const Me=[Un,Mn],ce=[];function H(ae,V){return ae[33].myReaction?0:1}z=H(l),Z=ce[z]=Me[z](l);function nt(){return l[21](l[33])}return fe=new Yt({props:{dark:!0,url:(q=l[33].reference)==null?void 0:q.url}}),{c(){e=v("div"),n=v("div"),t=v("div"),a=v("a"),r.c(),i=L(),u=v("div"),c=v("a"),g=he(h),f=L(),x=v("span"),I=he(F),E=L(),se&&se.c(),y=L(),A=v("div"),U&&U.c(),j=L(),T=v("div"),b=v("div"),R=v("button"),Z.c(),te=L(),re=v("span"),de=he(oe),Ie=L(),ue=v("div"),K(fe.$$.fragment),B=L(),this.h()},l(ae){e=C(ae,"DIV",{class:!0});var V=$(e);n=C(V,"DIV",{class:!0});var ie=$(n);t=C(ie,"DIV",{class:!0});var ke=$(t);a=C(ke,"A",{href:!0});var Be=$(a);r.l(Be),Be.forEach(_),i=M(ke),u=C(ke,"DIV",{});var d=$(u);c=C(d,"A",{href:!0,class:!0});var k=$(c);g=ge(k,h),k.forEach(_),f=M(d),x=C(d,"SPAN",{class:!0});var W=$(x);I=ge(W,F),W.forEach(_),d.forEach(_),ke.forEach(_),E=M(ie),se&&se.l(ie),ie.forEach(_),y=M(V),A=C(V,"DIV",{class:!0});var pe=$(A);U&&U.l(pe),pe.forEach(_),j=M(V),T=C(V,"DIV",{class:!0});var me=$(T);b=C(me,"DIV",{});var O=$(b);R=C(O,"BUTTON",{});var Ce=$(R);Z.l(Ce),Ce.forEach(_),te=M(O),re=C(O,"SPAN",{});var De=$(re);de=ge(De,oe),De.forEach(_),O.forEach(_),Ie=M(me),ue=C(me,"DIV",{class:!0});var Ue=$(ue);X(fe.$$.fragment,Ue),Ue.forEach(_),me.forEach(_),B=M(V),V.forEach(_),this.h()},h(){var ae;p(a,"href",s="/users/"+l[33].user_idx),p(c,"href",w="/users/"+l[33].user_idx),p(c,"class","font-medium text-sm leading-[17px] text-white"),p(x,"class","pl-1.5 font-normal text-xs text-[#757D86]"),p(t,"class","py-2.5 flex justify-start items-center gap-2.5"),p(n,"class","px-3"),p(A,"class","w-full h-[244px] bg-[#D9D9D9]"),p(ue,"class","-mr-3"),Je(ue,"hidden",((ae=l[33].reference)==null?void 0:ae.origin)!=="instagram"),p(T,"class","px-4 py-3 text-[#F1F1F1] typo-body3 flex items-center gap-2.5 justify-between "),p(e,"class","bg-[#222222] relative rounded-[10px] w-full my-2.5")},m(ae,V){ee(ae,e,V),m(e,n),m(n,t),m(t,a),G[o].m(a,null),m(t,i),m(t,u),m(u,c),m(c,g),m(u,f),m(u,x),m(x,I),m(n,E),se&&se.m(n,null),m(e,y),m(e,A),U&&U.m(A,null),m(e,j),m(e,T),m(T,b),m(b,R),ce[z].m(R,null),m(b,te),m(b,re),m(re,de),m(T,Ie),m(T,ue),Y(fe,ue,null),m(e,B),P=!0,ne||(le=[ve(A,"click",tt),ve(R,"click",nt)],ne=!0)},p(ae,V){var d,k,W;l=ae;let ie=o;o=ye(l),o===ie?G[o].p(l,V):(xe(),D(G[ie],1,1,()=>{G[ie]=null}),Se(),r=G[o],r?r.p(l,V):(r=G[o]=_e[o](l),r.c()),S(r,1),r.m(a,null)),(!P||V[0]&64&&s!==(s="/users/"+l[33].user_idx))&&p(a,"href",s),(!P||V[0]&64)&&h!==(h=l[33].unique_name+"")&&we(g,h),(!P||V[0]&64&&w!==(w="/users/"+l[33].user_idx))&&p(c,"href",w),(!P||V[0]&64)&&F!==(F=l[11](l[33].created_at)+"")&&we(I,F),l[33].text?se?se.p(l,V):(se=kt(l),se.c(),se.m(n,null)):se&&(se.d(1),se=null),V[0]&64&&(N=(d=l[33].media)==null?void 0:d.at(0)),N?U?(U.p(st(l),V),V[0]&64&&S(U,1)):(U=Et(st(l)),U.c(),S(U,1),U.m(A,null)):U&&(xe(),D(U,1,1,()=>{U=null}),Se());let ke=z;z=H(l),z!==ke&&(xe(),D(ce[ke],1,1,()=>{ce[ke]=null}),Se(),Z=ce[z],Z||(Z=ce[z]=Me[z](l),Z.c()),S(Z,1),Z.m(R,null)),(!P||V[0]&64)&&oe!==(oe=(l[33].reactionCount||"")+"")&&we(de,oe);const Be={};V[0]&64&&(Be.url=(k=l[33].reference)==null?void 0:k.url),fe.$set(Be),(!P||V[0]&64)&&Je(ue,"hidden",((W=l[33].reference)==null?void 0:W.origin)!=="instagram")},i(ae){P||(S(r),S(U),S(Z),S(fe.$$.fragment,ae),P=!0)},o(ae){D(r),D(U),D(Z),D(fe.$$.fragment,ae),P=!1},d(ae){ae&&_(e),G[o].d(),se&&se.d(),U&&U.d(),ce[z].d(),Q(fe),ne=!1,St(le)}}}function Bt(l){let e,n,t,a,o,r;n=new Nt({props:{src:l[33].media.at(0),post:l[33],fetchpriority:l[35]<=8?"high":"low",isThumbnail:!0,useThumbnailInVideo:Xe,imgSize:500}});function s(){return l[22](l[33])}function i(...u){return l[23](l[33],...u)}return{c(){e=v("div"),K(n.$$.fragment),t=L(),this.h()},l(u){e=C(u,"DIV",{class:!0,"aria-hidden":!0});var c=$(e);X(n.$$.fragment,c),t=M(c),c.forEach(_),this.h()},h(){p(e,"class","aspect-square overflow-hidden relative rounded-xl"),p(e,"aria-hidden",""),Je(e,"hidden",l[6].some(i))},m(u,c){ee(u,e,c),Y(n,e,null),m(e,t),a=!0,o||(r=ve(e,"click",s),o=!0)},p(u,c){l=u;const h={};c[0]&32&&(h.src=l[33].media.at(0)),c[0]&32&&(h.post=l[33]),n.$set(h),(!a||c[0]&96)&&Je(e,"hidden",l[6].some(i))},i(u){a||(S(n.$$.fragment,u),a=!0)},o(u){D(n.$$.fragment,u),a=!1},d(u){u&&_(e),Q(n),o=!1,r()}}}function Hn(l){let e,n;return e=new Gt({props:{zindex:l[1]}}),{c(){K(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,a){Y(e,t,a),n=!0},p(t,a){const o={};a[0]&2&&(o.zindex=t[1]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function qn(l){let e,n;return e=new Tn({}),{c(){K(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,a){Y(e,t,a),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Wn(l){let e,n,t,a,o,r,s,i,u,c,h,g,w,f,x,F,I,E,y,A,N,j,T,b,R,z,Z="장소 담기",te,re,oe,de,Ie,ue,fe=`${l[3]??0}px`,B,P,ne,le,_e,G,ye,se;document.title=e=`블루닷 - ${l[4].name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`;let U=Ee&&Vn();f=new Dt({props:{position:"static",backgroundColor:"bg-black",useTopPaddingTop:!Ee,leftBack:Ee?"":"white",$$slots:{right:[jn],default:[Nn]},$$scope:{ctx:l}}});function tt(d){l[18](d)}let Me={placeIdx:l[4].placeIdx,placeName:l[4].name,$$slots:{default:[Rn]},$$scope:{ctx:l}};l[0]!==void 0&&(Me.isOpenEmbedSeet=l[0]),A=new yn({props:Me}),je.push(()=>ze(A,"isOpenEmbedSeet",tt)),b=new dt({props:{width:"14",height:"14"}});let ce=Ve(l[6]),H=[];for(let d=0;d<ce.length;d+=1)H[d]=yt($t(l,ce,d));const nt=d=>D(H[d],1,1,()=>{H[d]=null});let $e=Ve(l[5]),q=[];for(let d=0;d<$e.length;d+=1)q[d]=Bt(wt(l,$e,d));const ae=d=>D(q[d],1,1,()=>{q[d]=null});ue=new Xt({});let V=!Ee&&Hn(l),ie=!Ee&&qn();function ke(d){l[24](d)}let Be={};return l[7]!==void 0&&(Be.isOpen=l[7]),le=new hn({props:Be}),je.push(()=>ze(le,"isOpen",ke)),{c(){n=v("meta"),a=v("meta"),r=v("meta"),i=v("meta"),c=L(),h=v("div"),g=v("div"),U&&U.c(),w=L(),K(f.$$.fragment),F=L(),I=v("div"),E=v("section"),y=v("button"),K(A.$$.fragment),j=L(),T=v("button"),K(b.$$.fragment),R=L(),z=v("p"),z.textContent=Z,te=L();for(let d=0;d<H.length;d+=1)H[d].c();re=L(),oe=v("section"),de=v("div");for(let d=0;d<q.length;d+=1)q[d].c();Ie=L(),K(ue.$$.fragment),B=L(),V&&V.c(),P=L(),ie&&ie.c(),ne=L(),K(le.$$.fragment),this.h()},l(d){const k=Ht("svelte-urgghn",document.head);n=C(k,"META",{property:!0,content:!0}),a=C(k,"META",{property:!0,content:!0}),r=C(k,"META",{property:!0,content:!0}),i=C(k,"META",{property:!0,content:!0}),k.forEach(_),c=M(d),h=C(d,"DIV",{class:!0});var W=$(h);g=C(W,"DIV",{class:!0});var pe=$(g);U&&U.l(pe),w=M(pe),X(f.$$.fragment,pe),pe.forEach(_),F=M(W),I=C(W,"DIV",{class:!0});var me=$(I);E=C(me,"SECTION",{class:!0});var O=$(E);y=C(O,"BUTTON",{class:!0});var Ce=$(y);X(A.$$.fragment,Ce),Ce.forEach(_),j=M(O),T=C(O,"BUTTON",{class:!0});var De=$(T);X(b.$$.fragment,De),R=M(De),z=C(De,"P",{class:!0,"data-svelte-h":!0}),We(z)!=="svelte-1k5moer"&&(z.textContent=Z),De.forEach(_),O.forEach(_),te=M(me);for(let Ae=0;Ae<H.length;Ae+=1)H[Ae].l(me);re=M(me),oe=C(me,"SECTION",{class:!0});var Ue=$(oe);de=C(Ue,"DIV",{class:!0});var mt=$(de);for(let Ae=0;Ae<q.length;Ae+=1)q[Ae].l(mt);mt.forEach(_),Ue.forEach(_),me.forEach(_),Ie=M(W),X(ue.$$.fragment,W),W.forEach(_),B=M(d),V&&V.l(d),P=M(d),ie&&ie.l(d),ne=M(d),X(le.$$.fragment,d),this.h()},h(){p(n,"property","og:title"),p(n,"content",t=`블루닷${l[4].name?` - ${l[4].name}`:""}`),p(a,"property","og:description"),p(a,"content",o=l[4].categories&&l[4].categories.length>0?`${l[4].categories.join(" | ")}`:"사람과 장소 그리고 순간을 의미 있게 만들다"),p(r,"property","og:image"),p(r,"content",s=l[8]??pt),p(i,"property","og:image:alt"),p(i,"content",u=l[4].name),p(g,"class","fixed top-0 left-0 z-20"),qt(()=>l[16].call(g)),p(y,"class","flex-1 w-full h-8 rounded-[50px] bg-[#0C79FE]"),p(z,"class","font-medium text-sm leading-[17px] text-[#0C79FE]"),p(T,"class","flex-1 w-full h-8 rounded-[50px] border border-[#0C79FE] flex justify-center gap-1.5 items-center"),p(E,"class","flex gap-1.5 py-3 w-full bg-inherit z-10"),p(de,"class","grid grid-cols-2 gap-[3px]"),p(oe,"class","py-3"),p(I,"class","px-5"),p(h,"class","bg-black min-h-dvh"),Ge(h,"padding-top",fe)},m(d,k){m(document.head,n),m(document.head,a),m(document.head,r),m(document.head,i),ee(d,c,k),ee(d,h,k),m(h,g),U&&U.m(g,null),m(g,w),Y(f,g,null),x=Wt(g,l[16].bind(g)),m(h,F),m(h,I),m(I,E),m(E,y),Y(A,y,null),m(E,j),m(E,T),Y(b,T,null),m(T,R),m(T,z),m(I,te);for(let W=0;W<H.length;W+=1)H[W]&&H[W].m(I,null);m(I,re),m(I,oe),m(oe,de);for(let W=0;W<q.length;W+=1)q[W]&&q[W].m(de,null);m(h,Ie),Y(ue,h,null),ee(d,B,k),V&&V.m(d,k),ee(d,P,k),ie&&ie.m(d,k),ee(d,ne,k),Y(le,d,k),G=!0,ye||(se=ve(T,"click",l[19]),ye=!0)},p(d,k){(!G||k[0]&16)&&e!==(e=`블루닷 - ${d[4].name??"사람과 장소 그리고 순간을 의미 있게 만들다"}`)&&(document.title=e),(!G||k[0]&16&&t!==(t=`블루닷${d[4].name?` - ${d[4].name}`:""}`))&&p(n,"content",t),(!G||k[0]&16&&o!==(o=d[4].categories&&d[4].categories.length>0?`${d[4].categories.join(" | ")}`:"사람과 장소 그리고 순간을 의미 있게 만들다"))&&p(a,"content",o),(!G||k[0]&256&&s!==(s=d[8]??pt))&&p(r,"content",s),(!G||k[0]&16&&u!==(u=d[4].name))&&p(i,"content",u);const W={};k[0]&528|k[1]&128&&(W.$$scope={dirty:k,ctx:d}),f.$set(W);const pe={};if(k[0]&16&&(pe.placeIdx=d[4].placeIdx),k[0]&16&&(pe.placeName=d[4].name),k[0]&128|k[1]&128&&(pe.$$scope={dirty:k,ctx:d}),!N&&k[0]&1&&(N=!0,pe.isOpenEmbedSeet=d[0],Re(()=>N=!1)),A.$set(pe),k[0]&31972){ce=Ve(d[6]);let O;for(O=0;O<ce.length;O+=1){const Ce=$t(d,ce,O);H[O]?(H[O].p(Ce,k),S(H[O],1)):(H[O]=yt(Ce),H[O].c(),S(H[O],1),H[O].m(I,re))}for(xe(),O=ce.length;O<H.length;O+=1)nt(O);Se()}if(k[0]&1136){$e=Ve(d[5]);let O;for(O=0;O<$e.length;O+=1){const Ce=wt(d,$e,O);q[O]?(q[O].p(Ce,k),S(q[O],1)):(q[O]=Bt(Ce),q[O].c(),S(q[O],1),q[O].m(de,null))}for(xe(),O=$e.length;O<q.length;O+=1)ae(O);Se()}k[0]&8&&fe!==(fe=`${d[3]??0}px`)&&Ge(h,"padding-top",fe),Ee||V.p(d,k);const me={};!_e&&k[0]&128&&(_e=!0,me.isOpen=d[7],Re(()=>_e=!1)),le.$set(me)},i(d){if(!G){S(U),S(f.$$.fragment,d),S(A.$$.fragment,d),S(b.$$.fragment,d);for(let k=0;k<ce.length;k+=1)S(H[k]);for(let k=0;k<$e.length;k+=1)S(q[k]);S(ue.$$.fragment,d),S(V),S(ie),S(le.$$.fragment,d),G=!0}},o(d){D(U),D(f.$$.fragment,d),D(A.$$.fragment,d),D(b.$$.fragment,d),H=H.filter(Boolean);for(let k=0;k<H.length;k+=1)D(H[k]);q=q.filter(Boolean);for(let k=0;k<q.length;k+=1)D(q[k]);D(ue.$$.fragment,d),D(V),D(ie),D(le.$$.fragment,d),G=!1},d(d){d&&(_(c),_(h),_(B),_(P),_(ne)),_(n),_(a),_(r),_(i),U&&U.d(),Q(f),x(),Q(A),Q(b),ot(H,d),ot(q,d),Q(ue),V&&V.d(d),ie&&ie.d(d),Q(le,d),ye=!1,se()}}}function Zn(l,e,n){let t,a;Ne(l,At,B=>n(9,t=B)),Ne(l,lt,B=>n(10,a=B));const o={name:"",latitude:0,longitude:0,categories:[],options:[]};let r="z-50";Fe.subscribe(B=>n(1,r=B?"z-0":"z-50"));let s=!1;const i=new Intl.DateTimeFormat("ko-KR",{dateStyle:"short",timeStyle:"short",hour12:!1});let u=0,c=!1,h=!1,g=o,w=[],f=[],x=!1,F=!1,I;Zt(async()=>{await E(),Fe.set(x),ut({onshare:""},{replace:!0}),A()});async function E(){const B=new URL(t.url.toString()),P=t.params;x=B.searchParams.get("onshare")==="1"&&Ze();const ne=B.searchParams.get("boxIdx"),le=await fetch(`${it}/places/${P.idx}${ne?`?boxIdx=${ne}`:""}`,{headers:{Authorization:`Bearer ${Pe()}`,"x-api-version":xt.PLACE}});if(!le.ok)return;const _e=await le.json();if(n(4,g=_e.data.place),n(5,w=_e.data.posts),ne){const G=w.find(ye=>ye.is_card);G&&n(6,f=[G])}y()}async function y(){const B=f[0]??w[0];if(!B)return n(8,I=void 0);let P=B.media[0];if(P){const ne=Le(P);if(ne.includes("youtu"))n(8,I=ne);else{const le=await gn(ne);n(8,I=le?Le(P+"-thumbnail"):ne)}}else n(8,I=void 0)}async function A(){if(!(f!=null&&f.length))return;const B=Pe();n(6,f=await Promise.all(f.map(async P=>{var G;const le=await(await fetch(`${it}/vote/reactions?targetTable=posts&targetId=${P.idx}`,{method:"GET",headers:{Authorization:"Bearer "+B}})).json(),_e=Number((G=le.data.reactions[0])==null?void 0:G.count);return P.reactionCount=Number.isNaN(_e)?0:_e,P.myReaction=le.data.myReaction,P})))}function N(B){return i.format(new Date(B))}function j(B){return B.length<=85||s?B:`${B.slice(0,85)}...`}function T(){n(2,s=!s)}function b(B){if(!(f!=null&&f.length)||h)return;h=!0;const P=f.findIndex(ne=>ne.idx===B);if(P===-1)return h=!1;if(!Ze())return n(6,f[P].needReactionReload=!0,f),h=!1,J.emit("showSignInModal",{removable:!0,callback:Xe?()=>{A()}:void 0});f[P].myReaction?f[P].myReaction==="❤️"?J.emit("setReaction",{target:"posts",targetId:B,reaction:null,callback:()=>{n(6,f[P].myReaction=null,f),n(6,f[P].reactionCount=f[P].reactionCount>0?f[P].reactionCount-1:0,f),h=!1}}):J.emit("setReaction",{target:"posts",targetId:B,reaction:"❤️",callback:()=>{n(6,f[P].myReaction="❤️",f),h=!1}}):J.emit("setReaction",{target:"posts",targetId:B,reaction:"❤️",callback:()=>{n(6,f[P].myReaction="❤️",f),n(6,f[P].reactionCount+=1,f),h=!1}})}const R=()=>{qe(`/places/${t.params.idx}/map`,{location:Kt([Number(g.longitude),Number(g.latitude)]).join(),placeIdx:g.placeIdx,placeName:g.name})};function z(){u=this.clientHeight,n(3,u)}const Z=async()=>{if(Ee)return n(7,F=!0);await Pe()||J.emit("showSignInModal",{removable:!0})};function te(B){c=B,n(0,c)}const re=()=>{if(Ee)return n(7,F=!0);Ze()?Fe.set(!0):(Xe||Jt({onshare:"1"}),J.emit("showSignInModal",{removable:!0,callback:()=>{Fe.set(!0)}}))},oe=async B=>{Oe(lt,a=w,a),await ht(`/viewer?placeIdx=${B.place_idx}&postIdx=${B.idx}`)},de=B=>{if(Ee)return n(7,F=!0);b(B.idx)},Ie=async B=>{B!=null&&B.media&&(Oe(lt,a=w,a),await ht(`/viewer?placeIdx=${g.placeIdx}&postIdx=${B.idx}`,{replaceState:!1,invalidateAll:!1}))},ue=(B,P)=>P.idx===B.idx;function fe(B){F=B,n(7,F)}return l.$$.update=()=>{l.$$.dirty[0]&1&&n(1,r=c?"z-0":"z-50")},[c,r,s,u,g,w,f,F,I,t,a,N,j,T,b,R,z,Z,te,re,oe,de,Ie,ue,fe]}class xl extends Qe{constructor(e){super(),et(this,e,Zn,Wn,Ye,{},null,[-1,-1])}}export{xl as component,Bl as universal};
