import{s as J,C as T,D as V,a as S,g as y,i as B,n as z,f as k,e as ne,c as se,b as oe,q as ae,k as ie,B as fe,t as G,d as K}from"../chunks/scheduler.CAgUjVVh.js";import{S as L,i as Q,e as X,c as _,b as g,m as b,t as l,a as p,d,f as M,g as R}from"../chunks/index.BArRcuOw.js";import{U as ue}from"../chunks/UpperBoxes.D_bo_dne.js";import{g as j}from"../chunks/entry.BwerlC5n.js";import{F as Y}from"../chunks/Footer.FYQhA62d.js";import{H as Z}from"../chunks/Header.BPwSwap-.js";import{M as le}from"../chunks/Map.BeNTpRoP.js";import{N as ce}from"../chunks/NavigationBar.Ct-hXYSs.js";import{B as H}from"../chunks/Button.zBe_-iWB.js";import{g as me}from"../chunks/searchParams.CKdA0nNl.js";import{c as U,e as q,g as pe}from"../chunks/sign.JfFJkM-s.js";import{p as $e}from"../chunks/stores.-zZ4hlSI.js";import"../chunks/Field.m1jJQR91.js";/* empty css                                                   *//* empty css                                                   */import"../chunks/map.K4JlK3Cy.js";import"../chunks/ImageShaper.Dix5sBHT.js";import"../chunks/heic2any.o9_KYwud.js";/* empty css                                                            */import{A as _e}from"../chunks/ActionSheet.e2tnyOYG.js";import{S as ge}from"../chunks/Search.5R98qm1J.js";import{B as be}from"../chunks/BottomNavigationPadder.B3zfDCzo.js";import{p as de,b as he}from"../chunks/boxRequest.D81OdDJu.js";function ke(a){let e,r,t,o;return e=new ge({}),t=new be({props:{heightPx:120}}),{c(){_(e.$$.fragment),r=S(),_(t.$$.fragment)},l(n){g(e.$$.fragment,n),r=y(n),g(t.$$.fragment,n)},m(n,i){b(e,n,i),B(n,r,i),b(t,n,i),o=!0},p:z,i(n){o||(l(e.$$.fragment,n),l(t.$$.fragment,n),o=!0)},o(n){p(e.$$.fragment,n),p(t.$$.fragment,n),o=!1},d(n){n&&k(r),d(e,n),d(t,n)}}}function we(a){let e,r,t;function o(i){a[1](i)}let n={sheetBackground:"bg-[black]/60 backdrop-blur-sm",$$slots:{default:[ke]},$$scope:{ctx:a}};return a[0]!==void 0&&(n.isOpen=a[0]),e=new _e({props:n}),T.push(()=>X(e,"isOpen",o)),{c(){_(e.$$.fragment)},l(i){g(e.$$.fragment,i)},m(i,c){b(e,i,c),t=!0},p(i,[c]){const m={};c&4&&(m.$$scope={dirty:c,ctx:i}),!r&&c&1&&(r=!0,m.isOpen=i[0],V(()=>r=!1)),e.$set(m)},i(i){t||(l(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){d(e,i)}}}function xe(a,e,r){let{isOpen:t=!1}=e;function o(n){t=n,r(0,t)}return a.$$set=n=>{"isOpen"in n&&r(0,t=n.isOpen)},[t,o]}class Be extends L{constructor(e){super(),Q(this,e,xe,we,J,{isOpen:0})}}function Ce(a){let e,r;return e=new Z({props:{position:"fixed",rightFeed:!0}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function Oe(a){let e,r;return e=new Z({props:{position:"fixed",leftBack:!0}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function W(a){let e,r;return e=new ue({props:{boxes:a[0]}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},p(t,o){const n={};o&1&&(n.boxes=t[0]),e.$set(n)},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function Pe(a){let e,r;return e=new Y({props:{position:"fixed",leftReposition:!0,centerSearch:!0,right:"add"}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},p:z,i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function Se(a){let e,r;return e=new Y({props:{position:"fixed",bottom:"2rem",$$slots:{default:[ve]},$$scope:{ctx:a}}}),{c(){_(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),r=!0},p(t,o){const n={};o&2048&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(l(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){d(e,t)}}}function ye(a){let e;return{c(){e=G("이 장소가 아니예요")},l(r){e=K(r,"이 장소가 아니예요")},m(r,t){B(r,e,t)},d(r){r&&k(e)}}}function Ne(a){let e;return{c(){e=G("이 장소가 맞아요")},l(r){e=K(r,"이 장소가 맞아요")},m(r,t){B(r,e,t)},d(r){r&&k(e)}}}function ve(a){let e,r,t,o;return e=new H({props:{backgroundColor:"bg-gray-300",textColor:"text-white",$$slots:{default:[ye]},$$scope:{ctx:a}}}),e.$on("click",a[7]),t=new H({props:{backgroundColor:"bg-primary-500",textColor:"text-white",$$slots:{default:[Ne]},$$scope:{ctx:a}}}),t.$on("click",a[4]),{c(){_(e.$$.fragment),r=S(),_(t.$$.fragment)},l(n){g(e.$$.fragment,n),r=y(n),g(t.$$.fragment,n)},m(n,i){b(e,n,i),B(n,r,i),b(t,n,i),o=!0},p(n,i){const c={};i&2048&&(c.$$scope={dirty:i,ctx:n}),e.$set(c);const m={};i&2048&&(m.$$scope={dirty:i,ctx:n}),t.$set(m)},i(n){o||(l(e.$$.fragment,n),l(t.$$.fragment,n),o=!0)},o(n){p(e.$$.fragment,n),p(t.$$.fragment,n),o=!1},d(n){n&&k(r),d(e,n),d(t,n)}}}function De(a){let e,r,t,o,n,i,c,m,O,C,h,v,N,$,w;const P=[Oe,Ce],x=[];function D(s,f){return s[3]==="post"||s[3]==="box"||s[2]?0:1}e=D(a),r=x[e]=P[e](a),n=new le({props:{onMoveend:a[5]}});let u=a[0].length>0&&W(a);const ee=[Se,Pe],I=[];function te(s,f){return s[3]==="post"||s[3]==="box"?0:1}m=te(a),O=I[m]=ee[m](a);function re(s){a[8](s)}let E={};return a[1]!==void 0&&(E.isOpen=a[1]),h=new Be({props:E}),T.push(()=>X(h,"isOpen",re)),$=new ce({props:{show:a[3]!=="post"}}),{c(){r.c(),t=S(),o=ne("div"),_(n.$$.fragment),i=S(),u&&u.c(),c=S(),O.c(),C=S(),_(h.$$.fragment),N=S(),_($.$$.fragment),this.h()},l(s){r.l(s),t=y(s),o=se(s,"DIV",{class:!0});var f=oe(o);g(n.$$.fragment,f),f.forEach(k),i=y(s),u&&u.l(s),c=y(s),O.l(s),C=y(s),g(h.$$.fragment,s),N=y(s),g($.$$.fragment,s),this.h()},h(){ae(o,"class","fixed top-0 left-0 w-full h-full")},m(s,f){x[e].m(s,f),B(s,t,f),B(s,o,f),b(n,o,null),B(s,i,f),u&&u.m(s,f),B(s,c,f),I[m].m(s,f),B(s,C,f),b(h,s,f),B(s,N,f),b($,s,f),w=!0},p(s,[f]){let A=e;e=D(s),e!==A&&(R(),p(x[A],1,1,()=>{x[A]=null}),M(),r=x[e],r||(r=x[e]=P[e](s),r.c()),l(r,1),r.m(t.parentNode,t)),s[0].length>0?u?(u.p(s,f),f&1&&l(u,1)):(u=W(s),u.c(),l(u,1),u.m(c.parentNode,c)):u&&(R(),p(u,1,1,()=>{u=null}),M()),O.p(s,f);const F={};!v&&f&2&&(v=!0,F.isOpen=s[1],V(()=>v=!1)),h.$set(F)},i(s){w||(l(r),l(n.$$.fragment,s),l(u),l(O),l(h.$$.fragment,s),l($.$$.fragment,s),w=!0)},o(s){p(r),p(n.$$.fragment,s),p(u),p(O),p(h.$$.fragment,s),p($.$$.fragment,s),w=!1},d(s){s&&(k(t),k(o),k(i),k(c),k(C),k(N)),x[e].d(s),d(n),u&&u.d(s),I[m].d(s),d(h,s),d($,s)}}}function Ie(a,e,r){let t,o;ie(a,$e,$=>r(6,o=$));let n=[];const i=o.url.searchParams.get("type"),c=o.url.searchParams.get("tags");c&&U.set(c.split(","));let m=!1;q.on("openSearch",()=>{r(1,m=!0)}),q.on("closeSearch",()=>{r(1,m=!1)}),fe(()=>{U.set([])});async function O(){if(i==="box"){const $=o.url.searchParams.get("boxIdx"),w=Number(o.url.searchParams.get("boxIdx")),P=pe(),x=o.url.searchParams.get("placeIdx");if(Number.isNaN(w)||!$||!P||!x)return j("/boxes");(await de(P,$,x)).ok||q.emit("pushSnackbar",{message:"장소 추가에 실패했습니다."}),j(`/boxes/${$}/detail`)}else i==="post"&&me("/viewer/edit")}let C;async function h($){try{C&&C.abort("new request"),C=new AbortController;const w=await he($,C);if(!w.ok)return;const P=await w.json();r(0,n=P.data)}catch{}}const v=()=>window.history.back();function N($){m=$,r(1,m)}return a.$$.update=()=>{a.$$.dirty&64&&r(2,t=o.url.searchParams.get("withBack")==="true")},[n,m,t,i,O,h,o,v,N]}class rt extends L{constructor(e){super(),Q(this,e,Ie,De,J,{})}}export{rt as component};
