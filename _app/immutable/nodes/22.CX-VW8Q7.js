import{e as Ue}from"../chunks/index.BYra3FkN.js";import{b as ye,h as mt,A as Pe,e as Be,j as jt,g as Ke,s as We}from"../chunks/sign.EcRK1pqv.js";import{g as se}from"../chunks/entry.D7A6ubov.js";import{s as Xe,q as De,r as Se,b,f as d,v as u,i as P,h as f,n as Q,z as Dt,e as p,a as A,t as re,c as _,g as B,d as le,x as ke,y as M,j as be,A as Nt,L as pt,F as Ye,k as _t,w as Ot,B as Vt,Q as Ft,C as gt,P as vt,l as bt}from"../chunks/scheduler.CbwPF6wx.js";import{g as Mt}from"../chunks/boxRequest.Di3-UUh1.js";import{S as St,i as yt,f as qt,c as z,b as L,m as R,a as N,d as kt,t as T,e as H,g as wt}from"../chunks/index.DiLw73rm.js";import{e as ze}from"../chunks/each.CXq2Zfzp.js";import{p as Ut}from"../chunks/stores.Dzq5V1ch.js";import{H as zt,a as Lt,w as Rt}from"../chunks/Header.DSBRF39C.js";import{C as Ht}from"../chunks/CircleImage.S7F7_7k5.js";import"../chunks/ImageShaper.DEAJmI5j.js";import{N as Zt}from"../chunks/NavigationBar.Dd1oVpfp.js";import{s as Le}from"../chunks/s32cloudfront.CScW0fy2.js";import{B as Jt}from"../chunks/BottomNavigationPadder.BR6eHBA2.js";import{g as Gt,i as Qt,u as Wt,f as Kt}from"../chunks/follow.BhGOEYgJ.js";/* empty css                                                   */import{I as Xt}from"../chunks/IconLink.BCnKa0tU.js";import{A as Yt}from"../chunks/ActionSheet.8TbfphXF.js";import{I as es}from"../chunks/IconSearch.RLBETpqH.js";import{F as ts}from"../chunks/Figure.u4merw0D.js";import{g as Ct}from"../chunks/color.C_Jm4JAr.js";import{r as ss}from"../chunks/units.BJZU6p1c.js";import{i as rs}from"../chunks/device.D7tUp6nf.js";import{u as ls}from"../chunks/searchParams.DwV89tDN.js";function as(r){let e,t,s,l,a,n;return{c(){e=De("svg"),t=De("path"),s=De("path"),l=De("path"),a=De("path"),this.h()},l(i){e=Se(i,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var c=b(e);t=Se(c,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),b(t).forEach(d),s=Se(c,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),b(s).forEach(d),l=Se(c,"path",{d:!0,fill:!0}),b(l).forEach(d),a=Se(c,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linejoin":!0}),b(a).forEach(d),c.forEach(d),this.h()},h(){u(t,"d","M2 22V21C2 18.79 3.79 17 6 17H10C12.21 17 14 18.79 14 21V22"),u(t,"stroke",r[1]),u(t,"stroke-width","1.5"),u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(s,"d","M8 14C6.34 14 5 12.66 5 11C5 9.34 6.34 8 8 8C9.66 8 11 9.34 11 11C11 12.66 9.66 14 8 14Z"),u(s,"stroke",r[1]),u(s,"stroke-width","1.5"),u(s,"stroke-linecap","round"),u(s,"stroke-linejoin","round"),u(l,"d","M18.5018 6.68182C18.3812 6.68182 18.2656 6.63393 18.1804 6.54868C18.0951 6.46344 18.0472 6.34783 18.0472 6.22727L18.0472 3.95455C18.0472 3.83399 18.0951 3.71838 18.1804 3.63313C18.2656 3.54789 18.3812 3.5 18.5018 3.5C18.6223 3.5 18.7379 3.54789 18.8232 3.63313C18.9084 3.71838 18.9563 3.83399 18.9563 3.95455L18.9563 6.22727C18.9563 6.34783 18.9084 6.46344 18.8232 6.54868C18.7379 6.63393 18.6223 6.68182 18.5018 6.68182ZM17.82 7.81818C17.82 7.63735 17.8918 7.46393 18.0197 7.33606C18.1475 7.2082 18.3209 7.13636 18.5018 7.13636C18.6826 7.13636 18.856 7.2082 18.9839 7.33606C19.1118 7.46393 19.1836 7.63735 19.1836 7.81818C19.1836 7.99901 19.1118 8.17243 18.9839 8.3003C18.856 8.42817 18.6826 8.5 18.5018 8.5C18.3209 8.5 18.1475 8.42817 18.0197 8.3003C17.8918 8.17243 17.82 7.99901 17.82 7.81818Z"),u(l,"fill",r[0]),u(a,"d","M19.8856 2.2C19.2698 1.13333 17.7302 1.13333 17.1144 2.2L14.0833 7.45C13.4674 8.51667 14.2372 9.85 15.4689 9.85H21.5311C22.7628 9.85 23.5326 8.51667 22.9167 7.45L19.8856 2.2Z"),u(a,"stroke",r[1]),u(a,"stroke-width","1.2"),u(a,"stroke-linejoin","round"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"width",r[2]),u(e,"height",r[2]),u(e,"viewBox",n="0 0 "+r[2]+" "+r[2]),u(e,"fill","none")},m(i,c){P(i,e,c),f(e,t),f(e,s),f(e,l),f(e,a)},p(i,[c]){c&2&&u(t,"stroke",i[1]),c&2&&u(s,"stroke",i[1]),c&1&&u(l,"fill",i[0]),c&2&&u(a,"stroke",i[1]),c&4&&u(e,"width",i[2]),c&4&&u(e,"height",i[2]),c&4&&n!==(n="0 0 "+i[2]+" "+i[2])&&u(e,"viewBox",n)},i:Q,o:Q,d(i){i&&d(e)}}}function ns(r,e,t){let s,{fill:l="#FF4F1E"}=e,{stroke:a="#FF4F1E"}=e,{length:n="1.5"}=e;return r.$$set=i=>{"fill"in i&&t(0,l=i.fill),"stroke"in i&&t(1,a=i.stroke),"length"in i&&t(3,n=i.length)},r.$$.update=()=>{r.$$.dirty&8&&t(2,s=ss(n))},[l,a,s,n]}class os extends St{constructor(e){super(),yt(this,e,ns,as,Xe,{fill:0,stroke:1,length:3})}}function xt(r,e,t){const s=r.slice();return s[32]=e[t],s[34]=t,s}function It(r,e,t){const s=r.slice();return s[35]=e[t],s[34]=t,s}function is(r){let e,t,s,l,a,n,i,c,g;return s=new es({props:{width:"24",height:"24"}}),n=new Lt({}),{c(){e=p("div"),t=p("button"),z(s.$$.fragment),l=A(),a=p("button"),z(n.$$.fragment),this.h()},l(v){e=_(v,"DIV",{slot:!0,class:!0});var x=b(e);t=_(x,"BUTTON",{});var w=b(t);L(s.$$.fragment,w),w.forEach(d),l=B(x),a=_(x,"BUTTON",{});var k=b(a);L(n.$$.fragment,k),k.forEach(d),x.forEach(d),this.h()},h(){u(e,"slot","right"),u(e,"class","flex items-center gap-2")},m(v,x){P(v,e,x),f(e,t),R(s,t,null),f(e,l),f(e,a),R(n,a,null),i=!0,c||(g=[M(t,"click",r[15]),M(a,"click",r[16])],c=!0)},p:Q,i(v){i||(T(s.$$.fragment,v),T(n.$$.fragment,v),i=!0)},o(v){N(s.$$.fragment,v),N(n.$$.fragment,v),i=!1},d(v){v&&d(e),H(s),H(n),c=!1,Ye(g)}}}function us(r){var a;let e,t,s=(((a=r[0].unique_name)==null?void 0:a.at(0))??"u")+"",l;return{c(){e=p("div"),t=p("span"),l=re(s),this.h()},l(n){e=_(n,"DIV",{class:!0,style:!0});var i=b(e);t=_(i,"SPAN",{class:!0});var c=b(t);l=le(c,s),c.forEach(d),i.forEach(d),this.h()},h(){u(t,"class","text-2xl font-semibold text-black"),u(e,"class","w-full h-full flex items-center justify-center"),gt(e,"background-color",Ct(r[0].unique_name))},m(n,i){P(n,e,i),f(e,t),f(t,l)},p(n,i){var c;i[0]&1&&s!==(s=(((c=n[0].unique_name)==null?void 0:c.at(0))??"u")+"")&&be(l,s),i[0]&1&&gt(e,"background-color",Ct(n[0].unique_name))},i:Q,o:Q,d(n){n&&d(e)}}}function cs(r){let e,t;return e=new Ht({props:{src:Le(r[0].profile_image_url,500),width:"4.375rem",strokeWidth:"0"}}),{c(){z(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,l){R(e,s,l),t=!0},p(s,l){const a={};l[0]&1&&(a.src=Le(s[0].profile_image_url,500)),e.$set(a)},i(s){t||(T(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function fs(r){let e;function t(a,n){return a[7]==!0?ms:hs}let s=t(r),l=s(r);return{c(){e=p("div"),l.c()},l(a){e=_(a,"DIV",{});var n=b(e);l.l(n),n.forEach(d)},m(a,n){P(a,e,n),l.m(e,null)},p(a,n){s===(s=t(a))&&l?l.p(a,n):(l.d(1),l=s(a),l&&(l.c(),l.m(e,null)))},d(a){a&&d(e),l.d()}}}function ds(r){let e,t,s="프로필 편집",l,a;return{c(){e=p("div"),t=p("button"),t.textContent=s,this.h()},l(n){e=_(n,"DIV",{});var i=b(e);t=_(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-158wor6"&&(t.textContent=s),i.forEach(d),this.h()},h(){u(t,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(n,i){P(n,e,i),f(e,t),l||(a=M(t,"click",r[19]),l=!0)},p:Q,d(n){n&&d(e),l=!1,a()}}}function hs(r){let e,t,s="팔로우",l,a;return{c(){e=p("button"),t=p("div"),t.textContent=s,this.h()},l(n){e=_(n,"BUTTON",{class:!0});var i=b(e);t=_(i,"DIV",{"data-svelte-h":!0}),ke(t)!=="svelte-1gransi"&&(t.textContent=s),i.forEach(d),this.h()},h(){u(e,"class","w-full bg-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-white p-2.5 ")},m(n,i){P(n,e,i),f(e,t),l||(a=M(t,"click",r[21]),l=!0)},p:Q,d(n){n&&d(e),l=!1,a()}}}function ms(r){let e,t="팔로잉",s,l;return{c(){e=p("button"),e.textContent=t,this.h()},l(a){e=_(a,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(e)!=="svelte-1tksgkg"&&(e.textContent=t),this.h()},h(){u(e,"class","w-full border border-primary-500 rounded-[3.125rem] text-sm font-medium leading-4 text-primary-500 p-2.5 ")},m(a,n){P(a,e,n),s||(l=M(e,"click",r[20]),s=!0)},p:Q,d(a){a&&d(e),s=!1,l()}}}function Et(r){let e,t,s;return{c(){e=p("img"),this.h()},l(l){e=_(l,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){u(e,"class","w-full h-full object-cover bg-[#D9D9D9] brightness-75"),vt(e.src,t=Le(r[35].image,500))||u(e,"src",t),u(e,"alt",s=r[35].name)},m(l,a){P(l,e,a)},p(l,a){a[0]&8&&!vt(e.src,t=Le(l[35].image,500))&&u(e,"src",t),a[0]&8&&s!==(s=l[35].name)&&u(e,"alt",s)},d(l){l&&d(e)}}}function $t(r){let e,t,s,l=r[35].name+"",a,n,i=r[35].image,c,g,v,x=Et(r);function w(){return r[22](r[35])}return{c(){e=p("div"),t=p("div"),s=p("span"),a=re(l),n=A(),x.c(),c=A(),this.h()},l(k){e=_(k,"DIV",{class:!0});var I=b(e);t=_(I,"DIV",{class:!0});var $=b(t);s=_($,"SPAN",{class:!0});var j=b(s);a=le(j,l),j.forEach(d),n=B($),x.l($),$.forEach(d),c=B(I),I.forEach(d),this.h()},h(){u(s,"class","absolute inset-0 flex items-center justify-center z-10 text-xs text-center font-medium leading-[1.125rem] tracking-[-0.0375rem] "),u(t,"class","relative w-full h-full rounded-full overflow-hidden border-4 border-white/15 "),u(e,"class","w-[4.875rem] h-[4.875rem] flex-shrink-0")},m(k,I){P(k,e,I),f(e,t),f(t,s),f(s,a),f(t,n),x.m(t,null),f(e,c),g||(v=M(t,"click",w),g=!0)},p(k,I){r=k,I[0]&8&&l!==(l=r[35].name+"")&&be(a,l),I[0]&8&&Xe(i,i=r[35].image)?(x.d(1),x=Et(r),x.c(),x.m(t,null)):x.p(r,I)},d(k){k&&d(e),x.d(k),g=!1,v()}}}function At(r){let e,t,s,l,a,n;t=new ts({props:{src:r[32].media[0],post:r[32],isThumbnail:!0,loading:"lazy",useThumbnailInVideo:rs,fetchpriority:r[34]<=9?"high":"low",imgSize:500}});function i(){return r[23](r[32])}return{c(){e=p("div"),z(t.$$.fragment),s=A(),this.h()},l(c){e=_(c,"DIV",{class:!0});var g=b(e);L(t.$$.fragment,g),s=B(g),g.forEach(d),this.h()},h(){u(e,"class","aspect-square overflow-hidden relative")},m(c,g){P(c,e,g),R(t,e,null),f(e,s),l=!0,a||(n=M(e,"click",i),a=!0)},p(c,g){r=c;const v={};g[0]&4&&(v.src=r[32].media[0]),g[0]&4&&(v.post=r[32]),t.$set(v)},i(c){l||(T(t.$$.fragment,c),l=!0)},o(c){N(t.$$.fragment,c),l=!1},d(c){c&&d(e),H(t),a=!1,n()}}}function ps(r){let e,t,s,l,a,n,i,c,g,v,x;return s=new Xt({props:{length:1.5,fill:"white"}}),i=new os({}),{c(){e=p("div"),t=p("button"),z(s.$$.fragment),l=re(`
      링크 복사`),a=A(),n=p("button"),z(i.$$.fragment),c=re(`
      계정 신고하기`),this.h()},l(w){e=_(w,"DIV",{class:!0});var k=b(e);t=_(k,"BUTTON",{class:!0});var I=b(t);L(s.$$.fragment,I),l=le(I,`
      링크 복사`),I.forEach(d),a=B(k),n=_(k,"BUTTON",{class:!0});var $=b(n);L(i.$$.fragment,$),c=le($,`
      계정 신고하기`),$.forEach(d),k.forEach(d),this.h()},h(){u(t,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),u(n,"class","py-2 flex gap-2 items-center text-white text-sm leading-4 font-medium"),u(e,"class","px-5")},m(w,k){P(w,e,k),f(e,t),R(s,t,null),f(t,l),f(e,a),f(e,n),R(i,n,null),f(n,c),g=!0,v||(x=[M(t,"click",r[25]),M(n,"click",r[12])],v=!0)},p:Q,i(w){g||(T(s.$$.fragment,w),T(i.$$.fragment,w),g=!0)},o(w){N(s.$$.fragment,w),N(i.$$.fragment,w),g=!1},d(w){w&&d(e),H(s),H(i),v=!1,Ye(x)}}}function _s(r){let e,t,s,l,a,n,i,c,g,v,x,w,k,I,$=r[2].length+"",j,W,q,Te="포스트",we,O,K,de,Ce,Z,je="팔로워",xe,V,X,he,Ie,J,Ne="팔로잉",Ee,m,D,Y=r[0].unique_name+"",$e,me,ae,Re,pe,ne,He,oe,Ze,Ae,Je,ie,Oe,ue,Ve,G,Ge,ee,Qe,et;l=new zt({props:{position:"static",leftBack:"white",$$slots:{right:[is]},$$scope:{ctx:r}}});const tt=[cs,us],te=[];function st(o,h){return o[0].profile_image_url?0:1}g=st(r),v=te[g]=tt[g](r);function rt(o,h){return o[6]?ds:fs}let Fe=rt(r),F=Fe(r),_e=ze(r[3]),S=[];for(let o=0;o<_e.length;o+=1)S[o]=$t(It(r,_e,o));let ce=ze(r[2]),E=[];for(let o=0;o<ce.length;o+=1)E[o]=At(xt(r,ce,o));const Pt=o=>N(E[o],1,1,()=>{E[o]=null});ie=new Jt({}),ue=new Zt({});function Tt(o){r[26](o)}let lt={fixed:!0,noHandle:!0,$$slots:{default:[ps]},$$scope:{ctx:r}};return r[9]!==void 0&&(lt.isOpen=r[9]),G=new Yt({props:lt}),Dt.push(()=>qt(G,"isOpen",Tt)),{c(){e=p("div"),t=A(),s=p("div"),z(l.$$.fragment),a=A(),n=p("section"),i=p("div"),c=p("div"),v.c(),x=A(),w=p("div"),k=p("div"),I=p("span"),j=re($),W=A(),q=p("span"),q.textContent=Te,we=A(),O=p("div"),K=p("span"),de=re(r[4]),Ce=A(),Z=p("span"),Z.textContent=je,xe=A(),V=p("div"),X=p("span"),he=re(r[5]),Ie=A(),J=p("span"),J.textContent=Ne,Ee=A(),m=p("section"),D=p("span"),$e=re(Y),me=A(),ae=p("section"),F.c(),Re=A(),pe=p("section"),ne=p("div");for(let o=0;o<S.length;o+=1)S[o].c();He=A(),oe=p("div");for(let o=0;o<E.length;o+=1)E[o].c();Ze=A(),Ae=p("div"),Je=A(),z(ie.$$.fragment),Oe=A(),z(ue.$$.fragment),Ve=A(),z(G.$$.fragment),this.h()},l(o){e=_(o,"DIV",{class:!0}),b(e).forEach(d),t=B(o),s=_(o,"DIV",{class:!0});var h=b(s);L(l.$$.fragment,h),a=B(h),n=_(h,"SECTION",{class:!0});var y=b(n);i=_(y,"DIV",{class:!0});var ge=b(i);c=_(ge,"DIV",{class:!0});var ve=b(c);v.l(ve),ve.forEach(d),ge.forEach(d),x=B(y),w=_(y,"DIV",{class:!0});var C=b(w);k=_(C,"DIV",{class:!0});var U=b(k);I=_(U,"SPAN",{class:!0});var at=b(I);j=le(at,$),at.forEach(d),W=B(U),q=_(U,"SPAN",{class:!0,"data-svelte-h":!0}),ke(q)!=="svelte-13hqbuq"&&(q.textContent=Te),U.forEach(d),we=B(C),O=_(C,"DIV",{class:!0});var Me=b(O);K=_(Me,"SPAN",{class:!0});var nt=b(K);de=le(nt,r[4]),nt.forEach(d),Ce=B(Me),Z=_(Me,"SPAN",{class:!0,"data-svelte-h":!0}),ke(Z)!=="svelte-1nb7yum"&&(Z.textContent=je),Me.forEach(d),xe=B(C),V=_(C,"DIV",{class:!0});var qe=b(V);X=_(qe,"SPAN",{class:!0});var ot=b(X);he=le(ot,r[5]),ot.forEach(d),Ie=B(qe),J=_(qe,"SPAN",{class:!0,"data-svelte-h":!0}),ke(J)!=="svelte-ugas5h"&&(J.textContent=Ne),qe.forEach(d),C.forEach(d),y.forEach(d),Ee=B(h),m=_(h,"SECTION",{class:!0});var it=b(m);D=_(it,"SPAN",{class:!0});var ut=b(D);$e=le(ut,Y),ut.forEach(d),it.forEach(d),me=B(h),ae=_(h,"SECTION",{class:!0});var ct=b(ae);F.l(ct),ct.forEach(d),Re=B(h),pe=_(h,"SECTION",{class:!0});var ft=b(pe);ne=_(ft,"DIV",{class:!0});var dt=b(ne);for(let fe=0;fe<S.length;fe+=1)S[fe].l(dt);dt.forEach(d),ft.forEach(d),He=B(h),oe=_(h,"DIV",{class:!0});var ht=b(oe);for(let fe=0;fe<E.length;fe+=1)E[fe].l(ht);ht.forEach(d),Ze=B(h),Ae=_(h,"DIV",{}),b(Ae).forEach(d),Je=B(h),L(ie.$$.fragment,h),h.forEach(d),Oe=B(o),L(ue.$$.fragment,o),Ve=B(o),L(G.$$.fragment,o),this.h()},h(){u(e,"class","fixed w-full h-full bg-black -z-10"),u(c,"class","w-[4.375rem] h-[4.375rem] rounded-full overflow-hidden"),u(i,"class","flex flex-col gap-2 items-center"),u(I,"class","text-[0.8125rem] font-semibold"),u(q,"class","text-xs"),u(k,"class","flex flex-col items-center"),u(K,"class","text-[0.8125rem] font-semibold"),u(Z,"class","text-xs"),u(O,"class","flex flex-col items-center"),u(X,"class","text-[0.8125rem] font-semibold"),u(J,"class","text-xs"),u(V,"class","flex flex-col items-center"),u(w,"class","flex gap-8 justify-start"),u(n,"class","flex px-5 pt-3.5 gap-6 items-center"),u(D,"class","text-sm font-medium"),u(m,"class","mt-[1.125rem] px-5"),u(ae,"class","px-5 pt-[0.88rem]"),u(ne,"class","flex overflow-x-auto space-x-5 px-5 pb-[1.5rem]"),u(pe,"class","mt-[1.69rem]"),u(oe,"class","grid grid-cols-3 gap-[0.19rem]"),u(s,"class","w-full h-full text-white")},m(o,h){P(o,e,h),P(o,t,h),P(o,s,h),R(l,s,null),f(s,a),f(s,n),f(n,i),f(i,c),te[g].m(c,null),f(n,x),f(n,w),f(w,k),f(k,I),f(I,j),f(k,W),f(k,q),f(w,we),f(w,O),f(O,K),f(K,de),f(O,Ce),f(O,Z),f(w,xe),f(w,V),f(V,X),f(X,he),f(V,Ie),f(V,J),f(s,Ee),f(s,m),f(m,D),f(D,$e),f(s,me),f(s,ae),F.m(ae,null),f(s,Re),f(s,pe),f(pe,ne);for(let y=0;y<S.length;y+=1)S[y]&&S[y].m(ne,null);f(s,He),f(s,oe);for(let y=0;y<E.length;y+=1)E[y]&&E[y].m(oe,null);f(s,Ze),f(s,Ae),r[24](Ae),f(s,Je),R(ie,s,null),P(o,Oe,h),R(ue,o,h),P(o,Ve,h),R(G,o,h),ee=!0,Qe||(et=[M(O,"click",r[17]),M(V,"click",r[18])],Qe=!0)},p(o,h){const y={};h[0]&578|h[1]&64&&(y.$$scope={dirty:h,ctx:o}),l.$set(y);let ge=g;if(g=st(o),g===ge?te[g].p(o,h):(wt(),N(te[ge],1,1,()=>{te[ge]=null}),kt(),v=te[g],v?v.p(o,h):(v=te[g]=tt[g](o),v.c()),T(v,1),v.m(c,null)),(!ee||h[0]&4)&&$!==($=o[2].length+"")&&be(j,$),(!ee||h[0]&16)&&be(de,o[4]),(!ee||h[0]&32)&&be(he,o[5]),(!ee||h[0]&1)&&Y!==(Y=o[0].unique_name+"")&&be($e,Y),Fe===(Fe=rt(o))&&F?F.p(o,h):(F.d(1),F=Fe(o),F&&(F.c(),F.m(ae,null))),h[0]&8){_e=ze(o[3]);let C;for(C=0;C<_e.length;C+=1){const U=It(o,_e,C);S[C]?S[C].p(U,h):(S[C]=$t(U),S[C].c(),S[C].m(ne,null))}for(;C<S.length;C+=1)S[C].d(1);S.length=_e.length}if(h[0]&2055){ce=ze(o[2]);let C;for(C=0;C<ce.length;C+=1){const U=xt(o,ce,C);E[C]?(E[C].p(U,h),T(E[C],1)):(E[C]=At(U),E[C].c(),T(E[C],1),E[C].m(oe,null))}for(wt(),C=ce.length;C<E.length;C+=1)Pt(C);kt()}const ve={};h[0]&514|h[1]&64&&(ve.$$scope={dirty:h,ctx:o}),!Ge&&h[0]&512&&(Ge=!0,ve.isOpen=o[9],Nt(()=>Ge=!1)),G.$set(ve)},i(o){if(!ee){T(l.$$.fragment,o),T(v);for(let h=0;h<ce.length;h+=1)T(E[h]);T(ie.$$.fragment,o),T(ue.$$.fragment,o),T(G.$$.fragment,o),ee=!0}},o(o){N(l.$$.fragment,o),N(v),E=E.filter(Boolean);for(let h=0;h<E.length;h+=1)N(E[h]);N(ie.$$.fragment,o),N(ue.$$.fragment,o),N(G.$$.fragment,o),ee=!1},d(o){o&&(d(e),d(t),d(s),d(Oe),d(Ve)),H(l),te[g].d(),F.d(),pt(S,o),pt(E,o),r[24](null),H(ie),H(ue,o),H(G,o),Qe=!1,Ye(et)}}}let Bt=24;function gs(r,e,t){let s,l;_t(r,Ut,m=>t(1,s=m)),_t(r,mt,m=>t(11,l=m));let{data:a}=e,n=a.user??{},i=a.posts??[],c=a.boxes??[],g=0,v=0,x=!1,w=!1,k=ye(),I=!1,$=!1,j,W,q=24;async function Te(){var m;if(n.idx)try{const D=Ke(),Y=await fetch(`${Pe}/posts?userIdx=${n.idx}&offset=${q}&limit=${Bt}`,{headers:{Authorization:`Bearer ${D}`}});if(!Y.ok)return;const me=((m=(await Y.json()).data)==null?void 0:m.posts)??[];me.length>0?(t(2,i=i.concat(me)),q+=Bt):W.unobserve(j)}catch{}}Ot(()=>{W=new IntersectionObserver(m=>{m[0].isIntersecting&&Te()},{rootMargin:"10%"}),W.observe(j)}),Vt(()=>W.unobserve(j));function we(){fetch(`${Pe}/auth/followers?targetTable=users&subjectTable=users&subjectIdx=${s.params.idx}`).then(m=>m.json()).then(m=>{t(5,v=m.data.length)})}let O=!1;async function K(){if(window.confirm("계정을 신고하시겠어요?")&&!O){O=!0,Be.emit("loading",!0);try{const D=new URL(`${Pe}/auth/permissions`);D.searchParams.set("targetTable","users"),D.searchParams.set("targetIdx",s.params.idx),D.searchParams.set("relation","reported"),D.searchParams.set("subjectTable","users"),D.searchParams.set("subjectIdx",jt().sub),D.searchParams.set("metadata",JSON.stringify({text:"계정 신고",value:"account"})),t(9,$=!1),await fetch(D,{method:"PUT",headers:{Authorization:`Bearer ${Ke()}`}}),Be.emit("pushSnackbar",{message:"신고가 접수되었습니다."})}catch(D){throw Be.emit("pushSnackbar",{message:"신고에 실패했습니다."}),D}finally{O=!1,Be.emit("loading",!1)}}}const de=async()=>{await se("/search")},Ce=()=>{x?se(`/users/${s.params.idx}/setting`):t(9,$=!0)},Z=async()=>{const m=`/users/${s.params.idx}/followers?tab=followers`;console.log(m),await se(m)},je=async()=>{const m=`/users/${s.params.idx}/followers?tab=followings`;console.log(m),await se(m)},xe=async()=>{await se(`/users/${s.params.idx}/setting/profile`)},V=async()=>{I||(t(8,I=!0),await Wt({targetIdx:s.params.idx,subjectIdx:ye()}),t(7,w=!1),t(4,g-=1),t(8,I=!1))},X=async()=>{const m=ye();if(!m){Be.emit("showSignInModal");return}I||(t(8,I=!0),await Kt({targetIdx:s.params.idx,subjectIdx:m}),t(7,w=!0),t(4,g+=1),t(8,I=!1))},he=m=>{se(`/boxes/${m.idx}`)},Ie=async m=>{try{if((n==null?void 0:n.idx)===0)return;Ft(mt,l=i,l),await se(`/viewer?userIdx=${s.params.idx}&postIdx=${m.idx}`,{replaceState:!1,invalidateAll:!1})}catch{}};function J(m){Dt[m?"unshift":"push"](()=>{j=m,t(10,j)})}const Ne=()=>{Rt(s.url),t(9,$=!1)};function Ee(m){$=m,t(9,$)}return r.$$set=m=>{"data"in m&&t(13,a=m.data)},r.$$.update=()=>{if(r.$$.dirty[0]&24579&&a.user&&s.params.idx&&s.params.idx!=="0"&&(t(0,n=a.user),t(2,i=a.posts),t(3,c=a.boxes),t(14,k=ye()),t(6,x=String(n==null?void 0:n.idx)===String(k)),Gt({targetIdx:s.params.idx}).then(m=>{t(4,g=m)}),we(),k&&Qt({targetIdx:s.params.idx,subjectIdx:k}).then(m=>{t(7,w=m)})),r.$$.dirty[0]&8194&&!a.user&&s.params.idx==="0")try{ls({replace:"1"},{replace:!0})}catch{}},[n,s,i,c,g,v,x,w,I,$,j,l,K,a,k,de,Ce,Z,je,xe,V,X,he,Ie,J,Ne,Ee]}class Ls extends St{constructor(e){super(),yt(this,e,gs,_s,Xe,{data:13},null,[-1,-1])}}const vs=async({params:r,fetch:e,depends:t,url:s})=>{var n;t("app:user");const l=ye(),a=Ke();if(r.idx==="0"&&l===null)return{};if(r.idx==="0"&&l!==null)return se(`/users/${String(l)}`,{replaceState:s.searchParams.get("replace")==="1"});if(r.idx!=="0")try{const[i,c]=await Promise.all([e(`${Pe}/auth/users/${r.idx}`,{headers:{Authorization:`Bearer ${a}`}}),e(`${Pe}/posts?userIdx=${r.idx}&limit=24`,{headers:{Authorization:`Bearer ${a}`}})]);if(!i.ok||!c.ok)throw Ue(500,"Failed to fetch data");const g=await i.json(),v=await c.json();let x=[];const w=String(l)===r.idx;if(w&&bt(We).length!==0)x=bt(We);else{const k=await Mt(a,r.idx);if(!k.ok)throw Ue(500,"Failed to fetch data");const I=await k.json();w&&We.set(I.data),x=I.data}return{user:{...g.data,idx:Number(r.idx)},posts:((n=v.data)==null?void 0:n.posts)??[],boxes:x}}catch{throw Ue(500,"An error occurred while loading data")}throw Ue(404,"Not found")},Rs=Object.freeze(Object.defineProperty({__proto__:null,load:vs},Symbol.toStringTag,{value:"Module"}));export{Ls as component,Rs as universal};
