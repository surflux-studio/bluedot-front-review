import{s as E,e as F,c as P,b as T,f as p,m as D,u as L,i as _,v as y,w as S,n as I,r as U,o as G,t as j,d as z,x as A,h as K,j as Q,y as R,z as W,q as J,a as v,g as w,A as M}from"../chunks/scheduler.B36p9E6k.js";import{S as q,i as H,e as V,c as m,a as d,m as g,t as h,b as $,d as b}from"../chunks/index.K404SoRv.js";import{H as X}from"../chunks/Header.TgeaIWhT.js";import{V as Y}from"../chunks/Viewer.BFQjIlXd.js";import{F as Z}from"../chunks/Footer.C96VyIka.js";import{B as ee}from"../chunks/Button.DPP8rmSJ.js";import{e as B,u as te,d as se}from"../chunks/each.CPGC1t5D.js";import{a as O}from"../chunks/searchParams.BqjF-M4P.js";import{g as ne}from"../chunks/entry.CSULzzio.js";function N(r,t,e){const o=r.slice();return o[4]=t[e],o[6]=e,o}function x(r,t){let e,o=t[4]+"",a,c;return{key:r,first:null,c(){e=F("option"),a=j(o),this.h()},l(i){e=P(i,"OPTION",{});var f=T(e);a=z(f,o),f.forEach(p),this.h()},h(){e.__value=c=t[4],A(e,e.__value),this.first=e},m(i,f){_(i,e,f),K(e,a)},p(i,f){t=i,f&2&&o!==(o=t[4]+"")&&Q(a,o),f&2&&c!==(c=t[4])&&(e.__value=c,A(e,e.__value))},d(i){i&&p(e)}}}function oe(r){let t,e=[],o=new Map,a,c,i=B(r[1]);const f=n=>n[6];for(let n=0;n<i.length;n+=1){let l=N(r,i,n),s=f(l);o.set(s,e[n]=x(s,l))}return{c(){t=F("select");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=P(n,"SELECT",{class:!0});var l=T(t);for(let s=0;s<e.length;s+=1)e[s].l(l);l.forEach(p),this.h()},h(){D(t,"class","border border-gray-200 rounded-[4.75rem] py-[0.38rem] px-[0.88rem] typo-body3 text-gray-900 bg-gray-100"),r[0]===void 0&&L(()=>r[3].call(t))},m(n,l){_(n,t,l);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(t,null);y(t,r[0],!0),a||(c=[S(t,"change",r[3]),S(t,"change",r[2])],a=!0)},p(n,[l]){l&2&&(i=B(n[1]),e=te(e,l,f,1,n,i,o,t,se,x,null,N)),l&3&&y(t,n[0])},i:I,o:I,d(n){n&&p(t);for(let l=0;l<e.length;l+=1)e[l].d();a=!1,U(c)}}}function ae(r,t,e){let{selected:o=""}=t,{options:a=[]}=t;G(()=>{a.length>0&&e(0,o=a[0])});function c(f){R.call(this,r,f)}function i(){o=W(this),e(0,o),e(1,a)}return r.$$set=f=>{"selected"in f&&e(0,o=f.selected),"options"in f&&e(1,a=f.options)},[o,a,c,i]}class re extends q{constructor(t){super(),H(this,t,ae,oe,E,{selected:0,options:1})}}function le(r){let t;return{c(){t=j("게시하기")},l(e){t=z(e,"게시하기")},m(e,o){_(e,t,o)},d(e){e&&p(t)}}}function ie(r){let t,e,o,a,c;function i(n){r[4](n)}let f={options:["전체 공개","팔로워 공개","비공개"]};return r[1]!==void 0&&(f.selected=r[1]),t=new re({props:f}),J.push(()=>V(t,"selected",i)),a=new ee({props:{backgroundColor:"bg-primary-500",textColor:"text-white",border:"border-none",$$slots:{default:[le]},$$scope:{ctx:r}}}),a.$on("click",r[2]),{c(){m(t.$$.fragment),o=v(),m(a.$$.fragment)},l(n){d(t.$$.fragment,n),o=w(n),d(a.$$.fragment,n)},m(n,l){g(t,n,l),_(n,o,l),g(a,n,l),c=!0},p(n,l){const s={};!e&&l&2&&(e=!0,s.selected=n[1],M(()=>e=!1)),t.$set(s);const u={};l&128&&(u.$$scope={dirty:l,ctx:n}),a.$set(u)},i(n){c||(h(t.$$.fragment,n),h(a.$$.fragment,n),c=!0)},o(n){$(t.$$.fragment,n),$(a.$$.fragment,n),c=!1},d(n){n&&p(o),b(t,n),b(a,n)}}}function fe(r){let t,e,o,a,c,i,f;t=new X({props:{position:"fixed",leftBack:"white"}});function n(s){r[3](s)}let l={};return r[0]!==void 0&&(l.posts=r[0]),o=new Y({props:l}),J.push(()=>V(o,"posts",n)),i=new Z({props:{position:"fixed",$$slots:{default:[ie]},$$scope:{ctx:r}}}),{c(){m(t.$$.fragment),e=v(),m(o.$$.fragment),c=v(),m(i.$$.fragment)},l(s){d(t.$$.fragment,s),e=w(s),d(o.$$.fragment,s),c=w(s),d(i.$$.fragment,s)},m(s,u){g(t,s,u),_(s,e,u),g(o,s,u),_(s,c,u),g(i,s,u),f=!0},p(s,[u]){const C={};!a&&u&1&&(a=!0,C.posts=s[0],M(()=>a=!1)),o.$set(C);const k={};u&130&&(k.$$scope={dirty:u,ctx:s}),i.$set(k)},i(s){f||(h(t.$$.fragment,s),h(o.$$.fragment,s),h(i.$$.fragment,s),f=!0)},o(s){$(t.$$.fragment,s),$(o.$$.fragment,s),$(i.$$.fragment,s),f=!1},d(s){s&&(p(e),p(c)),b(t,s),b(o,s),b(i,s)}}}function ce(r,t,e){const o=JSON.parse(sessionStorage.getItem("postMedia")||"[]");let a=[{user:{idx:null,name:JSON.parse(sessionStorage.getItem("user")).display_name},place:{idx:null,name:O("placeName")},medias:o,mediaIdx:0,text:""}],c;const i={"전체 공개":"public","팔로워 공개":"follower",비공개:"private"};async function f(){var u;(await fetch("https://azit.surflux.studio/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("jwt")}`},body:JSON.stringify({placeIdx:O("placeIdx"),text:((u=a.at(0))==null?void 0:u.text)||"",media:o,permission:i[c]})})).ok&&ne("/viewer")}function n(s){a=s,e(0,a)}function l(s){c=s,e(1,c)}return[a,c,f,n,l]}class ve extends q{constructor(t){super(),H(this,t,ce,fe,E,{})}}export{ve as component};
