import{g as ve,A as ge,e as be}from"../chunks/units.DtuR4fdj.js";import{g as ie}from"../chunks/entry.aeROdYTI.js";import{s as we,e as w,a as O,t as X,v as ce,c as $,b as y,f as u,g as B,d as Q,q as d,G as C,Q as fe,i as q,h as c,r as ue,I as $e,C as ye,o as xe,l as Ie,n as pe,J as ke}from"../chunks/scheduler.BiUHV-k5.js";import{S as Ee,i as je,c as Y,a as ee,m as te,t as G,b as F,f as De,d as se,g as Ve}from"../chunks/index.DaxfEsq8.js";import{e as de}from"../chunks/each.BSmogOji.js";import{H as Te}from"../chunks/Header.Fgq5wPpi.js";import{M as Oe}from"../chunks/Map.DrEpIOwQ.js";import{F as Be}from"../chunks/Footer.CtNJRQxI.js";import{a as A,v as Me}from"../chunks/map.cADd4nz2.js";import{f as Ne}from"../chunks/proj.DXH8zrwl.js";import{s as Pe}from"../chunks/s32cloudfront.PNPXVZPo.js";const Se=async({params:l,fetch:e})=>{const a=ve();if(a===null)return ie("/boxes");const t=await e(`${ge}/boxes/${l.idx}`,{method:"GET",headers:{Authorization:`Bearer ${a}`}});return t.ok?(await t.json()).data:ie("/boxes")},We=Object.freeze(Object.defineProperty({__proto__:null,load:Se},Symbol.toStringTag,{value:"Module"}));function me(l,e,a){const t=l.slice();return t[10]=e[a],t}function Ce(l){let e,a=l[1].name+"",t;return{c(){e=w("div"),t=X(a),this.h()},l(o){e=$(o,"DIV",{class:!0});var m=y(e);t=Q(m,a),m.forEach(u),this.h()},h(){d(e,"class","typo-sub-h3 text-gray-900")},m(o,m){q(o,e,m),c(e,t)},p:pe,d(o){o&&u(e)}}}function Ge(l){let e,a;return{c(){e=w("img"),this.h()},l(t){e=$(t,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){var t,o;d(e,"class","w-full h-full object-cover"),d(e,"alt","장소 사진"),ke(e.src,a=Pe((o=(t=l[10])==null?void 0:t.media)==null?void 0:o.at(0)))||d(e,"src",a)},m(t,o){q(t,e,o)},p:pe,d(t){t&&u(e)}}}function he(l){var E,x;let e,a=(x=(E=l[10])==null?void 0:E.media)==null?void 0:x.at(0),t,o,m=l[10].name+"",p,v,h=a&&Ge(l);return{c(){e=w("div"),h&&h.c(),t=O(),o=w("div"),p=X(m),v=O(),this.h()},l(f){e=$(f,"DIV",{class:!0});var g=y(e);h&&h.l(g),t=B(g),o=$(g,"DIV",{class:!0});var r=y(o);p=Q(r,m),r.forEach(u),v=B(g),g.forEach(u),this.h()},h(){d(o,"class","absolute bottom-0 p-2.5 typo-caption1 text-white text-shadow svelte-sygcjw"),d(e,"class","bg-gray-50 h-36 relative")},m(f,g){q(f,e,g),h&&h.m(e,null),c(e,t),c(e,o),c(o,p),c(e,v)},p(f,g){a&&h.p(f,g)},d(f){f&&u(e),h&&h.d()}}}function _e(l){let e,a;return e=new Be({props:{position:"fixed",leftReposition:!0}}),{c(){Y(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,o){te(e,t,o),a=!0},i(t){a||(G(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){se(e,t)}}}function qe(l){let e,a,t,o,m,p,v,h,E,x,f,g,r,M,N,I,j,Z,D,z,H,P,V,K,ae;t=new Te({props:{position:"static",leftBack:!0,rightBoxSetting:l[1].role==="owner"?" ":"",slotPosition:"justify-start",$$slots:{default:[Ce]},$$scope:{ctx:l}}}),j=new Oe({});let S=de(l[2]),_=[];for(let s=0;s<S.length;s+=1)_[s]=he(me(l,S,s));let i=l[0]==="map"&&_e();return{c(){e=w("div"),a=w("div"),Y(t.$$.fragment),o=O(),m=w("div"),p=w("div"),v=w("button"),h=X("지도"),x=O(),f=w("button"),g=X("리스트"),M=O(),N=w("div"),I=w("div"),Y(j.$$.fragment),Z=O(),D=w("div");for(let s=0;s<_.length;s+=1)_[s].c();H=O(),i&&i.c(),P=ce(),this.h()},l(s){e=$(s,"DIV",{class:!0});var n=y(e);a=$(n,"DIV",{class:!0});var k=y(a);ee(t.$$.fragment,k),k.forEach(u),o=B(n),m=$(n,"DIV",{class:!0});var b=y(m);p=$(b,"DIV",{class:!0});var T=y(p);v=$(T,"BUTTON",{class:!0});var le=y(v);h=Q(le,"지도"),le.forEach(u),x=B(T),f=$(T,"BUTTON",{class:!0});var oe=y(f);g=Q(oe,"리스트"),oe.forEach(u),T.forEach(u),b.forEach(u),M=B(n),N=$(n,"DIV",{class:!0});var re=y(N);I=$(re,"DIV",{class:!0});var J=y(I);ee(j.$$.fragment,J),Z=B(J),D=$(J,"DIV",{class:!0});var ne=y(D);for(let W=0;W<_.length;W+=1)_[W].l(ne);ne.forEach(u),J.forEach(u),re.forEach(u),n.forEach(u),H=B(s),i&&i.l(s),P=ce(),this.h()},h(){d(a,"class","flex-none"),d(v,"class",E=C(`tab-map w-full px-8 py-2.5 ${l[0]==="map"?L:R}`)+" svelte-sygcjw"),d(f,"class",r=C(`tab-list w-full px-8 py-2.5 ${l[0]==="list"?L:R}`)+" svelte-sygcjw"),d(p,"class","tab-category w-full flex flex-row text-center"),d(m,"class","tab flex-none w-full px-4 pt-2.5 pb-0.5"),d(D,"class","absolute left-full w-screen grid grid-cols-3 gap-1"),d(I,"class","h-full w-full transition-transform"),fe(I,"transform",`translateX(${l[0]==="map"?0:-100}%)`),d(N,"class","content flex-auto"),d(e,"class",z=C(`flex flex-col w-dvw h-dvh overflow-x-hidden ${l[0]==="list"?"":"overflow-y-hidden"}`)+" svelte-sygcjw")},m(s,n){q(s,e,n),c(e,a),te(t,a,null),c(e,o),c(e,m),c(m,p),c(p,v),c(v,h),c(p,x),c(p,f),c(f,g),c(e,M),c(e,N),c(N,I),te(j,I,null),c(I,Z),c(I,D);for(let k=0;k<_.length;k+=1)_[k]&&_[k].m(D,null);q(s,H,n),i&&i.m(s,n),q(s,P,n),V=!0,K||(ae=[ue(v,"click",l[4]),ue(f,"click",l[5])],K=!0)},p(s,[n]){const k={};if(n&8192&&(k.$$scope={dirty:n,ctx:s}),t.$set(k),(!V||n&1&&E!==(E=C(`tab-map w-full px-8 py-2.5 ${s[0]==="map"?L:R}`)+" svelte-sygcjw"))&&d(v,"class",E),(!V||n&1&&r!==(r=C(`tab-list w-full px-8 py-2.5 ${s[0]==="list"?L:R}`)+" svelte-sygcjw"))&&d(f,"class",r),n&4){S=de(s[2]);let b;for(b=0;b<S.length;b+=1){const T=me(s,S,b);_[b]?_[b].p(T,n):(_[b]=he(T),_[b].c(),_[b].m(D,null))}for(;b<_.length;b+=1)_[b].d(1);_.length=S.length}n&1&&fe(I,"transform",`translateX(${s[0]==="map"?0:-100}%)`),(!V||n&1&&z!==(z=C(`flex flex-col w-dvw h-dvh overflow-x-hidden ${s[0]==="list"?"":"overflow-y-hidden"}`)+" svelte-sygcjw"))&&d(e,"class",z),s[0]==="map"?i?n&1&&G(i,1):(i=_e(),i.c(),G(i,1),i.m(P.parentNode,P)):i&&(Ve(),F(i,1,1,()=>{i=null}),De())},i(s){V||(G(t.$$.fragment,s),G(j.$$.fragment,s),G(i),V=!0)},o(s){F(t.$$.fragment,s),F(j.$$.fragment,s),F(i),V=!1},d(s){s&&(u(e),u(H),u(P)),se(t),se(j),$e(_,s),i&&i.d(s),K=!1,ye(ae)}}}let L="text-gray-900 typo-sub-h2 border-b-[2.5px] border-gray-900",R="text-gray-500 typo-sub-h5";const U=60;function Ae(l,e,a){let{data:t}=e,o=t.box,m=t.places;xe(async()=>{E()}),Ie(()=>{A.un("change",x)});let p="map";const v=[];let h=[];function E(){h=m.filter(r=>!r.longitude||!r.latitude||v.includes(r.idx)?!1:(v.push(r.idx),!0)),A.on("change",x),h.forEach(r=>{var M;be.emit("addIcon",{idx:Number(r.idx),coordinate:Ne([r.longitude,r.latitude]),image:((M=r==null?void 0:r.media)==null?void 0:M.at(0))??"",shape:"waterdrop",type:"place",link:`/places/${r.idx}`,rank:1,name:r.name,width:56,height:61})})}function x(){if(A.getFeatures().length!==h.length)return;A.un("change",x);const r=A.getExtent();Me.fit(r,{padding:[U,U,U,U],duration:500,maxZoom:16})}const f=()=>a(0,p="map"),g=()=>a(0,p="list");return l.$$set=r=>{"data"in r&&a(3,t=r.data)},[p,o,m,t,f,g]}class Ye extends Ee{constructor(e){super(),je(this,e,Ae,qe,we,{data:3})}}export{Ye as component,We as universal};
