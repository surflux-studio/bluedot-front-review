import{s as F,w as U,a as E,g as M,i as w,x as A,f as N,k as L,y as S,e as T,t as G,c as H,b as j,d as q,v as y,h as K,n as O}from"../chunks/scheduler.BS-S8op5.js";import{S as W,i as X,b as C,c as _,d as g,m as d,t as b,a as h,f as x}from"../chunks/index.CxHkUi4z.js";import{H as v}from"../chunks/Header.CF-ciyTx.js";import{M as z}from"../chunks/Map.BnkxC6NH.js";import{p as D}from"../chunks/stores.BiclUC70.js";import{U as J}from"../chunks/UpperBoxes.D0uBW673.js";import{g as Q}from"../chunks/entry.hVZtYPan.js";import{I as V,A as Y}from"../chunks/store.9fF9-LaO.js";import{F as Z}from"../chunks/IconLocation.DTY-CMkO.js";import{U as ee}from"../chunks/_FindMeButton.zjIq6CCZ.js";function te(o){let t,n;return{c(){t=T("p"),n=G(o[3]),this.h()},l(s){t=H(s,"P",{class:!0});var a=j(t);n=q(a,o[3]),a.forEach(N),this.h()},h(){y(t,"class","font-semibold text-[15px] leading-[18px] text-black")},m(s,a){w(s,t,a),K(t,n)},p:O,d(s){s&&N(t)}}}function se(o){let t,n;return t=new ee({}),{c(){_(t.$$.fragment)},l(s){g(t.$$.fragment,s)},m(s,a){d(t,s,a),n=!0},i(s){n||(b(t.$$.fragment,s),n=!0)},o(s){h(t.$$.fragment,s),n=!1},d(s){x(t,s)}}}function ae(o){let t,n,s,a,c,m,p,u,f,$;function I(e){o[5](e)}let r={position:"fixed",leftBack:V?"":"black",$$slots:{default:[te]},$$scope:{ctx:o}};o[0]!==void 0&&(r.header=o[0]),t=new v({props:r}),U.push(()=>C(t,"header",I));function k(e){o[6](e)}let l={boxes:o[1],onBoxClick:o[4]};return o[2]!==void 0&&(l.top=o[2]),a=new J({props:l}),U.push(()=>C(a,"top",k)),p=new z({}),f=new Z({props:{position:"fixed",$$slots:{right:[se]},$$scope:{ctx:o}}}),{c(){_(t.$$.fragment),s=E(),_(a.$$.fragment),m=E(),_(p.$$.fragment),u=E(),_(f.$$.fragment)},l(e){g(t.$$.fragment,e),s=M(e),g(a.$$.fragment,e),m=M(e),g(p.$$.fragment,e),u=M(e),g(f.$$.fragment,e)},m(e,i){d(t,e,i),w(e,s,i),d(a,e,i),w(e,m,i),d(p,e,i),w(e,u,i),d(f,e,i),$=!0},p(e,[i]){const B={};i&512&&(B.$$scope={dirty:i,ctx:e}),!n&&i&1&&(n=!0,B.header=e[0],A(()=>n=!1)),t.$set(B);const P={};i&2&&(P.boxes=e[1]),!c&&i&4&&(c=!0,P.top=e[2],A(()=>c=!1)),a.$set(P);const R={};i&512&&(R.$$scope={dirty:i,ctx:e}),f.$set(R)},i(e){$||(b(t.$$.fragment,e),b(a.$$.fragment,e),b(p.$$.fragment,e),b(f.$$.fragment,e),$=!0)},o(e){h(t.$$.fragment,e),h(a.$$.fragment,e),h(p.$$.fragment,e),h(f.$$.fragment,e),$=!1},d(e){e&&(N(s),N(m),N(u)),x(t,e),x(a,e),x(p,e),x(f,e)}}}function oe(o,t,n){let s,a;L(o,D,r=>n(7,a=r));const c=a.url.searchParams.get("placeName");let m=[],p;async function u(){const r=Number(a.url.searchParams.get("placeIdx"));if(Number.isNaN(r)||!r)return;const k=await fetch(`${Y}/places/${r}/boxes`,{method:"GET"});if(!k.ok)return;const l=await k.json();l.data&&n(1,m=l.data)}S(()=>{u()});function f(r){Q(`/boxes/${r}`)}function $(r){p=r,n(0,p)}function I(r){s=r,n(2,s),n(0,p)}return o.$$.update=()=>{var r;o.$$.dirty&1&&n(2,s=((r=p==null?void 0:p.getClientRects()[0])==null?void 0:r.height)??0)},[p,m,s,c,f,$,I]}class _e extends W{constructor(t){super(),X(this,t,oe,ae,F,{})}}export{_e as component};
