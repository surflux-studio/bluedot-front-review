import{s as R,y as B,a as I,g as y,i as P,z as C,f as l,k as A,w as E,e as G,t as H,c as S,b as T,d as U,v as j,h as q,n as z}from"../chunks/scheduler.CVGJxaOr.js";import{S as L,i as O,e as M,c as $,b as h,m as x,t as k,a as N,d as w}from"../chunks/index.1WceP6qL.js";import{H as W}from"../chunks/Header.QA-SyU_y.js";import{M as v}from"../chunks/Map.Cow2AhdM.js";import{p as D}from"../chunks/stores.B1T2gRSn.js";import{U as F}from"../chunks/UpperBoxes.D6Hq1Bq-.js";import{g as J}from"../chunks/entry.B9SH3PBZ.js";import{A as K}from"../chunks/sign.DGdpB9NJ.js";function Q(a){let t,r;return{c(){t=G("p"),r=H(a[3]),this.h()},l(n){t=S(n,"P",{class:!0});var o=T(t);r=U(o,a[3]),o.forEach(l),this.h()},h(){j(t,"class","font-semibold text-[15px] leading-[18px] text-black")},m(n,o){P(n,t,o),q(t,r)},p:z,d(n){n&&l(t)}}}function V(a){let t,r,n,o,f,i,m,u;function _(e){a[5](e)}let c={position:"fixed",leftBack:"black",$$slots:{default:[Q]},$$scope:{ctx:a}};a[0]!==void 0&&(c.header=a[0]),t=new W({props:c}),B.push(()=>M(t,"header",_)),o=new v({});function d(e){a[6](e)}let s={boxes:a[1],onBoxClick:a[4]};return a[2]!==void 0&&(s.top=a[2]),i=new F({props:s}),B.push(()=>M(i,"top",d)),{c(){$(t.$$.fragment),n=I(),$(o.$$.fragment),f=I(),$(i.$$.fragment)},l(e){h(t.$$.fragment,e),n=y(e),h(o.$$.fragment,e),f=y(e),h(i.$$.fragment,e)},m(e,p){x(t,e,p),P(e,n,p),x(o,e,p),P(e,f,p),x(i,e,p),u=!0},p(e,[p]){const b={};p&512&&(b.$$scope={dirty:p,ctx:e}),!r&&p&1&&(r=!0,b.header=e[0],C(()=>r=!1)),t.$set(b);const g={};p&2&&(g.boxes=e[1]),!m&&p&4&&(m=!0,g.top=e[2],C(()=>m=!1)),i.$set(g)},i(e){u||(k(t.$$.fragment,e),k(o.$$.fragment,e),k(i.$$.fragment,e),u=!0)},o(e){N(t.$$.fragment,e),N(o.$$.fragment,e),N(i.$$.fragment,e),u=!1},d(e){e&&(l(n),l(f)),w(t,e),w(o,e),w(i,e)}}}function X(a,t,r){let n,o;A(a,D,s=>r(7,o=s));const f=o.url.searchParams.get("placeName");let i=[],m;async function u(){const s=Number(o.url.searchParams.get("placeIdx"));if(Number.isNaN(s)||!s)return;const e=await fetch(`${K}/places/${s}/boxes`,{method:"GET"});if(!e.ok)return;const p=await e.json();p.data&&r(1,i=p.data)}E(()=>{u()});function _(s){J(`/boxes/${s}`)}function c(s){m=s,r(0,m)}function d(s){n=s,r(2,n),r(0,m)}return a.$$.update=()=>{var s;a.$$.dirty&1&&r(2,n=((s=m==null?void 0:m.getClientRects()[0])==null?void 0:s.height)??0)},[m,i,n,f,_,c,d]}class re extends L{constructor(t){super(),O(this,t,X,V,R,{})}}export{re as component};
