import{g as ue,A as ne,e as A}from"../chunks/units.DmPSCF_x.js";import{g as M}from"../chunks/entry.1p-hCwrx.js";import{s as oe,e as C,c as g,b as E,f as p,m as u,i as O,n as H,l as ce,a as k,t as fe,g as D,p as q,d as de,H as te,h as d,r as F,o as me,u as pe,q as ae}from"../chunks/scheduler.Bkd76257.js";import{S as ie,i as le,e as he,c as G,a as J,m as R,t as z,b as Z,d as K}from"../chunks/index.DD1Hq7Fv.js";import{H as Ce}from"../chunks/Header.CXsyuZBV.js";import{F as ge}from"../chunks/Field.CdH6rYN7.js";import{g as be}from"../chunks/photo.BMk_oH0w.js";const _e="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.5339%204.27187L6.1839%205.62187H3.6V13.7219H14.4V5.62187H11.8161L10.4661%204.27187H7.5339ZM6.975%202.92188H11.025L12.375%204.27187H15.075C15.254%204.27187%2015.4257%204.34299%2015.5523%204.46958C15.6789%204.59616%2015.75%204.76785%2015.75%204.94687V14.3969C15.75%2014.5759%2015.6789%2014.7476%2015.5523%2014.8742C15.4257%2015.0008%2015.254%2015.0719%2015.075%2015.0719H2.925C2.74598%2015.0719%202.57429%2015.0008%202.4477%2014.8742C2.32112%2014.7476%202.25%2014.5759%202.25%2014.3969V4.94687C2.25%204.76785%202.32112%204.59616%202.4477%204.46958C2.57429%204.34299%202.74598%204.27187%202.925%204.27187H5.625L6.975%202.92188ZM9%2013.0469C8.01538%2013.0469%207.07109%2012.6557%206.37487%2011.9595C5.67864%2011.2633%205.2875%2010.319%205.2875%209.33437C5.2875%208.34976%205.67864%207.40547%206.37487%206.70924C7.07109%206.01301%208.01538%205.62187%209%205.62187C9.98462%205.62187%2010.9289%206.01301%2011.6251%206.70924C12.3214%207.40547%2012.7125%208.34976%2012.7125%209.33437C12.7125%2010.319%2012.3214%2011.2633%2011.6251%2011.9595C10.9289%2012.6557%209.98462%2013.0469%209%2013.0469ZM9%2011.6969C9.62657%2011.6969%2010.2275%2011.448%2010.6705%2011.0049C11.1136%2010.5619%2011.3625%209.96095%2011.3625%209.33437C11.3625%208.7078%2011.1136%208.10689%2010.6705%207.66384C10.2275%207.22078%209.62657%206.97187%209%206.97187C8.37343%206.97187%207.77251%207.22078%207.32946%207.66384C6.88641%208.10689%206.6375%208.7078%206.6375%209.33437C6.6375%209.96095%206.88641%2010.5619%207.32946%2011.0049C7.77251%2011.448%208.37343%2011.6969%209%2011.6969Z'%20fill='%234B5362'/%3e%3c/svg%3e",xe={idx:"-1",name:"",image:null,role:null},ve=async({params:s,fetch:e})=>{const t=s.idx==="-1",a=ue();if(a===null)return t?M("/boxes"):M(`/boxes/${s.idx}/detail`);if(t)return{box:xe,jwt:a,paramIdx:s.idx};const n=await e(`${ne}/boxes/${s.idx}?p=setting`,{method:"GET",headers:{Authorization:`Bearer ${a}`}});return n.ok?{box:(await n.json()).data.box,jwt:a,paramIdx:s.idx}:(A.emit("pushSnackbar",{message:"접근할 수 없습니다."}),M(`/boxes/${s.idx}/detail`))},je=Object.freeze(Object.defineProperty({__proto__:null,load:ve},Symbol.toStringTag,{value:"Module"}));function $e(s){let e;return{c(){e=C("div"),this.h()},l(t){e=g(t,"DIV",{class:!0}),E(e).forEach(p),this.h()},h(){u(e,"class","h-[1px] bg-gray-100")},m(t,a){O(t,e,a)},p:H,i:H,o:H,d(t){t&&p(e)}}}class Be extends ie{constructor(e){super(),le(this,e,null,$e,oe,{})}}function we(s){let e,t="설정";return{c(){e=C("div"),e.textContent=t,this.h()},l(a){e=g(a,"DIV",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-1lcayg1"&&(e.textContent=t),this.h()},h(){u(e,"class","typo-h3 text-gray-900")},m(a,n){O(a,e,n)},p:H,d(a){a&&p(e)}}}function se(s){let e,t;return{c(){e=C("img"),this.h()},l(a){e=g(a,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){u(e,"class","w-full h-full object-cover"),ae(e.src,t=s[0].image)||u(e,"src",t),u(e,"alt","box_image")},m(a,n){O(a,e,n)},p(a,n){n&1&&!ae(e.src,t=a[0].image)&&u(e,"src",t)},d(a){a&&p(e)}}}function ye(s){let e,t='박스 이름 <span class="text-red-500">*</span>';return{c(){e=C("p"),e.innerHTML=t,this.h()},l(a){e=g(a,"P",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-mxo9hb"&&(e.innerHTML=t),this.h()},h(){u(e,"class","pb-1 typo-sub-h3 text-gray-500")},m(a,n){O(a,e,n)},p:H,d(a){a&&p(e)}}}function Ee(s){let e,t,a,n,_="박스 삭제",c,l,x;return t=new Be({}),{c(){e=C("section"),G(t.$$.fragment),a=k(),n=C("button"),n.textContent=_,this.h()},l(o){e=g(o,"SECTION",{class:!0});var m=E(e);J(t.$$.fragment,m),a=D(m),n=g(m,"BUTTON",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-uo5gvv"&&(n.textContent=_),m.forEach(p),this.h()},h(){u(n,"class","py-3 typo-body3 text-red-500"),u(e,"class","w-full mb-28")},m(o,m){O(o,e,m),R(t,e,null),d(e,a),d(e,n),c=!0,l||(x=F(n,"click",s[6]),l=!0)},p:H,i(o){c||(z(t.$$.fragment,o),c=!0)},o(o){Z(t.$$.fragment,o),c=!1},d(o){o&&p(e),K(t),l=!1,x()}}}function Te(s){let e,t,a,n,_,c,l=`<div class="flex flex-row gap-1 items-center"><img src="${_e}" alt="camera icon"/> <p class="typo-body3 text-gray-700">사진 변경</p></div>`,x,o,m,v,N,j,T,h,y,B,b,L,P,V,S,U,Q;t=new Ce({props:{position:"static",leftBack:!0,$$slots:{default:[we]},$$scope:{ctx:s}}});let f=s[0].image&&se(s);function re(i){s[8](i)}let W={clear:!0,padding:"",border:"border-b-[1.5px] border-b-gray-900 pb-2.5",fontSize:"text-lg",limit:20,onInput:s[4],$$slots:{default:[ye]},$$scope:{ctx:s}};s[0].name!==void 0&&(W.value=s[0].name),v=new ge({props:W}),ce.push(()=>he(v,"value",re));let $=!s[2]&&Ee(s);return{c(){e=C("div"),G(t.$$.fragment),a=k(),n=C("section"),f&&f.c(),_=k(),c=C("button"),c.innerHTML=l,x=k(),o=C("section"),m=C("section"),G(v.$$.fragment),j=k(),T=C("section"),h=k(),$&&$.c(),y=k(),B=C("div"),b=C("button"),L=fe("저장"),this.h()},l(i){e=g(i,"DIV",{class:!0});var r=E(e);J(t.$$.fragment,r),a=D(r),n=g(r,"SECTION",{class:!0});var I=E(n);f&&f.l(I),_=D(I),c=g(I,"BUTTON",{class:!0,"data-svelte-h":!0}),q(c)!=="svelte-o1fuye"&&(c.innerHTML=l),I.forEach(p),x=D(r),o=g(r,"SECTION",{class:!0});var w=E(o);m=g(w,"SECTION",{class:!0});var X=E(m);J(v.$$.fragment,X),X.forEach(p),j=D(w),T=g(w,"SECTION",{class:!0}),E(T).forEach(p),h=D(w),$&&$.l(w),w.forEach(p),y=D(r),B=g(r,"DIV",{class:!0});var Y=E(B);b=g(Y,"BUTTON",{class:!0});var ee=E(b);L=de(ee,"저장"),ee.forEach(p),Y.forEach(p),r.forEach(p),this.h()},h(){u(c,"class","absolute bottom-4 right-4 bg-white rounded-3xl px-3.5 py-1.5"),u(n,"class","box-image relative w-full h-52 bg-gray-100"),u(m,"class","box-name flex flex-col gap-4 py-6"),u(T,"class","w-full min-h-20"),u(o,"class","box-setting px-4"),u(b,"class",P=te(`w-full ${s[1]?"bg-primary-500":"bg-gray-300"} rounded-lg p-[15px] text-white typo-button3`)+" svelte-cu9y2w"),b.disabled=V=!s[1],u(B,"class","fixed w-full bottom-0 left-0 px-4 pt-3 pb-10 z-10 bg-white upper-box-shadow svelte-cu9y2w"),u(e,"class","min-h-dvh")},m(i,r){O(i,e,r),R(t,e,null),d(e,a),d(e,n),f&&f.m(n,null),d(n,_),d(n,c),d(e,x),d(e,o),d(o,m),R(v,m,null),d(o,j),d(o,T),d(o,h),$&&$.m(o,null),d(e,y),d(e,B),d(B,b),d(b,L),S=!0,U||(Q=[F(c,"click",s[3]),F(b,"click",s[5])],U=!0)},p(i,[r]){const I={};r&4096&&(I.$$scope={dirty:r,ctx:i}),t.$set(I),i[0].image?f?f.p(i,r):(f=se(i),f.c(),f.m(n,_)):f&&(f.d(1),f=null);const w={};r&4096&&(w.$$scope={dirty:r,ctx:i}),!N&&r&1&&(N=!0,w.value=i[0].name,me(()=>N=!1)),v.$set(w),i[2]||$.p(i,r),(!S||r&2&&P!==(P=te(`w-full ${i[1]?"bg-primary-500":"bg-gray-300"} rounded-lg p-[15px] text-white typo-button3`)+" svelte-cu9y2w"))&&u(b,"class",P),(!S||r&2&&V!==(V=!i[1]))&&(b.disabled=V)},i(i){S||(z(t.$$.fragment,i),z(v.$$.fragment,i),z($),S=!0)},o(i){Z(t.$$.fragment,i),Z(v.$$.fragment,i),Z($),S=!1},d(i){i&&p(e),K(t),f&&f.d(),K(v),$&&$.d(),U=!1,pe(Q)}}}function Ie(s,e,t){let{data:a}=e;const n=a.paramIdx,_=n==="-1";let c=a.jwt,l=a.box;const x=`${ne}/boxes`;let o=!1;async function m(){var h;try{const y=await be();if(!y.blob)return;const B=new FormData;B.append("image",y.blob);const b=await fetch(`${x}/image`,{method:"POST",body:B,headers:{Authorization:`Bearer ${c}`}});if(!b.ok)return A.emit("pushSnackbar",{message:"일시적으로 장애가 발생했습니다."});const L=await b.json();t(0,l.image=((h=L.data)==null?void 0:h.image)??null,l),t(1,o=!0)}catch{}}function v(){t(1,o=!0)}async function N(){if(!o||(t(0,l.name=l.name.trim(),l),!l.name))return;const{url:h,method:y}=_?{url:x,method:"POST"}:{url:`${x}/${n}`,method:"PATCH"};if(!(await fetch(h,{method:y,headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({name:l.name,image:l.image,permission:"public"})})).ok)return A.emit("pushSnackbar",{message:"일시적으로 장애가 발생했습니다."});_?(A.emit("pushSnackbar",{message:"새 박스를 만들었습니다"}),M("/boxes")):A.emit("pushSnackbar",{message:"박스를 수정했습니다."})}function j(){fetch(`${x}/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}}),A.emit("pushSnackbar",{message:`${l.name} 박스를 삭제했습니다.`}),M("/boxes")}function T(h){s.$$.not_equal(l.name,h)&&(l.name=h,t(0,l))}return s.$$set=h=>{"data"in h&&t(7,a=h.data)},[l,o,_,m,v,N,j,a,T]}class Le extends ie{constructor(e){super(),le(this,e,Ie,Te,oe,{data:7})}}export{Le as component,je as universal};
