import{e as ke}from"../chunks/index.BTWNLAFE.js";import{b as ae,A as Z,c as we}from"../chunks/sign.HDKgj7Db.js";import{g as ee}from"../chunks/entry.CNeqVxWr.js";import{s as ve,v as je,a as V,e as E,A as le,g as B,c as T,b as D,z as re,f as g,x as O,L as te,i as I,h as x,y as J,w as Ie,D as ue,k as Ce,t as M,d as R,j as se,n as N,K as ge}from"../chunks/scheduler.B6RFReyk.js";import{S as Ee,i as Te,e as xe,c as z,b as H,m as W,a as C,f as Q,t as v,d as G,g as X}from"../chunks/index.DLC1-nrr.js";import{e as ne}from"../chunks/each.BdHWekAj.js";import{p as ye}from"../chunks/stores.DJJB8uAr.js";import{s as Fe}from"../chunks/search.BhpZG1Ux.js";import{H as Se}from"../chunks/Header.C6AetFYj.js";import{u as ce,f as fe}from"../chunks/follow.D0tirHpL.js";import{B as ie}from"../chunks/Button.BANH9fTQ.js";import{C as he}from"../chunks/CircleImage.DNDrLzR2.js";import{F as qe}from"../chunks/Field.DrVMeeZ9.js";import{s as oe}from"../chunks/s32cloudfront.CTUFng11.js";const De=async({params:r,fetch:e,depends:l})=>{l("app:user:followers");const n=String(r.idx),t=String(ae());if(n!==t)throw ke(403,"Forbidden");const u=await e(`${Z}/auth/followers?targetTable=users&targetIdx=${n}&subjectTable=users`).then(c=>c.json()).then(c=>c.data),o=await e(`${Z}/auth/followers?targetTable=users&subjectTable=users&subjectIdx=${n}`).then(c=>c.json()).then(c=>c.data),a=await e(`${Z}/auth/followers?targetTable=users&targetIdx=${ae()}&subjectTable=users`).then(c=>c.json()).then(c=>c.data),s=await e(`${Z}/auth/followers?targetTable=users&subjectTable=users&subjectIdx=${ae()}`).then(c=>c.json()).then(c=>c.data);return{userFollowers:u,userFollowings:o,userIdx:n,signerFollowers:a,signerFollowings:s,signerIdx:t}},_t=Object.freeze(Object.defineProperty({__proto__:null,load:De},Symbol.toStringTag,{value:"Module"}));function _e(r,e,l){const n=r.slice();return n[32]=e[l],n}function de(r,e,l){const n=r.slice();return n[29]=e[l],n}function Ne(r){let e=(r[2].unique_name||"")+"",l;return{c(){l=M(e)},l(n){l=R(n,e)},m(n,t){I(n,l,t)},p(n,t){t[0]&4&&e!==(e=(n[2].unique_name||"")+"")&&se(l,e)},d(n){n&&g(l)}}}function Pe(r){let e,l="팔로잉이 없습니다.";return{c(){e=E("p"),e.textContent=l,this.h()},l(n){e=T(n,"P",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-1r7q21d"&&(e.textContent=l),this.h()},h(){O(e,"class","p-5 flex w-full justify-center text-gray-400")},m(n,t){I(n,e,t)},p:N,i:N,o:N,d(n){n&&g(e)}}}function Ue(r){let e,l,n=ne(r[4]),t=[];for(let o=0;o<n.length;o+=1)t[o]=me(_e(r,n,o));const u=o=>C(t[o],1,1,()=>{t[o]=null});return{c(){e=E("ul");for(let o=0;o<t.length;o+=1)t[o].c()},l(o){e=T(o,"UL",{});var a=D(e);for(let s=0;s<t.length;s+=1)t[s].l(a);a.forEach(g)},m(o,a){I(o,e,a);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);l=!0},p(o,a){if(a[0]&530){n=ne(o[4]);let s;for(s=0;s<n.length;s+=1){const c=_e(o,n,s);t[s]?(t[s].p(c,a),v(t[s],1)):(t[s]=me(c),t[s].c(),v(t[s],1),t[s].m(e,null))}for(X(),s=n.length;s<t.length;s+=1)u(s);Q()}},i(o){if(!l){for(let a=0;a<n.length;a+=1)v(t[a]);l=!0}},o(o){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)C(t[a]);l=!1},d(o){o&&g(e),ge(t,o)}}}function Ve(r){let e,l,n,t;const u=[We,He],o=[];function a(s,c){return s[3]&&s[3].length>0?0:1}return e=a(r),l=o[e]=u[e](r),{c(){l.c(),n=le()},l(s){l.l(s),n=le()},m(s,c){o[e].m(s,c),I(s,n,c),t=!0},p(s,c){let b=e;e=a(s),e===b?o[e].p(s,c):(X(),C(o[b],1,1,()=>{o[b]=null}),Q(),l=o[e],l?l.p(s,c):(l=o[e]=u[e](s),l.c()),v(l,1),l.m(n.parentNode,n))},i(s){t||(v(l),t=!0)},o(s){C(l),t=!1},d(s){s&&g(n),o[e].d(s)}}}function Be(r){let e,l;function n(){return r[27](r[32])}return e=new ie({props:{backgroundColor:"bg-gradient-to-br from-primary-400 from-0% to-emerald-400 to-80%",textColor:"text-white",border:"border-none",$$slots:{default:[Le]},$$scope:{ctx:r}}}),e.$on("click",n),{c(){z(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,u){W(e,t,u),l=!0},p(t,u){r=t;const o={};u[1]&16&&(o.$$scope={dirty:u,ctx:r}),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){G(e,t)}}}function Oe(r){let e,l;function n(){return r[26](r[32])}return e=new ie({props:{$$slots:{default:[ze]},$$scope:{ctx:r}}}),e.$on("click",n),{c(){z(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,u){W(e,t,u),l=!0},p(t,u){r=t;const o={};u[1]&16&&(o.$$scope={dirty:u,ctx:r}),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){G(e,t)}}}function Ae(r){let e;return{c(){e=E("span")},l(l){e=T(l,"SPAN",{}),D(e).forEach(g)},m(l,n){I(l,e,n)},p:N,i:N,o:N,d(l){l&&g(e)}}}function Le(r){let e;return{c(){e=M("팔로우")},l(l){e=R(l,"팔로우")},m(l,n){I(l,e,n)},d(l){l&&g(e)}}}function ze(r){let e;return{c(){e=M("팔로잉")},l(l){e=R(l,"팔로잉")},m(l,n){I(l,e,n)},d(l){l&&g(e)}}}function me(r){let e,l,n,t,u,o=(r[32].target.unique_name||"(null)")+"",a,s,c,b,k,m,p,$,h,y,q;function A(...f){return r[13](r[32],...f)}n=new he({props:{src:oe(r[32].target.profile_image_url,500),width:"3rem",strokeColor:"white",strokeWidth:"13"}});function L(){return r[24](r[32])}function K(){return r[25](r[32])}const U=[Ae,Oe,Be],w=[];function F(f,i){return i[0]&16&&(b=null),i[0]&18&&(k=null),b==null&&(b=String(f[9])===String(f[32].target.idx)),b?0:(k==null&&(k=!!f[1].some(A)),k?1:2)}return m=F(r,[-1,-1]),p=w[m]=U[m](r),{c(){e=E("li"),l=E("div"),z(n.$$.fragment),t=V(),u=E("div"),a=M(o),s=V(),c=E("div"),p.c(),$=V(),this.h()},l(f){e=T(f,"LI",{class:!0});var i=D(e);l=T(i,"DIV",{});var _=D(l);H(n.$$.fragment,_),_.forEach(g),t=B(i),u=T(i,"DIV",{class:!0});var j=D(u);a=R(j,o),j.forEach(g),s=B(i),c=T(i,"DIV",{});var P=D(c);p.l(P),P.forEach(g),$=B(i),i.forEach(g),this.h()},h(){O(u,"class","flex-grow"),O(e,"class","flex gap-2 items-center px-5 py-2")},m(f,i){I(f,e,i),x(e,l),W(n,l,null),x(e,t),x(e,u),x(u,a),x(e,s),x(e,c),w[m].m(c,null),x(e,$),h=!0,y||(q=[J(l,"click",L),J(u,"click",K)],y=!0)},p(f,i){r=f;const _={};i[0]&16&&(_.src=oe(r[32].target.profile_image_url,500)),n.$set(_),(!h||i[0]&16)&&o!==(o=(r[32].target.unique_name||"(null)")+"")&&se(a,o);let j=m;m=F(r,i),m===j?w[m].p(r,i):(X(),C(w[j],1,1,()=>{w[j]=null}),Q(),p=w[m],p?p.p(r,i):(p=w[m]=U[m](r),p.c()),v(p,1),p.m(c,null))},i(f){h||(v(n.$$.fragment,f),v(p),h=!0)},o(f){C(n.$$.fragment,f),C(p),h=!1},d(f){f&&g(e),G(n),w[m].d(),y=!1,ue(q)}}}function He(r){let e,l="팔로워가 없습니다.";return{c(){e=E("p"),e.textContent=l,this.h()},l(n){e=T(n,"P",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-187d2ue"&&(e.textContent=l),this.h()},h(){O(e,"class","p-5 flex w-full justify-center text-gray-400")},m(n,t){I(n,e,t)},p:N,i:N,o:N,d(n){n&&g(e)}}}function We(r){let e,l,n=ne(r[3]),t=[];for(let o=0;o<n.length;o+=1)t[o]=pe(de(r,n,o));const u=o=>C(t[o],1,1,()=>{t[o]=null});return{c(){e=E("ul");for(let o=0;o<t.length;o+=1)t[o].c()},l(o){e=T(o,"UL",{});var a=D(e);for(let s=0;s<t.length;s+=1)t[s].l(a);a.forEach(g)},m(o,a){I(o,e,a);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);l=!0},p(o,a){if(a[0]&778){n=ne(o[3]);let s;for(s=0;s<n.length;s+=1){const c=de(o,n,s);t[s]?(t[s].p(c,a),v(t[s],1)):(t[s]=pe(c),t[s].c(),v(t[s],1),t[s].m(e,null))}for(X(),s=n.length;s<t.length;s+=1)u(s);Q()}},i(o){if(!l){for(let a=0;a<n.length;a+=1)v(t[a]);l=!0}},o(o){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)C(t[a]);l=!1},d(o){o&&g(e),ge(t,o)}}}function Ge(r){let e,l;function n(){return r[23](r[29])}return e=new ie({props:{backgroundColor:"bg-gradient-to-br from-primary-400 from-0% to-emerald-400 to-80%",textColor:"text-white",border:"border-none",$$slots:{default:[Re]},$$scope:{ctx:r}}}),e.$on("click",n),{c(){z(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,u){W(e,t,u),l=!0},p(t,u){r=t;const o={};u[0]&8|u[1]&16&&(o.$$scope={dirty:u,ctx:r}),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){G(e,t)}}}function Ke(r){let e,l;function n(){return r[21](r[29])}return e=new ie({props:{$$slots:{default:[Je]},$$scope:{ctx:r}}}),e.$on("click",n),{c(){z(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,u){W(e,t,u),l=!0},p(t,u){r=t;const o={};u[1]&16&&(o.$$scope={dirty:u,ctx:r}),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){G(e,t)}}}function Me(r){let e;return{c(){e=E("span")},l(l){e=T(l,"SPAN",{}),D(e).forEach(g)},m(l,n){I(l,e,n)},p:N,i:N,o:N,d(l){l&&g(e)}}}function Re(r){let e=r[8].some(n)?"맞팔로우":"팔로우",l;function n(...t){return r[22](r[29],...t)}return{c(){l=M(e)},l(t){l=R(t,e)},m(t,u){I(t,l,u)},p(t,u){r=t,u[0]&8&&e!==(e=r[8].some(n)?"맞팔로우":"팔로우")&&se(l,e)},d(t){t&&g(l)}}}function Je(r){let e;return{c(){e=M("팔로잉")},l(l){e=R(l,"팔로잉")},m(l,n){I(l,e,n)},d(l){l&&g(e)}}}function pe(r){let e,l,n,t,u,o=(r[29].subject.unique_name||"(null)")+"",a,s,c,b,k,m,p,$,h,y,q;function A(...f){return r[12](r[29],...f)}n=new he({props:{src:oe(r[29].subject.profile_image_url,500),width:"3rem",strokeColor:"white",strokeWidth:"13"}});function L(){return r[19](r[29])}function K(){return r[20](r[29])}const U=[Me,Ke,Ge],w=[];function F(f,i){return i[0]&8&&(b=null),i[0]&10&&(k=null),b==null&&(b=String(f[9])===String(f[29].subject.idx)),b?0:(k==null&&(k=!!f[1].some(A)),k?1:2)}return m=F(r,[-1,-1]),p=w[m]=U[m](r),{c(){e=E("li"),l=E("div"),z(n.$$.fragment),t=V(),u=E("div"),a=M(o),s=V(),c=E("div"),p.c(),$=V(),this.h()},l(f){e=T(f,"LI",{class:!0});var i=D(e);l=T(i,"DIV",{});var _=D(l);H(n.$$.fragment,_),_.forEach(g),t=B(i),u=T(i,"DIV",{class:!0});var j=D(u);a=R(j,o),j.forEach(g),s=B(i),c=T(i,"DIV",{});var P=D(c);p.l(P),P.forEach(g),$=B(i),i.forEach(g),this.h()},h(){O(u,"class","flex-grow"),O(e,"class","flex gap-2 items-center px-5 py-2")},m(f,i){I(f,e,i),x(e,l),W(n,l,null),x(e,t),x(e,u),x(u,a),x(e,s),x(e,c),w[m].m(c,null),x(e,$),h=!0,y||(q=[J(l,"click",L),J(u,"click",K)],y=!0)},p(f,i){r=f;const _={};i[0]&8&&(_.src=oe(r[29].subject.profile_image_url,500)),n.$set(_),(!h||i[0]&8)&&o!==(o=(r[29].subject.unique_name||"(null)")+"")&&se(a,o);let j=m;m=F(r,i),m===j?w[m].p(r,i):(X(),C(w[j],1,1,()=>{w[j]=null}),Q(),p=w[m],p?p.p(r,i):(p=w[m]=U[m](r),p.c()),v(p,1),p.m(c,null))},i(f){h||(v(n.$$.fragment,f),v(p),h=!0)},o(f){C(n.$$.fragment,f),C(p),h=!1},d(f){f&&g(e),G(n),w[m].d(),y=!1,ue(q)}}}function Qe(r){let e,l,n,t,u="팔로워",o,a,s="팔로잉",c,b,k,m,p,$,h,y,q,A,L;e=new Se({props:{position:"static",leftBack:"black",$$slots:{default:[Ne]},$$scope:{ctx:r}}});function K(i){r[18](i)}let U={round:!0,placeholder:"검색하세요",prefixIcon:Fe,prefixPointer:!0,onPrefixClick:r[16],clear:!0,backgroundColor:"bg-gray-50",onInput:r[17]};r[0]!==void 0&&(U.value=r[0]),k=new qe({props:U}),je.push(()=>xe(k,"value",K));const w=[Ve,Ue,Pe],F=[];function f(i,_){return i[5]==="followers"?0:i[4]&&i[4].length>0?1:2}return $=f(r),h=F[$]=w[$](r),{c(){z(e.$$.fragment),l=V(),n=E("div"),t=E("button"),t.textContent=u,o=V(),a=E("button"),a.textContent=s,c=V(),b=E("section"),z(k.$$.fragment),p=V(),h.c(),y=le(),this.h()},l(i){H(e.$$.fragment,i),l=B(i),n=T(i,"DIV",{class:!0});var _=D(n);t=T(_,"BUTTON",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-y7r85h"&&(t.textContent=u),o=B(_),a=T(_,"BUTTON",{class:!0,"data-svelte-h":!0}),re(a)!=="svelte-9iavme"&&(a.textContent=s),_.forEach(g),c=B(i),b=T(i,"SECTION",{class:!0});var j=D(b);H(k.$$.fragment,j),j.forEach(g),p=B(i),h.l(i),y=le(),this.h()},h(){O(t,"class","flex-1"),te(t,"font-black",r[5]==="followers"),O(a,"class","flex-1"),te(a,"font-black",r[5]==="followings"),O(n,"class","flex w-full justify-between p-4"),O(b,"class","box-search sticky p-4 top-[100px] z-10 bg-white")},m(i,_){W(e,i,_),I(i,l,_),I(i,n,_),x(n,t),x(n,o),x(n,a),I(i,c,_),I(i,b,_),W(k,b,null),I(i,p,_),F[$].m(i,_),I(i,y,_),q=!0,A||(L=[J(t,"click",r[14]),J(a,"click",r[15])],A=!0)},p(i,_){const j={};_[0]&4|_[1]&16&&(j.$$scope={dirty:_,ctx:i}),e.$set(j),(!q||_[0]&32)&&te(t,"font-black",i[5]==="followers"),(!q||_[0]&32)&&te(a,"font-black",i[5]==="followings");const P={};_[0]&25&&(P.onInput=i[17]),!m&&_[0]&1&&(m=!0,P.value=i[0],Ie(()=>m=!1)),k.$set(P);let Y=$;$=f(i),$===Y?F[$].p(i,_):(X(),C(F[Y],1,1,()=>{F[Y]=null}),Q(),h=F[$],h?h.p(i,_):(h=F[$]=w[$](i),h.c()),v(h,1),h.m(y.parentNode,y))},i(i){q||(v(e.$$.fragment,i),v(k.$$.fragment,i),v(h),q=!0)},o(i){C(e.$$.fragment,i),C(k.$$.fragment,i),C(h),q=!1},d(i){i&&(g(l),g(n),g(c),g(b),g(p),g(y)),G(e,i),G(k),F[$].d(i),A=!1,ue(L)}}}function Xe(r,e,l){let n;Ce(r,ye,d=>l(11,n=d));let{data:t}=e,{userFollowers:u,userFollowings:o,signerFollowers:a,signerFollowings:s,userIdx:c,signerIdx:b}=t,k={},m="",p=u,$=o,h="followers";const y=(d,S)=>S.target.idx===d.subject.idx,q=(d,S)=>S.target.idx===d.target.idx,A=()=>l(5,h="followers"),L=()=>l(5,h="followings"),K=()=>window.history.back(),U=()=>{m===""&&(l(3,p=u),l(4,$=o))};function w(d){m=d,l(0,m)}const F=d=>ee(`/users/${d.subject.idx}`),f=d=>ee(`/users/${d.subject.idx}`),i=async d=>{await ce({targetIdx:d.subject.idx,subjectIdx:b}),l(1,s=s.filter(S=>S.target.idx!==d.subject.idx))},_=(d,S)=>S.subject.idx===d.subject.idx,j=async d=>{await fe({targetIdx:d.subject.idx,subjectIdx:b}),l(1,s=[...s,{target:d.subject}])},P=d=>ee(`/users/${d.target.idx}`),Y=d=>ee(`/users/${d.target.idx}`),be=async d=>{await ce({targetIdx:d.target.idx,subjectIdx:b}),l(1,s=s.filter(S=>S.target.idx!==d.target.idx))},$e=async d=>{await fe({targetIdx:d.target.idx,subjectIdx:b}),l(1,s=[...s,{target:d.target}])};return r.$$set=d=>{"data"in d&&l(10,t=d.data)},r.$$.update=()=>{r.$$.dirty[0]&3072&&t&&we(n.params.idx).then(d=>{l(2,k=d)}),r.$$.dirty[0]&1&&m&&(l(3,p=u.filter(d=>{const S=d.subject.unique_name;return S?S.includes(m):!1})),l(4,$=o.filter(d=>{const S=d.target.unique_name;return S?S.includes(m):!1})))},[m,s,k,p,$,h,u,o,a,b,t,n,y,q,A,L,K,U,w,F,f,i,_,j,P,Y,be,$e]}class dt extends Ee{constructor(e){super(),Te(this,e,Xe,Qe,ve,{data:10},null,[-1,-1])}}export{dt as component,_t as universal};
