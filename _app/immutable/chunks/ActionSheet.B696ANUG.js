import{Y as U,Z as me,s as ge,F as X,i as ne,f as v,k as pe,A as _e,B as we,m as be,e as C,a as ke,c as S,b as O,g as ye,q as T,P as x,r as L,Q as $,h as I,v as D,I as Ee,w as ee,u as He,o as De,p as Ye,y as Me,C as Pe}from"./scheduler.CAgUjVVh.js";import{n as Te,l as ve,S as Ae,i as Be,t as j,g as Ce,a as F,f as Se}from"./index.BArRcuOw.js";import{w as Oe}from"./entry.C0kOxo6C.js";import{c as Le}from"./clickOutside.DnwsFdy-.js";function k(e){const n=e-1;return n*n*n+1}function te(e){return Object.prototype.toString.call(e)==="[object Date]"}function N(e,n){if(e===n||e!==e)return()=>e;const t=typeof e;if(t!==typeof n||Array.isArray(e)!==Array.isArray(n))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const s=n.map((l,r)=>N(e[r],l));return l=>s.map(r=>r(l))}if(t==="object"){if(!e||!n)throw new Error("Object cannot be null");if(te(e)&&te(n)){e=e.getTime(),n=n.getTime();const r=n-e;return c=>new Date(e+c*r)}const s=Object.keys(n),l={};return s.forEach(r=>{l[r]=N(e[r],n[r])}),r=>{const c={};return s.forEach(h=>{c[h]=l[h](r)}),c}}if(t==="number"){const s=n-e;return l=>e+l*s}throw new Error(`Cannot interpolate ${t} values`)}function Ie(e,n={}){const t=Oe(e);let s,l=e;function r(c,h){if(e==null)return t.set(e=c),Promise.resolve();l=c;let u=s,f=!1,{delay:m=0,duration:g=400,easing:a=me,interpolate:i=N}=U(U({},n),h);if(g===0)return u&&(u.abort(),u=null),t.set(e=l),Promise.resolve();const d=Te()+m;let w;return s=ve(y=>{if(y<d)return!0;f||(w=i(e,c),typeof g=="function"&&(g=g(e,c)),f=!0),u&&(u.abort(),u=null);const b=y-d;return b>g?(t.set(e=c),!1):(t.set(e=w(a(b/g))),!0)}),s.promise}return{set:r,update:(c,h)=>r(c(l,e),h),subscribe:t.subscribe}}function oe(e){let n,t,s,l,r,c,h,u,f,m;const g=e[20].default,a=be(g,e,e[19],null);return{c(){n=C("div"),t=C("div"),s=C("div"),l=ke(),r=C("div"),a&&a.c(),this.h()},l(i){n=S(i,"DIV",{class:!0});var d=O(n);t=S(d,"DIV",{class:!0,style:!0});var w=O(t);s=S(w,"DIV",{class:!0}),O(s).forEach(v),l=ye(w),r=S(w,"DIV",{class:!0});var y=O(r);a&&a.l(y),y.forEach(v),w.forEach(v),d.forEach(v),this.h()},h(){T(s,"class","handle svelte-e2cm4l"),T(r,"class","content svelte-e2cm4l"),x(r,"isMaxHeight",e[4]===e[1]),T(t,"class",c=L(`sheet absolute bottom-0 w-full ${e[3]} 
      rounded-t-xl touch-pan-y will-change-transform 
      flex flex-col min-h-full h-full shadow-top`)+" svelte-e2cm4l"),$(t,"transform","translateY("+e[8]+"px)"),T(n,"class",h=L(`backdrop fixed top-0 left-0 right-0 bottom-0 ${e[2]} z-40 overflow-hidden touch-none`)+" svelte-e2cm4l")},m(i,d){ne(i,n,d),I(n,t),I(t,s),I(t,l),I(t,r),a&&a.m(r,null),e[21](r),u=!0,f||(m=[D(t,"touchstart",e[11],!0),D(t,"touchmove",e[12],!0),D(t,"touchend",e[13],{passive:!0,capture:!0}),D(t,"mousedown",e[14],!0),Ee(Le.call(null,t)),D(t,"outsideclick",e[22]),D(n,"click",ee(e[15])),D(n,"touchstart",ee(e[16]))],f=!0)},p(i,d){a&&a.p&&(!u||d[0]&524288)&&He(a,g,i,i[19],u?Ye(g,i[19],d,null):De(i[19]),null),(!u||d[0]&18)&&x(r,"isMaxHeight",i[4]===i[1]),(!u||d[0]&8&&c!==(c=L(`sheet absolute bottom-0 w-full ${i[3]} 
      rounded-t-xl touch-pan-y will-change-transform 
      flex flex-col min-h-full h-full shadow-top`)+" svelte-e2cm4l"))&&T(t,"class",c),(!u||d[0]&256)&&$(t,"transform","translateY("+i[8]+"px)"),(!u||d[0]&4&&h!==(h=L(`backdrop fixed top-0 left-0 right-0 bottom-0 ${i[2]} z-40 overflow-hidden touch-none`)+" svelte-e2cm4l"))&&T(n,"class",h)},i(i){u||(j(a,i),u=!0)},o(i){F(a,i),u=!1},d(i){i&&v(n),a&&a.d(i),e[21](null),f=!1,Me(m)}}}function je(e){let n,t,s=e[0]&&oe(e);return{c(){s&&s.c(),n=X()},l(l){s&&s.l(l),n=X()},m(l,r){s&&s.m(l,r),ne(l,n,r),t=!0},p(l,r){l[0]?s?(s.p(l,r),r[0]&1&&j(s,1)):(s=oe(l),s.c(),j(s,1),s.m(n.parentNode,n)):s&&(Ce(),F(s,1,1,()=>{s=null}),Se())},i(l){t||(j(s),t=!0)},o(l){F(s),t=!1},d(l){l&&v(n),s&&s.d(l)}}}const ze=10;function Ve(e,n,t){let s,{$$slots:l={},$$scope:r}=n,{backdropBackground:c="bg-[#24242424]"}=n,{sheetBackground:h="bg-[#242424]"}=n,{isOpen:u=!1}=n,{maxHeight:f=null}=n,{defaultHeight:m=null}=n,{onClose:g=()=>{t(0,u=!1)}}=n,a=0,i=0,d=!1,w=0,y=0,b=0,Y=!1,Q=0,A=!1;const p=Ie(0,{duration:300,easing:k});pe(e,p,o=>t(8,s=o));let B,W=!1;function z(){a=window.innerHeight,f===null&&t(1,f=a*.97),m===null&&t(17,m=a/2),u&&V()}function V(){t(4,i=m),p.set(a),p.set(a-i,{duration:300,easing:k}),t(6,A=!0),setTimeout(()=>{t(6,A=!1)},50)}function E(){p.set(a,{duration:300,easing:k}).then(()=>{g()})}function Z(o,_){d=!0,t(5,Y=!1),w=o,Q=s,W=_.closest(".content")!==null}function G(o,_){if(!d)return;if(y=o,b=y-w,W&&B&&i===f){const{scrollTop:M,scrollHeight:P,clientHeight:q}=B;if(P>q&&!(M===0&&b>0))return}Math.abs(b)>ze&&(t(5,Y=!0),_.preventDefault(),_.stopPropagation()),se()}function J(){d&&(d=!1,re())}function se(){let o=Q+b;const _=a-f;if(o<_){const H=_-o;o=_-H/3}o=Math.min(o,a),p.set(o)}function re(){const o=b;b=0;const _=s,H=a-f,M=a-m,P=10;if(m===f)o>P?E():p.set(M,{duration:200,easing:k});else if(_<H+P)t(4,i=f),p.set(H,{duration:200,easing:k});else if(o>P)i===f?(t(4,i=m),p.set(M,{duration:200,easing:k})):E();else if(o<-P)t(4,i=f),p.set(H,{duration:200,easing:k});else{const q=(M+H)/2;_<q?(t(4,i=f),p.set(H,{duration:200,easing:k})):(t(4,i=m),p.set(M,{duration:200,easing:k}))}setTimeout(()=>{t(5,Y=!1)},200)}function ie(o){Z(o.touches[0].clientY,o.target)}function le(o){G(o.touches[0].clientY,o)}function ae(){J()}function ue(o){o.button===0&&(Z(o.clientY,o.target),window.addEventListener("mousemove",K),window.addEventListener("mouseup",R))}function K(o){G(o.clientY,o)}function R(){window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",R),J()}function ce(o){!Y&&o.target===o.currentTarget&&!A&&E()}function fe(o){o.target===o.currentTarget&&E()}_e(()=>{z(),E(),window.addEventListener("resize",z),u&&V()}),we(()=>{window.removeEventListener("resize",z)});function de(o){Pe[o?"unshift":"push"](()=>{B=o,t(7,B)})}const he=o=>{o.preventDefault(),o.stopPropagation(),!Y&&!A&&E()};return e.$$set=o=>{"backdropBackground"in o&&t(2,c=o.backdropBackground),"sheetBackground"in o&&t(3,h=o.sheetBackground),"isOpen"in o&&t(0,u=o.isOpen),"maxHeight"in o&&t(1,f=o.maxHeight),"defaultHeight"in o&&t(17,m=o.defaultHeight),"onClose"in o&&t(18,g=o.onClose),"$$scope"in o&&t(19,r=o.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&1&&(u?V():E())},[u,f,c,h,i,Y,A,B,s,p,E,ie,le,ae,ue,ce,fe,m,g,r,l,de,he]}class Ze extends Ae{constructor(n){super(),Be(this,n,Ve,je,ge,{backdropBackground:2,sheetBackground:3,isOpen:0,maxHeight:1,defaultHeight:17,onClose:18},null,[-1,-1])}}export{Ze as A,k as c};
