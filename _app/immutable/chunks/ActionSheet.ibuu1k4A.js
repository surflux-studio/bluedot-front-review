import{a0 as Ee,W as ht,s as xe,q as Me,r as Se,b as F,f as H,v as g,i as _e,h as T,n as de,m as Ke,e as Y,a as he,c as V,g as ge,N as O,K as fe,C as Ce,E as gt,A as q,I as ee,H as Ct,G as mt,u as Oe,o as Te,p as Fe,F as bt,k as yt,y as _t,B as wt,O as pt,U as kt,J as Le,w as vt}from"./scheduler.CIbz-4tf.js";import{n as Ht,l as Bt,S as Re,i as Ge,t as I,g as We,a as x,e as Ie,h as Pe,c as Dt,d as At,m as Et,f as Mt}from"./index.gvaMc9LH.js";import{c as St,f as Ye,a as Kt}from"./clickOutside.7_Rbf9DY.js";import{w as Ot}from"./entry.DhC-hCyw.js";import{r as ce}from"./units.BJZU6p1c.js";import{i as we}from"./device.WpIc8dGM.js";import{K as Tt}from"./ActionSheet.svelte_svelte_type_style_lang.CwBTkBvI.js";function Ve(e){return Object.prototype.toString.call(e)==="[object Date]"}function be(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const s=t.map((i,l)=>be(e[l],i));return i=>s.map(l=>l(i))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Ve(e)&&Ve(t)){e=e.getTime(),t=t.getTime();const l=t-e;return u=>new Date(e+u*l)}const s=Object.keys(t),i={};return s.forEach(l=>{i[l]=be(e[l],t[l])}),l=>{const u={};return s.forEach(a=>{u[a]=i[a](l)}),u}}if(n==="number"){const s=t-e;return i=>e+i*s}throw new Error(`Cannot interpolate ${n} values`)}function Ft(e,t={}){const n=Ot(e);let s,i=e;function l(u,a){if(e==null)return n.set(e=u),Promise.resolve();i=u;let w=s,L=!1,{delay:B=0,duration:p=400,easing:M=ht,interpolate:S=be}=Ee(Ee({},t),a);if(p===0)return w&&(w.abort(),w=null),n.set(e=i),Promise.resolve();const A=Ht()+B;let K;return s=Bt(f=>{if(f<A)return!0;L||(K=S(e,u),typeof p=="function"&&(p=p(e,u)),L=!0),w&&(w.abort(),w=null);const b=f-A;return b>p?(n.set(e=u),!1):(n.set(e=K(M(b/p))),!0)}),s.promise}return{set:l,update:(u,a)=>l(u(i,e),a),subscribe:n.subscribe}}function Lt(e){let t,n;return{c(){t=Me("svg"),n=Me("path"),this.h()},l(s){t=Se(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=F(t);n=Se(i,"path",{id:!0,d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0}),F(n).forEach(H),i.forEach(H),this.h()},h(){g(n,"id","Vector 27674"),g(n,"d","M2 2H33"),g(n,"stroke","#DADDE0"),g(n,"stroke-width","3"),g(n,"stroke-linecap","round"),g(t,"width","35"),g(t,"height","4"),g(t,"viewBox","0 0 35 4"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg")},m(s,i){_e(s,t,i),T(t,n)},p:de,i:de,o:de,d(s){s&&H(t)}}}class Wt extends Re{constructor(t){super(),Ge(this,t,null,Lt,xe,{})}}const z={listeners:{},addListener:(e,t)=>{if(z.listeners[e]||(z.listeners[e]=[]),z.listeners[e].push(t),!window.mockKeyboard){const n=document.createElement("div");n.setAttribute("data-mock-keyboard",""),n.style.cssText=`
        position: fixed;
        bottom: -300px;
        left: 0;
        right: 0;
        height: 300px;
        background-color: #cccccc;
        transition: bottom 0.3s;
        z-index: 9999;
      `,document.body.appendChild(n),window.mockKeyboard={triggerKeyboardEvent:s=>{const i=document.querySelector("[data-mock-keyboard]"),l=z.listeners[s]||[];s==="keyboardWillShow"&&i?(i.style.bottom="0px",l.forEach(u=>u({keyboardHeight:300}))):s==="keyboardWillHide"&&i&&(i.style.bottom="-300px",l.forEach(u=>u({keyboardHeight:0})))}}}return{remove:()=>{var s;const n=(s=z.listeners[e])==null?void 0:s.indexOf(t);n!==void 0&&n!==-1&&z.listeners[e].splice(n,1)}}},removeAllListeners:()=>{z.listeners={};const e=document.querySelector("[data-mock-keyboard]"),t=document.querySelector("[data-mock-keyboard-controls]");e==null||e.remove(),t==null||t.remove(),delete window.mockKeyboard}},ye=we?Tt:z;let me=!1;function Je(e){window.mockKeyboard&&e.metaKey&&e.code==="KeyK"&&(me?(window.mockKeyboard.triggerKeyboardEvent("keyboardWillHide"),me=!1):(window.mockKeyboard.triggerKeyboardEvent("keyboardWillShow"),me=!0))}function It(e,t,n){we||window.addEventListener("keydown",Je),e(),ye.addListener("keyboardWillShow",s=>{t(s)}),ye.addListener("keyboardWillHide",()=>{n()})}function Pt(){we||window.removeEventListener("keydown",Je),ye.removeAllListeners()}const Yt=e=>({}),ze=e=>({});function je(e){let t,n,s;return{c(){t=Y("div"),this.h()},l(i){t=V(i,"DIV",{class:!0}),F(t).forEach(H),this.h()},h(){g(t,"class","fixed inset-0 bg-black/20 pointer-events-auto")},m(i,l){_e(i,t,l),s=!0},p(i,l){e=i},i(i){s||(i&&pt(()=>{s&&(n||(n=Pe(t,Ye,{duration:200,easing:e[8]},!0)),n.run(1))}),s=!0)},o(i){i&&(n||(n=Pe(t,Ye,{duration:200,easing:e[8]},!1)),n.run(0)),s=!1},d(i){i&&H(t),i&&n&&n.end()}}}function qe(e){let t,n;return t=new Wt({}),{c(){Dt(t.$$.fragment)},l(s){At(t.$$.fragment,s)},m(s,i){Et(t,s,i),n=!0},i(s){n||(I(t.$$.fragment,s),n=!0)},o(s){x(t.$$.fragment,s),n=!1},d(s){Mt(t,s)}}}function Vt(e){let t,n,s,i,l,u,a,w,L,B,p,M,S,A,K,f,b,G,d=e[0]&&je(e),C=!e[3]&&qe();const E=e[25].default,y=Ke(E,e,e[24],null),j=e[25].footer,k=Ke(j,e,e[24],ze);return{c(){t=Y("div"),d&&d.c(),n=he(),s=Y("div"),i=Y("div"),l=Y("div"),C&&C.c(),u=he(),a=Y("div"),w=Y("div"),y&&y.c(),L=he(),B=Y("div"),k&&k.c(),this.h()},l(_){t=V(_,"DIV",{class:!0});var r=F(t);d&&d.l(r),n=ge(r),s=V(r,"DIV",{id:!0,class:!0,style:!0});var J=F(s);i=V(J,"DIV",{class:!0,style:!0});var D=F(i);l=V(D,"DIV",{class:!0});var U=F(l);C&&C.l(U),U.forEach(H),u=ge(D),a=V(D,"DIV",{class:!0});var v=F(a);w=V(v,"DIV",{class:!0});var R=F(w);y&&y.l(R),R.forEach(H),L=ge(v),B=V(v,"DIV",{class:!0});var h=F(B);k&&k.l(h),h.forEach(H),v.forEach(H),D.forEach(H),J.forEach(H),r.forEach(H),this.h()},h(){g(l,"class","flex justify-center items-center h-[1.625rem]"),g(w,"class","flex-grow overflow-y-auto"),g(B,"class",p="flex-shrink-0 w-full "+e[2]+" svelte-1vussu5"),g(a,"class","content flex flex-col overflow-hidden transition-transform duration-200 ios-scroll-fix h-full svelte-1vussu5"),O(a,"touch-pan-y",!e[4]),g(i,"class",M=fe(`
        sheet relative 
        min-h-full h-[120vh] w-full ${e[2]}
        rounded-t-[1.25rem]  
        flex flex-col 
        shadow-[0px_7px_16px_rgba(0,0,0,0.08)] backdrop-blur-[10px]
      `)+" svelte-1vussu5"),g(i,"style",S=`
        transform: translateY(${e[7]}px);
      `),g(s,"id","action-sheet--max"),g(s,"class","fixed left-0 right-0 overflow-visible"),Ce(s,"top",e[9]+"px"),Ce(s,"height",e[1]+"px"),O(s,"pointer-events-auto",e[0]),O(s,"pointer-events-none",!e[0]),g(t,"class",K=fe(`fixed inset-0 ${e[5]?"z-50":"z-[60]"}`)+" svelte-1vussu5"),O(t,"pointer-events-none",!e[0]),O(t,"invisible",!e[0])},m(_,r){_e(_,t,r),d&&d.m(t,null),T(t,n),T(t,s),T(s,i),T(i,l),C&&C.m(l,null),T(i,u),T(i,a),T(a,w),y&&y.m(w,null),T(a,L),T(a,B),k&&k.m(B,null),e[28](a),f=!0,b||(G=[gt(A=St.call(null,i,{enabled:e[0]})),q(i,"outsideclick",e[29]),q(i,"touchstart",function(){ee(!e[4]&&e[11])&&(!e[4]&&e[11]).apply(this,arguments)},!0),q(i,"touchmove",function(){ee(!e[4]&&e[12])&&(!e[4]&&e[12]).apply(this,arguments)},!0),q(i,"touchend",function(){ee(!e[4]&&e[13])&&(!e[4]&&e[13]).apply(this,arguments)},!0),q(i,"mousedown",function(){ee(!e[4]&&e[14])&&(!e[4]&&e[14]).apply(this,arguments)},!0),q(i,"click",Ct(e[27])),q(s,"contextmenu",mt(e[26]))],b=!0)},p(_,r){e=_,e[0]?d?(d.p(e,r),r[0]&1&&I(d,1)):(d=je(e),d.c(),I(d,1),d.m(t,n)):d&&(We(),x(d,1,1,()=>{d=null}),Ie()),e[3]?C&&(We(),x(C,1,1,()=>{C=null}),Ie()):C?r[0]&8&&I(C,1):(C=qe(),C.c(),I(C,1),C.m(l,null)),y&&y.p&&(!f||r[0]&16777216)&&Oe(y,E,e,e[24],f?Fe(E,e[24],r,null):Te(e[24]),null),k&&k.p&&(!f||r[0]&16777216)&&Oe(k,j,e,e[24],f?Fe(j,e[24],r,Yt):Te(e[24]),ze),(!f||r[0]&4&&p!==(p="flex-shrink-0 w-full "+e[2]+" svelte-1vussu5"))&&g(B,"class",p),(!f||r[0]&16)&&O(a,"touch-pan-y",!e[4]),(!f||r[0]&4&&M!==(M=fe(`
        sheet relative 
        min-h-full h-[120vh] w-full ${e[2]}
        rounded-t-[1.25rem]  
        flex flex-col 
        shadow-[0px_7px_16px_rgba(0,0,0,0.08)] backdrop-blur-[10px]
      `)+" svelte-1vussu5"))&&g(i,"class",M),(!f||r[0]&128&&S!==(S=`
        transform: translateY(${e[7]}px);
      `))&&g(i,"style",S),A&&ee(A.update)&&r[0]&1&&A.update.call(null,{enabled:e[0]}),(!f||r[0]&2)&&Ce(s,"height",e[1]+"px"),(!f||r[0]&1)&&O(s,"pointer-events-auto",e[0]),(!f||r[0]&1)&&O(s,"pointer-events-none",!e[0]),(!f||r[0]&32&&K!==(K=fe(`fixed inset-0 ${e[5]?"z-50":"z-[60]"}`)+" svelte-1vussu5"))&&g(t,"class",K),(!f||r[0]&33)&&O(t,"pointer-events-none",!e[0]),(!f||r[0]&33)&&O(t,"invisible",!e[0])},i(_){f||(I(d),I(C),I(y,_),I(k,_),f=!0)},o(_){x(d),x(C),x(y,_),x(k,_),f=!1},d(_){_&&H(t),d&&d.d(),C&&C.d(),y&&y.d(_),k&&k.d(_),e[28](null),b=!1,bt(G)}}}const te=50;function zt(e,t){var n;try{if(console.log("activeElement id:",e==null?void 0:e.id,t),e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){const s=((n=e==null?void 0:e.value)==null?void 0:n.length)??0;console.log("현재 값:",e.value,"길이:",s),[200].forEach(l=>{setTimeout(()=>{requestAnimationFrame(()=>{try{e.setSelectionRange(0,0),s>0?setTimeout(()=>{e.setSelectionRange(s,s),e.style.caretColor=t},0):e.style.caretColor=t}catch(u){console.log(`시도 실패 (${l}ms):`,u),e.style.caretColor=t}})},l)}),console.log("setCursorPosition - input 요소 시도 시작",s)}else if(e instanceof HTMLElement){e.style.caretColor=t;const s=document.createRange(),i=window.getSelection();s.selectNodeContents(e),s.collapse(!1),i==null||i.removeAllRanges(),i==null||i.addRange(s),console.log("setCursorPosition - contenteditable 요소")}else e.style.caretColor=t}catch(s){e.style.caretColor=t,console.log("커서 위치 설정 실패:",s)}}function jt(e,t,n){let s,{$$slots:i={},$$scope:l}=t;const u=Kt;let{isOpen:a=!1}=t,{backdropBackground:w="bg-[#24242424]"}=t,{sheetBackground:L="bg-[#222]"}=t,{noHandle:B=!1}=t,{fixed:p=!1}=t,{onOpen:M=()=>{}}=t,{onClose:S=()=>{}}=t,{bottomNavigation:A=!1}=t,{slotFullHeight:K=!1}=t,f=null,{maxHeight:b=null}=t;const G=ce(2.75),d=ce(1.625);let{useDefaultHeight:C=!1}=t,{defaultHeight:E=null}=t,{keyboardHeight:y=0}=t,j=0;const k=ce(3),_=ce(2.13);let r=!1,J=0,D=0,U=0;const v=Ft(0,{duration:0,easing:u});yt(e,v,o=>n(7,s=o));let R=!1,h,Q,X,oe,pe,Z=!1,ne;function Ue(o){console.log("keyboardWillShow 이벤트 발생",o),n(15,y=o.keyboardHeight),N("keyboardWillShow"),$("keyboardWillShow"),oe=document.activeElement;let c=window.getComputedStyle(oe).caretColor;c!=="transparent"&&c!=="rgba(0, 0, 0, 0)"&&(pe=c,oe.style.caretColor="transparent",zt(oe,pe))}function Qe(){console.log("keyboardWillHide",0),n(15,y=0),N("keyboardWillHide"),$("keyboardWillHide")}function N(o){o&&console.log("update window height",o),f=window.innerHeight;let c=G,m=A?_+k:_;y>0?n(1,b=f-c-m-y):n(1,b=f-c-m);const P=(h?h.scrollHeight:0)+d;C===!1&&(n(16,E=Math.min(P,b)),re=!1)}function Xe(){document.body.style.overflow="hidden",N(),Be(),kt(v,s=b,s),ae("openSheet"),M()}function Ze(){document.body.style.overflow="auto",v.set(f,{duration:100,easing:u}).finally(()=>{S()})}function ke(o,c){if(p)return;r=!0,J=o,U=s,R=!1;let m=c;for(;m&&m!==document.body;){if(m.classList.contains("touch-pan-y")||m.classList.contains("overflow-y-auto")||m.classList.contains("overflow-y-scroll")){const{scrollHeight:W,clientHeight:P}=m;if(W>P){R=!0,se=m;break}}m=m.parentElement}}let se=null,ie=!1,le=!1;function Ne(){h&&(h.addEventListener("scroll",o=>{const c=o.target;if(c&&c!==h){const{scrollTop:m,scrollHeight:W,clientHeight:P}=c;m<0?ie=!0:m+P>W?le=!0:(ie=!1,le=!1)}},{passive:!0,capture:!0}),h.addEventListener("touchend",()=>{setTimeout(()=>{ie=!1,le=!1,se=null},50)},{passive:!0}))}function ve(o,c){if(r){if(D=o-J,R&&se){const{scrollTop:m,scrollHeight:W,clientHeight:P}=se;if(W>P){const ct=m<=0,dt=Math.abs(m+P-W)<1;if(!((ct||ie)&&D>0)){if(!((dt||le)&&D<0)){r=!1;return}}}}Math.abs(D)>te&&c.stopPropagation(),Be()}}function He(){r&&(r=!1,$e())}function Be(){let o=U+D;o=Math.min(o,f);const c=b-f;o<c&&(o=c),v.set(o,{duration:0,easing:u});const m=b-o;if(h){const W=m-d;n(6,h.style.maxHeight=`${W}px`,h)}}function $e(){const o=D;D=0,E===b?et(o):tt(s,o)}let re=!1;function $(o){re?ue(o):ae(o)}function ue(o){j=b,re=!0,v.set(0,{duration:200,easing:u});const c=b-d;h?n(6,h.style.maxHeight=`${c}px`,h):console.error("contentEl is null"),o&&console.log("setToMaxHeight - done",o)}function ae(o){j=E,re=!1,v.set(b-E,{duration:200,easing:u});const c=E-d;h?n(6,h.style.maxHeight=`${c}px`,h):console.error("contentEl is null"),o&&console.log("setToDefaultHeight - done",o)}function et(o){o>te?(console.log("충분히 아래로 드래그: 시트 닫기"),n(0,a=!1)):(console.log("충분한 드래그 없음: 기본 위치로 복귀"),ue())}function tt(o,c){try{if(c===0)return;if(o<te&&c!==0){console.log("케이스 1: 현재 위치가 거의 최대 높이 - 최대 높이로 확장"),ue();return}if(c>te){b===j?(console.log("케이스 2-1: 아래로 드래그 + 최대 높이 상태 - 기본 높이로 축소"),ae()):(console.log("케이스 2-2: 아래로 드래그 + 기본 높이 상태 - 시트 닫기"),v.set(b,{duration:200,easing:u}),n(0,a=!1));return}if(c<-te){console.log("케이스 3: 위로 드래그 - 최대 높이로 확장"),ue();return}console.log("케이스 4: 제자리로 복귀"),$()}catch(m){console.error("handleMultiHeightMode 오류:",m),ae()}}function ot(o){ke(o.touches[0].clientY,o.target)}function nt(o){ve(o.touches[0].clientY,o)}function st(){He()}function it(o){o.button===0&&(ke(o.clientY,o.target),window.addEventListener("mousemove",De),window.addEventListener("mouseup",Ae))}function De(o){ve(o.clientY,o)}function Ae(){window.removeEventListener("mousemove",De),window.removeEventListener("mouseup",Ae),He()}_t(()=>{n(23,ne=window),It(()=>{},Ue,Qe),Ne(),h&&Q===void 0&&(Q=new ResizeObserver(()=>{r||(N(),$("resizeObserver"))}),Q.observe(h)),h&&X===void 0&&(X=new MutationObserver(o=>{r||(N(),$("contentMutationObserver"))}),X.observe(h,{childList:!0,subtree:!0}))}),wt(()=>{Pt(),Q&&Q.disconnect(),X&&X.disconnect()});function lt(o){Le.call(this,e,o)}function rt(o){Le.call(this,e,o)}function ut(o){vt[o?"unshift":"push"](()=>{h=o,n(6,h)})}const at=()=>n(0,a=!1);return e.$$set=o=>{"isOpen"in o&&n(0,a=o.isOpen),"backdropBackground"in o&&n(17,w=o.backdropBackground),"sheetBackground"in o&&n(2,L=o.sheetBackground),"noHandle"in o&&n(3,B=o.noHandle),"fixed"in o&&n(4,p=o.fixed),"onOpen"in o&&n(18,M=o.onOpen),"onClose"in o&&n(19,S=o.onClose),"bottomNavigation"in o&&n(5,A=o.bottomNavigation),"slotFullHeight"in o&&n(20,K=o.slotFullHeight),"maxHeight"in o&&n(1,b=o.maxHeight),"useDefaultHeight"in o&&n(21,C=o.useDefaultHeight),"defaultHeight"in o&&n(16,E=o.defaultHeight),"keyboardHeight"in o&&n(15,y=o.keyboardHeight),"$$scope"in o&&n(24,l=o.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&12582913&&(Z!==a&&a===!0&&ne!==void 0?(n(22,Z=a),Xe()):Z!==a&&a===!1&&ne!==void 0&&(n(22,Z=a),Ze())),e.$$.dirty[0]&32800},[a,b,L,B,p,A,h,s,u,G,v,ot,nt,st,it,y,E,w,M,S,K,C,Z,ne,l,i,lt,rt,ut,at]}class Xt extends Re{constructor(t){super(),Ge(this,t,jt,Vt,xe,{isOpen:0,backdropBackground:17,sheetBackground:2,noHandle:3,fixed:4,onOpen:18,onClose:19,bottomNavigation:5,slotFullHeight:20,maxHeight:1,useDefaultHeight:21,defaultHeight:16,keyboardHeight:15},null,[-1,-1,-1])}}export{Xt as A,Pt as a,It as o};
