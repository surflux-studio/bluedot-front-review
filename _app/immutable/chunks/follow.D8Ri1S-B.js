import{A as p,g as h,e as i}from"./sign.C_qZ1Wr8.js";async function l({targetTable:s="users",targetIdx:n,subjectTable:a="users",subjectIdx:o}){const e=h();if(!e)throw i.emit("showSignInModal",{removable:!0}),new Error("로그인이 필요합니다.");const t=new URL(`${p}/auth/followers`);t.searchParams.append("targetTable",s),t.searchParams.append("targetIdx",n.toString()),t.searchParams.append("subjectTable",a),t.searchParams.append("subjectIdx",o.toString());const r=await fetch(t.href,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});return r.ok||i.emit("pushSnackbar",{message:"팔로우에 실패했습니다."}),await r.json()}async function w({targetTable:s="users",targetIdx:n,subjectTable:a="users",subjectIdx:o,useMessage:e=!0}){const t=h();if(!t)throw i.emit("showSignInModal",{removable:!0}),new Error("로그인이 필요합니다.");const r=new URL(`${p}/auth/followers`);r.searchParams.append("targetTable",s),r.searchParams.append("targetIdx",String(n)),r.searchParams.append("subjectTable",a),r.searchParams.append("subjectIdx",String(o));const c=await fetch(r.href,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!c.ok&&e)throw i.emit("pushSnackbar",{message:"언팔로우에 실패했습니다."}),new Error("언팔로우 실패");return await c.json()}async function m({targetTable:s="users",targetIdx:n}){const a=new URL(`${p}/auth/followers`);return a.searchParams.append("targetTable",s),a.searchParams.append("targetIdx",String(n)),a.searchParams.append("count","true"),(await(await fetch(a.href,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h()}`}})).json()).data.count}async function g({targetTable:s="users",targetIdx:n,subjectTable:a="users",subjectIdx:o}){const e=new URL(`${p}/auth/followers`);return e.searchParams.append("targetTable",s),e.searchParams.append("targetIdx",String(n)),e.searchParams.append("subjectTable",a),e.searchParams.append("subjectIdx",String(o)),(await(await fetch(e.href,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h()}`}})).json()).data.length>0}export{l as f,m as g,g as i,w as u};
