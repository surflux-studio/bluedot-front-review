var tn=Object.defineProperty;var rn=(n,t,r)=>t in n?tn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var b=(n,t,r)=>rn(n,typeof t!="symbol"?t+"":t,r);import{m as sn}from"./Header.FoXJ-u0t.js";import{G as q,P as Y}from"./index.P4poKbEW.js";function Kn(n,t,r){return Math.min(Math.max(n,t),r)}function Vn(n,t,r,s,i,o){const a=i-r,c=o-s;if(a!==0||c!==0){const e=((n-r)*a+(t-s)*c)/(a*a+c*c);e>1?(r=i,s=o):e>0&&(r+=a*e,s+=c*e)}return on(n,t,r,s)}function on(n,t,r,s){const i=r-n,o=s-t;return i*i+o*o}function vn(n){const t=n.length;for(let s=0;s<t;s++){let i=s,o=Math.abs(n[s][s]);for(let c=s+1;c<t;c++){const e=Math.abs(n[c][s]);e>o&&(o=e,i=c)}if(o===0)return null;const a=n[i];n[i]=n[s],n[s]=a;for(let c=s+1;c<t;c++){const e=-n[c][s]/n[s][s];for(let f=s;f<t+1;f++)s==f?n[c][f]=0:n[c][f]+=e*n[s][f]}}const r=new Array(t);for(let s=t-1;s>=0;s--){r[s]=n[s][t]/n[s][s];for(let i=s-1;i>=0;i--)n[i][t]-=n[i][s]*r[s]}return r}function O(n){return n*Math.PI/180}function an(n,t){const r=n%t;return r*t<0?r+t:r}function Hn(n,t,r){return n+r*(t-n)}function N(n,t){const r=Math.pow(10,t);return Math.round(n*r)/r}function Jn(n,t){return Math.round(N(n,t))}function kn(n,t){return Math.floor(N(n,t))}function pn(n,t){return Math.ceil(N(n,t))}const cn={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class H{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||cn[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const S=6378137,M=Math.PI*S,en=[-M,-M,M,M],fn=[-180,-85,180,85],G=S*Math.log(Math.tan(Math.PI/2));class m extends H{constructor(t){super({code:t,units:"m",extent:en,global:!0,worldExtent:fn,getPointResolution:function(r,s){return r/Math.cosh(s[1]/S)}})}}const B=[new m("EPSG:3857"),new m("EPSG:102100"),new m("EPSG:102113"),new m("EPSG:900913"),new m("http://www.opengis.net/def/crs/EPSG/0/3857"),new m("http://www.opengis.net/gml/srs/epsg.xml#3857")];function un(n,t,r,s){const i=n.length;r=r>1?r:2,s=s??r,t===void 0&&(r>2?t=n.slice():t=new Array(i));for(let o=0;o<i;o+=s){t[o]=M*n[o]/180;let a=S*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));a>G?a=G:a<-G&&(a=-G),t[o+1]=a}return t}function ln(n,t,r,s){const i=n.length;r=r>1?r:2,s=s??r,t===void 0&&(r>2?t=n.slice():t=new Array(i));for(let o=0;o<i;o+=s)t[o]=180*n[o]/M,t[o+1]=360*Math.atan(Math.exp(n[o+1]/S))/Math.PI-90;return t}const hn=6378137,$=[-180,-90,180,90],gn=Math.PI*hn/180;class E extends H{constructor(t,r){super({code:t,units:"degrees",extent:$,axisOrientation:r,global:!0,metersPerUnit:gn,worldExtent:$})}}const D=[new E("CRS:84"),new E("EPSG:4326","neu"),new E("urn:ogc:def:crs:OGC:1.3:CRS84"),new E("urn:ogc:def:crs:OGC:2:84"),new E("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new E("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new E("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let A={};function dn(n){return A[n]||A[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function En(n,t){A[n]=t}let _={};function C(n,t,r){const s=n.getCode(),i=t.getCode();s in _||(_[s]={}),_[s][i]=r}function wn(n,t){let r;return n in _&&t in _[n]&&(r=_[n][t]),r}const u={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Zn(n){const t=J();for(let r=0,s=n.length;r<s;++r)Mn(t,n[r]);return t}function Pn(n,t,r){const s=Math.min.apply(null,n),i=Math.min.apply(null,t),o=Math.max.apply(null,n),a=Math.max.apply(null,t);return I(s,i,o,a,r)}function zn(n,t,r){return r?(r[0]=n[0]-t,r[1]=n[1]-t,r[2]=n[2]+t,r[3]=n[3]+t,r):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function Qn(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function jn(n,t,r){let s,i;return t<n[0]?s=n[0]-t:n[2]<t?s=t-n[2]:s=0,r<n[1]?i=n[1]-r:n[3]<r?i=r-n[3]:i=0,s*s+i*i}function xn(n,t){return mn(n,t[0],t[1])}function nt(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function mn(n,t,r){return n[0]<=t&&t<=n[2]&&n[1]<=r&&r<=n[3]}function K(n,t){const r=n[0],s=n[1],i=n[2],o=n[3],a=t[0],c=t[1];let e=u.UNKNOWN;return a<r?e=e|u.LEFT:a>i&&(e=e|u.RIGHT),c<s?e=e|u.BELOW:c>o&&(e=e|u.ABOVE),e===u.UNKNOWN&&(e=u.INTERSECTING),e}function J(){return[1/0,1/0,-1/0,-1/0]}function I(n,t,r,s,i){return i?(i[0]=n,i[1]=t,i[2]=r,i[3]=s,i):[n,t,r,s]}function F(n){return I(1/0,1/0,-1/0,-1/0,n)}function tt(n,t){const r=n[0],s=n[1];return I(r,s,r,s,t)}function rt(n,t,r,s,i){const o=F(i);return _n(o,n,t,r,s)}function st(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function it(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function Mn(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function _n(n,t,r,s,i){for(;r<s;r+=i)Tn(n,t[r],t[r+1]);return n}function Tn(n,t,r){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],r),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],r)}function ot(n,t){let r;return r=t(k(n)),r||(r=t(p(n)),r)||(r=t(z(n)),r)||(r=t(Z(n)),r)?r:!1}function at(n){let t=0;return Q(n)||(t=T(n)*Rn(n)),t}function k(n){return[n[0],n[1]]}function p(n){return[n[2],n[1]]}function yn(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function ct(n,t){let r;if(t==="bottom-left")r=k(n);else if(t==="bottom-right")r=p(n);else if(t==="top-left")r=Z(n);else if(t==="top-right")r=z(n);else throw new Error("Invalid corner");return r}function et(n,t,r,s,i){const[o,a,c,e,f,h,g,l]=Sn(n,t,r,s);return I(Math.min(o,c,f,g),Math.min(a,e,h,l),Math.max(o,c,f,g),Math.max(a,e,h,l),i)}function Sn(n,t,r,s){const i=t*s[0]/2,o=t*s[1]/2,a=Math.cos(r),c=Math.sin(r),e=i*a,f=i*c,h=o*a,g=o*c,l=n[0],d=n[1];return[l-e+g,d-f-h,l-e-g,d-f+h,l+e-g,d+f+h,l+e+g,d+f-h,l-e+g,d-f-h]}function Rn(n){return n[3]-n[1]}function ft(n,t,r){const s=r||J();return Gn(n,t)?(n[0]>t[0]?s[0]=n[0]:s[0]=t[0],n[1]>t[1]?s[1]=n[1]:s[1]=t[1],n[2]<t[2]?s[2]=n[2]:s[2]=t[2],n[3]<t[3]?s[3]=n[3]:s[3]=t[3]):F(s),s}function Z(n){return[n[0],n[3]]}function z(n){return[n[2],n[3]]}function T(n){return n[2]-n[0]}function Gn(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function Q(n){return n[2]<n[0]||n[3]<n[1]}function ut(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function lt(n,t,r){let s=!1;const i=K(n,t),o=K(n,r);if(i===u.INTERSECTING||o===u.INTERSECTING)s=!0;else{const a=n[0],c=n[1],e=n[2],f=n[3],h=t[0],g=t[1],l=r[0],d=r[1],R=(d-g)/(l-h);let w,P;o&u.ABOVE&&!(i&u.ABOVE)&&(w=l-(d-f)/R,s=w>=a&&w<=e),!s&&o&u.RIGHT&&!(i&u.RIGHT)&&(P=d-(l-e)*R,s=P>=c&&P<=f),!s&&o&u.BELOW&&!(i&u.BELOW)&&(w=l-(d-c)/R,s=w>=a&&w<=e),!s&&o&u.LEFT&&!(i&u.LEFT)&&(P=d-(l-a)*R,s=P>=c&&P<=f)}return s}function Cn(n,t,r,s){if(Q(n))return F(r);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],t(i,i,2);const o=[],a=[];for(let c=0,e=i.length;c<e;c+=2)o.push(i[c]),a.push(i[c+1]);return Pn(o,a,r)}function In(n,t){const r=t.getExtent(),s=yn(n);if(t.canWrapX()&&(s[0]<r[0]||s[0]>=r[2])){const i=T(r),a=Math.floor((s[0]-r[0])/i)*i;n[0]-=a,n[2]-=a}return n}function ht(n,t,r){if(t.canWrapX()){const s=t.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[s[0],n[1],s[2],n[3]]];In(n,t);const i=T(s);if(T(n)>i&&!r)return[[s[0],n[1],s[2],n[3]]];if(n[0]<s[0])return[[n[0]+i,n[1],s[2],n[3]],[s[0],n[1],n[2],n[3]]];if(n[2]>s[2])return[[n[0],n[1],s[2],n[3]],[s[0],n[1],n[2]-i,n[3]]]}return[n]}function gt(n,t){return n[0]+=+t[0],n[1]+=+t[1],n}function On(n,t){let r=!0;for(let s=n.length-1;s>=0;--s)if(n[s]!=t[s]){r=!1;break}return r}function dt(n,t){const r=Math.cos(t),s=Math.sin(t),i=n[0]*r-n[1]*s,o=n[1]*r+n[0]*s;return n[0]=i,n[1]=o,n}function Et(n,t){return n[0]*=t,n[1]*=t,n}function wt(n,t){if(t.canWrapX()){const r=T(t.getExtent()),s=Ln(n,t,r);s&&(n[0]-=s*r)}return n}function Ln(n,t,r){const s=t.getExtent();let i=0;return t.canWrapX()&&(n[0]<s[0]||n[0]>s[2])&&(r=r||T(s),i=Math.floor((n[0]-s[0])/r)),i}const An=63710088e-1;function V(n,t,r){r=r||An;const s=O(n[1]),i=O(t[1]),o=(i-s)/2,a=O(t[0]-n[0])/2,c=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(s)*Math.cos(i);return 2*r*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function Un(...n){console.warn(...n)}let U=!0;function Nn(n){U=!1}function X(n,t){if(t!==void 0){for(let r=0,s=n.length;r<s;++r)t[r]=n[r];t=t}else t=n.slice();return t}function j(n,t){if(t!==void 0&&n!==t){for(let r=0,s=n.length;r<s;++r)t[r]=n[r];n=t}return n}function Fn(n){En(n.getCode(),n),C(n,n,X)}function Xn(n){n.forEach(Fn)}function y(n){return typeof n=="string"?dn(n):n||null}function Pt(n,t,r,s){n=y(n);let i;const o=n.getPointResolutionFunc();if(o)i=o(t,r);else{const a=n.getUnits();if(a=="degrees"&&!s||s=="degrees")i=t;else{const c=W(n,y("EPSG:4326"));if(c===j&&a!=="degrees")i=t*n.getMetersPerUnit();else{let f=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];f=c(f,f,2);const h=V(f.slice(0,2),f.slice(2,4)),g=V(f.slice(4,6),f.slice(6,8));i=(h+g)/2}const e=n.getMetersPerUnit();e!==void 0&&(i/=e)}}return i}function v(n){Xn(n),n.forEach(function(t){n.forEach(function(r){t!==r&&C(t,r,X)})})}function Wn(n,t,r,s){n.forEach(function(i){t.forEach(function(o){C(i,o,r),C(o,i,s)})})}function mt(n,t){return n?typeof n=="string"?y(n):n:y(t)}function Mt(n,t){return Nn(),nn(n,"EPSG:4326","EPSG:3857")}function _t(n,t){const r=nn(n,"EPSG:3857","EPSG:4326"),s=r[0];return(s<-180||s>180)&&(r[0]=an(s+180,360)-180),r}function Tt(n,t){if(n===t)return!0;const r=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||W(n,t)===X)&&r}function W(n,t){const r=n.getCode(),s=t.getCode();let i=wn(r,s);return i||(i=j),i}function x(n,t){const r=y(n),s=y(t);return W(r,s)}function nn(n,t,r){return x(t,r)(n,void 0,n.length)}function yt(n,t,r,s){const i=x(t,r);return Cn(n,i,void 0)}let bn=null;function St(){return bn}function Rt(n,t){return n}function Gt(n,t){return U&&!On(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(U=!1,Un("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Ct(n,t){return n}function It(n,t){return n}function qn(){v(B),v(D),Wn(D,B,un,ln)}qn();let L={latitude:0,longitude:0,accuracy:0,altitudeAccuracy:void 0,altitude:null,speed:null,heading:null};class Yn{static async getCurrentOrLastLocation(){const t=sn.isNativePlatform()?await this.checkAndRequestGeolocationPermission():{location:"granted"};if((t==null?void 0:t.location)==="granted")try{const r=await q.getCurrentPosition(),{latitude:s,longitude:i,accuracy:o,altitudeAccuracy:a,altitude:c,speed:e,heading:f}=r.coords;return L={latitude:s,longitude:i,accuracy:o,altitudeAccuracy:a,altitude:c,speed:e,heading:f},this.saveLastKnownLocation(L),L}catch(r){return console.warn(r),this.getLastKnownLocation()}else return this.getLastKnownLocation()}static async checkAndRequestGeolocationPermission(){try{return await q.requestPermissions({permissions:["location"]})}catch{return null}}static saveLastKnownLocation(t){Y.set({key:this.LAST_LOCATION_KEY,value:JSON.stringify(t)})}static async getLastKnownLocation(){const{value:t}=await Y.get({key:this.LAST_LOCATION_KEY});return t?JSON.parse(t):null}}b(Yn,"LAST_LOCATION_KEY","last_known_location");export{Pt as $,mt as A,Gt as B,It as C,an as D,dt as E,gt as F,Rt as G,Ct as H,et as I,On as J,Nn as K,Yn as L,cn as M,wt as N,ft as O,Et as P,st as Q,Qn as R,Un as S,Z as T,z as U,p as V,k as W,at as X,Zn as Y,Mn as Z,nn as _,yt as a,xn as a0,it as a1,vn as a2,ht as a3,I as a4,pn as a5,kn as a6,ct as a7,Tt as a8,zn as a9,Jn as aa,K as ab,u as ac,N as ad,W as ae,St as af,In as ag,H as ah,Rn as b,Kn as c,O as d,J as e,Mt as f,T as g,F as h,y as i,x as j,rt as k,yn as l,Hn as m,Vn as n,jn as o,tt as p,mn as q,ut as r,on as s,_t as t,ot as u,_n as v,Gn as w,nt as x,lt as y,Q as z};
