import{s as fe,D as ne,i as L,f as p,w as St,e as T,a as q,t as ve,c as D,b as S,g as Y,d as we,v as h,h as k,A as z,j as Ne,B as $,S as Xe,C as Q,n as J,q as xe,r as Ie,ac as Ze,x as At,E as Ae,F as ke,L as Ye,y as De,z as Oe,G as Nt,N as lt,k as bl,I as vl,K as wl}from"./scheduler.CVGJxaOr.js";import{S as ue,i as ce,t as I,g as ee,a as P,f as te,c as H,b as Z,m as G,d as W,e as Re}from"./index.1WceP6qL.js";import{e as me,u as Ge,f as kl,o as Lt}from"./each.Xy939NiR.js";import{b as Me,e as be,A as Se,l as jt,g as Fe,i as nt,C as Cl}from"./sign.DGdpB9NJ.js";import{g as He}from"./entry.B9SH3PBZ.js";import{p as xl}from"./stores.B1T2gRSn.js";import{g as ze,u as Il}from"./searchParams.ajOqsZrC.js";/* empty css                                           */import{C as El}from"./CircleImage.Cp2cIWzb.js";import{f as yl,u as Tl}from"./follow.CpHyFw_a.js";import{g as st}from"./color.C_Jm4JAr.js";import{s as it}from"./s32cloudfront.BC_qV2gr.js";import{r as Ee}from"./units.BJZU6p1c.js";import"./index.Di0Awna4.js";import{a as Dl}from"./NavigationBar.Bg5E0jmJ.js";import{C as qt}from"./Chip.Db-E9oAd.js";import{B as Ml}from"./BottomNavigationPadder.C-a_SJOR.js";import{I as Vl,a as Bl}from"./IconHeartFill.Bg--UEfd.js";import{l as Pl}from"./longPress.C9F0mLoM.js";import{w as Ol,I as Rl}from"./Header.QA-SyU_y.js";import{A as Yt}from"./ActionSheet.CMfnRv4Z.js";import{M as Sl}from"./Modal.DQEXtJ1V.js";import{f as Al,c as Nl,a as Ll}from"./ActionSheetReport.svelte_svelte_type_style_lang.2X6vSn0H.js";import{F as jl}from"./Figure.B6TmBG4E.js";import{I as ql}from"./IconLink.h98mixre.js";function rt(n){let e,t,l,s,r,i,a=n[0].unique_name+"",o,f,d,_=String(n[0].user_idx)!==String(Me()),v,E,M;const g=[Fl,Yl],m=[];function c(y,O){return y[0].profile_image_url?0:1}t=c(n),l=m[t]=g[t](n);let x=_&&at(n);return{c(){e=T("div"),l.c(),s=q(),r=T("div"),i=T("div"),o=ve(a),f=q(),d=T("div"),x&&x.c(),this.h()},l(y){e=D(y,"DIV",{class:!0});var O=S(e);l.l(O),s=Y(O),r=D(O,"DIV",{class:!0});var C=S(r);i=D(C,"DIV",{class:!0});var A=S(i);o=we(A,a),A.forEach(p),f=Y(C),d=D(C,"DIV",{class:!0});var X=S(d);x&&x.l(X),X.forEach(p),C.forEach(p),O.forEach(p),this.h()},h(){h(i,"class","text-sm text-white"),h(d,"class","flex gap-1 items-center"),h(r,"class","flex gap-1 items-center"),h(e,"class","flex gap-[0.625rem] justify-center items-center")},m(y,O){L(y,e,O),m[t].m(e,null),k(e,s),k(e,r),k(r,i),k(i,o),k(r,f),k(r,d),x&&x.m(d,null),v=!0,E||(M=z(i,"click",n[5]),E=!0)},p(y,O){let C=t;t=c(y),t===C?m[t].p(y,O):(ee(),P(m[C],1,1,()=>{m[C]=null}),te(),l=m[t],l?l.p(y,O):(l=m[t]=g[t](y),l.c()),I(l,1),l.m(e,s)),(!v||O&1)&&a!==(a=y[0].unique_name+"")&&Ne(o,a),O&1&&(_=String(y[0].user_idx)!==String(Me())),_?x?x.p(y,O):(x=at(y),x.c(),x.m(d,null)):x&&(x.d(1),x=null)},i(y){v||(I(l),v=!0)},o(y){P(l),v=!1},d(y){y&&p(e),m[t].d(),x&&x.d(),E=!1,M()}}}function Yl(n){let e,t,l=n[0].unique_name[0]+"",s,r,i;return{c(){e=T("div"),t=T("span"),s=ve(l),this.h()},l(a){e=D(a,"DIV",{class:!0,style:!0});var o=S(e);t=D(o,"SPAN",{class:!0});var f=S(t);s=we(f,l),f.forEach(p),o.forEach(p),this.h()},h(){h(t,"class","text-base font-semibold text-black"),h(e,"class","w-[1.625rem] h-[1.625rem] flex items-center justify-center rounded-full"),Q(e,"background-color",st(n[0].unique_name))},m(a,o){L(a,e,o),k(e,t),k(t,s),r||(i=z(e,"click",n[4]),r=!0)},p(a,o){o&1&&l!==(l=a[0].unique_name[0]+"")&&Ne(s,l),o&1&&Q(e,"background-color",st(a[0].unique_name))},i:J,o:J,d(a){a&&p(e),r=!1,i()}}}function Fl(n){let e,t;return e=new El({props:{src:it(n[0].profile_image_url,500),width:"1.625rem",strokeColor:"white",strokeWidth:"0"}}),e.$on("click",n[3]),{c(){H(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){G(e,l,s),t=!0},p(l,s){const r={};s&1&&(r.src=it(l[0].profile_image_url,500)),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function at(n){let e,t="•",l,s,r=n[0].is_following?"팔로잉":"팔로우",i,a,o,f;return{c(){e=T("div"),e.textContent=t,l=q(),s=T("div"),i=ve(r),this.h()},l(d){e=D(d,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-168vif2"&&(e.textContent=t),l=Y(d),s=D(d,"DIV",{class:!0});var _=S(s);i=we(_,r),_.forEach(p),this.h()},h(){h(e,"class","text-xs text-white/60"),h(s,"class",a=`text-[0.8125rem] ${n[0].is_following?"text-gray-500":"text-[#3490FF]"}`)},m(d,_){L(d,e,_),L(d,l,_),L(d,s,_),k(s,i),o||(f=z(s,"click",function(){Xe(n[0].is_following?n[2]:n[1])&&(n[0].is_following?n[2]:n[1]).apply(this,arguments)}),o=!0)},p(d,_){n=d,_&1&&r!==(r=n[0].is_following?"팔로잉":"팔로우")&&Ne(i,r),_&1&&a!==(a=`text-[0.8125rem] ${n[0].is_following?"text-gray-500":"text-[#3490FF]"}`)&&h(s,"class",a)},d(d){d&&(p(e),p(l),p(s)),o=!1,f()}}}function Ul(n){let e,t,l=n[0].idx&&rt(n);return{c(){l&&l.c(),e=ne()},l(s){l&&l.l(s),e=ne()},m(s,r){l&&l.m(s,r),L(s,e,r),t=!0},p(s,[r]){s[0].idx?l?(l.p(s,r),r&1&&I(l,1)):(l=rt(s),l.c(),I(l,1),l.m(e.parentNode,e)):l&&(ee(),P(l,1,1,()=>{l=null}),te())},i(s){t||(I(l),t=!0)},o(s){P(l),t=!1},d(s){s&&p(e),l&&l.d(s)}}}function zl(n,e,t){let{post:l}=e;async function s(){await yl({targetIdx:l.user_idx,subjectIdx:Me()}),t(0,l.is_following=!0,l)}async function r(){await Tl({targetIdx:l.user_idx,subjectIdx:Me()}),t(0,l.is_following=!1,l)}St(()=>{console.log(l)});const i=()=>{ze(`/users/${l.user_idx}`)},a=()=>{ze(`/users/${l.user_idx}`)},o=()=>{ze(`/users/${l.user_idx}`)};return n.$$set=f=>{"post"in f&&t(0,l=f.post)},[l,s,r,i,a,o]}class Xl extends ue{constructor(e){super(),ce(this,e,zl,Ul,fe,{post:0})}}function Hl(n){let e,t,l,s;return{c(){e=xe("svg"),t=xe("path"),l=xe("path"),this.h()},l(r){e=Ie(r,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var i=S(e);t=Ie(i,"path",{d:!0,fill:!0}),S(t).forEach(p),l=Ie(i,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linejoin":!0}),S(l).forEach(p),i.forEach(p),this.h()},h(){h(t,"d","M11.9996 14.3636C11.7585 14.3636 11.5273 14.2679 11.3568 14.0974C11.1863 13.9269 11.0906 13.6957 11.0906 13.4545L11.0906 8.90909C11.0906 8.66798 11.1863 8.43675 11.3568 8.26627C11.5273 8.09578 11.7585 8 11.9996 8C12.2408 8 12.472 8.09578 12.6425 8.26627C12.813 8.43675 12.9087 8.66798 12.9087 8.90909L12.9087 13.4545C12.9087 13.6957 12.813 13.9269 12.6425 14.0974C12.472 14.2679 12.2408 14.3636 11.9996 14.3636ZM10.636 16.6364C10.636 16.2747 10.7797 15.9279 11.0354 15.6721C11.2911 15.4164 11.638 15.2727 11.9996 15.2727C12.3613 15.2727 12.7082 15.4164 12.9639 15.6721C13.2196 15.9279 13.3633 16.2747 13.3633 16.6364C13.3633 16.998 13.2196 17.3449 12.9639 17.6006C12.7082 17.8563 12.3613 18 11.9996 18C11.638 18 11.2911 17.8563 11.0354 17.6006C10.7797 17.3449 10.636 16.998 10.636 16.6364Z"),h(t,"fill",n[0]),h(l,"d","M13.732 4C12.9623 2.66667 11.0378 2.66667 10.268 4L2.47372 17.5C1.70392 18.8333 2.66617 20.5 4.20577 20.5H19.7942C21.3338 20.5 22.2961 18.8333 21.5263 17.5L13.732 4Z"),h(l,"stroke",n[1]),h(l,"stroke-width","2"),h(l,"stroke-linejoin","round"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"width",n[2]),h(e,"height",n[2]),h(e,"viewBox",s="0 0 "+n[2]+" "+n[2]),h(e,"fill","none")},m(r,i){L(r,e,i),k(e,t),k(e,l)},p(r,[i]){i&1&&h(t,"fill",r[0]),i&2&&h(l,"stroke",r[1]),i&4&&h(e,"width",r[2]),i&4&&h(e,"height",r[2]),i&4&&s!==(s="0 0 "+r[2]+" "+r[2])&&h(e,"viewBox",s)},i:J,o:J,d(r){r&&p(e)}}}function Zl(n,e,t){let l,{fill:s="#FF4F1E"}=e,{stroke:r="#FF4F1E"}=e,{length:i=1.5}=e;return n.$$set=a=>{"fill"in a&&t(0,s=a.fill),"stroke"in a&&t(1,r=a.stroke),"length"in a&&t(3,i=a.length)},n.$$.update=()=>{n.$$.dirty&8&&t(2,l=Ee(i))},[s,r,l,i]}class Gl extends ue{constructor(e){super(),ce(this,e,Zl,Hl,fe,{fill:0,stroke:1,length:3})}}function Ue(n){const t=["touchstart","touchmove","touchend","mousedown","mousemove","mouseup","wheel"].map(l=>{const s=r=>r.stopPropagation();return n.addEventListener(l,s),{event:l,handler:s}});return{destroy(){t.forEach(({event:l,handler:s})=>{n.removeEventListener(l,s)})}}}function ot(n){let e,t;return e=new qt({props:{prefixLength:1.25,textSize:"text-xs",textColor:"text-white",backgroundColor:"bg-[rgb(56,56,56)]/30",borderColor:"border-[rgb(56,56,56)]/10",border:!0,pointer:!0,prefixIconComponent:Dl,fill:"white",padding:"px-[0.88rem] py-[0.5rem]",value:n[0].name}}),e.$on("click",n[1]),{c(){H(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){G(e,l,s),t=!0},p(l,s){const r={};s&1&&(r.value=l[0].name),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Wl(n){let e,t,l=n[0].idx&&ot(n);return{c(){l&&l.c(),e=ne()},l(s){l&&l.l(s),e=ne()},m(s,r){l&&l.m(s,r),L(s,e,r),t=!0},p(s,[r]){s[0].idx?l?(l.p(s,r),r&1&&I(l,1)):(l=ot(s),l.c(),I(l,1),l.m(e.parentNode,e)):l&&(ee(),P(l,1,1,()=>{l=null}),te())},i(s){t||(I(l),t=!0)},o(s){P(l),t=!1},d(s){s&&p(e),l&&l.d(s)}}}function Jl(n,e,t){let{place:l}=e;const s=async()=>{await He(`/places/${l.idx}`)};return n.$$set=r=>{"place"in r&&t(0,l=r.place)},[l,s]}class Kl extends ue{constructor(e){super(),ce(this,e,Jl,Wl,fe,{place:0})}}function Ql(n){let e,t;return{c(){e=xe("svg"),t=xe("path"),this.h()},l(l){e=Ie(l,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var s=S(e);t=Ie(s,"path",{d:!0}),S(t).forEach(p),s.forEach(p),this.h()},h(){h(t,"d","M200-200h57l391-391-57-57-391 391v57Zm-40 80q-17 0-28.5-11.5T120-160v-97q0-16 6-30.5t17-25.5l505-504q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L313-143q-11 11-25.5 17t-30.5 6h-97Zm600-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 -960 960 960"),h(e,"width",n[1]),h(e,"height",n[1]),h(e,"fill",n[0])},m(l,s){L(l,e,s),k(e,t)},p(l,[s]){s&2&&h(e,"width",l[1]),s&2&&h(e,"height",l[1]),s&1&&h(e,"fill",l[0])},i:J,o:J,d(l){l&&p(e)}}}function $l(n,e,t){let l,{fill:s="#5f6368"}=e,{length:r="1.75"}=e,{alt:i="Edit"}=e;return n.$$set=a=>{"fill"in a&&t(0,s=a.fill),"length"in a&&t(2,r=a.length),"alt"in a&&t(3,i=a.alt)},n.$$.update=()=>{n.$$.dirty&4&&t(1,l=Ee(r))},[s,l,r,i]}class en extends ue{constructor(e){super(),ce(this,e,$l,Ql,fe,{fill:0,length:2,alt:3})}}function tn(n){let e,t;return{c(){e=xe("svg"),t=xe("path"),this.h()},l(l){e=Ie(l,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var s=S(e);t=Ie(s,"path",{d:!0}),S(t).forEach(p),s.forEach(p),this.h()},h(){h(t,"d","M280-120q-33 0-56.5-23.5T200-200v-520q-17 0-28.5-11.5T160-760q0-17 11.5-28.5T200-800h160q0-17 11.5-28.5T400-840h160q17 0 28.5 11.5T600-800h160q17 0 28.5 11.5T800-760q0 17-11.5 28.5T760-720v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM400-280q17 0 28.5-11.5T440-320v-280q0-17-11.5-28.5T400-640q-17 0-28.5 11.5T360-600v280q0 17 11.5 28.5T400-280Zm160 0q17 0 28.5-11.5T600-320v-280q0-17-11.5-28.5T560-640q-17 0-28.5 11.5T520-600v280q0 17 11.5 28.5T560-280ZM280-720v520-520Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 -960 960 960"),h(e,"width",n[1]),h(e,"height",n[1]),h(e,"fill",n[0])},m(l,s){L(l,e,s),k(e,t)},p(l,[s]){s&2&&h(e,"width",l[1]),s&2&&h(e,"height",l[1]),s&1&&h(e,"fill",l[0])},i:J,o:J,d(l){l&&p(e)}}}function ln(n,e,t){let l,{fill:s="#5f6368"}=e,{length:r="1.75"}=e,{alt:i="Delete"}=e;return n.$$set=a=>{"fill"in a&&t(0,s=a.fill),"length"in a&&t(2,r=a.length),"alt"in a&&t(3,i=a.alt)},n.$$.update=()=>{n.$$.dirty&4&&t(1,l=Ee(r))},[s,l,r,i]}class nn extends ue{constructor(e){super(),ce(this,e,ln,tn,fe,{fill:0,length:2,alt:3})}}function ft(n){let e,t=n[0].text+"",l,s,r;return{c(){e=T("p"),l=ve(t),this.h()},l(i){e=D(i,"P",{class:!0,style:!0});var a=S(e);l=we(a,t),a.forEach(p),this.h()},h(){h(e,"class","text-xs text-shadow whitespace-pre-line w-full overflow-hidden max-w-full break-words"),h(e,"style",`
      overflow: hidden;
      height: ${n[1]}px;
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 1;
      max-width: 100%;
      width: 100%;
      word-break: break-all;
    `)},m(i,a){L(i,e,a),k(e,l),s||(r=[Ae(Ue.call(null,e)),z(e,"click",n[2])],s=!0)},p(i,a){a&1&&t!==(t=i[0].text+"")&&Ne(l,t)},d(i){i&&p(e),s=!1,ke(r)}}}function sn(n){var s;let e=((s=n[0])==null?void 0:s.text)&&n[0].text.trim().length>0,t,l=e&&ft(n);return{c(){l&&l.c(),t=ne()},l(r){l&&l.l(r),t=ne()},m(r,i){l&&l.m(r,i),L(r,t,i)},p(r,[i]){var a;i&1&&(e=((a=r[0])==null?void 0:a.text)&&r[0].text.trim().length>0),e?l?l.p(r,i):(l=ft(r),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:J,o:J,d(r){r&&p(t),l&&l.d(r)}}}function rn(n,e,t){const l=Ze();let{post:s}=e;const r=Ee(1),i=Ee(6);function a(o){const f=o.currentTarget;if(f)if(f.style.height===`${r}px`||!f.style.height){if(f.scrollHeight>r){const d=f.scrollHeight<i?f.scrollHeight:i;f.style.height=`${d}px`,f.style.overflow="scroll",f.style.display="block",f.style.webkitLineClamp="unset",l("textExpanded",{expanded:!0})}}else f.style.height=`${r}px`,f.style.overflow="hidden",f.style.display="-webkit-box",f.style.webkitLineClamp="1",l("textExpanded",{expanded:!1})}return At(()=>{l("textExpanded",{expanded:!1})}),n.$$set=o=>{"post"in o&&t(0,s=o.post)},[s,r,a]}class an extends ue{constructor(e){super(),ce(this,e,rn,sn,fe,{post:0})}}function on(n){let e;return{c(){e=T("div"),this.h()},l(t){e=D(t,"DIV",{class:!0,style:!0}),S(e).forEach(p),this.h()},h(){h(e,"class","fixed left-0 top-0 w-full h-full pointer-events-none z-30"),Q(e,"opacity","0.6"),Q(e,"background","linear-gradient(180deg, rgba(0, 0, 0, 0.16) -55.96%, rgba(0, 0, 0, 0.00) 55.55%), linear-gradient(180deg, rgba(0, 0, 0, 0.00) 58.49%, rgba(0, 0, 0, 0.50) 140.82%)")},m(t,l){L(t,e,l)},d(t){t&&p(e)}}}function fn(n){let e;return{c(){e=T("div"),this.h()},l(t){e=D(t,"DIV",{class:!0,style:!0}),S(e).forEach(p),this.h()},h(){h(e,"class","fixed inset-0 pointer-events-none z-30"),Q(e,"opacity","0.7"),Q(e,"background","linear-gradient(180deg, rgba(0, 0, 0, 0.00) 0%, #000 100%)")},m(t,l){L(t,e,l)},d(t){t&&p(e)}}}function un(n){let e;function t(r,i){return r[0]?fn:on}let l=t(n),s=l(n);return{c(){s.c(),e=ne()},l(r){s.l(r),e=ne()},m(r,i){s.m(r,i),L(r,e,i)},p(r,[i]){l!==(l=t(r))&&(s.d(1),s=l(r),s&&(s.c(),s.m(e.parentNode,e)))},i:J,o:J,d(r){r&&p(e),s.d(r)}}}function cn(n,e,t){let{isTextExpanded:l=!1}=e;return n.$$set=s=>{"isTextExpanded"in s&&t(0,l=s.isTextExpanded)},[l]}class dn extends ue{constructor(e){super(),ce(this,e,cn,un,fe,{isTextExpanded:0})}}function ut(n,e,t){const l=n.slice();return l[5]=e[t],l[7]=t,l}function ct(n,e){let t,l,s,r,i,a=J;return{key:n,first:null,c(){t=T("span"),l=T("span"),r=q(),this.h()},l(o){t=D(o,"SPAN",{class:!0,style:!0});var f=S(t);l=D(f,"SPAN",{class:!0,style:!0}),S(l).forEach(p),r=Y(f),f.forEach(p),this.h()},h(){h(l,"class",s=Ye(`carousel-dot block w-full h-full rounded-full transition-transform duration-300 ${e[0].mediaIdx===e[2]+e[7]?"bg-white z-10":"bg-white/50"}`)+" svelte-m8istd"),Q(l,"transform","scale("+e[4](e[7])+")"),Q(l,"transition-delay",e[0].mediaIdx===e[2]+e[7]?"0s":"0.1s"),h(t,"class","flex items-center justify-center"),Q(t,"width","0.375rem"),Q(t,"height","0.375rem"),this.first=t},m(o,f){L(o,t,f),k(t,l),k(t,r)},p(o,f){e=o,f&13&&s!==(s=Ye(`carousel-dot block w-full h-full rounded-full transition-transform duration-300 ${e[0].mediaIdx===e[2]+e[7]?"bg-white z-10":"bg-white/50"}`)+" svelte-m8istd")&&h(l,"class",s),f&8&&Q(l,"transform","scale("+e[4](e[7])+")"),f&13&&Q(l,"transition-delay",e[0].mediaIdx===e[2]+e[7]?"0s":"0.1s")},r(){i=t.getBoundingClientRect()},f(){Al(t),a()},a(){a(),a=Nl(t,i,Ll,{})},d(o){o&&p(t)}}}function hn(n){let e,t=[],l=new Map,s,r=me(n[3]);const i=a=>a[5];for(let a=0;a<r.length;a+=1){let o=ut(n,r,a),f=i(o);l.set(f,t[a]=ct(f,o))}return{c(){e=T("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=D(a,"DIV",{class:!0});var o=S(e);for(let f=0;f<t.length;f+=1)t[f].l(o);o.forEach(p),this.h()},h(){h(e,"class",s=Ye(`
    ${n[1]?"fixed left-1/2 -translate-x-1/2 bottom-[10.3125rem]":""} 
    flex justify-center gap-1.5
  `)+" svelte-m8istd")},m(a,o){L(a,e,o);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null)},p(a,[o]){if(o&29){r=me(a[3]);for(let f=0;f<t.length;f+=1)t[f].r();t=Ge(t,o,i,1,a,r,l,e,kl,ct,null,ut);for(let f=0;f<t.length;f+=1)t[f].a()}o&2&&s!==(s=Ye(`
    ${a[1]?"fixed left-1/2 -translate-x-1/2 bottom-[10.3125rem]":""} 
    flex justify-center gap-1.5
  `)+" svelte-m8istd")&&h(e,"class",s)},i:J,o:J,d(a){a&&p(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}const Te=7;function mn(n,e,t){let{post:l}=e,{fixed:s=!0}=e,r=[],i=0;function a(o){const f=l.mediaIdx-i,d=r.length;if(d<=1)return 1;const _=Math.max(f,d-1-f);return _===0?1:1-Math.abs(o-f)/_*.5}return n.$$set=o=>{"post"in o&&t(0,l=o.post),"fixed"in o&&t(1,s=o.fixed)},n.$$.update=()=>{n.$$.dirty&5&&(l.media.length>Te?(l.mediaIdx<=Math.floor(Te/2)?t(2,i=0):l.mediaIdx>=l.media.length-Math.ceil(Te/2)?t(2,i=l.media.length-Te):t(2,i=l.mediaIdx-Math.floor(Te/2)),t(3,r=l.media.slice(i,i+Te))):(t(2,i=0),t(3,r=l.media)))},[l,s,i,r,a]}class Ft extends ue{constructor(e){super(),ce(this,e,mn,hn,fe,{post:0,fixed:1})}}function dt(n,e,t){const l=n.slice();return l[13]=e[t].text,l[14]=e[t].value,l[15]=e[t].custom,l[17]=t,l}function ht(n){let e,t,l,s,r=n[13]+"",i,a,o,f;return{c(){e=T("label"),t=T("input"),l=q(),s=T("span"),i=ve(r),a=q(),this.h()},l(d){e=D(d,"LABEL",{class:!0});var _=S(e);t=D(_,"INPUT",{type:!0,name:!0,class:!0}),l=Y(_),s=D(_,"SPAN",{class:!0});var v=S(s);i=we(v,r),v.forEach(p),a=Y(_),_.forEach(p),this.h()},h(){h(t,"type","radio"),h(t,"name","report"),h(t,"class","w-6 h-6 svelte-1wjrpwl"),t.value=n[14],h(s,"class","flex gap-2 items-center text-white text-sm leading-4 font-medium"),h(e,"class","flex gap-2 py-2")},m(d,_){L(d,e,_),k(e,t),k(e,l),k(e,s),k(s,i),k(e,a),o||(f=z(t,"change",n[7]),o=!0)},p:J,d(d){d&&p(e),o=!1,f()}}}function mt(n){let e,t,l,s;return{c(){e=T("div"),t=T("textarea"),this.h()},l(r){e=D(r,"DIV",{class:!0});var i=S(e);t=D(i,"TEXTAREA",{class:!0,placeholder:!0}),S(t).forEach(p),i.forEach(p),this.h()},h(){h(t,"class","w-full p-3.5 border-0 rounded-[0.25rem] bg-[#2C2C2E] text-white placeholder:text-[#757D86] text-sm font-normal"),h(t,"placeholder","이 게시물을 신고하는 다른 이유가 있다면 자유롭게 적어주세요. (선택)"),h(e,"class","px-5 py-2.5")},m(r,i){L(r,e,i),k(e,t),lt(t,n[2]),l||(s=z(t,"input",n[8]),l=!0)},p(r,i){i&4&&lt(t,r[2])},d(r){r&&p(e),l=!1,s()}}}function pn(n){let e,t,l="게시물 신고 사유",s,r,i,a,o,f,d="취소",_,v,E="신고",M,g,m=me(n[3]),c=[];for(let y=0;y<m.length;y+=1)c[y]=ht(dt(n,m,y));let x=n[1]==="etc"&&mt(n);return{c(){e=T("div"),t=T("heading"),t.textContent=l,s=q(),r=T("div");for(let y=0;y<c.length;y+=1)c[y].c();i=q(),x&&x.c(),a=q(),o=T("div"),f=T("button"),f.textContent=d,_=q(),v=T("button"),v.textContent=E,this.h()},l(y){e=D(y,"DIV",{class:!0});var O=S(e);t=D(O,"HEADING",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-z3puxq"&&(t.textContent=l),s=Y(O),r=D(O,"DIV",{class:!0});var C=S(r);for(let X=0;X<c.length;X+=1)c[X].l(C);C.forEach(p),i=Y(O),x&&x.l(O),a=Y(O),o=D(O,"DIV",{class:!0});var A=S(o);f=D(A,"BUTTON",{class:!0,"data-svelte-h":!0}),$(f)!=="svelte-xb8aop"&&(f.textContent=d),_=Y(A),v=D(A,"BUTTON",{class:!0,"data-svelte-h":!0}),$(v)!=="svelte-1fehi46"&&(v.textContent=E),A.forEach(p),O.forEach(p),this.h()},h(){h(t,"class","px-5 py-2.5 font-semibold text-white text-[0.9375rem]"),h(r,"class","px-5"),h(f,"class","bg-[#2C2C2E] w-full px-5 py-2.5 rounded-[3.125rem] flex justify-center items-center text-[#F1F1F1] text-sm"),h(v,"class","bg-[#2C2C2E] w-full px-5 py-2.5 rounded-[3.125rem] flex justify-center items-center text-[#FF4F1E] text-sm"),h(o,"class","flex gap-2.5 w-full px-5 py-2.5 justify-between"),h(e,"class","flex flex-col gap-2.5")},m(y,O){L(y,e,O),k(e,t),k(e,s),k(e,r);for(let C=0;C<c.length;C+=1)c[C]&&c[C].m(r,null);k(e,i),x&&x.m(e,null),k(e,a),k(e,o),k(o,f),k(o,_),k(o,v),M||(g=[z(f,"click",n[9]),z(v,"click",n[4]),Ae(Ue.call(null,e))],M=!0)},p(y,O){if(O&10){m=me(y[3]);let C;for(C=0;C<m.length;C+=1){const A=dt(y,m,C);c[C]?c[C].p(A,O):(c[C]=ht(A),c[C].c(),c[C].m(r,null))}for(;C<c.length;C+=1)c[C].d(1);c.length=m.length}y[1]==="etc"?x?x.p(y,O):(x=mt(y),x.c(),x.m(e,a)):x&&(x.d(1),x=null)},d(y){y&&p(e),Nt(c,y),x&&x.d(),M=!1,ke(g)}}}function _n(n){let e,t,l;function s(i){n[10](i)}let r={noHandle:!0,fixed:!0,$$slots:{default:[pn]},$$scope:{ctx:n}};return n[0]!==void 0&&(r.isOpen=n[0]),e=new Yt({props:r}),De.push(()=>Re(e,"isOpen",s)),{c(){H(e.$$.fragment)},l(i){Z(e.$$.fragment,i)},m(i,a){G(e,i,a),l=!0},p(i,[a]){const o={};a&262151&&(o.$$scope={dirty:a,ctx:i}),!t&&a&1&&(t=!0,o.isOpen=i[0],Oe(()=>t=!1)),e.$set(o)},i(i){l||(I(e.$$.fragment,i),l=!0)},o(i){P(e.$$.fragment,i),l=!1},d(i){W(e,i)}}}function gn(n,e,t){const l=Ze();let{isOpen:s}=e,{selectedValue:r=""}=e,{targetTable:i=""}=e,{targetIdx:a=""}=e;const o=[{text:"스팸, 사기 또는 악용",value:"spam"},{text:"허위 정보",value:"false"},{text:"부적절한 내용",value:"inappropriate"},{text:"저작권 침해",value:"copyright"},{text:"개인정보 유출 또는 사생활 침해",value:"privacy"},{text:"폭력, 혐오 또는 학대",value:"violence"},{text:"불법 행위 조장",value:"illegal"},{text:"성적 행위",value:"sexual"},{text:"아동 학대 및 착취",value:"child"},{text:"기타",value:"etc"}];let f="";async function d(){const g=o.findIndex(m=>m.value===r);if(g===-1){alert("신고 사유를 선택해주세요.");return}be.emit("loading",!0);try{const m=o[g],c=new URL(`${Se}/auth/permissions`);c.searchParams.set("targetTable",i),c.searchParams.set("targetIdx",a),c.searchParams.set("relation","reported"),c.searchParams.set("subjectTable","users"),c.searchParams.set("subjectIdx",jt().sub),c.searchParams.set("metadata",JSON.stringify({...m,customReason:f})),t(0,s=!1),t(2,f=""),await fetch(c,{method:"PUT",headers:{Authorization:`Bearer ${Fe()}`}}),l("reported")}finally{be.emit("loading",!1)}}const _=g=>{t(1,r=g.target.value)};function v(){f=this.value,t(2,f)}const E=()=>{t(0,s=!1)};function M(g){s=g,t(0,s)}return n.$$set=g=>{"isOpen"in g&&t(0,s=g.isOpen),"selectedValue"in g&&t(1,r=g.selectedValue),"targetTable"in g&&t(5,i=g.targetTable),"targetIdx"in g&&t(6,a=g.targetIdx)},[s,r,f,o,d,i,a,_,v,E,M]}class bn extends ue{constructor(e){super(),ce(this,e,gn,_n,fe,{isOpen:0,selectedValue:1,targetTable:5,targetIdx:6})}}function pt(n){let e,t,l,s="이 게시물을 신고해 주셔서 감사합니다.",r,i,a="신고 취소하기",o,f;return{c(){e=T("div"),t=T("div"),l=T("div"),l.textContent=s,r=q(),i=T("div"),i.textContent=a,this.h()},l(d){e=D(d,"DIV",{class:!0});var _=S(e);t=D(_,"DIV",{class:!0});var v=S(t);l=D(v,"DIV",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-179ijsk"&&(l.textContent=s),r=Y(v),i=D(v,"DIV",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-1haiztv"&&(i.textContent=a),v.forEach(p),_.forEach(p),this.h()},h(){h(l,"class","text-white text-[0.9375rem] font-semibold"),h(i,"class","text-primary-500 text-sm font-medium pointer-events-auto cursor-pointer"),h(t,"class","flex flex-col gap-2.5 items-center justify-center w-full h-full"),h(e,"class","fixed w-screen h-screen bg-black/80 backdrop-blur-[5px] z-10")},m(d,_){L(d,e,_),k(e,t),k(t,l),k(t,r),k(t,i),o||(f=z(i,"click",n[1]),o=!0)},p:J,d(d){d&&p(e),o=!1,f()}}}function vn(n){let e,t=n[0]&&pt(n);return{c(){t&&t.c(),e=ne()},l(l){t&&t.l(l),e=ne()},m(l,s){t&&t.m(l,s),L(l,e,s)},p(l,[s]){l[0]?t?t.p(l,s):(t=pt(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:J,o:J,d(l){l&&p(e),t&&t.d(l)}}}function wn(n,e,t){const l=Ze();let{isVisible:s=!1}=e,{targetTable:r=""}=e,{targetIdx:i=""}=e,a=!1;async function o(){if(a!==!0){a=!0,be.emit("loading",!0);try{const f=new URL(`${Se}/auth/permissions`);f.searchParams.set("targetTable",r),f.searchParams.set("targetIdx",i),f.searchParams.set("relation","reported"),f.searchParams.set("subjectTable","users"),f.searchParams.set("subjectIdx",jt().sub),await fetch(f,{method:"DELETE",headers:{Authorization:`Bearer ${Fe()}`}}),t(0,s=!1),l("unreported")}finally{a=!1,be.emit("loading",!1)}}}return n.$$set=f=>{"isVisible"in f&&t(0,s=f.isVisible),"targetTable"in f&&t(2,r=f.targetTable),"targetIdx"in f&&t(3,i=f.targetIdx)},[s,o,r,i]}class kn extends ue{constructor(e){super(),ce(this,e,wn,vn,fe,{isVisible:0,targetTable:2,targetIdx:3})}}function _t(n,e,t){const l=n.slice();return l[77]=e[t],l[78]=e,l[79]=t,l}function gt(n,e,t){const l=n.slice();return l[80]=e[t],l}function bt(n,e,t){const l=n.slice();return l[83]=e[t],l[85]=t,l}function vt(n){let e,t,l;return{c(){e=T("div"),this.h()},l(s){e=D(s,"DIV",{class:!0}),S(e).forEach(p),this.h()},h(){h(e,"class","fixed top-0 left-0 w-screen h-screen bg-black")},m(s,r){L(s,e,r),t||(l=z(e,"contextmenu",vl(n[24])),t=!0)},d(s){s&&p(e),t=!1,l()}}}function wt(n){let e,t,l,s=[],r=new Map,i,a,o,f,d,_,v,E=me(n[77].media);const M=m=>m[83];for(let m=0;m<E.length;m+=1){let c=bt(n,E,m),x=M(c);r.set(x,s[m]=kt(x,c))}let g=!n[5]&&Ct(n);return{c(){e=T("section"),t=T("div"),l=T("div");for(let m=0;m<s.length;m+=1)s[m].c();a=q(),g&&g.c(),o=q(),this.h()},l(m){e=D(m,"SECTION",{class:!0,style:!0});var c=S(e);t=D(c,"DIV",{class:!0});var x=S(t);l=D(x,"DIV",{class:!0,style:!0});var y=S(l);for(let O=0;O<s.length;O+=1)s[O].l(y);y.forEach(p),x.forEach(p),a=Y(c),g&&g.l(c),o=Y(c),c.forEach(p),this.h()},h(){h(l,"class",i="carousel-track flex w-full h-full select-none transition-transform duration-300 ease-in-out "+(n[9]?"duration-0 transition-duration-0":"")),Q(l,"transform","translateX("+(-n[77].mediaIdx*n[12].width+n[11])+"px)"),h(t,"class","carousel-container w-full h-full overflow-hidden relative select-none"),h(e,"class",f=`w-full h-full absolute content-center transition-transform
            ${n[9]?"duration-0 transition-duration-0":""}`),Q(e,"top","0"),Q(e,"transform","translateY("+((n[79]-n[1])*n[12].height+n[10])+"px)")},m(m,c){L(m,e,c),k(e,t),k(t,l);for(let x=0;x<s.length;x+=1)s[x]&&s[x].m(l,null);k(e,a),g&&g.m(e,null),k(e,o),d=!0,_||(v=[z(l,"transitionend",function(){Xe(n[77].mediaIdx===n[0][n[1]].mediaIdx?n[15]:void 0)&&(n[77].mediaIdx===n[0][n[1]].mediaIdx?n[15]:void 0).apply(this,arguments)}),z(e,"transitionend",function(){Xe(n[79]===n[1]?n[15]:void 0)&&(n[79]===n[1]?n[15]:void 0).apply(this,arguments)})],_=!0)},p(m,c){n=m,c[0]&35&&(E=me(n[77].media),ee(),s=Ge(s,c,M,1,n,E,r,l,Lt,kt,null,bt),te()),(!d||c[0]&512&&i!==(i="carousel-track flex w-full h-full select-none transition-transform duration-300 ease-in-out "+(n[9]?"duration-0 transition-duration-0":"")))&&h(l,"class",i),(!d||c[0]&6145)&&Q(l,"transform","translateX("+(-n[77].mediaIdx*n[12].width+n[11])+"px)"),n[5]?g&&(ee(),P(g,1,1,()=>{g=null}),te()):g?(g.p(n,c),c[0]&32&&I(g,1)):(g=Ct(n),g.c(),I(g,1),g.m(e,o)),(!d||c[0]&512&&f!==(f=`w-full h-full absolute content-center transition-transform
            ${n[9]?"duration-0 transition-duration-0":""}`))&&h(e,"class",f),(!d||c[0]&5123)&&Q(e,"transform","translateY("+((n[79]-n[1])*n[12].height+n[10])+"px)")},i(m){if(!d){for(let c=0;c<E.length;c+=1)I(s[c]);I(g),d=!0}},o(m){for(let c=0;c<s.length;c+=1)P(s[c]);P(g),d=!1},d(m){m&&p(e);for(let c=0;c<s.length;c+=1)s[c].d();g&&g.d(),_=!1,ke(v)}}}function kt(n,e){let t,l,s,r,i,a;return s=new jl({props:{src:e[83],isEdit:e[5],post:e[0][e[1]],autoplay:e[1]===e[79]&&e[0][e[1]].mediaIdx===e[85],isRightOrderForYoutube:e[1]===e[79]}}),{key:n,first:null,c(){t=T("div"),l=T("div"),H(s.$$.fragment),i=q(),this.h()},l(o){t=D(o,"DIV",{class:!0});var f=S(t);l=D(f,"DIV",{class:!0});var d=S(l);Z(s.$$.fragment,d),d.forEach(p),i=Y(f),f.forEach(p),this.h()},h(){h(l,"class",r=`
                      w-full h-full flex justify-center items-center relative
                      ${e[5]?"px-5 pt-5 pb-3":""}
                    `),h(t,"class","carousel-slide flex justify-center items-center min-w-full h-full select-none"),this.first=t},m(o,f){L(o,t,f),k(t,l),G(s,l,null),k(t,i),a=!0},p(o,f){e=o;const d={};f[0]&1&&(d.src=e[83]),f[0]&32&&(d.isEdit=e[5]),f[0]&3&&(d.post=e[0][e[1]]),f[0]&3&&(d.autoplay=e[1]===e[79]&&e[0][e[1]].mediaIdx===e[85]),f[0]&3&&(d.isRightOrderForYoutube=e[1]===e[79]),s.$set(d),(!a||f[0]&32&&r!==(r=`
                      w-full h-full flex justify-center items-center relative
                      ${e[5]?"px-5 pt-5 pb-3":""}
                    `))&&h(l,"class",r)},i(o){a||(I(s.$$.fragment,o),a=!0)},o(o){P(s.$$.fragment,o),a=!1},d(o){o&&p(t),W(s)}}}function Ct(n){var X;let e,t,l,s,r,i,a,o,f,d,_,v,E,M,g,m=n[77].media.length>1&&xt(n),c=((X=n[77].reactions)==null?void 0:X.length)>0&&!n[7]&&It(n);function x(w){n[26](w,n[77],n[78],n[79])}let y={};n[77]!==void 0&&(y.post=n[77]),r=new Xl({props:y}),De.push(()=>Re(r,"post",x));function O(...w){return n[27](n[77],n[78],n[79],...w)}o=new an({props:{post:n[77]}}),o.$on("textExpanded",O),d=new Kl({props:{place:{idx:n[77].place_idx,name:n[77].place_name}}});let C=!n[7]&&yt(n),A=n[1]===n[79]&&Dt(n);return{c(){m&&m.c(),e=q(),t=T("div"),l=T("div"),c&&c.c(),s=q(),H(r.$$.fragment),a=q(),H(o.$$.fragment),f=q(),H(d.$$.fragment),v=q(),C&&C.c(),E=q(),A&&A.c(),M=ne(),this.h()},l(w){m&&m.l(w),e=Y(w),t=D(w,"DIV",{class:!0});var V=S(t);l=D(V,"DIV",{class:!0,style:!0});var U=S(l);c&&c.l(U),s=Y(U),Z(r.$$.fragment,U),a=Y(U),Z(o.$$.fragment,U),f=Y(U),Z(d.$$.fragment,U),U.forEach(p),v=Y(V),C&&C.l(V),V.forEach(p),E=Y(w),A&&A.l(w),M=ne(),this.h()},h(){h(l,"class","relative flex-grow text-white text-md flex flex-col items-start gap-2 transition-transform text-base "),h(l,"style",_=`transform: translateY(${n[6]}px);`),h(t,"class","absolute bottom-4 px-5 py-4 w-full flex flex-row z-40 items-end justify-between")},m(w,V){m&&m.m(w,V),L(w,e,V),L(w,t,V),k(t,l),c&&c.m(l,null),k(l,s),G(r,l,null),k(l,a),G(o,l,null),k(l,f),G(d,l,null),k(t,v),C&&C.m(t,null),L(w,E,V),A&&A.m(w,V),L(w,M,V),g=!0},p(w,V){var re;n=w,n[77].media.length>1?m?(m.p(n,V),V[0]&1&&I(m,1)):(m=xt(n),m.c(),I(m,1),m.m(e.parentNode,e)):m&&(ee(),P(m,1,1,()=>{m=null}),te()),((re=n[77].reactions)==null?void 0:re.length)>0&&!n[7]?c?(c.p(n,V),V[0]&129&&I(c,1)):(c=It(n),c.c(),I(c,1),c.m(l,s)):c&&(ee(),P(c,1,1,()=>{c=null}),te());const U={};!i&&V[0]&1&&(i=!0,U.post=n[77],Oe(()=>i=!1)),r.$set(U);const K={};V[0]&1&&(K.post=n[77]),o.$set(K);const se={};V[0]&1&&(se.place={idx:n[77].place_idx,name:n[77].place_name}),d.$set(se),(!g||V[0]&64&&_!==(_=`transform: translateY(${n[6]}px);`))&&h(l,"style",_),n[7]?C&&(ee(),P(C,1,1,()=>{C=null}),te()):C?(C.p(n,V),V[0]&128&&I(C,1)):(C=yt(n),C.c(),I(C,1),C.m(t,null)),n[1]===n[79]?A?(A.p(n,V),V[0]&3&&I(A,1)):(A=Dt(n),A.c(),I(A,1),A.m(M.parentNode,M)):A&&(ee(),P(A,1,1,()=>{A=null}),te())},i(w){g||(I(m),I(c),I(r.$$.fragment,w),I(o.$$.fragment,w),I(d.$$.fragment,w),I(C),I(A),g=!0)},o(w){P(m),P(c),P(r.$$.fragment,w),P(o.$$.fragment,w),P(d.$$.fragment,w),P(C),P(A),g=!1},d(w){w&&(p(e),p(t),p(E),p(M)),m&&m.d(w),c&&c.d(),W(r),W(o),W(d),C&&C.d(),A&&A.d(w)}}}function xt(n){let e,t;return e=new Ft({props:{post:n[77]}}),{c(){H(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){G(e,l,s),t=!0},p(l,s){const r={};s[0]&1&&(r.post=l[77]),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function It(n){let e,t,l=me(n[77].reactions),s=[];for(let i=0;i<l.length;i+=1)s[i]=Et(gt(n,l,i));const r=i=>P(s[i],1,1,()=>{s[i]=null});return{c(){e=T("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=D(i,"DIV",{class:!0});var a=S(e);for(let o=0;o<s.length;o+=1)s[o].l(a);a.forEach(p),this.h()},h(){h(e,"class","flex gap-1 justify-center items-center mb-1")},m(i,a){L(i,e,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(i,a){if(a[0]&131073){l=me(i[77].reactions);let o;for(o=0;o<l.length;o+=1){const f=gt(i,l,o);s[o]?(s[o].p(f,a),I(s[o],1)):(s[o]=Et(f),s[o].c(),I(s[o],1),s[o].m(e,null))}for(ee(),o=l.length;o<s.length;o+=1)r(o);te()}},i(i){if(!t){for(let a=0;a<l.length;a+=1)I(s[a]);t=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)P(s[a]);t=!1},d(i){i&&p(e),Nt(s,i)}}}function Et(n){let e,t;function l(){return n[25](n[77],n[80])}return e=new qt({props:{gap:"gap-0.5",textColor:"text-white",backgroundColor:"bg-[rgba(56,56,56,0.7)]",fill:"white",padding:"px-2.5 py-1.5",prefixTextSize:"text-[0.9375rem] leading-normal font-medium",prefix:n[80].type,textSize:"text-[0.8125rem] leading-[1.25rem]",value:n[80].count,height:"h-7",rounded:"rounded-[3.75rem]"}}),e.$on("click",l),{c(){H(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,r){G(e,s,r),t=!0},p(s,r){n=s;const i={};r[0]&1&&(i.prefix=n[80].type),r[0]&1&&(i.value=n[80].count),e.$set(i)},i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function yt(n){var X;let e,t,l,s,r,i,a,o,f=((X=n[77].reactions)!=null&&X.length?n[77].reactions.reduce(n[33],0):0)+"",d,_,v,E,M,g,m,c=n[77].onReactionShowcase&&Tt(n);const x=[xn,Cn],y=[];function O(w,V){return w[77].myReaction?0:1}r=O(n),i=y[r]=x[r](n);function C(){return n[34](n[77])}function A(){return n[35](n[77],n[78],n[79])}return E=new Rl({props:{fill:"white",length:1.5}}),{c(){e=T("div"),t=T("div"),c&&c.c(),l=q(),s=T("button"),i.c(),a=q(),o=T("span"),d=ve(f),_=q(),v=T("button"),H(E.$$.fragment),this.h()},l(w){e=D(w,"DIV",{class:!0});var V=S(e);t=D(V,"DIV",{class:!0});var U=S(t);c&&c.l(U),l=Y(U),s=D(U,"BUTTON",{class:!0});var K=S(s);i.l(K),a=Y(K),o=D(K,"SPAN",{class:!0});var se=S(o);d=we(se,f),se.forEach(p),K.forEach(p),U.forEach(p),_=Y(V),v=D(V,"BUTTON",{});var re=S(v);Z(E.$$.fragment,re),re.forEach(p),V.forEach(p),this.h()},h(){h(o,"class","text-xs text-white h-4"),h(s,"class","relative bg-transparent flex flex-col gap-[0.3125rem] items-center justify-center"),h(t,"class","flex gap-4 relative"),h(e,"class","flex-shrink flex flex-col gap-4 pl-8")},m(w,V){L(w,e,V),k(e,t),c&&c.m(t,null),k(t,l),k(t,s),y[r].m(s,null),k(s,a),k(s,o),k(o,d),k(e,_),k(e,v),G(E,v,null),M=!0,g||(m=[z(s,"click",C),Ae(Ue.call(null,s)),Ae(Pl.call(null,s,500)),z(s,"longpress",A),z(v,"click",n[36])],g=!0)},p(w,V){var K;n=w,n[77].onReactionShowcase?c?c.p(n,V):(c=Tt(n),c.c(),c.m(t,l)):c&&(c.d(1),c=null);let U=r;r=O(n),r!==U&&(ee(),P(y[U],1,1,()=>{y[U]=null}),te(),i=y[r],i||(i=y[r]=x[r](n),i.c()),I(i,1),i.m(s,a)),(!M||V[0]&1)&&f!==(f=((K=n[77].reactions)!=null&&K.length?n[77].reactions.reduce(n[33],0):0)+"")&&Ne(d,f)},i(w){M||(I(i),I(E.$$.fragment,w),M=!0)},o(w){P(i),P(E.$$.fragment,w),M=!1},d(w){w&&p(e),c&&c.d(),y[r].d(),W(E),g=!1,ke(m)}}}function Tt(n){let e,t,l="👍",s,r,i="🔥",a,o,f="😍",d,_,v="😋",E,M,g="😊️️",m,c;function x(){return n[28](n[77])}function y(){return n[29](n[77])}function O(){return n[30](n[77])}function C(){return n[31](n[77])}function A(){return n[32](n[77])}return{c(){e=T("div"),t=T("button"),t.textContent=l,s=q(),r=T("button"),r.textContent=i,a=q(),o=T("button"),o.textContent=f,d=q(),_=T("button"),_.textContent=v,E=q(),M=T("button"),M.textContent=g,this.h()},l(X){e=D(X,"DIV",{class:!0});var w=S(e);t=D(w,"BUTTON",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-3oecln"&&(t.textContent=l),s=Y(w),r=D(w,"BUTTON",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-131qbu2"&&(r.textContent=i),a=Y(w),o=D(w,"BUTTON",{class:!0,"data-svelte-h":!0}),$(o)!=="svelte-lq90i3"&&(o.textContent=f),d=Y(w),_=D(w,"BUTTON",{class:!0,"data-svelte-h":!0}),$(_)!=="svelte-l73y87"&&(_.textContent=v),E=Y(w),M=D(w,"BUTTON",{class:!0,"data-svelte-h":!0}),$(M)!=="svelte-11szxsj"&&(M.textContent=g),w.forEach(p),this.h()},h(){h(t,"class","text-2xl/[26px]"),h(r,"class","text-2xl/[26px]"),h(o,"class","text-2xl/[26px]"),h(_,"class","text-2xl/[26px]"),h(M,"class","text-2xl/[26px]"),h(e,"class","absolute right-10 bottom-2.5 bg-[rgba(56,56,56,0.7)] px-5 py-2 rounded-[3.75rem] flex gap-4 items-center justify-center backdrop-blur-[2px] pointer-events-auto text-white text-[1.375rem] leading-normal font-medium ")},m(X,w){L(X,e,w),k(e,t),k(e,s),k(e,r),k(e,a),k(e,o),k(e,d),k(e,_),k(e,E),k(e,M),m||(c=[z(t,"click",x),z(r,"click",y),z(o,"click",O),z(_,"click",C),z(M,"click",A)],m=!0)},p(X,w){n=X},d(X){X&&p(e),m=!1,ke(c)}}}function Cn(n){let e,t;return e=new Vl({props:{fill:"white",length:1.5}}),{c(){H(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){G(e,l,s),t=!0},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function xn(n){let e,t;return e=new Bl({props:{fill:"#EA3323",length:1.5}}),{c(){H(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){G(e,l,s),t=!0},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Dt(n){let e,t;return e=new dn({props:{isTextExpanded:n[77].isTextExpanded}}),{c(){H(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){G(e,l,s),t=!0},p(l,s){const r={};s[0]&1&&(r.isTextExpanded=l[77].isTextExpanded),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Mt(n,e){let t,l=Math.abs(e[1]-e[79])<=1,s,r,i=l&&wt(e);return{key:n,first:null,c(){t=ne(),i&&i.c(),s=ne(),this.h()},l(a){t=ne(),i&&i.l(a),s=ne(),this.h()},h(){this.first=t},m(a,o){L(a,t,o),i&&i.m(a,o),L(a,s,o),r=!0},p(a,o){e=a,o[0]&3&&(l=Math.abs(e[1]-e[79])<=1),l?i?(i.p(e,o),o[0]&3&&I(i,1)):(i=wt(e),i.c(),I(i,1),i.m(s.parentNode,s)):i&&(ee(),P(i,1,1,()=>{i=null}),te())},i(a){r||(I(i),r=!0)},o(a){P(i),r=!1},d(a){a&&(p(t),p(s)),i&&i.d(a)}}}function Vt(n){let e,t;return e=new Ft({props:{post:n[0][n[1]],fixed:!1}}),{c(){H(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){G(e,l,s),t=!0},p(l,s){const r={};s[0]&3&&(r.post=l[0][l[1]]),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Bt(n){let e,t;return e=new Ml({}),{c(){H(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){G(e,l,s),t=!0},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Pt(n){let e,t,l,s,r="수정",i,a,o,f,d,_="삭제",v,E,M;return t=new en({props:{fill:"white",length:1.5}}),o=new nn({props:{fill:"white",length:1.5}}),{c(){e=T("button"),H(t.$$.fragment),l=q(),s=T("span"),s.textContent=r,i=q(),a=T("button"),H(o.$$.fragment),f=q(),d=T("span"),d.textContent=_,this.h()},l(g){e=D(g,"BUTTON",{class:!0});var m=S(e);Z(t.$$.fragment,m),l=Y(m),s=D(m,"SPAN",{"data-svelte-h":!0}),$(s)!=="svelte-17aljrl"&&(s.textContent=r),m.forEach(p),i=Y(g),a=D(g,"BUTTON",{class:!0});var c=S(a);Z(o.$$.fragment,c),f=Y(c),d=D(c,"SPAN",{"data-svelte-h":!0}),$(d)!=="svelte-1k1dgz"&&(d.textContent=_),c.forEach(p),this.h()},h(){h(e,"class","flex items-center gap-2 text-white text-sm"),h(a,"class","flex items-center gap-2 text-white text-sm")},m(g,m){L(g,e,m),G(t,e,null),k(e,l),k(e,s),L(g,i,m),L(g,a,m),G(o,a,null),k(a,f),k(a,d),v=!0,E||(M=[z(e,"click",n[38]),z(a,"click",n[39])],E=!0)},p:J,i(g){v||(I(t.$$.fragment,g),I(o.$$.fragment,g),v=!0)},o(g){P(t.$$.fragment,g),P(o.$$.fragment,g),v=!1},d(g){g&&(p(e),p(i),p(a)),W(t),W(o),E=!1,ke(M)}}}function Ot(n){let e,t,l,s,r,i;return t=new Gl({}),{c(){e=T("button"),H(t.$$.fragment),l=ve(`
        신고`),this.h()},l(a){e=D(a,"BUTTON",{class:!0});var o=S(e);Z(t.$$.fragment,o),l=we(o,`
        신고`),o.forEach(p),this.h()},h(){h(e,"class","flex gap-2 items-center text-white text-sm leading-4 font-medium")},m(a,o){L(a,e,o),G(t,e,null),k(e,l),s=!0,r||(i=z(e,"click",n[41]),r=!0)},p:J,i(a){s||(I(t.$$.fragment,a),s=!0)},o(a){P(t.$$.fragment,a),s=!1},d(a){a&&p(e),W(t),r=!1,i()}}}function In(n){let e,t,l,s,r,i,a,o,f,d=n[14]&&Pt(n);s=new ql({props:{length:1.5,fill:"white"}});let _=!n[14]&&Ot(n);return{c(){e=T("div"),d&&d.c(),t=q(),l=T("button"),H(s.$$.fragment),r=ve(`
      프로필 URL 복사`),i=q(),_&&_.c(),this.h()},l(v){e=D(v,"DIV",{id:!0,class:!0});var E=S(e);d&&d.l(E),t=Y(E),l=D(E,"BUTTON",{class:!0});var M=S(l);Z(s.$$.fragment,M),r=we(M,`
      프로필 URL 복사`),M.forEach(p),i=Y(E),_&&_.l(E),E.forEach(p),this.h()},h(){h(l,"class","flex gap-2 items-center text-white text-sm leading-4 font-medium"),h(e,"id","test"),h(e,"class","flex flex-col px-5 gap-3")},m(v,E){L(v,e,E),d&&d.m(e,null),k(e,t),k(e,l),G(s,l,null),k(l,r),k(e,i),_&&_.m(e,null),a=!0,o||(f=[z(l,"click",n[40]),Ae(Ue.call(null,e))],o=!0)},p(v,E){v[14]?d?(d.p(v,E),E[0]&16384&&I(d,1)):(d=Pt(v),d.c(),I(d,1),d.m(e,t)):d&&(ee(),P(d,1,1,()=>{d=null}),te()),v[14]?_&&(ee(),P(_,1,1,()=>{_=null}),te()):_?(_.p(v,E),E[0]&16384&&I(_,1)):(_=Ot(v),_.c(),I(_,1),_.m(e,null))},i(v){a||(I(d),I(s.$$.fragment,v),I(_),a=!0)},o(v){P(d),P(s.$$.fragment,v),P(_),a=!1},d(v){v&&p(e),d&&d.d(),W(s),_&&_.d(),o=!1,ke(f)}}}function En(n){let e,t,l="정말로 삭제하시겠습니까?",s,r,i="이 작업은 취소할 수 없습니다. 계속 진행하시겠습니까?",a,o,f,d="삭제",_,v,E="취소",M,g;return{c(){e=T("div"),t=T("h2"),t.textContent=l,s=q(),r=T("p"),r.textContent=i,a=q(),o=T("div"),f=T("button"),f.textContent=d,_=q(),v=T("button"),v.textContent=E,this.h()},l(m){e=D(m,"DIV",{class:!0});var c=S(e);t=D(c,"H2",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1yzhdkj"&&(t.textContent=l),s=Y(c),r=D(c,"P",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-26p028"&&(r.textContent=i),a=Y(c),o=D(c,"DIV",{class:!0});var x=S(o);f=D(x,"BUTTON",{class:!0,"data-svelte-h":!0}),$(f)!=="svelte-1q4epan"&&(f.textContent=d),_=Y(x),v=D(x,"BUTTON",{class:!0,"data-svelte-h":!0}),$(v)!=="svelte-1rzg9yy"&&(v.textContent=E),x.forEach(p),c.forEach(p),this.h()},h(){h(t,"class","text-lg font-semibold mb-2"),h(r,"class","text-gray-600 mb-4"),h(f,"class","bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition"),h(v,"class","bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition"),h(o,"class","flex justify-center space-x-4"),h(e,"class","text-center")},m(m,c){L(m,e,c),k(e,t),k(e,s),k(e,r),k(e,a),k(e,o),k(o,f),k(o,_),k(o,v),M||(g=[z(f,"click",n[46]),z(v,"click",n[47])],M=!0)},p:J,d(m){m&&p(e),M=!1,ke(g)}}}function yn(n){var oe;let e,t,l,s=[],r=new Map,i,a,o,f,d,_,v,E,M,g,m,c,x,y,O,C=!n[5]&&vt(n),A=me(n[0]);const X=b=>b[77].idx;for(let b=0;b<A.length;b+=1){let R=_t(n,A,b),le=X(R);r.set(le,s[b]=Mt(le,R))}let w=n[5]&&((oe=n[0][n[1]])==null?void 0:oe.media.length)>1&&Vt(n),V=!n[5]&&Bt();function U(b){n[42](b)}let K={fixed:!0,noHandle:!0,$$slots:{default:[In]},$$scope:{ctx:n}};n[2]!==void 0&&(K.isOpen=n[2]),d=new Yt({props:K}),De.push(()=>Re(d,"isOpen",U));function se(b){n[43](b)}let re={targetTable:"posts",targetIdx:n[0][n[1]].idx};n[3]!==void 0&&(re.isOpen=n[3]),E=new bn({props:re}),De.push(()=>Re(E,"isOpen",se)),E.$on("reported",n[44]),m=new kn({props:{isVisible:n[0][n[1]].permission_signer==="reported",targetTable:"posts",targetIdx:n[0][n[1]].idx}}),m.$on("unreported",n[45]);function de(b){n[48](b)}let ae={$$slots:{default:[En]},$$scope:{ctx:n}};return n[4]!==void 0&&(ae.modalVisible=n[4]),x=new Sl({props:ae}),De.push(()=>Re(x,"modalVisible",de)),{c(){C&&C.c(),e=q(),t=T("div"),l=T("div");for(let b=0;b<s.length;b+=1)s[b].c();i=q(),w&&w.c(),a=q(),V&&V.c(),f=q(),H(d.$$.fragment),v=q(),H(E.$$.fragment),g=q(),H(m.$$.fragment),c=q(),H(x.$$.fragment),this.h()},l(b){C&&C.l(b),e=Y(b),t=D(b,"DIV",{class:!0});var R=S(t);l=D(R,"DIV",{class:!0});var le=S(l);for(let pe=0;pe<s.length;pe+=1)s[pe].l(le);le.forEach(p),i=Y(R),w&&w.l(R),a=Y(R),V&&V.l(R),R.forEach(p),f=Y(b),Z(d.$$.fragment,b),v=Y(b),Z(E.$$.fragment,b),g=Y(b),Z(m.$$.fragment,b),c=Y(b),Z(x.$$.fragment,b),this.h()},h(){h(l,"class","flex flex-grow relative w-full h-full bg-black"),h(t,"class",o="viewer bg-black select-none flex flex-col "+(n[5]?"static w-full h-full":"fixed top-0 left-0 w-screen h-screen safe-area-pt"))},m(b,R){C&&C.m(b,R),L(b,e,R),L(b,t,R),k(t,l);for(let le=0;le<s.length;le+=1)s[le]&&s[le].m(l,null);k(t,i),w&&w.m(t,null),k(t,a),V&&V.m(t,null),n[37](t),L(b,f,R),G(d,b,R),L(b,v,R),G(E,b,R),L(b,g,R),G(m,b,R),L(b,c,R),G(x,b,R),O=!0},p(b,R){var _e;b[5]?C&&(C.d(1),C=null):C||(C=vt(b),C.c(),C.m(e.parentNode,e)),R[0]&171751&&(A=me(b[0]),ee(),s=Ge(s,R,X,1,b,A,r,l,Lt,Mt,null,_t),te()),b[5]&&((_e=b[0][b[1]])==null?void 0:_e.media.length)>1?w?(w.p(b,R),R[0]&35&&I(w,1)):(w=Vt(b),w.c(),I(w,1),w.m(t,a)):w&&(ee(),P(w,1,1,()=>{w=null}),te()),b[5]?V&&(ee(),P(V,1,1,()=>{V=null}),te()):V?R[0]&32&&I(V,1):(V=Bt(),V.c(),I(V,1),V.m(t,null)),(!O||R[0]&32&&o!==(o="viewer bg-black select-none flex flex-col "+(b[5]?"static w-full h-full":"fixed top-0 left-0 w-screen h-screen safe-area-pt")))&&h(t,"class",o);const le={};R[0]&16668|R[2]&16777216&&(le.$$scope={dirty:R,ctx:b}),!_&&R[0]&4&&(_=!0,le.isOpen=b[2],Oe(()=>_=!1)),d.$set(le);const pe={};R[0]&3&&(pe.targetIdx=b[0][b[1]].idx),!M&&R[0]&8&&(M=!0,pe.isOpen=b[3],Oe(()=>M=!1)),E.$set(pe);const Ve={};R[0]&3&&(Ve.isVisible=b[0][b[1]].permission_signer==="reported"),R[0]&3&&(Ve.targetIdx=b[0][b[1]].idx),m.$set(Ve);const Be={};R[0]&16|R[2]&16777216&&(Be.$$scope={dirty:R,ctx:b}),!y&&R[0]&16&&(y=!0,Be.modalVisible=b[4],Oe(()=>y=!1)),x.$set(Be)},i(b){if(!O){for(let R=0;R<A.length;R+=1)I(s[R]);I(w),I(V),I(d.$$.fragment,b),I(E.$$.fragment,b),I(m.$$.fragment,b),I(x.$$.fragment,b),O=!0}},o(b){for(let R=0;R<s.length;R+=1)P(s[R]);P(w),P(V),P(d.$$.fragment,b),P(E.$$.fragment,b),P(m.$$.fragment,b),P(x.$$.fragment,b),O=!1},d(b){b&&(p(e),p(t),p(f),p(v),p(g),p(c)),C&&C.d(b);for(let R=0;R<s.length;R+=1)s[R].d();w&&w.d(),V&&V.d(),n[37](null),W(d,b),W(E,b),W(m,b),W(x,b)}}}const Tn=30,Dn=10,Rt=150;function Pe(n){return"touches"in n||"changedTouches"in n}function Mn(n){return Pe(n)?[n.touches[0].clientX,n.touches[0].clientY]:[n.clientX,n.clientY]}function Vn(n,e,t){let l,s,r;bl(n,xl,u=>t(8,r=u));let{posts:i=[]}=e,{index:a=0}=e,{type:o=r.url.searchParams.get("type")}=e,{isEdit:f=!1}=e,{dontMoveVertically:d=!1}=e,{keyboardY:_=0}=e,{selectedReaction:v=void 0}=e,{hideActionButtons:E=!1}=e,M=!0,g=!1,m=!1,c=0,x=0,y={width:0,height:0},{actionSheetMoreIsOpen:O=!1}=e,{actionSheetReportIsOpen:C=!1}=e,{modalVisible:A=!1}=e;function X(u){if(!u)return!1;const B=Me();return B!==null&&String(B)===u}let w=!1,V=!1,U=-1,K=-1,se,re=!1,de=[],ae=[],oe;async function b(){Il({mediaIdx:`${i[a].mediaIdx||0}`,postIdx:`${i[a].idx}`},{replace:!0})}async function R(){t(21,w=!0);const u=i.length,B=r.url.searchParams.get("userIdx"),N=r.url.searchParams.get("placeIdx"),j=`&offset=${u}`,F=`&limit=${Tn}`,ie=B?`&userIdx=${B}`:"",ye=N?`&placeIdx=${N}`:"",he=(await fetch(`${Se}/posts?${ie}${ye}${j}${F}`).then(Ce=>Ce.json()).then(Ce=>{var tt;return((tt=Ce.data)==null?void 0:tt.posts)??[]})).map(Ce=>({...Ce,mediaIdx:0}));he.length===0&&t(22,V=!0),t(0,i=[...i,...he]),t(21,w=!1)}function le(u){const{height:B}=y;if(a===0&&u>0||a===i.length-1&&u<0){t(10,c=u*.3);return}t(10,c=Math.max(Math.min(u,B),-B))}function pe(u){t(9,M=!1);const B=Ee(2),N=Pe(u)?u.changedTouches[0].clientY-K:u.clientY-K;N>B&&a>0?(t(1,a-=1),g=!0,b()):-N>B&&a<i.length-1&&(t(1,a+=1),g=!0,b()),t(10,c=0)}function Ve(u){const{width:B}=y,N=i[a].mediaIdx,j=i[a].media.length-1;if(N===0&&u>0||N===j&&u<0){t(11,x=u*.3);return}t(11,x=Math.max(Math.min(u,B),-B))}function Be(u){t(9,M=!1);const B=Ee(2),N=Pe(u)?u.changedTouches[0].clientX-U:u.clientX-U,j=i[a].mediaIdx,F=i[a].media.length-1;N>B&&j>0?_e(j-1):-N>B&&j<F&&_e(j+1),t(11,x=0)}function _e(u){t(0,i[a]={...i[a],mediaIdx:u},i),t(0,i=[...i]),m=!0,b()}function Le(u){g||m||(re=!0,se=void 0,Pe(u)?(U=u.touches[0].clientX,K=u.touches[0].clientY):(U=u.clientX,K=u.clientY,window.addEventListener("mousemove",je,{passive:!1}),window.addEventListener("mouseup",qe)))}function je(u){if(!re||g||m)return;const[B,N]=Mn(u),j=B-U,F=N-K;se===void 0&&(se=Math.abs(F)>=Math.abs(j)?"post":"media"),!d&&se==="post"?le(F):se==="media"&&Ve(j)}function qe(u){!re||g||m||(re=!1,se==="post"?pe(u):se==="media"&&Be(u),Pe(u)||(window.removeEventListener("mousemove",je),window.removeEventListener("mouseup",qe)))}function We(u){if(g||m)return;u.preventDefault();const B=Date.now(),N=Math.abs(u.deltaX),j=Math.abs(u.deltaY);if(N>j){if(ae.push({deltaX:u.deltaX,timestamp:B}),ae=ae.filter(F=>B-F.timestamp<=Rt),ae.length>=2){const F=ae[0],ie=ae[ae.length-1];if(Math.abs(ie.deltaX)-Math.abs(F.deltaX)>=0&&Math.abs(ie.deltaX)>=30){const he=i[a].mediaIdx,Ce=i[a].media.length-1;ie.deltaX>0&&he<Ce?_e(he+1):ie.deltaX<0&&he>0&&_e(he-1),ae=[],m=!0}}}else if(de.push({deltaY:u.deltaY,timestamp:B}),de=de.filter(F=>B-F.timestamp<=Rt),de.length>=2){const F=de[0],ie=de[de.length-1];Math.abs(ie.deltaY)-Math.abs(F.deltaY)>=0&&Math.abs(ie.deltaY)>=30&&(ie.deltaY>0&&a<i.length-1?(t(9,M=!1),t(1,a+=1),b(),g=!0):ie.deltaY<0&&a>0&&(t(9,M=!1),t(1,a-=1),b(),g=!0),de=[])}}function Je(u){if(g||m)return;const B=i[a].mediaIdx,N=i[a].media.length-1;switch(u.key){case"ArrowUp":a>0&&(t(9,M=!1),t(1,a--,a),g=!0,b());break;case"ArrowDown":a<i.length-1&&(t(9,M=!1),t(1,a++,a),g=!0,b());break;case"ArrowLeft":B>0&&(t(9,M=!1),m=!0,_e(B-1));break;case"ArrowRight":B<N&&(t(9,M=!1),m=!0,_e(B+1));break}}function Ut(){t(9,M=!0),g=!1,m=!1}function Ke(){oe&&t(12,y={width:oe.clientWidth,height:oe.clientHeight})}function zt(){var N,j;const u=Number(r.url.searchParams.get("mediaIdx")||0),B=((j=(N=i.at(a))==null?void 0:N.media)==null?void 0:j.length)||0;u&&u<B?t(0,i[a]={...i[a],mediaIdx:u},i):t(0,i[a]={...i[a],mediaIdx:0},i),t(0,i=[...i]),b()}function Xt(){document.addEventListener("touchstart",Le,{passive:!1}),document.addEventListener("touchmove",je,{passive:!1}),document.addEventListener("touchend",qe),document.addEventListener("mousedown",Le,{passive:!1}),document.addEventListener("wheel",We,{passive:!1}),document.addEventListener("keydown",Je)}function Ht(){document.removeEventListener("touchstart",Le),document.removeEventListener("touchmove",je),document.removeEventListener("touchend",qe),document.removeEventListener("mousedown",Le),document.removeEventListener("wheel",We),document.removeEventListener("keydown",Je)}St(()=>{Ke();const u=new ResizeObserver(()=>Ke());return oe&&u.observe(oe),Xt(),zt(),()=>{u.disconnect()}}),At(()=>{Ht()});function Qe(){var j;const u=Fe(),B=Me(),N=(j=i[a])==null?void 0:j.idx;!u||!B||!N||fetch(`${Se}/posts/${N}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`}}).then(F=>F.json()).then(()=>He(`/users/${B}`,{replaceState:!0,invalidateAll:!0}))}async function $e(u){var F,ie,ye;const B=(F=i[u])==null?void 0:F.idx;if(B===void 0||f||((ie=i[u])==null?void 0:ie.needReactionReload)!==!0&&((ye=i[u])!=null&&ye.reactions))return;const N=Fe(),j=await fetch(`${Se}/vote/reactions?targetTable=posts&targetId=${B}&byType=true`,{method:"GET",headers:{Authorization:"Bearer "+N}});if(j.ok){const he=await j.json();t(0,i[u].reactions=he.data.reactions,i),t(0,i[u].myReaction=he.data.myReaction,i)}}function ge(u,B){const N=a,j=i[N];if((j==null?void 0:j.idx)===u){if(!nt())return j.needReactionReload=!0,be.emit("showSignInModal",{removable:!0,callback:Cl.isNativePlatform()?()=>{$e(N)}:void 0});j.myReaction===B?be.emit("setReaction",{target:"posts",targetId:u,reaction:null,callback:()=>{t(0,i[N].myReaction=null,i),et(N,B)}}):(j.myReaction&&et(N,j.myReaction),be.emit("setReaction",{target:"posts",targetId:u,reaction:B,callback:()=>{t(0,i[N].myReaction=B,i),i[N].reactions.some(F=>F.type===B)?t(0,i[N].reactions=i[N].reactions.map(F=>F.type===B?{...F,count:Number(F.count)+1}:F),i):t(0,i[N].reactions=[...i[N].reactions,{type:B,count:1}],i)}}))}}function et(u,B){let N=[];for(const j of i[u].reactions)if(j.type===B){const F=Number(j.count);F>1&&N.push({...j,count:F-1})}else N.push(j);t(0,i[u].reactions=N,i)}function Zt(u){wl.call(this,n,u)}const Gt=(u,B)=>{ge(u.idx,B.type)};function Wt(u,B,N,j){N[j]=u,t(0,i)}const Jt=(u,B,N,j)=>{t(0,B[N].isTextExpanded=j.detail.expanded,i)},Kt=u=>{ge(u.idx,"👍")},Qt=u=>{ge(u.idx,"️🔥")},$t=u=>{ge(u.idx,"😍")},el=u=>{ge(u.idx,"😋")},tl=u=>{ge(u.idx,"😊️️")},ll=(u,B)=>u+Number(B.count),nl=u=>{ge(u.idx,u.myReaction||"❤️")},sl=(u,B,N)=>{t(0,B[N].onReactionShowcase=!0,i);const j=()=>{t(0,B[N].onReactionShowcase=!1,i),window.removeEventListener("click",j)};setTimeout(()=>{window.addEventListener("click",j)},500)},il=()=>{if(!nt())return be.emit("showSignInModal",{removable:!0});t(2,O=!0)};function rl(u){De[u?"unshift":"push"](()=>{oe=u,t(13,oe)})}const al=()=>{var u;t(2,O=!1),He(`/viewer/edit?type=patch&postIdx=${(u=window.location.search.split("postIdx=")[1])==null?void 0:u.split("&")[0]}`,{replaceState:!1,invalidateAll:!1})},ol=()=>{t(2,O=!1),t(4,A=!0)},fl=()=>{Ol(r.url),isOpenActionSheet=!1},ul=()=>{t(2,O=!1),t(3,C=!0)};function cl(u){O=u,t(2,O)}function dl(u){C=u,t(3,C)}const hl=()=>{t(0,i[a].permission_signer="reported",i)},ml=()=>{t(0,i[a].permission_signer=null,i)},pl=()=>{Qe(),t(4,A=!1)},_l=()=>{t(4,A=!1)};function gl(u){A=u,t(4,A)}return n.$$set=u=>{"posts"in u&&t(0,i=u.posts),"index"in u&&t(1,a=u.index),"type"in u&&t(18,o=u.type),"isEdit"in u&&t(5,f=u.isEdit),"dontMoveVertically"in u&&t(19,d=u.dontMoveVertically),"keyboardY"in u&&t(6,_=u.keyboardY),"selectedReaction"in u&&t(20,v=u.selectedReaction),"hideActionButtons"in u&&t(7,E=u.hideActionButtons),"actionSheetMoreIsOpen"in u&&t(2,O=u.actionSheetMoreIsOpen),"actionSheetReportIsOpen"in u&&t(3,C=u.actionSheetReportIsOpen),"modalVisible"in u&&t(4,A=u.modalVisible)},n.$$.update=()=>{var u;n.$$.dirty[0]&256&&r&&b(),n.$$.dirty[0]&1048576&&v&&ge(v.postIdx,v.reaction),n.$$.dirty[0]&2&&$e(a),n.$$.dirty[0]&3&&t(23,l=(u=i[a])==null?void 0:u.user_idx),n.$$.dirty[0]&8388608&&t(14,s=X(l)),n.$$.dirty[0]&6815747&&!d&&a>=i.length-Dn&&!w&&!V&&R()},[i,a,O,C,A,f,_,E,r,M,c,x,y,oe,s,Ut,Qe,ge,o,d,v,w,V,l,Zt,Gt,Wt,Jt,Kt,Qt,$t,el,tl,ll,nl,sl,il,rl,al,ol,fl,ul,cl,dl,hl,ml,pl,_l,gl]}class ls extends ue{constructor(e){super(),ce(this,e,Vn,yn,fe,{posts:0,index:1,type:18,isEdit:5,dontMoveVertically:19,keyboardY:6,selectedReaction:20,hideActionButtons:7,actionSheetMoreIsOpen:2,actionSheetReportIsOpen:3,modalVisible:4},null,[-1,-1,-1])}}export{ls as V};
