import{U as ze,ab as pe,s as Ne,q as Ae,r as ye,b as L,f as A,v as C,i as he,h as z,n as se,m as rt,e as W,a as we,c as j,g as Ee,H as y,L as ne,C as re,B as O,R as oe,J as at,I as ft,u as ct,o as ht,p as Ct,F as gt,k as dt,y as mt,z as Bt,W as Dt,K as ke,w as _t}from"./scheduler.BVPf9D5l.js";import{n as bt,l as vt,S as Ve,i as We,t as S,g as Me,a as K,f as Fe,k as Te,c as Ht,d as pt,m as At,e as yt}from"./index.CyEs2R8T.js";import{w as wt}from"./entry.CVtiqfrs.js";import{r as ue}from"./units.BJZU6p1c.js";import{r as Et,C as kt}from"./sign.BDiuEuSA.js";function J(e){const t=e-1;return t*t*t+1}function Nt(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}function Oe(e,{delay:t=0,duration:o=400,easing:u=ze}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:o,easing:u,css:r=>`opacity: ${r*s}`}}function Vt(e,{delay:t=0,duration:o=400,easing:u=J,start:s=0,opacity:r=0}={}){const l=getComputedStyle(e),c=+l.opacity,_=l.transform==="none"?"":l.transform,p=1-s,D=c*(1-r);return{delay:t,duration:o,easing:u,css:(b,h)=>`
			transform: ${_} scale(${1-p*h});
			opacity: ${c-D*h}
		`}}function Se(e){return Object.prototype.toString.call(e)==="[object Date]"}function ce(e,t){if(e===t||e!==e)return()=>e;const o=typeof e;if(o!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const u=t.map((s,r)=>ce(e[r],s));return s=>u.map(r=>r(s))}if(o==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Se(e)&&Se(t)){e=e.getTime(),t=t.getTime();const r=t-e;return l=>new Date(e+l*r)}const u=Object.keys(t),s={};return u.forEach(r=>{s[r]=ce(e[r],t[r])}),r=>{const l={};return u.forEach(c=>{l[c]=s[c](r)}),l}}if(o==="number"){const u=t-e;return s=>e+s*u}throw new Error(`Cannot interpolate ${o} values`)}function Mt(e,t={}){const o=wt(e);let u,s=e;function r(l,c){if(e==null)return o.set(e=l),Promise.resolve();s=l;let _=u,p=!1,{delay:D=0,duration:b=400,easing:h=ze,interpolate:w=ce}=pe(pe({},t),c);if(b===0)return _&&(_.abort(),_=null),o.set(e=s),Promise.resolve();const F=bt()+D;let f;return u=vt(i=>{if(i<F)return!0;p||(f=w(e,l),typeof b=="function"&&(b=b(e,l)),p=!0),_&&(_.abort(),_=null);const E=i-F;return E>b?(o.set(e=l),!1):(o.set(e=f(h(E/b))),!0)}),u.promise}return{set:r,update:(l,c)=>r(l(s,e),c),subscribe:o.subscribe}}function Ft(e){let t,o;return{c(){t=Ae("svg"),o=Ae("path"),this.h()},l(u){t=ye(u,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=L(t);o=ye(s,"path",{id:!0,d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0}),L(o).forEach(A),s.forEach(A),this.h()},h(){C(o,"id","Vector 27674"),C(o,"d","M2 2H33"),C(o,"stroke","#DADDE0"),C(o,"stroke-width","3"),C(o,"stroke-linecap","round"),C(t,"width","35"),C(t,"height","4"),C(t,"viewBox","0 0 35 4"),C(t,"fill","none"),C(t,"xmlns","http://www.w3.org/2000/svg")},m(u,s){he(u,t,s),z(t,o)},p:se,i:se,o:se,d(u){u&&A(t)}}}class Tt extends Ve{constructor(t){super(),We(this,t,null,Ft,Ne,{})}}var Le;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Le||(Le={}));var Pe;(function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"})(Pe||(Pe={}));const ae=Et("Keyboard");function Ye(e){let t,o,u,s,r;return{c(){t=W("div"),this.h()},l(l){t=j(l,"DIV",{class:!0}),L(t).forEach(A),this.h()},h(){C(t,"class","fixed inset-0 bg-black/20")},m(l,c){he(l,t,c),u=!0,s||(r=O(t,"click",e[27]),s=!0)},p:se,i(l){u||(l&&Dt(()=>{u&&(o||(o=Te(t,Oe,{duration:200},!0)),o.run(1))}),u=!0)},o(l){l&&(o||(o=Te(t,Oe,{duration:200},!1)),o.run(0)),u=!1},d(l){l&&A(t),l&&o&&o.end(),s=!1,r()}}}function Ie(e){let t,o;return t=new Tt({}),{c(){Ht(t.$$.fragment)},l(u){pt(t.$$.fragment,u)},m(u,s){At(t,u,s),o=!0},i(u){o||(S(t.$$.fragment,u),o=!0)},o(u){K(t.$$.fragment,u),o=!1},d(u){yt(t,u)}}}function Ot(e){let t,o,u,s,r,l,c,_,p,D,b,h,w,F,f=e[0]&&Ye(e),i=!e[3]&&Ie();const E=e[24].default,d=rt(E,e,e[23],null);return{c(){t=W("div"),f&&f.c(),o=we(),u=W("div"),s=W("div"),r=W("div"),i&&i.c(),l=we(),c=W("div"),d&&d.c(),this.h()},l(v){t=j(v,"DIV",{class:!0});var a=L(t);f&&f.l(a),o=Ee(a),u=j(a,"DIV",{id:!0,class:!0,style:!0});var H=L(u);s=j(H,"DIV",{class:!0,style:!0});var T=L(s);r=j(T,"DIV",{class:!0});var R=L(r);i&&i.l(R),R.forEach(A),l=Ee(T),c=j(T,"DIV",{class:!0,style:!0});var q=L(c);d&&d.l(q),q.forEach(A),T.forEach(A),H.forEach(A),a.forEach(A),this.h()},h(){C(r,"class","flex justify-center items-center h-[1.625rem]"),C(c,"class","content overflow-y-auto transition-transform duration-200 ios-scroll-fix svelte-1vussu5"),C(c,"style",_=`max-height: ${e[1]-e[10]}px; /* 높이를 120vh 하고 핸들까지 빼줘야 높이 유지하고 스크롤 가능 */`),y(c,"h-full",e[6]),y(c,"touch-pan-y",!e[4]),C(s,"class",p=ne(`
        sheet absolute 
        min-h-full h-[120vh] w-full ${e[2]}
        rounded-t-[1.25rem]  
        flex flex-col 
        shadow-[0px_7px_16px_rgba(0,0,0,0.08)] backdrop-blur-[10px]
      `)+" svelte-1vussu5"),C(s,"style",D=`
        transform: translateY(${e[8]}px);
      `),C(u,"id","action-sheet--max"),C(u,"class","fixed left-0 right-0 overflow-visible"),re(u,"top",e[9]+"px"),re(u,"height",e[1]+"px"),y(u,"pointer-events-none",!e[0]),C(t,"class",b=ne(`fixed inset-0 ${e[5]?"z-50":"z-[60]"}`)+" svelte-1vussu5"),y(t,"pointer-events-none",!e[0]),y(t,"invisible",!e[0])},m(v,a){he(v,t,a),f&&f.m(t,null),z(t,o),z(t,u),z(u,s),z(s,r),i&&i.m(r,null),z(s,l),z(s,c),d&&d.m(c,null),e[28](c),h=!0,w||(F=[O(s,"touchstart",function(){oe(!e[4]&&e[12])&&(!e[4]&&e[12]).apply(this,arguments)},!0),O(s,"touchmove",function(){oe(!e[4]&&e[13])&&(!e[4]&&e[13]).apply(this,arguments)},!0),O(s,"touchend",function(){oe(!e[4]&&e[14])&&(!e[4]&&e[14]).apply(this,arguments)},!0),O(s,"mousedown",function(){oe(!e[4]&&e[15])&&(!e[4]&&e[15]).apply(this,arguments)},!0),O(s,"click",at(e[26])),O(u,"click",e[29]),O(u,"contextmenu",ft(e[25]))],w=!0)},p(v,a){e=v,e[0]?f?(f.p(e,a),a[0]&1&&S(f,1)):(f=Ye(e),f.c(),S(f,1),f.m(t,o)):f&&(Me(),K(f,1,1,()=>{f=null}),Fe()),e[3]?i&&(Me(),K(i,1,1,()=>{i=null}),Fe()):i?a[0]&8&&S(i,1):(i=Ie(),i.c(),S(i,1),i.m(r,null)),d&&d.p&&(!h||a[0]&8388608)&&ct(d,E,e,e[23],h?Ct(E,e[23],a,null):ht(e[23]),null),(!h||a[0]&2&&_!==(_=`max-height: ${e[1]-e[10]}px; /* 높이를 120vh 하고 핸들까지 빼줘야 높이 유지하고 스크롤 가능 */`))&&C(c,"style",_),(!h||a[0]&64)&&y(c,"h-full",e[6]),(!h||a[0]&16)&&y(c,"touch-pan-y",!e[4]),(!h||a[0]&4&&p!==(p=ne(`
        sheet absolute 
        min-h-full h-[120vh] w-full ${e[2]}
        rounded-t-[1.25rem]  
        flex flex-col 
        shadow-[0px_7px_16px_rgba(0,0,0,0.08)] backdrop-blur-[10px]
      `)+" svelte-1vussu5"))&&C(s,"class",p),(!h||a[0]&256&&D!==(D=`
        transform: translateY(${e[8]}px);
      `))&&C(s,"style",D),(!h||a[0]&2)&&re(u,"height",e[1]+"px"),(!h||a[0]&1)&&y(u,"pointer-events-none",!e[0]),(!h||a[0]&32&&b!==(b=ne(`fixed inset-0 ${e[5]?"z-50":"z-[60]"}`)+" svelte-1vussu5"))&&C(t,"class",b),(!h||a[0]&33)&&y(t,"pointer-events-none",!e[0]),(!h||a[0]&33)&&y(t,"invisible",!e[0])},i(v){h||(S(f),S(i),S(d,v),h=!0)},o(v){K(f),K(i),K(d,v),h=!1},d(v){v&&A(t),f&&f.d(),i&&i.d(),d&&d.d(v),e[28](null),w=!1,gt(F)}}}const fe=50;function St(e,t,o){let u,{$$slots:s={},$$scope:r}=t,{backdropBackground:l="bg-[#24242424]"}=t,{sheetBackground:c="bg-[#222]"}=t,{noHandle:_=!1}=t,{fixed:p=!1}=t,{isOpen:D=!1}=t,{onOpen:b=()=>{}}=t,{onClose:h=()=>{}}=t,{bottomNavigation:w=!1}=t,{slotFullHeight:F=!1}=t,f=0,{maxHeight:i=null}=t;const E=ue(2.75),d=ue(1.625);let{useDefaultHeight:v=!1}=t,{defaultHeight:a=null}=t,{keyboardHeight:H=0}=t,T=0;const R=ue(3),q=ue(2.13);let{noObserve:Q=!1}=t;const Ce=kt.isNativePlatform();let U=!1,N=!1,ge=0,P=0,de=0;const k=Mt(0,{duration:0});dt(e,k,n=>o(8,u=n));let m,X,ie=!1,Z,V=null;function je(){console.log("onMobileKeyboardEvent"),ae.addListener("keyboardWillShow",n=>{V!==H&&(console.log("keyboardWillShow",V,H,n),V=H,o(17,H=n.keyboardHeight),Y())}),ae.addListener("keyboardWillHide",()=>{V!==H&&(console.log("keyboardWillHide",V,H),V=H,o(17,H=0),Y())})}function Ke(){ae.removeAllListeners()}function Y(){console.log("updateWindowHeight"),f=window.innerHeight;let n=E,B=w?q+R:q;o(1,i=f-n-B-H);const M=(m?m.scrollHeight:0)+d;v===!1&&(o(16,a=Math.min(M,i)),G=!1),D&&_e()}function qe(){console.log("openSheet"),k.set(i),k.set(i-a,{duration:300,easing:J}).finally(()=>{b()})}function Ue(){console.log("closeSheet"),k.set(f,{duration:100,easing:J}).finally(()=>{h()})}function me(n,B){if(p)return;U=!0,ge=n,de=u,ie=!1;let g=B;for(;g&&g!==document.body;){if(g.classList.contains("touch-pan-y")||g.classList.contains("overflow-y-auto")||g.classList.contains("overflow-y-scroll")){const{scrollHeight:M,clientHeight:I}=g,le=M>I;if(le){ie=!0,x=g,console.log("스크롤 가능한 요소 발견:",g,{scrollHeight:M,clientHeight:I,canScroll:le});break}}g=g.parentElement}}let x=null,$=!1,ee=!1;function Ge(){m&&(m.addEventListener("scroll",n=>{const B=n.target;if(B&&B!==m){const{scrollTop:g,scrollHeight:M,clientHeight:I}=B;g<0?$=!0:g+I>M?ee=!0:($=!1,ee=!1)}},{passive:!0,capture:!0}),m.addEventListener("touchend",()=>{setTimeout(()=>{$=!1,ee=!1,x=null},50)},{passive:!0}))}function Be(n,B){if(U){if(P=n-ge,ie&&x){const{scrollTop:g,scrollHeight:M,clientHeight:I}=x;if(M>I){const it=g<=0,lt=Math.abs(g+I-M)<1;if((it||$)&&P>0)console.log("맨 위에서 아래로 드래그 - 액션시트 제어 허용");else if((lt||ee)&&P<0)console.log("맨 아래에서 위로 드래그 - 액션시트 제어 허용");else{console.log("컨텐츠 스크롤 중 - 액션시트 제어 무시"),U=!1;return}}}Math.abs(P)>fe&&B.stopPropagation(),Je()}}function De(){U&&(U=!1,Re())}function Je(){let n=de+P;n=Math.min(n,f);const B=i-f;n<B&&(n=B),k.set(n,{duration:0})}function Re(){const n=P;P=0,a===i?Qe(n,fe):Xe(u,n,fe)}let G=!1;function _e(){console.log("setToSameHeight",{isMaxHeight:G}),G?te():be()}function te(){N||(N=!0,setTimeout(()=>{N=!1},200),console.log("setToMaxHeight"),T=i,G=!0,k.set(0,{duration:200,easing:J}),m&&o(7,m.style.maxHeight=`${i-d}px`,m))}function be(){N||(N=!0,setTimeout(()=>{N=!1},200),console.log("setToDefaultHeight"),T=a,G=!1,k.set(i-a,{duration:200,easing:J}),m&&o(7,m.style.maxHeight=`${a-d}px`,m))}function Qe(n,B){console.log("단일 높이 모드 실행: defaultHeight === maxHeight"),n>B?(console.log("충분히 아래로 드래그: 시트 닫기"),o(0,D=!1)):(console.log("충분한 드래그 없음: 기본 위치로 복귀"),te())}function Xe(n,B,g){if(console.log("다중 높이 모드 실행: defaultHeight !== maxHeight"),n<g){console.log("케이스 1: 현재 위치가 거의 최대 높이 - 최대 높이로 확장"),te();return}if(B>g){console.log("positionY",k),i===T?(console.log("케이스 2-1: 아래로 드래그 + 최대 높이 상태 - 기본 높이로 축소"),be()):(console.log("케이스 2-2: 아래로 드래그 + 기본 높이 상태 - 시트 닫기"),o(0,D=!1));return}if(B<-g){console.log("케이스 3: 위로 드래그 - 최대 높이로 확장"),te();return}console.log("케이스 4: 제자리로 복귀"),_e()}function Ze(n){me(n.touches[0].clientY,n.target)}function xe(n){Be(n.touches[0].clientY,n)}function $e(){De()}function et(n){n.button===0&&(me(n.clientY,n.target),window.addEventListener("mousemove",ve),window.addEventListener("mouseup",He))}function ve(n){Be(n.clientY,n)}function He(){window.removeEventListener("mousemove",ve),window.removeEventListener("mouseup",He),De()}mt(()=>{Ce&&je(),Y(),Ge(),!Q&&m&&(X=new ResizeObserver(()=>{console.log("resizeObserver"),Y()}),X.observe(m),Z=new MutationObserver(n=>{console.log("contentMutationObserver - 내용 변경 감지"),setTimeout(()=>{Y()},50)}),Z.observe(m,{childList:!0,subtree:!0,attributes:!0})),window.addEventListener("resize",Y)}),Bt(()=>{Ce&&Ke(),window.removeEventListener("resize",Y),Q||(console.log("disconnect"),X&&X.disconnect(),Z&&Z.disconnect())});function tt(n){ke.call(this,e,n)}function nt(n){ke.call(this,e,n)}const ot=()=>o(0,D=!1);function ut(n){_t[n?"unshift":"push"](()=>{m=n,o(7,m)})}const st=()=>o(0,D=!1);return e.$$set=n=>{"backdropBackground"in n&&o(18,l=n.backdropBackground),"sheetBackground"in n&&o(2,c=n.sheetBackground),"noHandle"in n&&o(3,_=n.noHandle),"fixed"in n&&o(4,p=n.fixed),"isOpen"in n&&o(0,D=n.isOpen),"onOpen"in n&&o(19,b=n.onOpen),"onClose"in n&&o(20,h=n.onClose),"bottomNavigation"in n&&o(5,w=n.bottomNavigation),"slotFullHeight"in n&&o(6,F=n.slotFullHeight),"maxHeight"in n&&o(1,i=n.maxHeight),"useDefaultHeight"in n&&o(21,v=n.useDefaultHeight),"defaultHeight"in n&&o(16,a=n.defaultHeight),"keyboardHeight"in n&&o(17,H=n.keyboardHeight),"noObserve"in n&&o(22,Q=n.noObserve),"$$scope"in n&&o(23,r=n.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&1&&(D?qe():Ue())},[D,i,c,_,p,w,F,m,u,E,d,k,Ze,xe,$e,et,a,H,l,b,h,v,Q,r,s,tt,nt,ot,ut,st]}class Wt extends Ve{constructor(t){super(),We(this,t,St,Ot,Ne,{backdropBackground:18,sheetBackground:2,noHandle:3,fixed:4,isOpen:0,onOpen:19,onClose:20,bottomNavigation:5,slotFullHeight:6,maxHeight:1,useDefaultHeight:21,defaultHeight:16,keyboardHeight:17,noObserve:22},null,[-1,-1,-1])}}export{Wt as A,ae as K,J as c,Nt as e,Oe as f,Vt as s};
