import{T as J,U as ce,s as fe,v as K,i as te,f as D,k as de,o as he,l as ge,w as me,e as B,a as pe,c as L,b as M,g as we,q as H,G as O,Q as R,h as A,r as Y,x as _e,H as X,z as be,A as ke,B as ye,C as ve}from"./scheduler.BiUHV-k5.js";import{n as Ee,l as Ye,S as He,i as De,t as j,g as Pe,b as G,f as Ce}from"./index.DaxfEsq8.js";import{w as Se}from"./entry.hzB1vHVB.js";/* empty css                                                  */function k(e){const n=e-1;return n*n*n+1}function Z(e){return Object.prototype.toString.call(e)==="[object Date]"}function N(e,n){if(e===n||e!==e)return()=>e;const t=typeof e;if(t!==typeof n||Array.isArray(e)!==Array.isArray(n))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const s=n.map((r,i)=>N(e[i],r));return r=>s.map(i=>i(r))}if(t==="object"){if(!e||!n)throw new Error("Object cannot be null");if(Z(e)&&Z(n)){e=e.getTime(),n=n.getTime();const i=n-e;return c=>new Date(e+c*i)}const s=Object.keys(n),r={};return s.forEach(i=>{r[i]=N(e[i],n[i])}),i=>{const c={};return s.forEach(g=>{c[g]=r[g](i)}),c}}if(t==="number"){const s=n-e;return r=>e+r*s}throw new Error(`Cannot interpolate ${t} values`)}function Te(e,n={}){const t=Se(e);let s,r=e;function i(c,g){if(e==null)return t.set(e=c),Promise.resolve();r=c;let a=s,d=!1,{delay:m=0,duration:p=400,easing:f=ce,interpolate:l=N}=J(J({},n),g);if(p===0)return a&&(a.abort(),a=null),t.set(e=r),Promise.resolve();const u=Ee()+m;let h;return s=Ye(w=>{if(w<u)return!0;d||(h=l(e,c),typeof p=="function"&&(p=p(e,c)),d=!0),a&&(a.abort(),a=null);const _=w-u;return _>p?(t.set(e=c),!1):(t.set(e=h(f(_/p))),!0)}),s.promise}return{set:i,update:(c,g)=>i(c(r,e),g),subscribe:t.subscribe}}function Be(e){function n(t){const s=t.target;s&&!e.contains(s)&&e.dispatchEvent(new CustomEvent("outsideclick"))}return window.addEventListener("click",n),{destroy(){window.removeEventListener("click",n)}}}function x(e){let n,t,s,r,i,c,g,a,d,m;const p=e[18].default,f=me(p,e,e[17],null);return{c(){n=B("div"),t=B("div"),s=B("div"),r=pe(),i=B("div"),f&&f.c(),this.h()},l(l){n=L(l,"DIV",{class:!0});var u=M(n);t=L(u,"DIV",{class:!0,style:!0});var h=M(t);s=L(h,"DIV",{class:!0}),M(s).forEach(D),r=we(h),i=L(h,"DIV",{class:!0});var w=M(i);f&&f.l(w),w.forEach(D),h.forEach(D),u.forEach(D),this.h()},h(){H(s,"class","handle svelte-ism897"),H(i,"class","content svelte-ism897"),H(t,"class",c=O(`sheet absolute bottom-0 w-full ${e[2]} 
      rounded-t-xl touch-pan-y will-change-transform 
      flex flex-col min-h-full h-full shadow-top`)+" svelte-ism897"),R(t,"transform","translateY("+e[5]+"px)"),H(n,"class",g=O(`backdrop fixed top-0 left-0 right-0 bottom-0 ${e[1]} z-40 overflow-hidden touch-none`)+" svelte-ism897")},m(l,u){te(l,n,u),A(n,t),A(t,s),A(t,r),A(t,i),f&&f.m(i,null),a=!0,d||(m=[Y(t,"touchstart",e[8],!0),Y(t,"touchmove",e[9],!0),Y(t,"touchend",e[10],{passive:!0,capture:!0}),Y(t,"mousedown",e[11],!0),_e(Be.call(null,t)),Y(t,"outsideclick",e[19]),Y(n,"click",X(e[12])),Y(n,"touchstart",X(e[13]))],d=!0)},p(l,u){f&&f.p&&(!a||u[0]&131072)&&be(f,p,l,l[17],a?ye(p,l[17],u,null):ke(l[17]),null),(!a||u[0]&4&&c!==(c=O(`sheet absolute bottom-0 w-full ${l[2]} 
      rounded-t-xl touch-pan-y will-change-transform 
      flex flex-col min-h-full h-full shadow-top`)+" svelte-ism897"))&&H(t,"class",c),(!a||u[0]&32)&&R(t,"transform","translateY("+l[5]+"px)"),(!a||u[0]&2&&g!==(g=O(`backdrop fixed top-0 left-0 right-0 bottom-0 ${l[1]} z-40 overflow-hidden touch-none`)+" svelte-ism897"))&&H(n,"class",g)},i(l){a||(j(f,l),a=!0)},o(l){G(f,l),a=!1},d(l){l&&D(n),f&&f.d(l),d=!1,ve(m)}}}function Le(e){let n,t,s=e[0]&&x(e);return{c(){s&&s.c(),n=K()},l(r){s&&s.l(r),n=K()},m(r,i){s&&s.m(r,i),te(r,n,i),t=!0},p(r,i){r[0]?s?(s.p(r,i),i[0]&1&&j(s,1)):(s=x(r),s.c(),j(s,1),s.m(n.parentNode,n)):s&&(Pe(),G(s,1,1,()=>{s=null}),Ce())},i(r){t||(j(s),t=!0)},o(r){G(s),t=!1},d(r){r&&D(n),s&&s.d(r)}}}let $=10;function ee(e){return Me(e)}function Me(e){for(;e&&e!==document.body&&!(e.classList&&e.classList.contains("content"));){const t=window.getComputedStyle(e).overflowY;if((t==="auto"||t==="scroll")&&e.scrollHeight>e.clientHeight)return!0;e=e.parentElement}return!1}function Oe(e,n,t){let s,{$$slots:r={},$$scope:i}=n,{backdropBackground:c="bg-[#24242424]"}=n,{sheetBackground:g="bg-[#242424]"}=n,{isOpen:a=!1}=n,{maxHeight:d=null}=n,{defaultHeight:m=null}=n,{onClose:p=()=>{t(0,a=!1)}}=n,f=0,l=0,u=0,h=!1,w=0,_=0,z=0,y=!1,C=!0,I=!1;const b=Te(0,{duration:300,easing:k});de(e,b,o=>t(5,s=o));function V(){_=window.innerHeight,d===null&&t(14,d=_*.97),m===null&&t(15,m=_/2),a&&q()}he(()=>{console.log("mount sheet"),V(),v(),window.addEventListener("resize",V),a&&q()}),ge(()=>{console.log("unmount sheet"),window.removeEventListener("resize",V)});function q(){I=!0,w=m,b.set(_),b.set(_-w,{duration:300,easing:k}),I=!1}function v(){b.set(_,{duration:300,easing:k}).then(()=>{p()})}function oe(o){ee(o.target)||(h=!0,t(3,y=!1),f=o.touches[0].clientY,z=s)}function ne(o){h&&(l=o.touches[0].clientY,u=l-f,Math.abs(u)>$&&(t(3,y=!0),o.preventDefault(),o.stopPropagation()),W())}function se(){h&&(h=!1,F())}function re(o){o.button===0&&(ee(o.target)||(h=!0,t(3,y=!1),f=o.clientY,z=s,window.addEventListener("mousemove",Q),window.addEventListener("mouseup",U)))}function Q(o){h&&(l=o.clientY,u=l-f,Math.abs(u)>$&&(t(3,y=!0),o.preventDefault(),o.stopPropagation()),W())}function U(o){h&&(h=!1,window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",U),F())}function W(){let o=z+u;const E=_-d;if(o<E){const S=E-o;o=E-S/3}o=Math.min(o,_),b.set(o)}function F(){const o=u;u=0;const E=10,S=s,P=_-d,T=_-m;if(m===d)o>E?v():b.set(T,{duration:200,easing:k});else if(S<P+E)w=d,b.set(P,{duration:200,easing:k});else if(o>E)w===d?(w=m,b.set(T,{duration:200,easing:k})):v();else if(o<-E)w=d,b.set(P,{duration:200,easing:k});else{const ue=(T+P)/2;S<ue?(w=d,b.set(P,{duration:200,easing:k})):(w=m,b.set(T,{duration:200,easing:k}))}setTimeout(()=>{t(3,y=!1)},200)}function ie(o){!y&&o.target===o.currentTarget&&!I&&v()}function le(o){console.log("touch backdrop"),o.target===o.currentTarget&&v()}const ae=o=>{o.preventDefault(),o.stopPropagation(),!y&&!C&&v()};return e.$$set=o=>{"backdropBackground"in o&&t(1,c=o.backdropBackground),"sheetBackground"in o&&t(2,g=o.sheetBackground),"isOpen"in o&&t(0,a=o.isOpen),"maxHeight"in o&&t(14,d=o.maxHeight),"defaultHeight"in o&&t(15,m=o.defaultHeight),"onClose"in o&&t(16,p=o.onClose),"$$scope"in o&&t(17,i=o.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&1&&a&&(t(4,C=!0),setTimeout(()=>{t(4,C=!1)},50)),e.$$.dirty[0]&1&&(a?q():v())},[a,c,g,y,C,s,b,v,oe,ne,se,re,ie,le,d,m,p,i,r,ae]}class Ve extends He{constructor(n){super(),De(this,n,Oe,Le,fe,{backdropBackground:1,sheetBackground:2,isOpen:0,maxHeight:14,defaultHeight:15,onClose:16},null,[-1,-1])}}export{Ve as A,k as a,Be as c};
