import{s as W,a as P,H as ee,g as S,i as Y,f as _,T as je,y as Ve,z as Re,l as te,e as E,c as C,b as M,o as v,N as $,h as w,I as Pe,u as re,q as ae,r as ne,t as z,d as Z,j as q,A as Se,V as se,p as K,B as ve,G as Oe,E as Xe,K as Ae,P as G}from"./scheduler.BRSuf-vg.js";import{S as J,i as Q,t as y,g as O,a as T,f as X,c as A,b as H,m as N,d as B}from"./index.C48quBYD.js";import{c as be,b as Ne,s as le}from"./store.CDalJydL.js";import"./index.Do7nUb9h.js";import{e as ie}from"./each.B5sF3ehM.js";import{e as Be}from"./emitter.E5P-NQ8u.js";function Ue(a,e={}){let t,n,s=!1,r=0,i=!1,l=!1,f=!1;const o=e.threshold||50,d=e.beforeThreshold||30;function u(m){t=m.clientX,n=m.clientY,s=!1,i=!0,l=!1,f=!1,a.style.cursor="pointer"}function h(m){var D,I;if(i){if(!s){const L=m.clientX-t,k=m.clientY-n;(Math.abs(L)>5||Math.abs(k)>5)&&(s=!0,a.style.cursor="grabbing",a.style.transition="none",(D=e.onDragStart)==null||D.call(e,m))}if(s){const L=m.clientX-t,k=m.clientY-n;r=L,g(m,r),c(L,k),(I=e.onDragMove)==null||I.call(e,L,k)}}}function g(m,D){var I,L,k;D<-d&&!l?((I=e.onDragBeforeLeft)==null||I.call(e,m),l=!0):D>d&&!f?((L=e.onDragBeforeRight)==null||L.call(e,m),f=!0):D>-d&&D<d&&((l||f)&&((k=e.onDragCenter)==null||k.call(e,m)),l=!1,f=!1)}function c(m,D){const L=1*Math.min(Math.max(r/3,-30),10),k=Math.min(Math.max(-D/8,-20),10),F=1*Math.min(Math.max(r/15,-15),15),U="",R=m;a.style.transform=`
      ${U}
      translate(${R}px, ${D}px)
      rotateX(${k}deg)
      rotateY(${L}deg)
      rotateZ(${F}deg)
    `}function p(m){i&&(s&&j(m),i=!1)}function j(m){var I,L,k;s=!1,a.style.cursor="pointer",a.style.transition="transform 0.6s";const D=m.clientY-n;Math.abs(r)>Math.abs(D)?r<-o?(V(-1),(I=e.onDragLeft)==null||I.call(e,m)):r>o?(V(1),(L=e.onDragRight)==null||L.call(e,m)):a.style.transform="":a.style.transform="",(k=e.onDragEnd)==null||k.call(e,m)}function V(m){var R;const D=window.innerWidth,I=m*(D*3),L=Math.random()*200-100,k=1,F=1,U=I;a.style.transition="transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out",a.style.transform=`
      
      translate(${U}px, ${L}px)
      rotateX(${m*15}deg)
      rotateY(${k*m*60}deg)
      rotateZ(${F*m*30}deg)
    `,a.style.opacity="0",(R=e.onDrop)==null||R.call(e)}return a.addEventListener("pointerdown",u),document.addEventListener("pointermove",h),document.addEventListener("pointerup",p),a.style.cursor="pointer",a.style.touchAction="none",a.style.transition="transform 0.6s",a.style.perspective="500px",a.style.transformStyle="preserve-3d",{destroy(){a.removeEventListener("pointerdown",u),document.removeEventListener("pointermove",h),document.removeEventListener("pointerup",p)}}}const ze=a=>({}),oe=a=>({}),Ze=a=>({}),fe=a=>({});function ce(a){let e,t,n,s,r,i,l,f,o;const d=a[21].front,u=te(d,a,a[20],fe),h=a[21].back,g=te(h,a,a[20],oe);return{c(){e=E("div"),t=E("div"),n=E("div"),u&&u.c(),s=P(),r=E("div"),g&&g.c(),this.h()},l(c){e=C(c,"DIV",{class:!0});var p=M(e);t=C(p,"DIV",{class:!0,style:!0});var j=M(t);n=C(j,"DIV",{class:!0});var V=M(n);u&&u.l(V),V.forEach(_),s=S(j),r=C(j,"DIV",{class:!0});var m=M(r);g&&g.l(m),m.forEach(_),j.forEach(_),p.forEach(_),this.h()},h(){v(n,"class","card-face card-front absolute inset-0 [backface-visibility:hidden] [transform:rotateY(0deg)] "),v(r,"class","card-face card-back absolute inset-0 [backface-visibility:hidden] [transform:rotateY(180deg)] "),v(t,"class",i="card relative "+de+" "+a[8]+" bg-white rounded-[2vh] shadow-xl p-[1.5vh] [transform-style:preserve-3d] [will-change:transform] svelte-wchsjo"),$(t,"aspect-ratio",be),$(t,"--random-rotation",(a[0].rotateDegree!==void 0?a[0].rotateDegree:a[9])+"deg"),$(t,"--random-x",(Math.random()-.5)*200),$(t,"--random-y",(Math.random()-.5)*200),$(t,"--random-rotate-x",Math.random()*360),$(t,"--random-rotate-y",Math.random()*360),$(t,"--random-rotate-z",Math.random()*360),$(t,"--entry-delay",(a[0].entryDelay||0)+"ms"),$(t,"--entry-origin-x",a[6].x+"vw"),$(t,"--entry-origin-y",a[6].y+"vh"),$(t,"--push-initial-transform",a[7]),v(e,"class","fixed inset-0 flex items-center justify-center z-50")},m(c,p){Y(c,e,p),w(e,t),w(t,n),u&&u.m(n,null),w(t,s),w(t,r),g&&g.m(r,null),a[22](t),l=!0,f||(o=Pe(Ue.call(null,t,{onDragStart:a[10],onDragLeft:a[11],onDragRight:a[12],onDragBeforeLeft:a[13],onDragBeforeRight:a[14],onDragCenter:a[15],onDragEnd:a[16],onDragMove:a[17],onDrop:a[18]})),f=!0)},p(c,p){u&&u.p&&(!l||p[0]&1048576)&&re(u,d,c,c[20],l?ne(d,c[20],p,Ze):ae(c[20]),fe),g&&g.p&&(!l||p[0]&1048576)&&re(g,h,c,c[20],l?ne(h,c[20],p,ze):ae(c[20]),oe),(!l||p[0]&256&&i!==(i="card relative "+de+" "+c[8]+" bg-white rounded-[2vh] shadow-xl p-[1.5vh] [transform-style:preserve-3d] [will-change:transform] svelte-wchsjo"))&&v(t,"class",i),(!l||p[0]&1)&&$(t,"--random-rotation",(c[0].rotateDegree!==void 0?c[0].rotateDegree:c[9])+"deg"),(!l||p[0]&1)&&$(t,"--entry-delay",(c[0].entryDelay||0)+"ms"),(!l||p[0]&64)&&$(t,"--entry-origin-x",c[6].x+"vw"),(!l||p[0]&64)&&$(t,"--entry-origin-y",c[6].y+"vh"),(!l||p[0]&128)&&$(t,"--push-initial-transform",c[7])},i(c){l||(y(u,c),y(g,c),l=!0)},o(c){T(u,c),T(g,c),l=!1},d(c){c&&_(e),u&&u.d(c),g&&g.d(c),a[22](null),f=!1,o()}}}function ue(a){let e,t,n,s;return{c(){e=E("div"),t=E("div"),n=z(a[2]),this.h()},l(r){e=C(r,"DIV",{class:!0});var i=M(e);t=C(i,"DIV",{class:!0});var l=M(t);n=Z(l,a[2]),l.forEach(_),i.forEach(_),this.h()},h(){v(t,"class",s=a[3]+" px-5 py-2 text-xl rounded-3xl svelte-wchsjo"),v(e,"class","fixed inset-0 flex items-center justify-center z-50 pointer-events-none")},m(r,i){Y(r,e,i),w(e,t),w(t,n)},p(r,i){i[0]&4&&q(n,r[2]),i[0]&8&&s!==(s=r[3]+" px-5 py-2 text-xl rounded-3xl svelte-wchsjo")&&v(t,"class",s)},d(r){r&&_(e)}}}function qe(a){let e,t,n,s=a[1]&&ce(a),r=a[4]&&a[2]&&ue(a);return{c(){s&&s.c(),e=P(),r&&r.c(),t=ee()},l(i){s&&s.l(i),e=S(i),r&&r.l(i),t=ee()},m(i,l){s&&s.m(i,l),Y(i,e,l),r&&r.m(i,l),Y(i,t,l),n=!0},p(i,l){i[1]?s?(s.p(i,l),l[0]&2&&y(s,1)):(s=ce(i),s.c(),y(s,1),s.m(e.parentNode,e)):s&&(O(),T(s,1,1,()=>{s=null}),X()),i[4]&&i[2]?r?r.p(i,l):(r=ue(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i(i){n||(y(s),n=!0)},o(i){T(s),n=!1},d(i){i&&(_(e),_(t)),s&&s.d(i),r&&r.d(i)}}}let de="w-[35vh] min-w-[35vh] max-w-[35vh]";const Ge="bottom",He=300;function We(a,e){switch(a){case"bottom":return`translateY(${e}px)`;case"top":return`translateY(-${e}px)`;case"left":return`translateX(-${e}px)`;case"right":return`translateX(${e}px)`;default:return`translateY(${e}px)`}}function Ke(a,e,t){let n,s,r,{$$slots:i={},$$scope:l}=e;const f=je();let{card:o}=e,d=!0,u=Math.random()*5,h="",g="bg-[#2286FF] text-white",c=!1,p,j=!1,V=!1,m=!1,D=!1,I=null;const L={x:50,y:50};let k="default";o.pushAnimation?k="pushing":k="entering";let F=k;function U(b){switch(b){case"default":return`default-card rotate-z-${Math.floor(u)}`;case"flipped":return"flipped-card";case"scattered":return"scattered-card";case"dragging":return"dragging-card";case"entering":return"entering-card";case"pushing":return"pushing-card";default:return""}}function R(b){D||(D=!0,b.stopPropagation(),o.unflippable||(m=!m,t(19,F=m?"flipped":"default")),I&&clearTimeout(I),I=setTimeout(()=>{D=!1},300))}function x(b){if(j||V||D)return;!!!b.target.closest(".card")&&d&&Te()}function De(){j=!0,t(19,F="dragging")}function ke(){o.onDumpLeft&&o.onDumpLeft(),f("dragLeft")}function we(){o.onDumpRight&&o.onDumpRight(),f("dragRight")}function Ee(b){t(4,c=!0),t(2,h=o.left),o.leftColor==="negative"?t(3,g="bg-gray-300 text-white"):o.leftColor==="positive"?t(3,g="bg-[#2286FF] text-white"):t(3,g=o.leftColor||"bg-gray-300 text-white")}function Ce(b){t(4,c=!0),t(2,h=o.right),o.rightColor==="negative"?t(3,g="bg-gray-300 text-white"):o.rightColor==="positive"?t(3,g="bg-[#2286FF] text-white"):t(3,g=o.rightColor||"bg-gray-300 text-white")}function Ie(b){t(4,c=!1),t(2,h="")}function Le(){t(4,c=!1),t(2,h=""),j=!1,t(19,F=m?"flipped":"default"),V=!0,setTimeout(()=>{V=!1},300)}function Me(b,Fe){j=!0,t(19,F="dragging")}function $e(){t(1,d=!1),t(4,c=!1),Ne.update(b=>(b.pop(),b)),f("dropped")}function Te(){d&&(t(19,F="scattered"),setTimeout(()=>{t(1,d=!1),t(4,c=!1),Be.emit("setCards",[]),f("dropped")},800))}Ve(()=>{setTimeout(()=>{p&&p.addEventListener("click",R),document.addEventListener("click",x)},300),setTimeout(()=>{t(19,F="default"),o.pushAnimation&&f("pushComplete"),o.onLoad&&o.onLoad()},o.pushAnimation?600:800)}),Re(()=>{p&&p.removeEventListener("click",R),document.removeEventListener("click",x),I&&clearTimeout(I)});function Ye(b){Se[b?"unshift":"push"](()=>{p=b,t(5,p)})}return a.$$set=b=>{"card"in b&&t(0,o=b.card),"$$scope"in b&&t(20,l=b.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&524288&&t(8,n=U(F)),a.$$.dirty[0]&1&&t(7,s=We(o.pushDirection||Ge,o.pushOffset||He)),a.$$.dirty[0]&1&&t(6,r=o.entryOrigin||L)},[o,d,h,g,c,p,r,s,n,u,De,ke,we,Ee,Ce,Ie,Le,Me,$e,F,l,i,Ye]}class ye extends J{constructor(e){super(),Q(this,e,Ke,qe,W,{card:0},null,[-1,-1])}}function Je(a){let e,t,n,s,r,i=(a[0].emoji||"이모지 입력")+"",l,f,o;return{c(){e=E("div"),t=E("img"),s=P(),r=E("div"),l=z(i),this.h()},l(d){e=C(d,"DIV",{class:!0,style:!0});var u=M(e);t=C(u,"IMG",{src:!0,alt:!0,class:!0,draggable:!0}),u.forEach(_),s=S(d),r=C(d,"DIV",{class:!0});var h=M(r);l=Z(h,i),h.forEach(_),this.h()},h(){se(t.src,n=a[0].image)||v(t,"src",n),v(t,"alt","random image"),v(t,"class","w-full h-full object-cover rounded-[2vh]"),v(t,"draggable","false"),v(e,"class","w-full h-full p-[1vh] pb-[7.5vh]"),v(e,"style",`aspect-ratio: ${be}`),v(r,"class","emoji absolute bottom-0 left-0 right-0 flex justify-center items-center text-[5vh] transform origin-center ")},m(d,u){Y(d,e,u),w(e,t),Y(d,s,u),Y(d,r,u),w(r,l),f||(o=K(r,"click",ve(a[2])),f=!0)},p(d,u){u&1&&!se(t.src,n=d[0].image)&&v(t,"src",n),u&1&&i!==(i=(d[0].emoji||"이모지 입력")+"")&&q(l,i)},d(d){d&&(_(e),_(s),_(r)),f=!1,o()}}}function Qe(a){let e,t,n=a[0].back+"",s,r,i;return{c(){e=E("div"),t=E("p"),s=z(n),this.h()},l(l){e=C(l,"DIV",{class:!0});var f=M(e);t=C(f,"P",{class:!0});var o=M(t);s=Z(o,n),o.forEach(_),f.forEach(_),this.h()},h(){v(t,"class","text-[2.5vh] text-center [transform:rotateZ(-25deg)] "),v(e,"class","w-full h-full flex items-center justify-center p-[3.5vh] ")},m(l,f){Y(l,e,f),w(e,t),w(t,s),r||(i=K(t,"click",ve(a[1])),r=!0)},p(l,f){f&1&&n!==(n=l[0].back+"")&&q(s,n)},d(l){l&&_(e),r=!1,i()}}}function xe(a){let e,t;return e=new ye({props:{card:a[0],$$slots:{back:[Qe],front:[Je]},$$scope:{ctx:a}}}),{c(){A(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,s){N(e,n,s),t=!0},p(n,[s]){const r={};s&1&&(r.card=n[0]),s&9&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function et(a,e,t){let{card:n}=e;const s=()=>{le.set({isOpen:!0,type:"text"})},r=()=>{le.set({isOpen:!0,type:"emoji"})};return a.$$set=i=>{"card"in i&&t(0,n=i.card)},[n,s,r]}class ut extends J{constructor(e){super(),Q(this,e,et,xe,W,{card:0})}}function he(a,e,t){const n=a.slice();return n[2]=e[t],n}function me(a){let e,t,n;var s=a[2].startIcon;function r(i,l){return{}}return s&&(t=G(s,r())),{c(){e=E("div"),t&&A(t.$$.fragment),this.h()},l(i){e=C(i,"DIV",{class:!0});var l=M(e);t&&H(t.$$.fragment,l),l.forEach(_),this.h()},h(){v(e,"class","flex-none")},m(i,l){Y(i,e,l),t&&N(t,e,null),n=!0},p(i,l){if(l&1&&s!==(s=i[2].startIcon)){if(t){O();const f=t;T(f.$$.fragment,1,0,()=>{B(f,1)}),X()}s?(t=G(s,r()),A(t.$$.fragment),y(t.$$.fragment,1),N(t,e,null)):t=null}},i(i){n||(t&&y(t.$$.fragment,i),n=!0)},o(i){t&&T(t.$$.fragment,i),n=!1},d(i){i&&_(e),t&&B(t)}}}function ge(a){let e,t,n,s,r=a[2].endCount&&_e(a);var i=a[2].endIcon;function l(f,o){return{}}return i&&(n=G(i,l())),{c(){e=E("div"),r&&r.c(),t=P(),n&&A(n.$$.fragment),this.h()},l(f){e=C(f,"DIV",{class:!0});var o=M(e);r&&r.l(o),t=S(o),n&&H(n.$$.fragment,o),o.forEach(_),this.h()},h(){v(e,"class","flex-none flex items-center")},m(f,o){Y(f,e,o),r&&r.m(e,null),w(e,t),n&&N(n,e,null),s=!0},p(f,o){if(f[2].endCount?r?r.p(f,o):(r=_e(f),r.c(),r.m(e,t)):r&&(r.d(1),r=null),o&1&&i!==(i=f[2].endIcon)){if(n){O();const d=n;T(d.$$.fragment,1,0,()=>{B(d,1)}),X()}i?(n=G(i,l()),A(n.$$.fragment),y(n.$$.fragment,1),N(n,e,null)):n=null}},i(f){s||(n&&y(n.$$.fragment,f),s=!0)},o(f){n&&T(n.$$.fragment,f),s=!1},d(f){f&&_(e),r&&r.d(),n&&B(n)}}}function _e(a){let e,t=a[2].endCount+"",n;return{c(){e=E("p"),n=z(t),this.h()},l(s){e=C(s,"P",{class:!0});var r=M(e);n=Z(r,t),r.forEach(_),this.h()},h(){v(e,"class","font-normal text-[12px] text-[rgba(56,56,56,0.8)]")},m(s,r){Y(s,e,r),w(e,n)},p(s,r){r&1&&t!==(t=s[2].endCount+"")&&q(n,t)},d(s){s&&_(e)}}}function pe(a){let e,t,n,s=a[2].name+"",r,i,l,f,o,d,u=a[2].startIcon&&me(a),h=a[2].endIcon&&ge(a);return{c(){e=E("button"),u&&u.c(),t=P(),n=E("p"),r=z(s),i=P(),h&&h.c(),l=P(),this.h()},l(g){e=C(g,"BUTTON",{class:!0});var c=M(e);u&&u.l(c),t=S(c),n=C(c,"P",{class:!0});var p=M(n);r=Z(p,s),p.forEach(_),i=S(c),h&&h.l(c),l=S(c),c.forEach(_),this.h()},h(){v(n,"class","flex-auto text-start truncate font-medium text-[14px] text-[#242424]"),v(e,"class","w-full p-2.5 flex justify-start items-center gap-1.5")},m(g,c){Y(g,e,c),u&&u.m(e,null),w(e,t),w(e,n),w(n,r),w(e,i),h&&h.m(e,null),w(e,l),f=!0,o||(d=K(e,"click",function(){Ae(a[2].onClick)&&a[2].onClick.apply(this,arguments)}),o=!0)},p(g,c){a=g,a[2].startIcon?u?(u.p(a,c),c&1&&y(u,1)):(u=me(a),u.c(),y(u,1),u.m(e,t)):u&&(O(),T(u,1,1,()=>{u=null}),X()),(!f||c&1)&&s!==(s=a[2].name+"")&&q(r,s),a[2].endIcon?h?(h.p(a,c),c&1&&y(h,1)):(h=ge(a),h.c(),y(h,1),h.m(e,l)):h&&(O(),T(h,1,1,()=>{h=null}),X())},i(g){f||(y(u),y(h),f=!0)},o(g){T(u),T(h),f=!1},d(g){g&&_(e),u&&u.d(),h&&h.d(),o=!1,d()}}}function tt(a){let e,t,n,s=ie(a[0].optionList),r=[];for(let l=0;l<s.length;l+=1)r[l]=pe(he(a,s,l));const i=l=>T(r[l],1,1,()=>{r[l]=null});return{c(){e=E("div"),t=E("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=C(l,"DIV",{class:!0});var f=M(e);t=C(f,"DIV",{class:!0});var o=M(t);for(let d=0;d<r.length;d+=1)r[d].l(o);o.forEach(_),f.forEach(_),this.h()},h(){v(t,"class","h-full w-full py-6 flex flex-col justify-start items-center"),v(e,"class","w-full h-full px-6 py-4 flex justify-center items-center")},m(l,f){Y(l,e,f),w(e,t);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null);n=!0},p(l,f){if(f&1){s=ie(l[0].optionList);let o;for(o=0;o<s.length;o+=1){const d=he(l,s,o);r[o]?(r[o].p(d,f),y(r[o],1)):(r[o]=pe(d),r[o].c(),y(r[o],1),r[o].m(t,null))}for(O(),o=s.length;o<r.length;o+=1)i(o);X()}},i(l){if(!n){for(let f=0;f<s.length;f+=1)y(r[f]);n=!0}},o(l){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)T(r[f]);n=!1},d(l){l&&_(e),Oe(r,l)}}}function rt(a){let e,t;return e=new ye({props:{card:a[0],$$slots:{front:[tt]},$$scope:{ctx:a}}}),e.$on("dropped",a[1]),{c(){A(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,s){N(e,n,s),t=!0},p(n,[s]){const r={};s&1&&(r.card=n[0]),s&33&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function at(a,e,t){let{card:n}=e;function s(r){Xe.call(this,a,r)}return a.$$set=r=>{"card"in r&&t(0,n=r.card)},[n,s]}class dt extends J{constructor(e){super(),Q(this,e,at,rt,W,{card:0})}}export{ye as C,dt as a,ut as b};
