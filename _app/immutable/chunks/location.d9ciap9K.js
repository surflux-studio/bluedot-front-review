const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./web.Z8duFRDk.js","./units.BMbtY17E.js","./entry.BV8Inj_p.js","./scheduler.BjRrIjTN.js","./preload-helper.D6kgxu3v.js","./web.BDSZ-Dkh.js"])))=>i.map(i=>d[i]);
var sn=Object.defineProperty;var on=(n,t,r)=>t in n?sn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var b=(n,t,r)=>on(n,typeof t!="symbol"?t+"":t,r);import{c as p,C as an}from"./units.BMbtY17E.js";import{_ as H}from"./preload-helper.D6kgxu3v.js";function Vn(n,t,r){return Math.min(Math.max(n,t),r)}function pn(n,t,r,s,i,o){const a=i-r,c=o-s;if(a!==0||c!==0){const e=((n-r)*a+(t-s)*c)/(a*a+c*c);e>1?(r=i,s=o):e>0&&(r+=a*e,s+=c*e)}return cn(n,t,r,s)}function cn(n,t,r,s){const i=r-n,o=s-t;return i*i+o*o}function Hn(n){const t=n.length;for(let s=0;s<t;s++){let i=s,o=Math.abs(n[s][s]);for(let c=s+1;c<t;c++){const e=Math.abs(n[c][s]);e>o&&(o=e,i=c)}if(o===0)return null;const a=n[i];n[i]=n[s],n[s]=a;for(let c=s+1;c<t;c++){const e=-n[c][s]/n[s][s];for(let u=s;u<t+1;u++)s==u?n[c][u]=0:n[c][u]+=e*n[s][u]}}const r=new Array(t);for(let s=t-1;s>=0;s--){r[s]=n[s][t]/n[s][s];for(let i=s-1;i>=0;i--)n[i][t]-=n[i][s]*r[s]}return r}function O(n){return n*Math.PI/180}function en(n,t){const r=n%t;return r*t<0?r+t:r}function Jn(n,t,r){return n+r*(t-n)}function N(n,t){const r=Math.pow(10,t);return Math.round(n*r)/r}function kn(n,t){return Math.round(N(n,t))}function Zn(n,t){return Math.floor(N(n,t))}function zn(n,t){return Math.ceil(N(n,t))}const un={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class J{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||un[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const S=6378137,_=Math.PI*S,fn=[-_,-_,_,_],ln=[-180,-85,180,85],G=S*Math.log(Math.tan(Math.PI/2));class m extends J{constructor(t){super({code:t,units:"m",extent:fn,global:!0,worldExtent:ln,getPointResolution:function(r,s){return r/Math.cosh(s[1]/S)}})}}const q=[new m("EPSG:3857"),new m("EPSG:102100"),new m("EPSG:102113"),new m("EPSG:900913"),new m("http://www.opengis.net/def/crs/EPSG/0/3857"),new m("http://www.opengis.net/gml/srs/epsg.xml#3857")];function hn(n,t,r,s){const i=n.length;r=r>1?r:2,s=s??r,t===void 0&&(r>2?t=n.slice():t=new Array(i));for(let o=0;o<i;o+=s){t[o]=_*n[o]/180;let a=S*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));a>G?a=G:a<-G&&(a=-G),t[o+1]=a}return t}function gn(n,t,r,s){const i=n.length;r=r>1?r:2,s=s??r,t===void 0&&(r>2?t=n.slice():t=new Array(i));for(let o=0;o<i;o+=s)t[o]=180*n[o]/_,t[o+1]=360*Math.atan(Math.exp(n[o+1]/S))/Math.PI-90;return t}const dn=6378137,Y=[-180,-90,180,90],En=Math.PI*dn/180;class E extends J{constructor(t,r){super({code:t,units:"degrees",extent:Y,axisOrientation:r,global:!0,metersPerUnit:En,worldExtent:Y})}}const D=[new E("CRS:84"),new E("EPSG:4326","neu"),new E("urn:ogc:def:crs:OGC:1.3:CRS84"),new E("urn:ogc:def:crs:OGC:2:84"),new E("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new E("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new E("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let A={};function wn(n){return A[n]||A[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Pn(n,t){A[n]=t}let M={};function C(n,t,r){const s=n.getCode(),i=t.getCode();s in M||(M[s]={}),M[s][i]=r}function mn(n,t){let r;return n in M&&t in M[n]&&(r=M[n][t]),r}const f={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Qn(n){const t=k();for(let r=0,s=n.length;r<s;++r)Tn(t,n[r]);return t}function _n(n,t,r){const s=Math.min.apply(null,n),i=Math.min.apply(null,t),o=Math.max.apply(null,n),a=Math.max.apply(null,t);return I(s,i,o,a,r)}function jn(n,t,r){return r?(r[0]=n[0]-t,r[1]=n[1]-t,r[2]=n[2]+t,r[3]=n[3]+t,r):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function xn(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function nt(n,t,r){let s,i;return t<n[0]?s=n[0]-t:n[2]<t?s=t-n[2]:s=0,r<n[1]?i=n[1]-r:n[3]<r?i=r-n[3]:i=0,s*s+i*i}function tt(n,t){return Mn(n,t[0],t[1])}function rt(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function Mn(n,t,r){return n[0]<=t&&t<=n[2]&&n[1]<=r&&r<=n[3]}function B(n,t){const r=n[0],s=n[1],i=n[2],o=n[3],a=t[0],c=t[1];let e=f.UNKNOWN;return a<r?e=e|f.LEFT:a>i&&(e=e|f.RIGHT),c<s?e=e|f.BELOW:c>o&&(e=e|f.ABOVE),e===f.UNKNOWN&&(e=f.INTERSECTING),e}function k(){return[1/0,1/0,-1/0,-1/0]}function I(n,t,r,s,i){return i?(i[0]=n,i[1]=t,i[2]=r,i[3]=s,i):[n,t,r,s]}function F(n){return I(1/0,1/0,-1/0,-1/0,n)}function st(n,t){const r=n[0],s=n[1];return I(r,s,r,s,t)}function it(n,t,r,s,i){const o=F(i);return yn(o,n,t,r,s)}function ot(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function at(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function Tn(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function yn(n,t,r,s,i){for(;r<s;r+=i)Sn(n,t[r],t[r+1]);return n}function Sn(n,t,r){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],r),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],r)}function ct(n,t){let r;return r=t(Z(n)),r||(r=t(z(n)),r)||(r=t(j(n)),r)||(r=t(Q(n)),r)?r:!1}function et(n){let t=0;return x(n)||(t=T(n)*Cn(n)),t}function Z(n){return[n[0],n[1]]}function z(n){return[n[2],n[1]]}function Rn(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function ut(n,t){let r;if(t==="bottom-left")r=Z(n);else if(t==="bottom-right")r=z(n);else if(t==="top-left")r=Q(n);else if(t==="top-right")r=j(n);else throw new Error("Invalid corner");return r}function ft(n,t,r,s,i){const[o,a,c,e,u,h,g,l]=Gn(n,t,r,s);return I(Math.min(o,c,u,g),Math.min(a,e,h,l),Math.max(o,c,u,g),Math.max(a,e,h,l),i)}function Gn(n,t,r,s){const i=t*s[0]/2,o=t*s[1]/2,a=Math.cos(r),c=Math.sin(r),e=i*a,u=i*c,h=o*a,g=o*c,l=n[0],d=n[1];return[l-e+g,d-u-h,l-e-g,d-u+h,l+e-g,d+u+h,l+e+g,d+u-h,l-e+g,d-u-h]}function Cn(n){return n[3]-n[1]}function lt(n,t,r){const s=r||k();return In(n,t)?(n[0]>t[0]?s[0]=n[0]:s[0]=t[0],n[1]>t[1]?s[1]=n[1]:s[1]=t[1],n[2]<t[2]?s[2]=n[2]:s[2]=t[2],n[3]<t[3]?s[3]=n[3]:s[3]=t[3]):F(s),s}function Q(n){return[n[0],n[3]]}function j(n){return[n[2],n[3]]}function T(n){return n[2]-n[0]}function In(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function x(n){return n[2]<n[0]||n[3]<n[1]}function ht(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function gt(n,t,r){let s=!1;const i=B(n,t),o=B(n,r);if(i===f.INTERSECTING||o===f.INTERSECTING)s=!0;else{const a=n[0],c=n[1],e=n[2],u=n[3],h=t[0],g=t[1],l=r[0],d=r[1],R=(d-g)/(l-h);let w,P;o&f.ABOVE&&!(i&f.ABOVE)&&(w=l-(d-u)/R,s=w>=a&&w<=e),!s&&o&f.RIGHT&&!(i&f.RIGHT)&&(P=d-(l-e)*R,s=P>=c&&P<=u),!s&&o&f.BELOW&&!(i&f.BELOW)&&(w=l-(d-c)/R,s=w>=a&&w<=e),!s&&o&f.LEFT&&!(i&f.LEFT)&&(P=d-(l-a)*R,s=P>=c&&P<=u)}return s}function On(n,t,r,s){if(x(n))return F(r);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],t(i,i,2);const o=[],a=[];for(let c=0,e=i.length;c<e;c+=2)o.push(i[c]),a.push(i[c+1]);return _n(o,a,r)}function Ln(n,t){const r=t.getExtent(),s=Rn(n);if(t.canWrapX()&&(s[0]<r[0]||s[0]>=r[2])){const i=T(r),a=Math.floor((s[0]-r[0])/i)*i;n[0]-=a,n[2]-=a}return n}function dt(n,t,r){if(t.canWrapX()){const s=t.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[s[0],n[1],s[2],n[3]]];Ln(n,t);const i=T(s);if(T(n)>i&&!r)return[[s[0],n[1],s[2],n[3]]];if(n[0]<s[0])return[[n[0]+i,n[1],s[2],n[3]],[s[0],n[1],n[2],n[3]]];if(n[2]>s[2])return[[n[0],n[1],s[2],n[3]],[s[0],n[1],n[2]-i,n[3]]]}return[n]}function Et(n,t){return n[0]+=+t[0],n[1]+=+t[1],n}function An(n,t){let r=!0;for(let s=n.length-1;s>=0;--s)if(n[s]!=t[s]){r=!1;break}return r}function wt(n,t){const r=Math.cos(t),s=Math.sin(t),i=n[0]*r-n[1]*s,o=n[1]*r+n[0]*s;return n[0]=i,n[1]=o,n}function Pt(n,t){return n[0]*=t,n[1]*=t,n}function mt(n,t){if(t.canWrapX()){const r=T(t.getExtent()),s=Un(n,t,r);s&&(n[0]-=s*r)}return n}function Un(n,t,r){const s=t.getExtent();let i=0;return t.canWrapX()&&(n[0]<s[0]||n[0]>s[2])&&(r=r||T(s),i=Math.floor((n[0]-s[0])/r)),i}const Nn=63710088e-1;function $(n,t,r){r=r||Nn;const s=O(n[1]),i=O(t[1]),o=(i-s)/2,a=O(t[0]-n[0])/2,c=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(s)*Math.cos(i);return 2*r*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function Fn(...n){console.warn(...n)}let U=!0;function Wn(n){U=!1}function W(n,t){if(t!==void 0){for(let r=0,s=n.length;r<s;++r)t[r]=n[r];t=t}else t=n.slice();return t}function nn(n,t){if(t!==void 0&&n!==t){for(let r=0,s=n.length;r<s;++r)t[r]=n[r];n=t}return n}function Xn(n){Pn(n.getCode(),n),C(n,n,W)}function bn(n){n.forEach(Xn)}function y(n){return typeof n=="string"?wn(n):n||null}function _t(n,t,r,s){n=y(n);let i;const o=n.getPointResolutionFunc();if(o)i=o(t,r);else{const a=n.getUnits();if(a=="degrees"&&!s||s=="degrees")i=t;else{const c=X(n,y("EPSG:4326"));if(c===nn&&a!=="degrees")i=t*n.getMetersPerUnit();else{let u=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];u=c(u,u,2);const h=$(u.slice(0,2),u.slice(2,4)),g=$(u.slice(4,6),u.slice(6,8));i=(h+g)/2}const e=n.getMetersPerUnit();e!==void 0&&(i/=e)}}return i}function K(n){bn(n),n.forEach(function(t){n.forEach(function(r){t!==r&&C(t,r,W)})})}function qn(n,t,r,s){n.forEach(function(i){t.forEach(function(o){C(i,o,r),C(o,i,s)})})}function Mt(n,t){return n?typeof n=="string"?y(n):n:y(t)}function Tt(n,t){return Wn(),rn(n,"EPSG:4326","EPSG:3857")}function yt(n,t){const r=rn(n,"EPSG:3857","EPSG:4326"),s=r[0];return(s<-180||s>180)&&(r[0]=en(s+180,360)-180),r}function St(n,t){if(n===t)return!0;const r=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||X(n,t)===W)&&r}function X(n,t){const r=n.getCode(),s=t.getCode();let i=mn(r,s);return i||(i=nn),i}function tn(n,t){const r=y(n),s=y(t);return X(r,s)}function rn(n,t,r){return tn(t,r)(n,void 0,n.length)}function Rt(n,t,r,s){const i=tn(t,r);return On(n,i,void 0)}let Yn=null;function Gt(){return Yn}function Ct(n,t){return n}function It(n,t){return U&&!An(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(U=!1,Fn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Ot(n,t){return n}function Lt(n,t){return n}function Dn(){K(q),K(D),qn(D,q,hn,gn)}Dn();const v=p("Preferences",{web:()=>H(()=>import("./web.Z8duFRDk.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(n=>new n.PreferencesWeb)}),V=p("Geolocation",{web:()=>H(()=>import("./web.BDSZ-Dkh.js"),__vite__mapDeps([5,1,2,3,4]),import.meta.url).then(n=>new n.GeolocationWeb)});let L={latitude:0,longitude:0,accuracy:0,altitudeAccuracy:void 0,altitude:null,speed:null,heading:null};class Bn{static async getCurrentOrLastLocation(){const t=an.isNativePlatform()?await this.checkAndRequestGeolocationPermission():{location:"granted"};if((t==null?void 0:t.location)==="granted")try{const r=await V.getCurrentPosition(),{latitude:s,longitude:i,accuracy:o,altitudeAccuracy:a,altitude:c,speed:e,heading:u}=r.coords;return L={latitude:s,longitude:i,accuracy:o,altitudeAccuracy:a,altitude:c,speed:e,heading:u},this.saveLastKnownLocation(L),L}catch(r){return console.warn(r),this.getLastKnownLocation()}else return this.getLastKnownLocation()}static async checkAndRequestGeolocationPermission(){try{return await V.requestPermissions({permissions:["location"]})}catch{return null}}static saveLastKnownLocation(t){v.set({key:this.LAST_LOCATION_KEY,value:JSON.stringify(t)})}static async getLastKnownLocation(){const{value:t}=await v.get({key:this.LAST_LOCATION_KEY});return t?JSON.parse(t):null}}b(Bn,"LAST_LOCATION_KEY","last_known_location");export{_t as $,Mt as A,It as B,Lt as C,en as D,wt as E,Et as F,Ct as G,Ot as H,ft as I,An as J,Wn as K,Bn as L,un as M,mt as N,lt as O,Pt as P,ot as Q,xn as R,Fn as S,Q as T,j as U,z as V,Z as W,et as X,Qn as Y,Tn as Z,rn as _,Rt as a,tt as a0,at as a1,Hn as a2,dt as a3,I as a4,zn as a5,Zn as a6,ut as a7,St as a8,jn as a9,kn as aa,B as ab,f as ac,N as ad,X as ae,Gt as af,Ln as ag,J as ah,Cn as b,Vn as c,O as d,k as e,Tt as f,T as g,F as h,y as i,tn as j,it as k,Rn as l,Jn as m,pn as n,nt as o,st as p,Mn as q,ht as r,cn as s,yt as t,ct as u,yn as v,In as w,rt as x,gt as y,x as z};
