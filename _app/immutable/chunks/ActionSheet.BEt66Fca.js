import{R as J,S as ce,s as de,v as K,i as te,f as D,k as he,E as ge,G as me,w as pe,e as C,a as _e,c as M,b as O,g as we,m as H,H as A,I as U,h as L,r as Y,x as be,Q as X,z as ke,A as ye,B as Ee,u as ve}from"./scheduler.Bw1HVZ4I.js";import{n as Ye,l as He,S as De,i as Pe,t as I,g as Se,b as G,f as Be}from"./index.B-tLs4nj.js";import{a as k,c as Te}from"./clickOutside.CvRprAPB.js";import{w as Ce}from"./entry.BXNUqQsT.js";/* empty css                                                  */function Z(e){return Object.prototype.toString.call(e)==="[object Date]"}function N(e,n){if(e===n||e!==e)return()=>e;const t=typeof e;if(t!==typeof n||Array.isArray(e)!==Array.isArray(n))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const s=n.map((r,i)=>N(e[i],r));return r=>s.map(i=>i(r))}if(t==="object"){if(!e||!n)throw new Error("Object cannot be null");if(Z(e)&&Z(n)){e=e.getTime(),n=n.getTime();const i=n-e;return f=>new Date(e+f*i)}const s=Object.keys(n),r={};return s.forEach(i=>{r[i]=N(e[i],n[i])}),i=>{const f={};return s.forEach(g=>{f[g]=r[g](i)}),f}}if(t==="number"){const s=n-e;return r=>e+r*s}throw new Error(`Cannot interpolate ${t} values`)}function Me(e,n={}){const t=Ce(e);let s,r=e;function i(f,g){if(e==null)return t.set(e=f),Promise.resolve();r=f;let a=s,d=!1,{delay:m=0,duration:p=400,easing:c=ce,interpolate:l=N}=J(J({},n),g);if(p===0)return a&&(a.abort(),a=null),t.set(e=r),Promise.resolve();const u=Ye()+m;let h;return s=He(_=>{if(_<u)return!0;d||(h=l(e,f),typeof p=="function"&&(p=p(e,f)),d=!0),a&&(a.abort(),a=null);const w=_-u;return w>p?(t.set(e=f),!1):(t.set(e=h(c(w/p))),!0)}),s.promise}return{set:i,update:(f,g)=>i(f(r,e),g),subscribe:t.subscribe}}function x(e){let n,t,s,r,i,f,g,a,d,m;const p=e[19].default,c=pe(p,e,e[18],null);return{c(){n=C("div"),t=C("div"),s=C("div"),r=_e(),i=C("div"),c&&c.c(),this.h()},l(l){n=M(l,"DIV",{class:!0});var u=O(n);t=M(u,"DIV",{class:!0,style:!0});var h=O(t);s=M(h,"DIV",{class:!0}),O(s).forEach(D),r=we(h),i=M(h,"DIV",{class:!0});var _=O(i);c&&c.l(_),_.forEach(D),h.forEach(D),u.forEach(D),this.h()},h(){H(s,"class","handle svelte-ism897"),H(i,"class","content svelte-ism897"),H(t,"class",f=A(`sheet absolute bottom-0 w-full ${e[2]} 
      rounded-t-xl touch-pan-y will-change-transform 
      flex flex-col min-h-full h-full shadow-top`)+" svelte-ism897"),U(t,"transform","translateY("+e[5]+"px)"),H(n,"class",g=A(`backdrop fixed top-0 left-0 right-0 bottom-0 ${e[1]} z-30 overflow-hidden touch-none`)+" svelte-ism897")},m(l,u){te(l,n,u),L(n,t),L(t,s),L(t,r),L(t,i),c&&c.m(i,null),a=!0,d||(m=[Y(t,"touchstart",e[8],!0),Y(t,"touchmove",e[9],!0),Y(t,"touchend",e[10],{passive:!0,capture:!0}),Y(t,"mousedown",e[11],!0),be(Te.call(null,t)),Y(t,"outsideclick",e[20]),Y(t,"transitionend",e[14]),Y(n,"click",X(e[12])),Y(n,"touchstart",X(e[13]))],d=!0)},p(l,u){c&&c.p&&(!a||u[0]&262144)&&ke(c,p,l,l[18],a?Ee(p,l[18],u,null):ye(l[18]),null),(!a||u[0]&4&&f!==(f=A(`sheet absolute bottom-0 w-full ${l[2]} 
      rounded-t-xl touch-pan-y will-change-transform 
      flex flex-col min-h-full h-full shadow-top`)+" svelte-ism897"))&&H(t,"class",f),(!a||u[0]&32)&&U(t,"transform","translateY("+l[5]+"px)"),(!a||u[0]&2&&g!==(g=A(`backdrop fixed top-0 left-0 right-0 bottom-0 ${l[1]} z-30 overflow-hidden touch-none`)+" svelte-ism897"))&&H(n,"class",g)},i(l){a||(I(c,l),a=!0)},o(l){G(c,l),a=!1},d(l){l&&D(n),c&&c.d(l),d=!1,ve(m)}}}function Oe(e){let n,t,s=e[0]&&x(e);return{c(){s&&s.c(),n=K()},l(r){s&&s.l(r),n=K()},m(r,i){s&&s.m(r,i),te(r,n,i),t=!0},p(r,i){r[0]?s?(s.p(r,i),i[0]&1&&I(s,1)):(s=x(r),s.c(),I(s,1),s.m(n.parentNode,n)):s&&(Se(),G(s,1,1,()=>{s=null}),Be())},i(r){t||(I(s),t=!0)},o(r){G(s),t=!1},d(r){r&&D(n),s&&s.d(r)}}}let $=10;function ee(e){return Ae(e)}function Ae(e){for(;e&&e!==document.body&&!(e.classList&&e.classList.contains("content"));){const t=window.getComputedStyle(e).overflowY;if((t==="auto"||t==="scroll")&&e.scrollHeight>e.clientHeight)return!0;e=e.parentElement}return!1}function Le(e,n,t){let s,{$$slots:r={},$$scope:i}=n,{backdropBackground:f="bg-[#24242424]"}=n,{sheetBackground:g="bg-[#242424]"}=n,{isOpen:a=!1}=n,{maxHeight:d=null}=n,{defaultHeight:m=null}=n,{onClose:p=()=>{t(0,a=!1)}}=n,c=0,l=0,u=0,h=!1,_=0,w=0,j=0,y=!1,S=!0,z=!1;const b=Me(0,{duration:300,easing:k});he(e,b,o=>t(5,s=o));function V(){w=window.innerHeight,d===null&&t(15,d=w*.97),m===null&&t(16,m=w/2),a&&q()}ge(()=>{console.log("mount sheet"),V(),E(),window.addEventListener("resize",V),a&&q()}),me(()=>{console.log("unmount sheet"),window.removeEventListener("resize",V)});function q(){z=!0,_=m,b.set(w),b.set(w-_,{duration:300,easing:k})}function E(){b.set(w,{duration:300,easing:k}).then(()=>{p()})}function oe(o){ee(o.target)||(h=!0,t(3,y=!1),c=o.touches[0].clientY,j=s)}function se(o){h&&(l=o.touches[0].clientY,u=l-c,Math.abs(u)>$&&(t(3,y=!0),o.preventDefault(),o.stopPropagation()),W())}function ne(){h&&(h=!1,F())}function re(o){o.button===0&&(ee(o.target)||(h=!0,t(3,y=!1),c=o.clientY,j=s,window.addEventListener("mousemove",Q),window.addEventListener("mouseup",R)))}function Q(o){h&&(l=o.clientY,u=l-c,Math.abs(u)>$&&(t(3,y=!0),o.preventDefault(),o.stopPropagation()),W())}function R(o){h&&(h=!1,window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",R),F())}function W(){let o=j+u;const v=w-d;if(o<v){const B=v-o;o=v-B/3}o=Math.min(o,w),b.set(o)}function F(){const o=u;u=0;const v=10,B=s,P=w-d,T=w-m;if(m===d)o>v?E():b.set(T,{duration:200,easing:k});else if(B<P+v)_=d,b.set(P,{duration:200,easing:k});else if(o>v)_===d?(_=m,b.set(T,{duration:200,easing:k})):E();else if(o<-v)_=d,b.set(P,{duration:200,easing:k});else{const fe=(T+P)/2;B<fe?(_=d,b.set(P,{duration:200,easing:k})):(_=m,b.set(T,{duration:200,easing:k}))}setTimeout(()=>{t(3,y=!1)},200)}function ie(o){console.log("click backdrop"),!z&&!y&&o.target===o.currentTarget&&E()}function le(o){console.log("touch backdrop"),o.target===o.currentTarget&&E()}function ae(){z=!1}const ue=o=>{o.preventDefault(),o.stopPropagation(),!y&&!S&&E()};return e.$$set=o=>{"backdropBackground"in o&&t(1,f=o.backdropBackground),"sheetBackground"in o&&t(2,g=o.sheetBackground),"isOpen"in o&&t(0,a=o.isOpen),"maxHeight"in o&&t(15,d=o.maxHeight),"defaultHeight"in o&&t(16,m=o.defaultHeight),"onClose"in o&&t(17,p=o.onClose),"$$scope"in o&&t(18,i=o.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&1&&a&&(t(4,S=!0),setTimeout(()=>{t(4,S=!1)},50)),e.$$.dirty[0]&1&&(a?q():E())},[a,f,g,y,S,s,b,E,oe,se,ne,re,ie,le,ae,d,m,p,i,r,ue]}class Ge extends De{constructor(n){super(),Pe(this,n,Le,Oe,de,{backdropBackground:1,sheetBackground:2,isOpen:0,maxHeight:15,defaultHeight:16,onClose:17},null,[-1,-1])}}export{Ge as A};
