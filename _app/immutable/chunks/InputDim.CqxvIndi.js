import{s as he,w as Ee,x as je,b as E,f as m,o as d,i as A,h as k,n as G,e as b,a as V,c as C,g as M,S as Z,p as T,B as F,J as W,v as Re,y as Ge,T as We,m as de,G as X,t as pe,d as me,j as ge,E as qe,A as ie,H as Q,k as $e,z as Je,M as De,D as Ae}from"./scheduler.BRSuf-vg.js";import{S as _e,i as ve,c as se,b as le,m as ae,t as ue,a as ce,d as fe}from"./index.C48quBYD.js";import{o as Ze,a as Qe}from"./keyboard.DOPPvXXi.js";import{D as Xe}from"./Dim.Cn7ToZFj.js";import{e as N}from"./each.B5sF3ehM.js";import{b as oe,s as Ye}from"./store.Z2N5eHHB.js";import{a as et}from"./index.Bwkn_17u.js";const tt=["local","version","cdnUrl"],nt=["skins"],ot=["compact","flat","shortcodes"];function rt(o,e){return at(o)||lt(o,e)||st(o,e)||it()}function it(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function st(o,e){if(o){if(typeof o=="string")return Be(o,e);var t={}.toString.call(o).slice(8,-1);return t==="Object"&&o.constructor&&(t=o.constructor.name),t==="Map"||t==="Set"?Array.from(o):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Be(o,e):void 0}}function Be(o,e){(e==null||e>o.length)&&(e=o.length);for(var t=0,n=Array(e);t<e;t++)n[t]=o[t];return n}function lt(o,e){var t=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(t!=null){var n,r,s,i,a=[],l=!0,c=!1;try{if(s=(t=t.call(o)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw r}}return a}}function at(o){if(Array.isArray(o))return o}function Ie(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),t.push.apply(t,n)}return t}function Ke(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ie(Object(t),!0).forEach(function(n){ut(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):Ie(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function ut(o,e,t){return(e=ct(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function ct(o){var e=ft(o,"string");return typeof e=="symbol"?e:e+""}function ft(o,e){if(typeof o!="object"||!o)return o;var t=o[Symbol.toPrimitive];if(t!==void 0){var n=t.call(o,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(o)}function be(o,e){if(o==null)return{};var t,n,r=ht(o,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(o,t)&&(r[t]=o[t])}return r}function ht(o,e){if(o==null)return{};var t={};for(var n in o)if({}.hasOwnProperty.call(o,n)){if(e.indexOf(n)>=0)continue;t[n]=o[n]}return t}function dt(o,e,t){let n=`https://cdn.jsdelivr.net/npm/emojibase-data@${e}/${o}`;return typeof t=="function"?n=t(o,e):typeof t=="string"&&(n=`${t}/${o}`),n}async function Ce(o,e={}){const t=e.local,n=t===void 0?!1:t,r=e.version,s=r===void 0?"latest":r,i=e.cdnUrl,a=be(e,tt),l=dt(o,s,i),c=n?localStorage:sessionStorage,u=`emojibase/${s}/${o}`,p=c.getItem(u);if(p)return JSON.parse(p);const w=await fetch(l,Ke({credentials:"omit",mode:"cors",redirect:"error"},a));if(!w.ok)throw new Error("Failed to load Emojibase dataset.");const B=await w.json();try{c.setItem(u,JSON.stringify(B))}catch{}return B}const pt={discord:"joypixels",slack:"iamcal"};async function Oe(o,e,t){return Ce(`${o}/shortcodes/${pt[e]??e}.json`,t)}function K(o,e){if(e.length===0)return o;const t=new Set(o.shortcodes);return e.forEach(n=>{const r=n[o.hexcode];Array.isArray(r)?r.forEach(s=>t.add(s)):r&&t.add(r)}),o.shortcodes=[...t],o.skins&&o.skins.forEach(n=>{K(n,e)}),o}function mt(o,e=[]){const t=[];return o.forEach(n=>{if(n.skins){const r=n.skins,s=be(n,nt);t.push(K(s,e)),r.forEach(i=>{const a=Ke({},i);s.tags&&(a.tags=[...s.tags]),t.push(K(a,e))})}else t.push(K(n,e))}),t}function gt(o,e){return e.length===0||o.forEach(t=>{K(t,e)}),o}async function Te(o,e={}){const t=e.compact,n=t===void 0?!1:t,r=e.flat,s=r===void 0?!1:r,i=e.shortcodes,a=i===void 0?[]:i,l=be(e,ot),c=await Ce(`${o}/${n?"compact":"data"}.json`,l);let u=[];return a.length>0&&(u=await Promise.all(a.map(p=>{let w;if(p.includes("/")){const B=p.split("/"),L=rt(B,2),S=L[0],x=L[1];w=Oe(S,x,l)}else w=Oe(o,p,l);return w.catch(()=>({}))}))),s?mt(c,u):gt(c,u)}async function _t(o,e){return Ce(`${o}/messages.json`,e)}function vt(o){let e,t;return{c(){e=Ee("svg"),t=Ee("path"),this.h()},l(n){e=je(n,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var r=E(e);t=je(r,"path",{d:!0,fill:!0}),E(t).forEach(m),r.forEach(m),this.h()},h(){d(t,"d","M25.3183 6H10.6C10.2189 6.00049 9.84232 6.08586 9.49524 6.25042C9.14815 6.41497 8.83856 6.65495 8.58708 6.95437C8.54355 7.00635 8.5053 7.0629 8.47292 7.12313L3.13692 15.4844C3.04734 15.6401 3 15.8183 3 16C3 16.1817 3.04734 16.36 3.13692 16.5156L8.46515 24.8638C8.49865 24.9281 8.53873 24.9885 8.58469 25.0438C8.83614 25.3437 9.14585 25.5841 9.49316 25.749C9.84047 25.9139 10.2174 25.9995 10.5988 26H25.3183C26.0293 25.9992 26.7109 25.7034 27.2137 25.1777C27.7164 24.652 27.9992 23.9391 28 23.1956V8.80437C27.9992 8.06086 27.7164 7.34804 27.2137 6.8223C26.7109 6.29655 26.0293 6.00083 25.3183 6ZM22.0233 19.4375C22.1142 19.5299 22.1867 19.6402 22.2364 19.7621C22.2862 19.884 22.3123 20.0151 22.3132 20.1476C22.3141 20.2802 22.2898 20.4116 22.2416 20.5342C22.1935 20.6569 22.1226 20.7683 22.033 20.862C21.9433 20.9557 21.8367 21.0298 21.7194 21.0801C21.6021 21.1303 21.4765 21.1557 21.3497 21.1547C21.223 21.1537 21.0977 21.1263 20.9811 21.0743C20.8646 21.0222 20.7591 20.9464 20.6708 20.8512L17.4613 17.5L14.2536 20.8531C14.0741 21.0408 13.8306 21.1463 13.5767 21.1463C13.3229 21.1463 13.0794 21.0408 12.8999 20.8531C12.7204 20.6654 12.6195 20.4108 12.6195 20.1453C12.6195 19.8798 12.7204 19.6252 12.8999 19.4375L16.1064 16.0831L12.8975 12.7275C12.718 12.5394 12.6174 12.2846 12.6177 12.0189C12.618 11.7532 12.7191 11.4986 12.899 11.3109C13.0788 11.1233 13.3225 11.018 13.5766 11.0183C13.8306 11.0186 14.0742 11.1244 14.2536 11.3125L17.4625 14.6687L20.6702 11.3125C20.8496 11.1249 21.093 11.0194 21.3467 11.0194C21.6005 11.0194 21.8439 11.1249 22.0233 11.3125C22.2027 11.5001 22.3035 11.7546 22.3035 12.02C22.3035 12.2854 22.2027 12.5399 22.0233 12.7275L18.8138 16.0831L22.0233 19.4375Z"),d(t,"fill","#757475"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","32"),d(e,"height","32"),d(e,"viewBox","0 0 32 32"),d(e,"fill","none")},m(n,r){A(n,e,r),k(e,t)},p:G,i:G,o:G,d(n){n&&m(e)}}}class bt extends _e{constructor(e){super(),ve(this,e,null,vt,he,{})}}function Le(o,e,t){const n=o.slice();return n[26]=e[t],n}function Se(o,e,t){const n=o.slice();return n[34]=e[t],n}function xe(o,e,t){const n=o.slice();return n[29]=e[t][0],n[30]=e[t][1],n}function Pe(o,e,t){const n=o.slice();return n[34]=e[t],n}function re(o){const e=o.slice(),t=`group-${e[29]}`;return e[33]=t,e}function Ve(o){let e,t="✕",n,r;return{c(){e=b("button"),e.textContent=t,this.h()},l(s){e=C(s,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),de(e)!=="svelte-1e6u548"&&(e.textContent=t),this.h()},h(){d(e,"class","absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"),d(e,"title","검색어 지우기")},m(s,i){A(s,e,i),n||(r=T(e,"click",F(W(o[9]))),n=!0)},p:G,d(s){s&&m(e),n=!1,r()}}}function Ct(o){let e,t=N(o[2]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Me(Se(o,t,r));return{c(){e=b("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=C(r,"DIV",{class:!0});var s=E(e);for(let i=0;i<n.length;i+=1)n[i].l(s);s.forEach(m),this.h()},h(){d(e,"class","grid grid-cols-7 gap-2")},m(r,s){A(r,e,s);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(r,s){if(s[0]&2052){t=N(r[2]);let i;for(i=0;i<t.length;i+=1){const a=Se(r,t,i);n[i]?n[i].p(a,s):(n[i]=Me(a),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(r){r&&m(e),X(n,r)}}}function yt(o){let e,t=N(Object.entries(o[0]).sort(o[15])),n=[];for(let r=0;r<t.length;r+=1)n[r]=ze(xe(o,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Q()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Q()},m(r,s){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(r,s);A(r,e,s)},p(r,s){if(s[0]&2049){t=N(Object.entries(r[0]).sort(r[15]));let i;for(i=0;i<t.length;i+=1){const a=xe(r,t,i);n[i]?n[i].p(a,s):(n[i]=ze(a),n[i].c(),n[i].m(e.parentNode,e))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(r){r&&m(e),X(n,r)}}}function kt(o){let e,t="<p>검색 결과가 없습니다.</p>";return{c(){e=b("div"),e.innerHTML=t,this.h()},l(n){e=C(n,"DIV",{class:!0,"data-svelte-h":!0}),de(e)!=="svelte-1sbvlnv"&&(e.innerHTML=t),this.h()},h(){d(e,"class","flex justify-center items-center h-full")},m(n,r){A(n,e,r)},p:G,d(n){n&&m(e)}}}function wt(o){let e,t="<p>이모지 로딩 중...</p>";return{c(){e=b("div"),e.innerHTML=t,this.h()},l(n){e=C(n,"DIV",{class:!0,"data-svelte-h":!0}),de(e)!=="svelte-n7g9l7"&&(e.innerHTML=t),this.h()},h(){d(e,"class","flex justify-center items-center h-full")},m(n,r){A(n,e,r)},p:G,d(n){n&&m(e)}}}function Me(o){let e,t=o[34].unicode+"",n,r,s,i,a;function l(){return o[17](o[34])}return{c(){e=b("div"),n=pe(t),r=V(),this.h()},l(c){e=C(c,"DIV",{class:!0,title:!0});var u=E(e);n=me(u,t),r=M(u),u.forEach(m),this.h()},h(){d(e,"class","text-3xl pointer-events-auto hover:bg-gray-100 p-1 rounded cursor-pointer text-center"),d(e,"title",s=o[34].label)},m(c,u){A(c,e,u),k(e,n),k(e,r),i||(a=T(e,"click",F(W(l)),!0),i=!0)},p(c,u){o=c,u[0]&4&&t!==(t=o[34].unicode+"")&&ge(n,t),u[0]&4&&s!==(s=o[34].label)&&d(e,"title",s)},d(c){c&&m(e),i=!1,a()}}}function He(o){let e,t,n,r,s,i=N(o[30]),a=[];for(let l=0;l<i.length;l+=1)a[l]=Ne(Pe(o,i,l));return{c(){e=b("hr"),n=V(),r=b("div");for(let l=0;l<a.length;l+=1)a[l].c();s=V(),this.h()},l(l){e=C(l,"HR",{id:!0,class:!0}),n=M(l),r=C(l,"DIV",{class:!0});var c=E(r);for(let u=0;u<a.length;u+=1)a[u].l(c);s=M(c),c.forEach(m),this.h()},h(){d(e,"id",t=o[33]),d(e,"class","opacity-0 h-0 m-0 p-0"),d(r,"class","grid grid-cols-7 gap-2 mb-4")},m(l,c){A(l,e,c),A(l,n,c),A(l,r,c);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(r,null);k(r,s)},p(l,c){if(c[0]&1&&t!==(t=l[33])&&d(e,"id",t),c[0]&2049){i=N(l[30]);let u;for(u=0;u<i.length;u+=1){const p=Pe(l,i,u);a[u]?a[u].p(p,c):(a[u]=Ne(p),a[u].c(),a[u].m(r,s))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},d(l){l&&(m(e),m(n),m(r)),X(a,l)}}}function Ne(o){let e,t=o[34].unicode+"",n,r,s,i;function a(){return o[16](o[34])}return{c(){e=b("div"),n=pe(t),this.h()},l(l){e=C(l,"DIV",{class:!0,title:!0});var c=E(e);n=me(c,t),c.forEach(m),this.h()},h(){d(e,"class","text-3xl pointer-events-auto hover:bg-gray-100 p-1 rounded cursor-pointer text-center"),d(e,"title",r=o[34].label)},m(l,c){A(l,e,c),k(e,n),s||(i=T(e,"click",F(W(a)),!0),s=!0)},p(l,c){o=l,c[0]&1&&t!==(t=o[34].unicode+"")&&ge(n,t),c[0]&1&&r!==(r=o[34].label)&&d(e,"title",r)},d(l){l&&m(e),s=!1,i()}}}function ze(o){let e,t=o[30].length>0&&He(re(o));return{c(){t&&t.c(),e=Q()},l(n){t&&t.l(n),e=Q()},m(n,r){t&&t.m(n,r),A(n,e,r)},p(n,r){n[30].length>0?t?t.p(re(n),r):(t=He(re(n)),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&m(e),t&&t.d(n)}}}function Fe(o){let e,t=N(o[1]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Ue(Le(o,t,r));return{c(){e=b("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=C(r,"DIV",{class:!0});var s=E(e);for(let i=0;i<n.length;i+=1)n[i].l(s);s.forEach(m),this.h()},h(){d(e,"class","flex items-center justify-between overflow-x-auto")},m(r,s){A(r,e,s);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(r,s){if(s[0]&1042){t=N(r[1]);let i;for(i=0;i<t.length;i+=1){const a=Le(r,t,i);n[i]?n[i].p(a,s):(n[i]=Ue(a),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(r){r&&m(e),X(n,r)}}}function Ue(o){let e,t=o[26].label+"",n,r,s,i,a,l;function c(){return o[19](o[26])}return{c(){e=b("div"),n=pe(t),r=V(),this.h()},l(u){e=C(u,"DIV",{class:!0,title:!0});var p=E(e);n=me(p,t),r=M(p),p.forEach(m),this.h()},h(){d(e,"class",s="cursor-pointer px-2 text-xl "+(o[4]===o[26].key?"bg-gray-200 rounded":"")),d(e,"title",i=`Group ${o[26].groupIndex}`)},m(u,p){A(u,e,p),k(e,n),k(e,r),a||(l=T(e,"click",F(W(c))),a=!0)},p(u,p){o=u,p[0]&2&&t!==(t=o[26].label+"")&&ge(n,t),p[0]&18&&s!==(s="cursor-pointer px-2 text-xl "+(o[4]===o[26].key?"bg-gray-200 rounded":""))&&d(e,"class",s),p[0]&2&&i!==(i=`Group ${o[26].groupIndex}`)&&d(e,"title",i)},d(u){u&&m(e),a=!1,l()}}}function Et(o){let e,t,n,r,s,i,a,l,c,u,p,w,B,L,S,x,y=o[3]&&Ve(o);c=new bt({});function z(g,I){return g[5]?wt:g[2].length===0?kt:g[3]?Ct:yt}let H=z(o),j=H(o),f=!o[3]&&Fe(o);return{c(){e=b("div"),t=b("div"),n=b("div"),r=b("div"),s=b("input"),i=V(),y&&y.c(),a=V(),l=b("div"),se(c.$$.fragment),u=V(),p=b("div"),j.c(),w=V(),B=b("div"),f&&f.c(),this.h()},l(g){e=C(g,"DIV",{class:!0});var I=E(e);t=C(I,"DIV",{class:!0});var $=E(t);n=C($,"DIV",{class:!0});var U=E(n);r=C(U,"DIV",{class:!0});var R=E(r);s=C(R,"INPUT",{type:!0,class:!0,placeholder:!0}),i=M(R),y&&y.l(R),R.forEach(m),a=M(U),l=C(U,"DIV",{class:!0});var J=E(l);le(c.$$.fragment,J),J.forEach(m),U.forEach(m),$.forEach(m),u=M(I),p=C(I,"DIV",{class:!0});var Y=E(p);j.l(Y),Y.forEach(m),w=M(I),B=C(I,"DIV",{class:!0});var h=E(B);f&&f.l(h),h.forEach(m),I.forEach(m),this.h()},h(){d(s,"type","text"),d(s,"class","w-full p-1 border border-gray-300 rounded-md pr-8"),d(s,"placeholder","이모지 검색... (한글 가능)"),d(r,"class","grow mr-2 relative"),d(l,"class","shrink-0"),d(n,"class","flex items-center justify-between mb-2"),d(t,"class","sticky top-0 w-full bg-white safe-area-pb p-2 h-16 z-10"),d(p,"class","w-full flex-1 p-2 overflow-y-auto "),d(B,"class","sticky bottom-0 w-full bg-white safe-area-pb p-2 h-14 z-10"),d(e,"class","w-full h-[300px] max-w-[500px] bg-white rounded-t-lg shadow-xl flex flex-col relative p-2 ")},m(g,I){A(g,e,I),k(e,t),k(t,n),k(n,r),k(r,s),Z(s,o[3]),k(r,i),y&&y.m(r,null),k(n,a),k(n,l),ae(c,l,null),k(e,u),k(e,p),j.m(p,null),o[18](p),k(e,w),k(e,B),f&&f.m(B,null),L=!0,S||(x=[T(s,"input",o[13]),T(s,"input",o[8]),T(s,"click",F(W(o[12]))),T(l,"click",F(W(o[14])),!0),T(p,"scroll",o[7])],S=!0)},p(g,I){I[0]&8&&s.value!==g[3]&&Z(s,g[3]),g[3]?y?y.p(g,I):(y=Ve(g),y.c(),y.m(r,null)):y&&(y.d(1),y=null),H===(H=z(g))&&j?j.p(g,I):(j.d(1),j=H(g),j&&(j.c(),j.m(p,null))),g[3]?f&&(f.d(1),f=null):f?f.p(g,I):(f=Fe(g),f.c(),f.m(B,null))},i(g){L||(ue(c.$$.fragment,g),L=!0)},o(g){ce(c.$$.fragment,g),L=!1},d(g){g&&m(e),y&&y.d(),fe(c),j.d(),o[18](null),f&&f.d(),S=!1,Re(x)}}}function jt(o,e,t){let n={},r=[],s=[],i=[],a="",l=null,c=!0,u,p=new Map,w={},B=[];function L(){setTimeout(()=>{p.clear(),r.forEach(h=>{const v=u.querySelector(`#${h.key}`);v&&p.set(h.key,v.offsetTop-u.offsetTop)}),console.log("동적 카테고리 위치 저장됨:",[...p.entries()])},100)}function S(){if(!u)return;const h=u.scrollTop;let v=null;for(const[O,P]of p.entries())P!==void 0&&h>=P-10&&(v=O);if(v===null&&r.length>0){const O=r[0].key,P=p.get(O);P!==void 0&&h<P&&(v=O)}v!==l&&(t(4,l=v),console.log("스크롤로 카테고리 변경:",l))}function x(){if(!a.trim()){t(2,i=s);return}const h=a.toLowerCase();t(2,i=s.filter(v=>{if(v.unicode.toLowerCase().includes(h)||v.label&&v.label.toLowerCase().includes(h)||v.tags&&v.tags.some(_=>_.toLowerCase().includes(h)))return!0;const O=B.find(_=>_.hexcode===v.hexcode);if(O&&(O.label&&O.label.toLowerCase().includes(h)||O.tags&&O.tags.some(_=>_.toLowerCase().includes(h))))return!0;const P=w[`annotation-${v.hexcode}`];if(P&&P.toLowerCase().includes(h))return!0;const q=w[`tags-${v.hexcode}`];return!!(q&&q.toLowerCase().includes(h))}))}function y(){t(3,a=""),x()}function z(h){if(t(4,l=h),p.has(h)){const v=p.get(h);u.scrollTo({top:v,behavior:"smooth"}),console.log(`저장된 위치로 스크롤: ${h}:`,v)}else console.log(`저장된 위치가 없음: ${h}, 위치 다시 계산`),setTimeout(()=>{const v=u.querySelector(`#category-${h}`);if(v&&u){const O=v.offsetTop-u.offsetTop;u.scrollTo({top:O,behavior:"smooth"}),p.set(h,O),console.log(`위치 계산 및 저장: ${h}:`,O)}},10)}async function H(){try{t(5,c=!0),w=await _t("ko"),console.log("한국어 메시지 로드 완료:",Object.keys(w).length);const h=new Map;(await Te("ko",{compact:!0,flat:!0})).forEach(_=>h.set(_.hexcode,_)),s=(await Te("en",{compact:!0,flat:!0})).map(_=>{const D={..._},ee=h.get(_.hexcode);if(ee&&ee.tags){const te=new Set([...D.tags||[],...ee.tags||[]]);D.tags=Array.from(te)}const ye=w[`annotation-${_.hexcode}`];ye&&D.label&&(D.label=`${D.label} (${ye})`);const ke=w[`tags-${_.hexcode}`];if(ke){const te=ke.split(",").map(ne=>ne.trim()),we=new Set(D.tags||[]);te.forEach(ne=>we.add(ne)),D.tags=Array.from(we)}return D}).sort((_,D)=>_.group===void 0&&D.group===void 0?0:_.group===void 0?1:D.group===void 0?-1:_.group===D.group?(_.order||0)-(D.order||0):_.group-D.group),t(0,n={}),t(1,r=[]);let q=-1;for(const _ of s)if(_.group!==void 0&&(n[_.group]||t(0,n[_.group]=[],n),n[_.group].push(_),_.group!==q)){const D=n[_.group][0];D&&D.unicode&&(r.push({key:`group-${_.group}`,label:D.unicode,groupIndex:_.group}),q=_.group)}console.log("생성된 카테고리 헤더:",r),t(2,i=s),console.log("통합 및 그룹핑된 이모지 로드 완료 (EN 기준):",s.length)}catch(h){console.error("이모지 로딩 오류:",h)}finally{t(5,c=!1),L()}}Ge(()=>{H();const h=()=>{L()};return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}});const j=We();function f(h){qe.call(this,o,h)}function g(){a=this.value,t(3,a)}const I=()=>{j("backspace")},$=([h],[v])=>parseInt(h)-parseInt(v),U=h=>{j("emojiClick",{emoji:h})},R=h=>{j("emojiClick",{emoji:h})};function J(h){ie[h?"unshift":"push"](()=>{u=h,t(6,u)})}return[n,r,i,a,l,c,u,S,x,y,z,j,f,g,I,$,U,R,J,h=>z(h.key)]}class Dt extends _e{constructor(e){super(),ve(this,e,jt,Et,he,{},null,[-1,-1])}}function At(o){let e,t,n,r,s,i;return{c(){e=b("div"),t=b("textarea"),this.h()},l(a){e=C(a,"DIV",{class:!0});var l=E(e);t=C(l,"TEXTAREA",{class:!0,inputmode:!0}),E(t).forEach(m),l.forEach(m),this.h()},h(){d(t,"class",n="outline-none ring-0 focus:outline-none focus:ring-0 border-none shadow-none text-white bg-transparent transition-transform duration-300 text-center "+(o[2]==="emoji"&&o[0]?"translate-y-[-125px]":"translate-y-0")+" caret-white w-full mx-12 min-h-6"),d(t,"inputmode",r=o[2]==="emoji"?"none":"text"),De(t,"text-2xl",o[2]==="emoji"),d(e,"class","flex items-center justify-center h-full")},m(a,l){A(a,e,l),k(e,t),Z(t,o[1]),o[12](t),s||(i=[T(t,"input",o[10]),T(t,"click",F(o[9])),T(t,"keydown",o[11]),T(t,"input",Tt)],s=!0)},p(a,l){l&5&&n!==(n="outline-none ring-0 focus:outline-none focus:ring-0 border-none shadow-none text-white bg-transparent transition-transform duration-300 text-center "+(a[2]==="emoji"&&a[0]?"translate-y-[-125px]":"translate-y-0")+" caret-white w-full mx-12 min-h-6")&&d(t,"class",n),l&4&&r!==(r=a[2]==="emoji"?"none":"text")&&d(t,"inputmode",r),l&2&&Z(t,a[1]),l&5&&De(t,"text-2xl",a[2]==="emoji")},d(a){a&&m(e),o[12](null),s=!1,Re(i)}}}function Bt(o){let e,t,n,r,s,i,a;return e=new Xe({props:{className:`
    transition-opacity duration-300 
    ${o[0]?"opacity-100 visible pointer-events-auto":"opacity-0 pointer-events-none"}
    ${o[3]?"visible":"invisible"}
  `,$$slots:{default:[At]},$$scope:{ctx:o}}}),e.$on("click",o[13]),s=new Dt({}),s.$on("backspace",o[6]),s.$on("emojiClick",o[7]),{c(){se(e.$$.fragment),t=V(),n=b("div"),r=b("div"),se(s.$$.fragment),this.h()},l(l){le(e.$$.fragment,l),t=M(l),n=C(l,"DIV",{class:!0});var c=E(n);r=C(c,"DIV",{class:!0});var u=E(r);le(s.$$.fragment,u),u.forEach(m),c.forEach(m),this.h()},h(){d(r,"class","transition-transform duration-300"),d(n,"class",i="fixed bottom-0 w-full flex items-center justify-center z-[999] transition-transform duration-300 "+(o[0]?"translate-y-0":"translate-y-[330px]")+" "+(o[2]==="emoji"&&o[3]?"visible":"invisible"))},m(l,c){ae(e,l,c),A(l,t,c),A(l,n,c),k(n,r),ae(s,r,null),o[14](r),a=!0},p(l,[c]){const u={};c&9&&(u.className=`
    transition-opacity duration-300 
    ${l[0]?"opacity-100 visible pointer-events-auto":"opacity-0 pointer-events-none"}
    ${l[3]?"visible":"invisible"}
  `),c&262167&&(u.$$scope={dirty:c,ctx:l}),e.$set(u),(!a||c&13&&i!==(i="fixed bottom-0 w-full flex items-center justify-center z-[999] transition-transform duration-300 "+(l[0]?"translate-y-0":"translate-y-[330px]")+" "+(l[2]==="emoji"&&l[3]?"visible":"invisible")))&&d(n,"class",i)},i(l){a||(ue(e.$$.fragment,l),ue(s.$$.fragment,l),a=!0)},o(l){ce(e.$$.fragment,l),ce(s.$$.fragment,l),a=!1},d(l){l&&(m(t),m(n)),fe(e,l),fe(s),o[14](null)}}}function It(o){}function Ot(){}const Tt=o=>{o.target.style.height="auto",o.target.style.height=o.target.scrollHeight+"px"};function Lt(o,e,t){let n;$e(o,oe,f=>t(15,n=f));const r=We();let{isOpen:s=!1}=e,{type:i="text"}=e,{value:a=""}=e;Ye.subscribe(({isOpen:f,type:g})=>{if(n.at(-1).ownerIdx!==String(et())){t(0,s=!1);return}t(0,s=f),t(2,i=g),i==="emoji"?t(1,a=n.at(-1).emoji):t(1,a=n.at(-1).back)});function l(){i==="emoji"?oe.update(f=>(f.at(-1).emoji=a,f)):i==="text"&&oe.update(f=>(f.at(-1).back=a,f))}let c=!1,u=null,p=null;Ge(()=>{Ze(()=>{},It,Ot),new MutationObserver(g=>{t(1,a=(u==null?void 0:u.innerText)||""),r("change",a)}).observe(u,{childList:!0,subtree:!0})}),Je(()=>{Qe()});async function w(){u&&(u.focus(),await Ae(),document.execCommand("delete"))}async function B(f){if(!u)return;const g=f.detail.emoji.unicode;u.focus(),await Ae(),document.execCommand("insertText",!1,g)}function L(){u==null||u.focus()}function S(f){qe.call(this,o,f)}function x(){a=this.value,t(1,a)}const y=f=>{if(i==="emoji"){if(f.metaKey&&f.key==="k")return;f.preventDefault(),f.stopPropagation()}};function z(f){ie[f?"unshift":"push"](()=>{u=f,t(4,u)})}const H=f=>{f.stopPropagation(),t(0,s=!1)};function j(f){ie[f?"unshift":"push"](()=>{p=f,t(5,p)})}return o.$$set=f=>{"isOpen"in f&&t(0,s=f.isOpen),"type"in f&&t(2,i=f.type),"value"in f&&t(1,a=f.value)},o.$$.update=()=>{o.$$.dirty&2&&a&&l(),o.$$.dirty&3&&(s?t(3,c=!0):setTimeout(()=>{r("close",a),t(3,c=!1)},300))},[s,a,i,c,u,p,w,B,L,S,x,y,z,H,j]}class zt extends _e{constructor(e){super(),ve(this,e,Lt,Bt,he,{isOpen:0,type:2,value:1,focusInput:8})}get focusInput(){return this.$$.ctx[8]}}export{zt as I};
