import{s as de,D as ne,i as H,f as _,w as yt,e as T,a as O,t as Ne,c as M,b as L,g as A,d as Be,v as h,h as b,A as J,j as qe,B as re,S as He,q as _e,r as be,n as Q,ac as en,x as Ct,E as Le,F as Te,C as ee,L as Se,y as Re,z as Oe,k as tn,I as nn,K as ln,G as sn}from"./scheduler.CCBjAsUD.js";import{S as he,i as me,t as I,g as le,a as P,f as ie,c as U,b as F,m as W,d as G,e as Ae}from"./index.svcsDwjp.js";import{e as ve,u as Xe,f as rn,o as Tt}from"./each.D6kHJ57P.js";import{b as Ce,A as Ye,g as Qe,i as $e,e as Pe,C as on}from"./sign.CdrvQ_fB.js";import{g as je}from"./entry.DjYdOaZy.js";import{p as an}from"./stores.BQSBhM0V.js";import{g as et,u as fn}from"./searchParams.DxZwEhsv.js";/* empty css                                           *//* empty css                                                  */import{f as un,u as cn}from"./follow.-uuIz0Ch.js";import{C as dn}from"./CircleImage.DfH7vpY3.js";import{s as tt}from"./s32cloudfront.i4CVt1F-.js";import{r as we}from"./units.BJZU6p1c.js";import"./index.s1zLSlwv.js";import{a as hn}from"./NavigationBar.BDRCH4op.js";import{C as Mt}from"./Chip.f-vn82_7.js";import{B as mn}from"./BottomNavigationPadder.CxxFKKvp.js";import{I as gn,a as pn}from"./IconHeartFill.RNeStJ6U.js";import{l as _n}from"./longPress.C9F0mLoM.js";import{I as bn}from"./Header.CngaPL2S.js";import{A as vn}from"./ActionSheet.BKv0uEwn.js";import{M as wn}from"./Modal.CWhGYP0b.js";import{f as kn,c as xn,a as In}from"./index.Bh3LfQ7I.js";import{F as En}from"./Figure.Bp3zaQL2.js";function nt(l){let e,n,t,i,r,s=l[0].unique_name+"",o,a,u,g=String(l[0].user_idx)!==String(Ce()),w,D,V;n=new dn({props:{src:tt(l[0].profile_image_url,500),width:"1.625rem",strokeColor:"white",strokeWidth:"0"}}),n.$on("click",l[3]);let v=g&&lt(l);return{c(){e=T("div"),U(n.$$.fragment),t=O(),i=T("div"),r=T("div"),o=Ne(s),a=O(),u=T("div"),v&&v.c(),this.h()},l(p){e=M(p,"DIV",{class:!0});var c=L(e);F(n.$$.fragment,c),t=A(c),i=M(c,"DIV",{class:!0});var d=L(i);r=M(d,"DIV",{class:!0});var R=L(r);o=Be(R,s),R.forEach(_),a=A(d),u=M(d,"DIV",{class:!0});var y=L(u);v&&v.l(y),y.forEach(_),d.forEach(_),c.forEach(_),this.h()},h(){h(r,"class","text-sm text-white"),h(u,"class","flex gap-1 items-center"),h(i,"class","flex gap-1 items-center"),h(e,"class","flex gap-[0.625rem] justify-center items-center")},m(p,c){H(p,e,c),W(n,e,null),b(e,t),b(e,i),b(i,r),b(r,o),b(i,a),b(i,u),v&&v.m(u,null),w=!0,D||(V=J(r,"click",l[4]),D=!0)},p(p,c){const d={};c&1&&(d.src=tt(p[0].profile_image_url,500)),n.$set(d),(!w||c&1)&&s!==(s=p[0].unique_name+"")&&qe(o,s),c&1&&(g=String(p[0].user_idx)!==String(Ce())),g?v?v.p(p,c):(v=lt(p),v.c(),v.m(u,null)):v&&(v.d(1),v=null)},i(p){w||(I(n.$$.fragment,p),w=!0)},o(p){P(n.$$.fragment,p),w=!1},d(p){p&&_(e),G(n),v&&v.d(),D=!1,V()}}}function lt(l){let e,n="•",t,i,r=l[0].is_following?"팔로잉":"팔로우",s,o,a,u;return{c(){e=T("div"),e.textContent=n,t=O(),i=T("div"),s=Ne(r),this.h()},l(g){e=M(g,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-168vif2"&&(e.textContent=n),t=A(g),i=M(g,"DIV",{class:!0});var w=L(i);s=Be(w,r),w.forEach(_),this.h()},h(){h(e,"class","text-xs text-white/60"),h(i,"class",o=`text-[0.8125rem] ${l[0].is_following?"text-gray-500":"text-[#3490FF]"}`)},m(g,w){H(g,e,w),H(g,t,w),H(g,i,w),b(i,s),a||(u=J(i,"click",function(){He(l[0].is_following?l[2]:l[1])&&(l[0].is_following?l[2]:l[1]).apply(this,arguments)}),a=!0)},p(g,w){l=g,w&1&&r!==(r=l[0].is_following?"팔로잉":"팔로우")&&qe(s,r),w&1&&o!==(o=`text-[0.8125rem] ${l[0].is_following?"text-gray-500":"text-[#3490FF]"}`)&&h(i,"class",o)},d(g){g&&(_(e),_(t),_(i)),a=!1,u()}}}function yn(l){let e,n,t=l[0].idx&&nt(l);return{c(){t&&t.c(),e=ne()},l(i){t&&t.l(i),e=ne()},m(i,r){t&&t.m(i,r),H(i,e,r),n=!0},p(i,[r]){i[0].idx?t?(t.p(i,r),r&1&&I(t,1)):(t=nt(i),t.c(),I(t,1),t.m(e.parentNode,e)):t&&(le(),P(t,1,1,()=>{t=null}),ie())},i(i){n||(I(t),n=!0)},o(i){P(t),n=!1},d(i){i&&_(e),t&&t.d(i)}}}function Cn(l,e,n){let{post:t}=e;async function i(){await un({targetIdx:t.user_idx,subjectIdx:Ce()}),n(0,t.is_following=!0,t)}async function r(){await cn({targetIdx:t.user_idx,subjectIdx:Ce()}),n(0,t.is_following=!1,t)}yt(()=>{console.log(t)});const s=()=>{et(`/users/${t.user_idx}`)},o=()=>{et(`/users/${t.user_idx}`)};return l.$$set=a=>{"post"in a&&n(0,t=a.post)},[t,i,r,s,o]}class Tn extends he{constructor(e){super(),me(this,e,Cn,yn,de,{post:0})}}function Ze(l){const n=["touchstart","touchmove","touchend","mousedown","mousemove","mouseup","wheel"].map(t=>{const i=r=>r.stopPropagation();return l.addEventListener(t,i),{event:t,handler:i}});return{destroy(){n.forEach(({event:t,handler:i})=>{l.removeEventListener(t,i)})}}}function it(l){let e,n;return e=new Mt({props:{prefixLength:1.25,textSize:"text-xs",textColor:"text-white",backgroundColor:"bg-[rgb(56,56,56)]/30",borderColor:"border-[rgb(56,56,56)]/10",border:!0,pointer:!0,prefixIconComponent:hn,fill:"white",padding:"px-[0.88rem] py-[0.5rem]",value:l[0].name}}),e.$on("click",l[1]),{c(){U(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,i){W(e,t,i),n=!0},p(t,i){const r={};i&1&&(r.value=t[0].name),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Mn(l){let e,n,t=l[0].idx&&it(l);return{c(){t&&t.c(),e=ne()},l(i){t&&t.l(i),e=ne()},m(i,r){t&&t.m(i,r),H(i,e,r),n=!0},p(i,[r]){i[0].idx?t?(t.p(i,r),r&1&&I(t,1)):(t=it(i),t.c(),I(t,1),t.m(e.parentNode,e)):t&&(le(),P(t,1,1,()=>{t=null}),ie())},i(i){n||(I(t),n=!0)},o(i){P(t),n=!1},d(i){i&&_(e),t&&t.d(i)}}}function Vn(l,e,n){let{place:t}=e;const i=async()=>{await je(`/places/${t.idx}`)};return l.$$set=r=>{"place"in r&&n(0,t=r.place)},[t,i]}class Dn extends he{constructor(e){super(),me(this,e,Vn,Mn,de,{place:0})}}function Pn(l){let e,n;return{c(){e=_e("svg"),n=_e("path"),this.h()},l(t){e=be(t,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0,stroke:!0});var i=L(e);n=be(i,"path",{d:!0}),L(n).forEach(_),i.forEach(_),this.h()},h(){h(n,"d","M37.8592 6.49005C37.7847 6.34198 37.6704 6.21766 37.529 6.13108C37.3877 6.04451 37.2249 5.99913 37.0592 6.00005H2.89919C2.71505 5.99813 2.53497 6.05404 2.38427 6.15988C2.23358 6.26573 2.11987 6.41618 2.0592 6.59005C1.99343 6.76227 1.98217 6.95054 2.02688 7.12938C2.07159 7.30823 2.17013 7.46903 2.3092 7.59005L14.3092 17.86V36.05C14.3103 36.2389 14.3708 36.4225 14.4821 36.5751C14.5933 36.7276 14.7497 36.8413 14.9292 36.9C15.022 36.9143 15.1164 36.9143 15.2092 36.9C15.3489 36.9 15.4867 36.8675 15.6117 36.805C15.7367 36.7426 15.8454 36.6518 15.9292 36.5401L37.7492 7.40005C37.8464 7.27167 37.9078 7.11978 37.9271 6.95991C37.9465 6.80004 37.923 6.6379 37.8592 6.49005ZM5.32922 7.81005H33.1292L15.3592 16.38L5.32922 7.81005ZM16.1292 18L34.1292 9.31005L16.1292 33.31V18Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 40 40"),h(e,"width",l[1]),h(e,"height",l[1]),h(e,"fill",l[0]),h(e,"stroke",l[0])},m(t,i){H(t,e,i),b(e,n)},p(t,[i]){i&2&&h(e,"width",t[1]),i&2&&h(e,"height",t[1]),i&1&&h(e,"fill",t[0]),i&1&&h(e,"stroke",t[0])},i:Q,o:Q,d(t){t&&_(e)}}}function Ln(l,e,n){let t,{fill:i="#5f6368"}=e,{length:r="1.75"}=e;return l.$$set=s=>{"fill"in s&&n(0,i=s.fill),"length"in s&&n(2,r=s.length)},l.$$.update=()=>{l.$$.dirty&4&&n(1,t=we(r))},[i,t,r]}class Sn extends he{constructor(e){super(),me(this,e,Ln,Pn,de,{fill:0,length:2})}}function Rn(l){let e,n;return{c(){e=_e("svg"),n=_e("path"),this.h()},l(t){e=be(t,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var i=L(e);n=be(i,"path",{d:!0}),L(n).forEach(_),i.forEach(_),this.h()},h(){h(n,"d","M10.7584 31.6667L3.33337 37.5V6.66667C3.33337 6.22464 3.50897 5.80072 3.82153 5.48816C4.13409 5.17559 4.55801 5 5.00004 5H35C35.4421 5 35.866 5.17559 36.1786 5.48816C36.4911 5.80072 36.6667 6.22464 36.6667 6.66667V30C36.6667 30.442 36.4911 30.866 36.1786 31.1785C35.866 31.4911 35.4421 31.6667 35 31.6667H10.7584ZM9.60504 28.3333H33.3334V8.33333H6.66671V30.6417L9.60504 28.3333ZM18.3334 16.6667H21.6667V20H18.3334V16.6667ZM11.6667 16.6667H15V20H11.6667V16.6667ZM25 16.6667H28.3334V20H25V16.6667Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 40 40"),h(e,"width",l[1]),h(e,"height",l[1]),h(e,"fill",l[0])},m(t,i){H(t,e,i),b(e,n)},p(t,[i]){i&2&&h(e,"width",t[1]),i&2&&h(e,"height",t[1]),i&1&&h(e,"fill",t[0])},i:Q,o:Q,d(t){t&&_(e)}}}function Nn(l,e,n){let t,{fill:i="#5f6368"}=e,{length:r="1.75"}=e;return l.$$set=s=>{"fill"in s&&n(0,i=s.fill),"length"in s&&n(2,r=s.length)},l.$$.update=()=>{l.$$.dirty&4&&n(1,t=we(r))},[i,t,r]}class Bn extends he{constructor(e){super(),me(this,e,Nn,Rn,de,{fill:0,length:2})}}function qn(l){let e,n;return{c(){e=_e("svg"),n=_e("path"),this.h()},l(t){e=be(t,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var i=L(e);n=be(i,"path",{d:!0}),L(n).forEach(_),i.forEach(_),this.h()},h(){h(n,"d","M200-200h57l391-391-57-57-391 391v57Zm-40 80q-17 0-28.5-11.5T120-160v-97q0-16 6-30.5t17-25.5l505-504q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L313-143q-11 11-25.5 17t-30.5 6h-97Zm600-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 -960 960 960"),h(e,"width",l[1]),h(e,"height",l[1]),h(e,"fill",l[0])},m(t,i){H(t,e,i),b(e,n)},p(t,[i]){i&2&&h(e,"width",t[1]),i&2&&h(e,"height",t[1]),i&1&&h(e,"fill",t[0])},i:Q,o:Q,d(t){t&&_(e)}}}function Yn(l,e,n){let t,{fill:i="#5f6368"}=e,{length:r="1.75"}=e,{alt:s="Edit"}=e;return l.$$set=o=>{"fill"in o&&n(0,i=o.fill),"length"in o&&n(2,r=o.length),"alt"in o&&n(3,s=o.alt)},l.$$.update=()=>{l.$$.dirty&4&&n(1,t=we(r))},[i,t,r,s]}class Hn extends he{constructor(e){super(),me(this,e,Yn,qn,de,{fill:0,length:2,alt:3})}}function On(l){let e,n;return{c(){e=_e("svg"),n=_e("path"),this.h()},l(t){e=be(t,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var i=L(e);n=be(i,"path",{d:!0}),L(n).forEach(_),i.forEach(_),this.h()},h(){h(n,"d","M280-120q-33 0-56.5-23.5T200-200v-520q-17 0-28.5-11.5T160-760q0-17 11.5-28.5T200-800h160q0-17 11.5-28.5T400-840h160q17 0 28.5 11.5T600-800h160q17 0 28.5 11.5T800-760q0 17-11.5 28.5T760-720v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM400-280q17 0 28.5-11.5T440-320v-280q0-17-11.5-28.5T400-640q-17 0-28.5 11.5T360-600v280q0 17 11.5 28.5T400-280Zm160 0q17 0 28.5-11.5T600-320v-280q0-17-11.5-28.5T560-640q-17 0-28.5 11.5T520-600v280q0 17 11.5 28.5T560-280ZM280-720v520-520Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 -960 960 960"),h(e,"width",l[1]),h(e,"height",l[1]),h(e,"fill",l[0])},m(t,i){H(t,e,i),b(e,n)},p(t,[i]){i&2&&h(e,"width",t[1]),i&2&&h(e,"height",t[1]),i&1&&h(e,"fill",t[0])},i:Q,o:Q,d(t){t&&_(e)}}}function An(l,e,n){let t,{fill:i="#5f6368"}=e,{length:r="1.75"}=e,{alt:s="Delete"}=e;return l.$$set=o=>{"fill"in o&&n(0,i=o.fill),"length"in o&&n(2,r=o.length),"alt"in o&&n(3,s=o.alt)},l.$$.update=()=>{l.$$.dirty&4&&n(1,t=we(r))},[i,t,r,s]}class jn extends he{constructor(e){super(),me(this,e,An,On,de,{fill:0,length:2,alt:3})}}function st(l){let e,n=l[0].text+"",t,i,r;return{c(){e=T("p"),t=Ne(n),this.h()},l(s){e=M(s,"P",{class:!0,style:!0});var o=L(e);t=Be(o,n),o.forEach(_),this.h()},h(){h(e,"class","text-xs text-shadow whitespace-pre-line w-full overflow-hidden max-w-full break-words"),h(e,"style",`
      overflow: hidden;
      height: ${l[1]}px;
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 1;
      max-width: 100%;
      width: 100%;
      word-break: break-all;
    `)},m(s,o){H(s,e,o),b(e,t),i||(r=[Le(Ze.call(null,e)),J(e,"click",l[2])],i=!0)},p(s,o){o&1&&n!==(n=s[0].text+"")&&qe(t,n)},d(s){s&&_(e),i=!1,Te(r)}}}function Xn(l){var i;let e=((i=l[0])==null?void 0:i.text)&&l[0].text.trim().length>0,n,t=e&&st(l);return{c(){t&&t.c(),n=ne()},l(r){t&&t.l(r),n=ne()},m(r,s){t&&t.m(r,s),H(r,n,s)},p(r,[s]){var o;s&1&&(e=((o=r[0])==null?void 0:o.text)&&r[0].text.trim().length>0),e?t?t.p(r,s):(t=st(r),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},i:Q,o:Q,d(r){r&&_(n),t&&t.d(r)}}}function Zn(l,e,n){const t=en();let{post:i}=e;const r=we(1),s=we(6);function o(a){const u=a.currentTarget;if(u)if(u.style.height===`${r}px`||!u.style.height){if(u.scrollHeight>r){const g=u.scrollHeight<s?u.scrollHeight:s;u.style.height=`${g}px`,u.style.overflow="scroll",u.style.display="block",u.style.webkitLineClamp="unset",t("textExpanded",{expanded:!0})}}else u.style.height=`${r}px`,u.style.overflow="hidden",u.style.display="-webkit-box",u.style.webkitLineClamp="1",t("textExpanded",{expanded:!1})}return Ct(()=>{t("textExpanded",{expanded:!1})}),l.$$set=a=>{"post"in a&&n(0,i=a.post)},[i,r,o]}class zn extends he{constructor(e){super(),me(this,e,Zn,Xn,de,{post:0})}}function Un(l){let e;return{c(){e=T("div"),this.h()},l(n){e=M(n,"DIV",{class:!0,style:!0}),L(e).forEach(_),this.h()},h(){h(e,"class","fixed left-0 top-0 w-full h-full pointer-events-none z-30"),ee(e,"opacity","0.6"),ee(e,"background","linear-gradient(180deg, rgba(0, 0, 0, 0.16) -55.96%, rgba(0, 0, 0, 0.00) 55.55%), linear-gradient(180deg, rgba(0, 0, 0, 0.00) 58.49%, rgba(0, 0, 0, 0.50) 140.82%)")},m(n,t){H(n,e,t)},d(n){n&&_(e)}}}function Fn(l){let e;return{c(){e=T("div"),this.h()},l(n){e=M(n,"DIV",{class:!0,style:!0}),L(e).forEach(_),this.h()},h(){h(e,"class","fixed inset-0 pointer-events-none z-30"),ee(e,"opacity","0.7"),ee(e,"background","linear-gradient(180deg, rgba(0, 0, 0, 0.00) 0%, #000 100%)")},m(n,t){H(n,e,t)},d(n){n&&_(e)}}}function Wn(l){let e;function n(r,s){return r[0]?Fn:Un}let t=n(l),i=t(l);return{c(){i.c(),e=ne()},l(r){i.l(r),e=ne()},m(r,s){i.m(r,s),H(r,e,s)},p(r,[s]){t!==(t=n(r))&&(i.d(1),i=t(r),i&&(i.c(),i.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&_(e),i.d(r)}}}function Gn(l,e,n){let{isTextExpanded:t=!1}=e;return l.$$set=i=>{"isTextExpanded"in i&&n(0,t=i.isTextExpanded)},[t]}class Kn extends he{constructor(e){super(),me(this,e,Gn,Wn,de,{isTextExpanded:0})}}function rt(l,e,n){const t=l.slice();return t[5]=e[n],t[7]=n,t}function ot(l,e){let n,t,i,r,s,o=Q;return{key:l,first:null,c(){n=T("span"),t=T("span"),r=O(),this.h()},l(a){n=M(a,"SPAN",{class:!0,style:!0});var u=L(n);t=M(u,"SPAN",{class:!0,style:!0}),L(t).forEach(_),r=A(u),u.forEach(_),this.h()},h(){h(t,"class",i=Se(`carousel-dot block w-full h-full rounded-full transition-transform duration-300 ${e[0].mediaIdx===e[2]+e[7]?"bg-white z-10":"bg-white/50"}`)+" svelte-m8istd"),ee(t,"transform","scale("+e[4](e[7])+")"),ee(t,"transition-delay",e[0].mediaIdx===e[2]+e[7]?"0s":"0.1s"),h(n,"class","flex items-center justify-center"),ee(n,"width","0.375rem"),ee(n,"height","0.375rem"),this.first=n},m(a,u){H(a,n,u),b(n,t),b(n,r)},p(a,u){e=a,u&13&&i!==(i=Se(`carousel-dot block w-full h-full rounded-full transition-transform duration-300 ${e[0].mediaIdx===e[2]+e[7]?"bg-white z-10":"bg-white/50"}`)+" svelte-m8istd")&&h(t,"class",i),u&8&&ee(t,"transform","scale("+e[4](e[7])+")"),u&13&&ee(t,"transition-delay",e[0].mediaIdx===e[2]+e[7]?"0s":"0.1s")},r(){s=n.getBoundingClientRect()},f(){kn(n),o()},a(){o(),o=xn(n,s,In,{})},d(a){a&&_(n)}}}function Jn(l){let e,n=[],t=new Map,i,r=ve(l[3]);const s=o=>o[5];for(let o=0;o<r.length;o+=1){let a=rt(l,r,o),u=s(a);t.set(u,n[o]=ot(u,a))}return{c(){e=T("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=L(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(_),this.h()},h(){h(e,"class",i=Se(`
    ${l[1]?"fixed left-1/2 -translate-x-1/2 bottom-[10.3125rem]":""} 
    flex justify-center gap-1.5
  `)+" svelte-m8istd")},m(o,a){H(o,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null)},p(o,[a]){if(a&29){r=ve(o[3]);for(let u=0;u<n.length;u+=1)n[u].r();n=Xe(n,a,s,1,o,r,t,e,rn,ot,null,rt);for(let u=0;u<n.length;u+=1)n[u].a()}a&2&&i!==(i=Se(`
    ${o[1]?"fixed left-1/2 -translate-x-1/2 bottom-[10.3125rem]":""} 
    flex justify-center gap-1.5
  `)+" svelte-m8istd")&&h(e,"class",i)},i:Q,o:Q,d(o){o&&_(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}const ye=7;function Qn(l,e,n){let{post:t}=e,{fixed:i=!0}=e,r=[],s=0;function o(a){const u=t.mediaIdx-s,g=r.length;if(g<=1)return 1;const w=Math.max(u,g-1-u);return w===0?1:1-Math.abs(a-u)/w*.5}return l.$$set=a=>{"post"in a&&n(0,t=a.post),"fixed"in a&&n(1,i=a.fixed)},l.$$.update=()=>{l.$$.dirty&5&&(t.media.length>ye?(t.mediaIdx<=Math.floor(ye/2)?n(2,s=0):t.mediaIdx>=t.media.length-Math.ceil(ye/2)?n(2,s=t.media.length-ye):n(2,s=t.mediaIdx-Math.floor(ye/2)),n(3,r=t.media.slice(s,s+ye))):(n(2,s=0),n(3,r=t.media)))},[t,i,s,r,o]}class Vt extends he{constructor(e){super(),me(this,e,Qn,Jn,de,{post:0,fixed:1})}}function at(l,e,n){const t=l.slice();return t[71]=e[n],t[72]=e,t[73]=n,t}function ft(l,e,n){const t=l.slice();return t[74]=e[n],t}function ut(l,e,n){const t=l.slice();return t[77]=e[n],t[79]=n,t}function ct(l){let e,n,t;return{c(){e=T("div"),this.h()},l(i){e=M(i,"DIV",{class:!0}),L(e).forEach(_),this.h()},h(){h(e,"class","fixed top-0 left-0 w-screen h-screen bg-black")},m(i,r){H(i,e,r),n||(t=J(e,"contextmenu",nn(l[23])),n=!0)},d(i){i&&_(e),n=!1,t()}}}function dt(l){let e,n,t,i=[],r=new Map,s,o,a,u,g,w,D,V=ve(l[71].media);const v=c=>c[77];for(let c=0;c<V.length;c+=1){let d=ut(l,V,c),R=v(d);r.set(R,i[c]=ht(R,d))}let p=!l[4]&&mt(l);return{c(){e=T("section"),n=T("div"),t=T("div");for(let c=0;c<i.length;c+=1)i[c].c();o=O(),p&&p.c(),a=O(),this.h()},l(c){e=M(c,"SECTION",{class:!0,style:!0});var d=L(e);n=M(d,"DIV",{class:!0});var R=L(n);t=M(R,"DIV",{class:!0,style:!0});var y=L(t);for(let N=0;N<i.length;N+=1)i[N].l(y);y.forEach(_),R.forEach(_),o=A(d),p&&p.l(d),a=A(d),d.forEach(_),this.h()},h(){h(t,"class",s="carousel-track flex w-full h-full select-none transition-transform duration-300 ease-in-out "+(l[7]?"duration-0 transition-duration-0":"")),ee(t,"transform","translateX("+(-l[71].mediaIdx*l[10].width+l[9])+"px)"),h(n,"class","carousel-container w-full h-full overflow-hidden relative select-none"),h(e,"class",u=`w-full h-full absolute content-center transition-transform
            ${l[7]?"duration-0 transition-duration-0":""}`),ee(e,"top","0"),ee(e,"transform","translateY("+((l[73]-l[1])*l[10].height+l[8])+"px)")},m(c,d){H(c,e,d),b(e,n),b(n,t);for(let R=0;R<i.length;R+=1)i[R]&&i[R].m(t,null);b(e,o),p&&p.m(e,null),b(e,a),g=!0,w||(D=[J(t,"transitionend",function(){He(l[71].mediaIdx===l[0][l[1]].mediaIdx?l[13]:void 0)&&(l[71].mediaIdx===l[0][l[1]].mediaIdx?l[13]:void 0).apply(this,arguments)}),J(e,"transitionend",function(){He(l[73]===l[1]?l[13]:void 0)&&(l[73]===l[1]?l[13]:void 0).apply(this,arguments)})],w=!0)},p(c,d){l=c,d[0]&19&&(V=ve(l[71].media),le(),i=Xe(i,d,v,1,l,V,r,t,Tt,ht,null,ut),ie()),(!g||d[0]&128&&s!==(s="carousel-track flex w-full h-full select-none transition-transform duration-300 ease-in-out "+(l[7]?"duration-0 transition-duration-0":"")))&&h(t,"class",s),(!g||d[0]&1537)&&ee(t,"transform","translateX("+(-l[71].mediaIdx*l[10].width+l[9])+"px)"),l[4]?p&&(le(),P(p,1,1,()=>{p=null}),ie()):p?(p.p(l,d),d[0]&16&&I(p,1)):(p=mt(l),p.c(),I(p,1),p.m(e,a)),(!g||d[0]&128&&u!==(u=`w-full h-full absolute content-center transition-transform
            ${l[7]?"duration-0 transition-duration-0":""}`))&&h(e,"class",u),(!g||d[0]&1283)&&ee(e,"transform","translateY("+((l[73]-l[1])*l[10].height+l[8])+"px)")},i(c){if(!g){for(let d=0;d<V.length;d+=1)I(i[d]);I(p),g=!0}},o(c){for(let d=0;d<i.length;d+=1)P(i[d]);P(p),g=!1},d(c){c&&_(e);for(let d=0;d<i.length;d+=1)i[d].d();p&&p.d(),w=!1,Te(D)}}}function ht(l,e){let n,t,i,r,s,o;return i=new En({props:{src:e[77],isEdit:e[4],autoplay:e[1]===e[73]&&e[0][e[1]].mediaIdx===e[79],isRightOrderForYoutube:e[1]===e[73]}}),{key:l,first:null,c(){n=T("div"),t=T("div"),U(i.$$.fragment),s=O(),this.h()},l(a){n=M(a,"DIV",{class:!0});var u=L(n);t=M(u,"DIV",{class:!0});var g=L(t);F(i.$$.fragment,g),g.forEach(_),s=A(u),u.forEach(_),this.h()},h(){h(t,"class",r=`
                      w-full h-full flex justify-center items-center relative
                      ${e[4]?"px-5 pt-5 pb-3":""}
                    `),h(n,"class","carousel-slide flex justify-center items-center min-w-full h-full select-none"),this.first=n},m(a,u){H(a,n,u),b(n,t),W(i,t,null),b(n,s),o=!0},p(a,u){e=a;const g={};u[0]&1&&(g.src=e[77]),u[0]&16&&(g.isEdit=e[4]),u[0]&3&&(g.autoplay=e[1]===e[73]&&e[0][e[1]].mediaIdx===e[79]),u[0]&3&&(g.isRightOrderForYoutube=e[1]===e[73]),i.$set(g),(!o||u[0]&16&&r!==(r=`
                      w-full h-full flex justify-center items-center relative
                      ${e[4]?"px-5 pt-5 pb-3":""}
                    `))&&h(t,"class",r)},i(a){o||(I(i.$$.fragment,a),o=!0)},o(a){P(i.$$.fragment,a),o=!1},d(a){a&&_(n),G(i)}}}function mt(l){var Z;let e,n,t,i,r,s,o,a,u,g,w,D,V,v,p,c=l[71].media.length>1&&gt(l),d=((Z=l[71].reactions)==null?void 0:Z.length)>0&&!l[6]&&pt(l);function R(E){l[25](E,l[71],l[72],l[73])}let y={};l[71]!==void 0&&(y.post=l[71]),r=new Tn({props:y}),Re.push(()=>Ae(r,"post",R));function N(...E){return l[26](l[71],l[72],l[73],...E)}a=new zn({props:{post:l[71]}}),a.$on("textExpanded",N),g=new Dn({props:{place:{idx:l[71].place_idx,name:l[71].place_name}}});let B=!l[6]&&bt(l),Y=l[1]===l[73]&&wt(l);return{c(){c&&c.c(),e=O(),n=T("div"),t=T("div"),d&&d.c(),i=O(),U(r.$$.fragment),o=O(),U(a.$$.fragment),u=O(),U(g.$$.fragment),D=O(),B&&B.c(),V=O(),Y&&Y.c(),v=ne(),this.h()},l(E){c&&c.l(E),e=A(E),n=M(E,"DIV",{class:!0});var q=L(n);t=M(q,"DIV",{class:!0,style:!0});var m=L(t);d&&d.l(m),i=A(m),F(r.$$.fragment,m),o=A(m),F(a.$$.fragment,m),u=A(m),F(g.$$.fragment,m),m.forEach(_),D=A(q),B&&B.l(q),q.forEach(_),V=A(E),Y&&Y.l(E),v=ne(),this.h()},h(){h(t,"class","relative flex-grow text-white text-md flex flex-col items-start gap-2 transition-transform text-base "),h(t,"style",w=`transform: translateY(${l[5]}px);`),h(n,"class","absolute bottom-4 px-5 py-4 w-full flex flex-row z-40 items-end justify-between")},m(E,q){c&&c.m(E,q),H(E,e,q),H(E,n,q),b(n,t),d&&d.m(t,null),b(t,i),W(r,t,null),b(t,o),W(a,t,null),b(t,u),W(g,t,null),b(n,D),B&&B.m(n,null),H(E,V,q),Y&&Y.m(E,q),H(E,v,q),p=!0},p(E,q){var z;l=E,l[71].media.length>1?c?(c.p(l,q),q[0]&1&&I(c,1)):(c=gt(l),c.c(),I(c,1),c.m(e.parentNode,e)):c&&(le(),P(c,1,1,()=>{c=null}),ie()),((z=l[71].reactions)==null?void 0:z.length)>0&&!l[6]?d?(d.p(l,q),q[0]&65&&I(d,1)):(d=pt(l),d.c(),I(d,1),d.m(t,i)):d&&(le(),P(d,1,1,()=>{d=null}),ie());const m={};!s&&q[0]&1&&(s=!0,m.post=l[71],Oe(()=>s=!1)),r.$set(m);const k={};q[0]&1&&(k.post=l[71]),a.$set(k);const j={};q[0]&1&&(j.place={idx:l[71].place_idx,name:l[71].place_name}),g.$set(j),(!p||q[0]&32&&w!==(w=`transform: translateY(${l[5]}px);`))&&h(t,"style",w),l[6]?B&&(le(),P(B,1,1,()=>{B=null}),ie()):B?(B.p(l,q),q[0]&64&&I(B,1)):(B=bt(l),B.c(),I(B,1),B.m(n,null)),l[1]===l[73]?Y?(Y.p(l,q),q[0]&3&&I(Y,1)):(Y=wt(l),Y.c(),I(Y,1),Y.m(v.parentNode,v)):Y&&(le(),P(Y,1,1,()=>{Y=null}),ie())},i(E){p||(I(c),I(d),I(r.$$.fragment,E),I(a.$$.fragment,E),I(g.$$.fragment,E),I(B),I(Y),p=!0)},o(E){P(c),P(d),P(r.$$.fragment,E),P(a.$$.fragment,E),P(g.$$.fragment,E),P(B),P(Y),p=!1},d(E){E&&(_(e),_(n),_(V),_(v)),c&&c.d(E),d&&d.d(),G(r),G(a),G(g),B&&B.d(),Y&&Y.d(E)}}}function gt(l){let e,n;return e=new Vt({props:{post:l[71]}}),{c(){U(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,i){W(e,t,i),n=!0},p(t,i){const r={};i[0]&1&&(r.post=t[71]),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function pt(l){let e,n,t=ve(l[71].reactions),i=[];for(let s=0;s<t.length;s+=1)i[s]=_t(ft(l,t,s));const r=s=>P(i[s],1,1,()=>{i[s]=null});return{c(){e=T("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=M(s,"DIV",{class:!0});var o=L(e);for(let a=0;a<i.length;a+=1)i[a].l(o);o.forEach(_),this.h()},h(){h(e,"class","flex gap-1 justify-center items-center mb-1")},m(s,o){H(s,e,o);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);n=!0},p(s,o){if(o[0]&32769){t=ve(s[71].reactions);let a;for(a=0;a<t.length;a+=1){const u=ft(s,t,a);i[a]?(i[a].p(u,o),I(i[a],1)):(i[a]=_t(u),i[a].c(),I(i[a],1),i[a].m(e,null))}for(le(),a=t.length;a<i.length;a+=1)r(a);ie()}},i(s){if(!n){for(let o=0;o<t.length;o+=1)I(i[o]);n=!0}},o(s){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)P(i[o]);n=!1},d(s){s&&_(e),sn(i,s)}}}function _t(l){let e,n;function t(){return l[24](l[71],l[74])}return e=new Mt({props:{gap:"gap-0.5",textColor:"text-white",backgroundColor:"bg-[rgba(56,56,56,0.7)]",fill:"white",padding:"px-2.5 py-1.5",prefixTextSize:"text-[0.9375rem] leading-normal font-medium",prefix:l[74].type,textSize:"text-[0.8125rem] leading-[1.25rem]",value:l[74].count,height:"h-7",rounded:"rounded-[3.75rem]"}}),e.$on("click",t),{c(){U(e.$$.fragment)},l(i){F(e.$$.fragment,i)},m(i,r){W(e,i,r),n=!0},p(i,r){l=i;const s={};r[0]&1&&(s.prefix=l[74].type),r[0]&1&&(s.value=l[74].count),e.$set(s)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){P(e.$$.fragment,i),n=!1},d(i){G(e,i)}}}function bt(l){var oe;let e,n,t,i,r,s,o,a,u=((oe=l[71].reactions)!=null&&oe.length?l[71].reactions.reduce(l[32],0):"")+"",g,w,D,V,v,p,c="0",d,R,y,N,B,Y,Z,E,q,m=l[71].onReactionShowcase&&vt(l);const k=[el,$n],j=[];function z(K,$){return K[71].myReaction?0:1}r=z(l),s=j[r]=k[r](l);function se(){return l[33](l[71])}function fe(){return l[34](l[71],l[72],l[73])}return V=new Bn({props:{fill:"white",length:1.5}}),y=new Sn({props:{fill:"white",length:1.5}}),Y=new bn({props:{fill:"white",length:1.5}}),{c(){e=T("div"),n=T("div"),m&&m.c(),t=O(),i=T("button"),s.c(),o=O(),a=T("span"),g=Ne(u),w=O(),D=T("button"),U(V.$$.fragment),v=O(),p=T("span"),p.textContent=c,d=O(),R=T("button"),U(y.$$.fragment),N=O(),B=T("button"),U(Y.$$.fragment),this.h()},l(K){e=M(K,"DIV",{class:!0});var $=L(e);n=M($,"DIV",{class:!0});var ue=L(n);m&&m.l(ue),t=A(ue),i=M(ue,"BUTTON",{class:!0});var ge=L(i);s.l(ge),o=A(ge),a=M(ge,"SPAN",{class:!0});var Ve=L(a);g=Be(Ve,u),Ve.forEach(_),ge.forEach(_),ue.forEach(_),w=A($),D=M($,"BUTTON",{class:!0});var ae=L(D);F(V.$$.fragment,ae),v=A(ae),p=M(ae,"SPAN",{class:!0,"data-svelte-h":!0}),re(p)!=="svelte-1mtud4s"&&(p.textContent=c),ae.forEach(_),d=A($),R=M($,"BUTTON",{});var ke=L(R);F(y.$$.fragment,ke),ke.forEach(_),N=A($),B=M($,"BUTTON",{});var xe=L(B);F(Y.$$.fragment,xe),xe.forEach(_),$.forEach(_),this.h()},h(){h(a,"class","text-xs text-white h-4"),h(i,"class","relative bg-transparent flex flex-col gap-[0.3125rem] items-center justify-center"),h(n,"class","flex gap-4 relative"),h(p,"class","text-xs text-white h-4"),h(D,"class","flex flex-col gap-[0.3125rem] items-center justify-center"),h(e,"class","flex-shrink flex flex-col gap-4 pl-8")},m(K,$){H(K,e,$),b(e,n),m&&m.m(n,null),b(n,t),b(n,i),j[r].m(i,null),b(i,o),b(i,a),b(a,g),b(e,w),b(e,D),W(V,D,null),b(D,v),b(D,p),b(e,d),b(e,R),W(y,R,null),b(e,N),b(e,B),W(Y,B,null),Z=!0,E||(q=[J(i,"click",se),Le(Ze.call(null,i)),Le(_n.call(null,i,500)),J(i,"longpress",fe),J(B,"click",l[35])],E=!0)},p(K,$){var ge;l=K,l[71].onReactionShowcase?m?m.p(l,$):(m=vt(l),m.c(),m.m(n,t)):m&&(m.d(1),m=null);let ue=r;r=z(l),r!==ue&&(le(),P(j[ue],1,1,()=>{j[ue]=null}),ie(),s=j[r],s||(s=j[r]=k[r](l),s.c()),I(s,1),s.m(i,o)),(!Z||$[0]&1)&&u!==(u=((ge=l[71].reactions)!=null&&ge.length?l[71].reactions.reduce(l[32],0):"")+"")&&qe(g,u)},i(K){Z||(I(s),I(V.$$.fragment,K),I(y.$$.fragment,K),I(Y.$$.fragment,K),Z=!0)},o(K){P(s),P(V.$$.fragment,K),P(y.$$.fragment,K),P(Y.$$.fragment,K),Z=!1},d(K){K&&_(e),m&&m.d(),j[r].d(),G(V),G(y),G(Y),E=!1,Te(q)}}}function vt(l){let e,n,t="👍",i,r,s="🔥",o,a,u="😍",g,w,D="😋",V,v,p="😊️️",c,d;function R(){return l[27](l[71])}function y(){return l[28](l[71])}function N(){return l[29](l[71])}function B(){return l[30](l[71])}function Y(){return l[31](l[71])}return{c(){e=T("div"),n=T("button"),n.textContent=t,i=O(),r=T("button"),r.textContent=s,o=O(),a=T("button"),a.textContent=u,g=O(),w=T("button"),w.textContent=D,V=O(),v=T("button"),v.textContent=p,this.h()},l(Z){e=M(Z,"DIV",{class:!0});var E=L(e);n=M(E,"BUTTON",{class:!0,"data-svelte-h":!0}),re(n)!=="svelte-3oecln"&&(n.textContent=t),i=A(E),r=M(E,"BUTTON",{class:!0,"data-svelte-h":!0}),re(r)!=="svelte-131qbu2"&&(r.textContent=s),o=A(E),a=M(E,"BUTTON",{class:!0,"data-svelte-h":!0}),re(a)!=="svelte-lq90i3"&&(a.textContent=u),g=A(E),w=M(E,"BUTTON",{class:!0,"data-svelte-h":!0}),re(w)!=="svelte-l73y87"&&(w.textContent=D),V=A(E),v=M(E,"BUTTON",{class:!0,"data-svelte-h":!0}),re(v)!=="svelte-11szxsj"&&(v.textContent=p),E.forEach(_),this.h()},h(){h(n,"class","text-2xl/[26px]"),h(r,"class","text-2xl/[26px]"),h(a,"class","text-2xl/[26px]"),h(w,"class","text-2xl/[26px]"),h(v,"class","text-2xl/[26px]"),h(e,"class","absolute right-10 bottom-2.5 bg-[rgba(56,56,56,0.7)] px-5 py-2 rounded-[3.75rem] flex gap-4 items-center justify-center backdrop-blur-[2px] pointer-events-auto text-white text-[1.375rem] leading-normal font-medium ")},m(Z,E){H(Z,e,E),b(e,n),b(e,i),b(e,r),b(e,o),b(e,a),b(e,g),b(e,w),b(e,V),b(e,v),c||(d=[J(n,"click",R),J(r,"click",y),J(a,"click",N),J(w,"click",B),J(v,"click",Y)],c=!0)},p(Z,E){l=Z},d(Z){Z&&_(e),c=!1,Te(d)}}}function $n(l){let e,n;return e=new gn({props:{fill:"white",length:1.5}}),{c(){U(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,i){W(e,t,i),n=!0},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function el(l){let e,n;return e=new pn({props:{fill:"#EA3323",length:1.5}}),{c(){U(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,i){W(e,t,i),n=!0},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function wt(l){let e,n;return e=new Kn({props:{isTextExpanded:l[71].isTextExpanded}}),{c(){U(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,i){W(e,t,i),n=!0},p(t,i){const r={};i[0]&1&&(r.isTextExpanded=t[71].isTextExpanded),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function kt(l,e){let n,t=Math.abs(e[1]-e[73])<=1,i,r,s=t&&dt(e);return{key:l,first:null,c(){n=ne(),s&&s.c(),i=ne(),this.h()},l(o){n=ne(),s&&s.l(o),i=ne(),this.h()},h(){this.first=n},m(o,a){H(o,n,a),s&&s.m(o,a),H(o,i,a),r=!0},p(o,a){e=o,a[0]&3&&(t=Math.abs(e[1]-e[73])<=1),t?s?(s.p(e,a),a[0]&3&&I(s,1)):(s=dt(e),s.c(),I(s,1),s.m(i.parentNode,i)):s&&(le(),P(s,1,1,()=>{s=null}),ie())},i(o){r||(I(s),r=!0)},o(o){P(s),r=!1},d(o){o&&(_(n),_(i)),s&&s.d(o)}}}function xt(l){let e,n;return e=new Vt({props:{post:l[0][l[1]],fixed:!1}}),{c(){U(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,i){W(e,t,i),n=!0},p(t,i){const r={};i[0]&3&&(r.post=t[0][t[1]]),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function It(l){let e,n;return e=new mn({}),{c(){U(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,i){W(e,t,i),n=!0},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function tl(l){let e,n,t,i,r,s="수정",o,a,u,g,w,D="삭제",V,v,p;return t=new Hn({props:{fill:"white",length:1.5}}),u=new jn({props:{fill:"white",length:1.5}}),{c(){e=T("div"),n=T("button"),U(t.$$.fragment),i=O(),r=T("span"),r.textContent=s,o=O(),a=T("button"),U(u.$$.fragment),g=O(),w=T("span"),w.textContent=D,this.h()},l(c){e=M(c,"DIV",{id:!0,class:!0});var d=L(e);n=M(d,"BUTTON",{class:!0});var R=L(n);F(t.$$.fragment,R),i=A(R),r=M(R,"SPAN",{"data-svelte-h":!0}),re(r)!=="svelte-17aljrl"&&(r.textContent=s),R.forEach(_),o=A(d),a=M(d,"BUTTON",{class:!0});var y=L(a);F(u.$$.fragment,y),g=A(y),w=M(y,"SPAN",{"data-svelte-h":!0}),re(w)!=="svelte-1k1dgz"&&(w.textContent=D),y.forEach(_),d.forEach(_),this.h()},h(){h(n,"class","flex items-center gap-2 text-white text-sm"),h(a,"class","flex items-center gap-2 text-white text-sm"),h(e,"id","test"),h(e,"class","flex flex-col px-5 gap-3")},m(c,d){H(c,e,d),b(e,n),W(t,n,null),b(n,i),b(n,r),b(e,o),b(e,a),W(u,a,null),b(a,g),b(a,w),V=!0,v||(p=[J(n,"click",l[37]),J(a,"click",l[38]),Le(Ze.call(null,e))],v=!0)},p:Q,i(c){V||(I(t.$$.fragment,c),I(u.$$.fragment,c),V=!0)},o(c){P(t.$$.fragment,c),P(u.$$.fragment,c),V=!1},d(c){c&&_(e),G(t),G(u),v=!1,Te(p)}}}function nl(l){let e,n,t="정말로 삭제하시겠습니까?",i,r,s="이 작업은 취소할 수 없습니다. 계속 진행하시겠습니까?",o,a,u,g="삭제",w,D,V="취소",v,p;return{c(){e=T("div"),n=T("h2"),n.textContent=t,i=O(),r=T("p"),r.textContent=s,o=O(),a=T("div"),u=T("button"),u.textContent=g,w=O(),D=T("button"),D.textContent=V,this.h()},l(c){e=M(c,"DIV",{class:!0});var d=L(e);n=M(d,"H2",{class:!0,"data-svelte-h":!0}),re(n)!=="svelte-1yzhdkj"&&(n.textContent=t),i=A(d),r=M(d,"P",{class:!0,"data-svelte-h":!0}),re(r)!=="svelte-26p028"&&(r.textContent=s),o=A(d),a=M(d,"DIV",{class:!0});var R=L(a);u=M(R,"BUTTON",{class:!0,"data-svelte-h":!0}),re(u)!=="svelte-1q4epan"&&(u.textContent=g),w=A(R),D=M(R,"BUTTON",{class:!0,"data-svelte-h":!0}),re(D)!=="svelte-1rzg9yy"&&(D.textContent=V),R.forEach(_),d.forEach(_),this.h()},h(){h(n,"class","text-lg font-semibold mb-2"),h(r,"class","text-gray-600 mb-4"),h(u,"class","bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition"),h(D,"class","bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition"),h(a,"class","flex justify-center space-x-4"),h(e,"class","text-center")},m(c,d){H(c,e,d),b(e,n),b(e,i),b(e,r),b(e,o),b(e,a),b(a,u),b(a,w),b(a,D),v||(p=[J(u,"click",l[40]),J(D,"click",l[41])],v=!0)},p:Q,d(c){c&&_(e),v=!1,Te(p)}}}function ll(l){var q;let e,n,t,i=[],r=new Map,s,o,a,u,g,w,D,V,v,p,c=!l[4]&&ct(l),d=ve(l[0]);const R=m=>m[71].idx;for(let m=0;m<d.length;m+=1){let k=at(l,d,m),j=R(k);r.set(j,i[m]=kt(j,k))}let y=l[4]&&((q=l[0][l[1]])==null?void 0:q.media.length)>1&&xt(l),N=!l[4]&&It();function B(m){l[39](m)}let Y={fixed:!0,$$slots:{default:[tl]},$$scope:{ctx:l}};l[2]!==void 0&&(Y.isOpen=l[2]),g=new vn({props:Y}),Re.push(()=>Ae(g,"isOpen",B));function Z(m){l[42](m)}let E={$$slots:{default:[nl]},$$scope:{ctx:l}};return l[3]!==void 0&&(E.modalVisible=l[3]),V=new wn({props:E}),Re.push(()=>Ae(V,"modalVisible",Z)),{c(){c&&c.c(),e=O(),n=T("div"),t=T("div");for(let m=0;m<i.length;m+=1)i[m].c();s=O(),y&&y.c(),o=O(),N&&N.c(),u=O(),U(g.$$.fragment),D=O(),U(V.$$.fragment),this.h()},l(m){c&&c.l(m),e=A(m),n=M(m,"DIV",{class:!0});var k=L(n);t=M(k,"DIV",{class:!0});var j=L(t);for(let z=0;z<i.length;z+=1)i[z].l(j);j.forEach(_),s=A(k),y&&y.l(k),o=A(k),N&&N.l(k),k.forEach(_),u=A(m),F(g.$$.fragment,m),D=A(m),F(V.$$.fragment,m),this.h()},h(){h(t,"class","flex flex-grow relative w-full h-full bg-black"),h(n,"class",a="viewer bg-black select-none flex flex-col "+(l[4]?"static w-full h-full":"fixed top-0 left-0 w-screen h-screen safe-area-pt"))},m(m,k){c&&c.m(m,k),H(m,e,k),H(m,n,k),b(n,t);for(let j=0;j<i.length;j+=1)i[j]&&i[j].m(t,null);b(n,s),y&&y.m(n,null),b(n,o),N&&N.m(n,null),l[36](n),H(m,u,k),W(g,m,k),H(m,D,k),W(V,m,k),p=!0},p(m,k){var se;m[4]?c&&(c.d(1),c=null):c||(c=ct(m),c.c(),c.m(e.parentNode,e)),k[0]&47095&&(d=ve(m[0]),le(),i=Xe(i,k,R,1,m,d,r,t,Tt,kt,null,at),ie()),m[4]&&((se=m[0][m[1]])==null?void 0:se.media.length)>1?y?(y.p(m,k),k[0]&19&&I(y,1)):(y=xt(m),y.c(),I(y,1),y.m(n,o)):y&&(le(),P(y,1,1,()=>{y=null}),ie()),m[4]?N&&(le(),P(N,1,1,()=>{N=null}),ie()):N?k[0]&16&&I(N,1):(N=It(),N.c(),I(N,1),N.m(n,null)),(!p||k[0]&16&&a!==(a="viewer bg-black select-none flex flex-col "+(m[4]?"static w-full h-full":"fixed top-0 left-0 w-screen h-screen safe-area-pt")))&&h(n,"class",a);const j={};k[0]&12|k[2]&262144&&(j.$$scope={dirty:k,ctx:m}),!w&&k[0]&4&&(w=!0,j.isOpen=m[2],Oe(()=>w=!1)),g.$set(j);const z={};k[0]&8|k[2]&262144&&(z.$$scope={dirty:k,ctx:m}),!v&&k[0]&8&&(v=!0,z.modalVisible=m[3],Oe(()=>v=!1)),V.$set(z)},i(m){if(!p){for(let k=0;k<d.length;k+=1)I(i[k]);I(y),I(N),I(g.$$.fragment,m),I(V.$$.fragment,m),p=!0}},o(m){for(let k=0;k<i.length;k+=1)P(i[k]);P(y),P(N),P(g.$$.fragment,m),P(V.$$.fragment,m),p=!1},d(m){m&&(_(e),_(n),_(u),_(D)),c&&c.d(m);for(let k=0;k<i.length;k+=1)i[k].d();y&&y.d(),N&&N.d(),l[36](null),G(g,m),G(V,m)}}}const il=30,sl=10,Et=150;function Me(l){return"touches"in l||"changedTouches"in l}function rl(l){return Me(l)?[l.touches[0].clientX,l.touches[0].clientY]:[l.clientX,l.clientY]}function ol(l,e,n){let t,i,r;tn(l,an,f=>n(22,r=f));let{posts:s=[]}=e,{index:o=0}=e,{type:a=r.url.searchParams.get("type")}=e,{isEdit:u=!1}=e,{dontMoveVertically:g=!1}=e,{keyboardY:w=0}=e,{selectedReaction:D=void 0}=e,{hideActionButtons:V=!1}=e,v=!0,p=!1,c=!1,d=0,R=0,y={width:0,height:0},{actionSheetVisible:N=!1}=e,{modalVisible:B=!1}=e;function Y(f){if(!f)return!1;const x=Ce();return x!==null&&String(x)===f}let Z=!1,E=!1,q=-1,m=-1,k,j=!1,z=[],se=[],fe;async function oe(){fn({mediaIdx:`${s[o].mediaIdx||0}`,postIdx:`${s[o].idx}`},{replace:!0})}async function K(){n(19,Z=!0);const f=s.length,x=r.url.searchParams.get("userIdx"),C=r.url.searchParams.get("placeIdx"),S=`&offset=${f}`,X=`&limit=${il}`,te=x?`&userIdx=${x}`:"",Ee=C?`&placeIdx=${C}`:"",ce=(await fetch(`${Ye}/posts?${te}${Ee}${S}${X}`).then(Ie=>Ie.json()).then(Ie=>{var Je;return((Je=Ie.data)==null?void 0:Je.posts)??[]})).map(Ie=>({...Ie,mediaIdx:0}));ce.length===0&&n(20,E=!0),n(0,s=[...s,...ce]),n(19,Z=!1)}function $(f){const{height:x}=y;if(o===0&&f>0||o===s.length-1&&f<0){n(8,d=f*.3);return}n(8,d=Math.max(Math.min(f,x),-x))}function ue(f){n(7,v=!1);const x=we(2),C=Me(f)?f.changedTouches[0].clientY-m:f.clientY-m;C>x&&o>0?(n(1,o-=1),p=!0,oe()):-C>x&&o<s.length-1&&(n(1,o+=1),p=!0,oe()),n(8,d=0)}function ge(f){const{width:x}=y,C=s[o].mediaIdx,S=s[o].media.length-1;if(C===0&&f>0||C===S&&f<0){n(9,R=f*.3);return}n(9,R=Math.max(Math.min(f,x),-x))}function Ve(f){n(7,v=!1);const x=we(2),C=Me(f)?f.changedTouches[0].clientX-q:f.clientX-q,S=s[o].mediaIdx,X=s[o].media.length-1;C>x&&S>0?ae(S-1):-C>x&&S<X&&ae(S+1),n(9,R=0)}function ae(f){n(0,s[o]={...s[o],mediaIdx:f},s),n(0,s=[...s]),c=!0,oe()}function ke(f){p||c||(j=!0,k=void 0,Me(f)?(q=f.touches[0].clientX,m=f.touches[0].clientY):(q=f.clientX,m=f.clientY,window.addEventListener("mousemove",xe,{passive:!1}),window.addEventListener("mouseup",De)))}function xe(f){if(!j||p||c)return;const[x,C]=rl(f),S=x-q,X=C-m;k===void 0&&(k=Math.abs(X)>=Math.abs(S)?"post":"media"),!g&&k==="post"?$(X):k==="media"&&ge(S)}function De(f){!j||p||c||(j=!1,k==="post"?ue(f):k==="media"&&Ve(f),Me(f)||(window.removeEventListener("mousemove",xe),window.removeEventListener("mouseup",De)))}function ze(f){if(p||c)return;f.preventDefault();const x=Date.now(),C=Math.abs(f.deltaX),S=Math.abs(f.deltaY);if(C>S){if(se.push({deltaX:f.deltaX,timestamp:x}),se=se.filter(X=>x-X.timestamp<=Et),se.length>=2){const X=se[0],te=se[se.length-1];if(Math.abs(te.deltaX)-Math.abs(X.deltaX)>=0&&Math.abs(te.deltaX)>=30){const ce=s[o].mediaIdx,Ie=s[o].media.length-1;te.deltaX>0&&ce<Ie?ae(ce+1):te.deltaX<0&&ce>0&&ae(ce-1),se=[],c=!0}}}else if(z.push({deltaY:f.deltaY,timestamp:x}),z=z.filter(X=>x-X.timestamp<=Et),z.length>=2){const X=z[0],te=z[z.length-1];Math.abs(te.deltaY)-Math.abs(X.deltaY)>=0&&Math.abs(te.deltaY)>=30&&(te.deltaY>0&&o<s.length-1?(n(7,v=!1),n(1,o+=1),oe(),p=!0):te.deltaY<0&&o>0&&(n(7,v=!1),n(1,o-=1),oe(),p=!0),z=[])}}function Ue(f){if(p||c)return;const x=s[o].mediaIdx,C=s[o].media.length-1;switch(f.key){case"ArrowUp":o>0&&(n(7,v=!1),n(1,o--,o),p=!0,oe());break;case"ArrowDown":o<s.length-1&&(n(7,v=!1),n(1,o++,o),p=!0,oe());break;case"ArrowLeft":x>0&&(n(7,v=!1),c=!0,ae(x-1));break;case"ArrowRight":x<C&&(n(7,v=!1),c=!0,ae(x+1));break}}function Dt(){n(7,v=!0),p=!1,c=!1}function Fe(){fe&&n(10,y={width:fe.clientWidth,height:fe.clientHeight})}function Pt(){var C,S;const f=Number(r.url.searchParams.get("mediaIdx")||0),x=((S=(C=s.at(o))==null?void 0:C.media)==null?void 0:S.length)||0;f&&f<x?n(0,s[o]={...s[o],mediaIdx:f},s):n(0,s[o]={...s[o],mediaIdx:0},s),n(0,s=[...s]),oe()}function Lt(){document.addEventListener("touchstart",ke,{passive:!1}),document.addEventListener("touchmove",xe,{passive:!1}),document.addEventListener("touchend",De),document.addEventListener("mousedown",ke,{passive:!1}),document.addEventListener("wheel",ze,{passive:!1}),document.addEventListener("keydown",Ue)}function St(){document.removeEventListener("touchstart",ke),document.removeEventListener("touchmove",xe),document.removeEventListener("touchend",De),document.removeEventListener("mousedown",ke),document.removeEventListener("wheel",ze),document.removeEventListener("keydown",Ue)}yt(()=>{Fe();const f=new ResizeObserver(()=>Fe());return fe&&f.observe(fe),Lt(),Pt(),()=>{f.disconnect()}}),Ct(()=>{St()});function We(){var S;const f=Qe(),x=Ce(),C=(S=s[o])==null?void 0:S.idx;!f||!x||!C||fetch(`${Ye}/posts/${C}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`}}).then(X=>X.json()).then(()=>je(`/users/${x}`,{replaceState:!0,invalidateAll:!0}))}async function Ge(f){var X,te,Ee;const x=(X=s[f])==null?void 0:X.idx;if(x===void 0||u||((te=s[f])==null?void 0:te.needReactionReload)!==!0&&((Ee=s[f])!=null&&Ee.reactions))return;const C=Qe(),S=await fetch(`${Ye}/vote/reactions?targetTable=posts&targetId=${x}&byType=true`,{method:"GET",headers:{Authorization:"Bearer "+C}});if(S.ok){const ce=await S.json();n(0,s[f].reactions=ce.data.reactions,s),n(0,s[f].myReaction=ce.data.myReaction,s)}}function pe(f,x){const C=o,S=s[C];if((S==null?void 0:S.idx)===f){if(!$e())return S.needReactionReload=!0,Pe.emit("showSignInModal",{removable:!0,callback:on.isNativePlatform()?()=>{Ge(C)}:void 0});S.myReaction===x?Pe.emit("setReaction",{target:"posts",targetId:f,reaction:null,callback:()=>{n(0,s[C].myReaction=null,s),Ke(C,x)}}):(S.myReaction&&Ke(C,S.myReaction),Pe.emit("setReaction",{target:"posts",targetId:f,reaction:x,callback:()=>{n(0,s[C].myReaction=x,s),s[C].reactions.some(X=>X.type===x)?n(0,s[C].reactions=s[C].reactions.map(X=>X.type===x?{...X,count:Number(X.count)+1}:X),s):n(0,s[C].reactions=[...s[C].reactions,{type:x,count:1}],s)}}))}}function Ke(f,x){let C=[];for(const S of s[f].reactions)if(S.type===x){const X=Number(S.count);X>1&&C.push({...S,count:X-1})}else C.push(S);n(0,s[f].reactions=C,s)}function Rt(f){ln.call(this,l,f)}const Nt=(f,x)=>{pe(f.idx,x.type)};function Bt(f,x,C,S){C[S]=f,n(0,s)}const qt=(f,x,C,S)=>{n(0,x[C].isTextExpanded=S.detail.expanded,s)},Yt=f=>{pe(f.idx,"👍")},Ht=f=>{pe(f.idx,"️🔥")},Ot=f=>{pe(f.idx,"😍")},At=f=>{pe(f.idx,"😋")},jt=f=>{pe(f.idx,"😊️️")},Xt=(f,x)=>f+Number(x.count),Zt=f=>{pe(f.idx,f.myReaction||"❤️")},zt=(f,x,C)=>{n(0,x[C].onReactionShowcase=!0,s);const S=()=>{n(0,x[C].onReactionShowcase=!1,s),window.removeEventListener("click",S)};setTimeout(()=>{window.addEventListener("click",S)},500)},Ut=()=>{if(!$e())return Pe.emit("showSignInModal",{removable:!0});i&&n(2,N=!0)};function Ft(f){Re[f?"unshift":"push"](()=>{fe=f,n(11,fe)})}const Wt=()=>{var f;n(2,N=!1),je(`/viewer/edit?type=patch&postIdx=${(f=window.location.search.split("postIdx=")[1])==null?void 0:f.split("&")[0]}`,{replaceState:!1,invalidateAll:!1})},Gt=()=>{n(2,N=!1),n(3,B=!0)};function Kt(f){N=f,n(2,N)}const Jt=()=>{We(),n(3,B=!1)},Qt=()=>{n(3,B=!1)};function $t(f){B=f,n(3,B)}return l.$$set=f=>{"posts"in f&&n(0,s=f.posts),"index"in f&&n(1,o=f.index),"type"in f&&n(16,a=f.type),"isEdit"in f&&n(4,u=f.isEdit),"dontMoveVertically"in f&&n(17,g=f.dontMoveVertically),"keyboardY"in f&&n(5,w=f.keyboardY),"selectedReaction"in f&&n(18,D=f.selectedReaction),"hideActionButtons"in f&&n(6,V=f.hideActionButtons),"actionSheetVisible"in f&&n(2,N=f.actionSheetVisible),"modalVisible"in f&&n(3,B=f.modalVisible)},l.$$.update=()=>{var f;l.$$.dirty[0]&4194304&&r&&oe(),l.$$.dirty[0]&262144&&D&&pe(D.postIdx,D.reaction),l.$$.dirty[0]&2&&Ge(o),l.$$.dirty[0]&3&&n(21,t=(f=s[o])==null?void 0:f.user_idx),l.$$.dirty[0]&2097152&&n(12,i=Y(t)),l.$$.dirty[0]&1703939&&!g&&o>=s.length-sl&&!Z&&!E&&K()},[s,o,N,B,u,w,V,v,d,R,y,fe,i,Dt,We,pe,a,g,D,Z,E,t,r,Rt,Nt,Bt,qt,Yt,Ht,Ot,At,jt,Xt,Zt,zt,Ut,Ft,Wt,Gt,Kt,Jt,Qt,$t]}class Ll extends he{constructor(e){super(),me(this,e,ol,ll,de,{posts:0,index:1,type:16,isEdit:4,dontMoveVertically:17,keyboardY:5,selectedReaction:18,hideActionButtons:6,actionSheetVisible:2,modalVisible:3},null,[-1,-1,-1])}}export{Ll as V};
