const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./web.DJlEQ6ar.js","./index.DkAjgCzf.js","./entry.PZK0YXEE.js","./scheduler.C36nLLxS.js","./preload-helper.D6kgxu3v.js","./emitter.E5P-NQ8u.js","./web.DngZNwES.js"])))=>i.map(i=>d[i]);
var Jn=Object.defineProperty;var zn=(r,t,e)=>t in r?Jn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var ts=(r,t,e)=>zn(r,typeof t!="symbol"?t+"":t,e);import{s as Zn,z as Hn,e as qn,c as $n,b as tr,f as es,o as is,L as ss,i as er,A as ir,p as sr,C as nr,D as rr,E as or,u as ar,k as lr,M as hr,S as cr,l as Ar}from"./scheduler.C36nLLxS.js";import{S as dr,i as ur,t as gr,d as fr}from"./index.CVjGLjMk.js";import{B as xr,u as Le,l as be,E as Ut,a as Zt,R as mr,g as O,e as bi,i as qt,c as mi,G as pr,b as fe,d as yr,h as Cr,j as Xe,k as _r,m as st,S as je,n as ct,o as Er,p as Sr,q as wr,r as Xt,s as Ls,t as Rr,v as bs,w as Fr,x as Tr,y as pi,z as Ds,A as Ir,C as Di,D as Lr,P as Bt,F as br,H as Bs,I as Nt,J as Dr,K as Br,L as Gr,N as Pr,Q as yi,U as Ci,W as Gs,Y as Ps,Z as Or,_ as De,$ as vr,a0 as Os,a1 as vs,a2 as kr,a3 as ks,a4 as lt,a5 as Be,a6 as Je,a7 as Ht,a8 as Mr,a9 as $t,aa as Ur,ab as Ms,ac as Nr,ad as Us,ae as Yr,af as jt,ag as Qr,ah as Jt,ai as Ns,aj as _i,ak as At,al as Vr,am as Wr,an as ns,ao as Wt,ap as Ys,aq as Qs,ar as Y,as as te,at as Vs,au as Kr,av as Xr,aw as jr,ax as Jr,ay as zr,az as Ws,aA as Z,aB as Zr,aC as Bi,aD as Hr,X as qr,aE as $r,aF as to,aG as eo,aH as io,aI as so,aJ as Ei,aK as no,aL as ro,aM as oo,aN as Lt,aO as nt,aP as Ge,aQ as Pe,aR as _t,aS as Et,aT as Oe,aU as ve,aV as ke,aW as ze,aX as ao,aY as lo,aZ as vt,a_ as de,a$ as Me,b0 as Ks,b1 as ho,b2 as co,b3 as Xs,b4 as Ao,b5 as Kt,b6 as uo,b7 as go,b8 as rs,b9 as fo,ba as he,bb as xo,bc as mo,bd as po,be as yo,bf as ee,bg as os,bh as js,bi as ce,bj as Co,bk as ut,bl as as,bm as ls,bn as _o,bo as Js,bp as Eo,bq as zs,br as So,bs as wo,bt as Ro,bu as Fo,bv as li,bw as hs,bx as To,by as Ee,bz as j,bA as Io,bB as Lo,bC as bo,bD as Do,bE as ie,bF as Bo,bG as K,bH as Mt,bI as J,bJ as Zs,bK as ot,bL as Go,bM as Po,bN as cs,bO as Oo,bP as vo,bQ as ko,T as Hs,V as Mo,f as Ue,O as qs,M as Uo,bR as hi}from"./Overlay.Cc9n_-zc.js";import{v as Ze,w as No,x as Yo,y as Qo,G as Gi,P as Vo,r as $s,C as Wo,A as tn,q as en,z as As}from"./index.DkAjgCzf.js";import{g as sn}from"./entry.PZK0YXEE.js";import{e as ht}from"./emitter.E5P-NQ8u.js";import{_ as nn}from"./preload-helper.D6kgxu3v.js";import{p as Ko}from"./stores.DfozXXyK.js";import{s as Xo}from"./searchParams.jRVrgsll.js";function rn(r,t){const e=(""+r).split("."),i=(""+t).split(".");for(let s=0;s<Math.max(e.length,i.length);s++){const n=parseInt(e[s]||"0",10),o=parseInt(i[s]||"0",10);if(n>o)return 1;if(o>n)return-1}return 0}const jo="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20opacity='0.2'%20cx='15'%20cy='15'%20r='15'%20fill='%230C79FE'%20/%3e%3ccircle%20cx='15'%20cy='15'%20r='7'%20fill='%230C79FE'%20stroke='white'%20stroke-width='2'%20/%3e%3c/svg%3e",Jo=""+new URL("../assets/add-marker.CpezPS16.svg",import.meta.url).href;class gt extends xr{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new gt(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Le(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=be(t,Ut.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?zo(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function zo(r){if(typeof r=="function")return r;let t;return Array.isArray(r)?t=r:(Zt(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[r]),function(){return t}}class ds{constructor(t){this.rbush_=new mr(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[O(e)]=i}load(t,e){const i=new Array(e.length);for(let s=0,n=e.length;s<n;s++){const o=t[s],a=e[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=l,this.items_[O(a)]=l}this.rbush_.load(i)}remove(t){const e=O(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){const i=this.items_[O(e)],s=[i.minX,i.minY,i.maxX,i.maxY];bi(s,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(s){return s.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let s=0,n=t.length;s<n;s++)if(i=e(t[s]),i)return i;return i}isEmpty(){return qt(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return mi(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class Ne extends pr{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Le),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,i=t.length;e<i;++e)this.changeEventsKeys_.push(be(t[e],Ut.CHANGE,this.changed,this))}clone(){const t=new Ne(ci(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<fe(this.getExtent(),t,e))return s;const n=this.geometries_;for(let o=0,a=n.length;o<a;++o)s=n[o].closestPointXY(t,e,i,s);return s}containsXY(t,e){const i=this.geometries_;for(let s=0,n=i.length;s<n;++s)if(i[s].containsXY(t,e))return!0;return!1}computeExtent(t){yr(t);const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)Cr(t,e[i].getExtent());return t}getGeometries(){return ci(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let s=!1;for(let n=0,o=i.length;n<o;++n){const a=i[n],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(s=!0)}return s?new Ne(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const i=this.geometries_;for(let s=0,n=i.length;s<n;++s)i[s].rotate(t,e);this.changed()}scale(t,e,i){i||(i=Xe(this.getExtent()));const s=this.geometries_;for(let n=0,o=s.length;n<o;++n)s[n].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(ci(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let s=0,n=i.length;s<n;++s)i[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function ci(r){return r.map(t=>t.clone())}function Ye(r,t,e,i,s,n,o){let a,l;const c=(e-t)/i;if(c===1)a=t;else if(c===2)a=t,l=s;else if(c!==0){let h=r[t],A=r[t+1],d=0;const u=[0];for(let x=t+i;x<e;x+=i){const p=r[x],y=r[x+1];d+=Math.sqrt((p-h)*(p-h)+(y-A)*(y-A)),u.push(d),h=p,A=y}const g=s*d,f=_r(u,g);f<0?(l=(g-u[-f-2])/(u[-f-1]-u[-f-2]),a=t+(-f-2)*i):a=t+f*i}o=o>1?o:2,n=n||new Array(o);for(let h=0;h<o;++h)n[h]=a===void 0?NaN:l===void 0?r[a+h]:st(r[a+h],r[a+i+h],l);return n}function Si(r,t,e,i,s,n){if(e==t)return null;let o;if(s<r[t+i-1])return n?(o=r.slice(t,t+i),o[i-1]=s,o):null;if(r[e-1]<s)return n?(o=r.slice(e-i,e),o[i-1]=s,o):null;if(s==r[t+i-1])return r.slice(t,t+i);let a=t/i,l=e/i;for(;a<l;){const d=a+l>>1;s<r[(d+1)*i-1]?l=d:a=d+1}const c=r[a*i-1];if(s==c)return r.slice((a-1)*i,(a-1)*i+i);const h=r[(a+1)*i-1],A=(s-c)/(h-c);o=[];for(let d=0;d<i-1;++d)o.push(st(r[(a-1)*i+d],r[a*i+d],A));return o.push(s),o}function Zo(r,t,e,i,s,n,o){if(o)return Si(r,t,e[e.length-1],i,s,n);let a;if(s<r[i-1])return n?(a=r.slice(0,i),a[i-1]=s,a):null;if(r[r.length-1]<s)return n?(a=r.slice(r.length-i),a[i-1]=s,a):null;for(let l=0,c=e.length;l<c;++l){const h=e[l];if(t!=h){if(s<r[t+i-1])return null;if(s<=r[h-1])return Si(r,t,h,i,s,!1);t=h}}return null}function on(r,t,e,i){let s=r[t],n=r[t+1],o=0;for(let a=t+i;a<e;a+=i){const l=r[a],c=r[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-n)*(c-n)),s=l,n=c}return o}class Yt extends je{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){ct(this.flatCoordinates,t),this.changed()}clone(){const t=new Yt(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<fe(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Er(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Sr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,s))}forEachSegment(t){return wr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,Si(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Xt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Ye(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return on(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Ls(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Yt(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Rr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bs(this.flatCoordinates,0,t,this.stride),this.changed()}}class ue extends je{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{const s=t,n=[],o=[];for(let l=0,c=s.length;l<c;++l){const h=s[l];ct(n,h.getFlatCoordinates()),o.push(n.length)}const a=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(a,n),this.ends_=o}}appendLineString(t){ct(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ue(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<fe(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Fr(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tr(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,s))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,Zo(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return pi(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Yt(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,s=[];let n=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=new Yt(t.slice(n,l),i);s.push(c),n=l}return s}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const s=this.ends_,n=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],c=Ye(e,i,l,n,.5);ct(t,c),i=l}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Ds(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new ue(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return Ir(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Di(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class xe extends je{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){ct(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new xe(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<fe(this.getExtent(),t,e))return s;const n=this.flatCoordinates,o=this.stride;for(let a=0,l=n.length;a<l;a+=o){const c=Lr(t,e,n[a],n[a+1]);if(c<s){s=c;for(let h=0;h<o;++h)i[h]=n[a+h];i.length=o}}return s}getCoordinates(){return Xt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Bt(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,s=[];for(let n=0,o=t.length;n<o;n+=i){const a=new Bt(t.slice(n,n+i),e);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let s=0,n=e.length;s<n;s+=i){const o=e[s],a=e[s+1];if(br(t,o,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bs(this.flatCoordinates,0,t,this.stride),this.changed()}}function an(r,t,e,i){const s=[];let n=Nt();for(let o=0,a=e.length;o<a;++o){const l=e[o];n=Bs(r,t,l[0],i),s.push((n[0]+n[2])/2,(n[1]+n[3])/2),t=l[l.length-1]}return s}class ge extends je{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){const s=t,n=[],o=[];for(let a=0,l=s.length;a<l;++a){const c=s[a],h=n.length,A=c.getEnds();for(let d=0,u=A.length;d<u;++d)A[d]+=h;ct(n,c.getFlatCoordinates()),o.push(A)}e=s.length===0?this.getLayout():s[0].getLayout(),t=n,i=o}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;ct(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,n=e.length;s<n;++s)e[s]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const i=new ge(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,s){return s<fe(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Dr(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Br(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return Gr(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return Pr(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),yi(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Ci(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=an(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Gs(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new xe(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Ps(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=yi(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Or(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new ge(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const i=this.endss_[t].slice(),s=i[i.length-1];if(e!==0)for(let n=0,o=i.length;n<o;++n)i[n]-=e;return new De(this.flatCoordinates.slice(e,s),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[];let n=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(n!==0)for(let A=0,d=l.length;A<d;++A)l[A]-=n;const h=new De(e.slice(n,c),t,l);s.push(h),n=c}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return vr(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=Os(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const us=$t();class z{constructor(t,e,i,s,n,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=n,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?vs(this.flatCoordinates_):Bs(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Xe(this.getExtent());this.flatInteriorPoints_=kr(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=ks(this.flatCoordinates_,this.ends_),e=an(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=Gs(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Ye(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let s=0,n=i.length;s<n;++s){const o=i[s],a=Ye(t,e,o,2,.5);ct(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=lt(t);const e=t.getExtent(),i=t.getWorldExtent();if(e&&i){const s=Be(i)/Be(e);Je(us,i[0],i[3],s,-s,0,0,0),Ht(this.flatCoordinates_,0,this.flatCoordinates_.length,2,us,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new z(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Mr((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const i=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":i.length=Ls(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,i,0),s=[i.length];break;case"MultiLineString":s=[],i.length=Ds(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,i,0,s);break;case"Polygon":s=[],i.length=Ur(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),i,0,s);break}return s&&(this.simplifiedGeometry_=new z(this.type_,i,s,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}z.prototype.getFlatCoordinates=z.prototype.getOrientedFlatCoordinates;const it={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Ho(r,t){return[[-1/0,-1/0,1/0,1/0]]}function ln(r,t){return[r]}let qo=!1;function hn(r,t,e,i,s,n,o){const a=new XMLHttpRequest;a.open("GET",typeof r=="function"?r(e,i,s):r,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=qo,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();try{let h;c=="text"||c=="json"?h=a.responseText:c=="xml"?h=a.responseXML||a.responseText:c=="arraybuffer"&&(h=a.response),h?n(t.readFeatures(h,{extent:e,featureProjection:s}),t.readProjection(h)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function gs(r,t){return function(e,i,s,n,o){const a=this;hn(r,t,e,i,s,function(l,c){a.addFeatures(l),n!==void 0&&n(l)},o||Ms)}}class Rt extends Ns{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class Gt extends Nr{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Ms,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Zt(this.format_,"`format` must be set when `url` is set"),this.loader_=gs(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Ho;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new ds:null,this.loadedExtentsRtree_=new ds,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(t.features)?s=t.features:t.features&&(i=t.features,s=i.getArray()),!e&&i===void 0&&(i=new Us(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=O(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Rt(it.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof z||(this.featureChangeKeys_[t]=[be(e,Ut.CHANGE,this.handleFeatureChange_,this),be(e,Yr.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(e.getId()!==void 0){const s=String(e.getId());if(!(s in this.idIndex_))this.idIndex_[s]=e;else if(e instanceof z){const n=this.idIndex_[s];n instanceof z?Array.isArray(n)?n.push(e):this.idIndex_[s]=[n,e]:i=!1}else i=!1}return i&&(Zt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],s=[];for(let n=0,o=t.length;n<o;n++){const a=t[n],l=O(a);this.addToIndex_(l,a)&&i.push(a)}for(let n=0,o=i.length;n<o;n++){const a=i[n],l=O(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const h=c.getExtent();e.push(h),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(it.ADDFEATURE))for(let n=0,o=i.length;n<o;n++)this.dispatchEvent(new Rt(it.ADDFEATURE,i[n]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(it.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(it.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(jt.ADD,i=>{e||(e=!0,this.addFeature(i.element),e=!1)}),t.addEventListener(jt.REMOVE,i=>{e||(e=!0,this.removeFeature(i.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Le);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(i);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Rt(it.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(s){const n=s.getGeometry();if(n instanceof z||n.intersectsCoordinate(t))return e(s)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){const s=i.getGeometry();if(s instanceof z||s.intersectsExtent(t)){const n=e(i);if(n)return n}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),qt(this.nullGeometryFeatures_)||ct(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const s=Qr(t,e);return[].concat(...s.map(n=>this.featuresRtree_.getInExtent(n)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],s=t[1];let n=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||_i,this.featuresRtree_.forEachInExtent(l,function(c){if(e(c)){const h=c.getGeometry(),A=a;if(a=h instanceof z?0:h.closestPointXY(i,s,o,a),a<A){n=c;const d=Math.sqrt(a);l[0]=i-d,l[1]=s-d,l[2]=i+d,l[3]=s+d}}}),n}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=O(e),s=e.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}const n=e.getId();if(n!==void 0){const o=n.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new Rt(it.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:O(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&qt(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){const s=this.loadedExtentsRtree_,n=this.strategy_(t,e,i);for(let o=0,a=n.length;o<a;++o){const l=n[o];s.forEachInExtent(l,function(h){return Jt(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Rt(it.FEATURESLOADSTART)),this.loader_.call(this,l,e,i,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new Rt(it.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Rt(it.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(s){if(bi(s.extent,t))return i=s,!0}),i&&e.remove(i)}removeFeatures(t){let e=!1;for(let i=0,s=t.length;i<s;++i)e=this.removeFeatureInternal(t[i])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=O(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const i=this.featureChangeKeys_[e];i==null||i.forEach(Le),delete this.featureChangeKeys_[e];const s=t.getId();if(s!==void 0){const n=s.toString(),o=this.idIndex_[n];o===t?delete this.idIndex_[n]:Array.isArray(o)&&(o.splice(o.indexOf(t),1),o.length===1&&(this.idIndex_[n]=o[0]))}return delete this.uidIndex_[e],this.hasListener(it.REMOVEFEATURE)&&this.dispatchEvent(new Rt(it.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){Zt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(gs(t,this.format_))}}class cn extends Gt{constructor(t){t=t||{},super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=t.distance!==void 0?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(e){const i=e.getGeometry();return Zt(!i||i.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),i},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,i){var s;(s=this.source)==null||s.loadFeatures(t,e,i),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(Ut.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(Ut.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){const i=t===0?0:Math.min(e,t)/t,s=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=e,this.interpolationRatio=i,s&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const t=Nt(),e=this.distance*this.resolution,i=this.source.getFeatures(),s={};for(let n=0,o=i.length;n<o;n++){const a=i[n];if(!(O(a)in s)){const l=this.geometryFunction(a);if(l){const c=l.getCoordinates();vs(c,t),At(t,e,t);const h=this.source.getFeaturesInExtent(t).filter(function(A){const d=O(A);return d in s?!1:(s[d]=!0,!0)});this.features.push(this.createCluster(h,t))}}}}createCluster(t,e){const i=[0,0];for(let a=t.length-1;a>=0;--a){const l=this.geometryFunction(t[a]);l?Vr(i,l.getCoordinates()):t.splice(a,1)}Wr(i,1/t.length);const s=Xe(e),n=this.interpolationRatio,o=new Bt([i[0]*(1-n)+s[0]*n,i[1]*(1-n)+s[1]*n]);return this.createCustomCluster_?this.createCustomCluster_(o,t):new gt({geometry:o,features:t})}}const fs=4,wi="1.3.0";function $o(r,t,e,i,s){s.WIDTH=e[0],s.HEIGHT=e[1];const n=i.getAxisOrientation(),o=rn(s.VERSION,"1.3")>=0;s[o?"CRS":"SRS"]=i.getCode();const a=o&&n.startsWith("ne")?[t[1],t[0],t[3],t[2]]:t;return s.BBOX=a.join(","),Ys(r,s)}function ta(r,t,e,i,s,n,o){n=Object.assign({REQUEST:"GetMap"},n);const a=t/e,l=[ns(Wt(r)/a,fs),ns(Be(r)/a,fs)];if(e!=1)switch(o){case"geoserver":const h=90*e+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+h:n.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":n.MAP_RESOLUTION=90*e;break;case"carmentaserver":case"qgis":n.DPI=90*e;break;default:throw new Error("Unknown `serverType` configured")}return $o(s,r,l,i,n)}function xs(r,t){return Object.assign({REQUEST:t,SERVICE:"WMS",VERSION:wi,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},r)}let ea=class extends Qs{constructor(t,e,i,s,n,o){super(t,e,o),this.extent=null,this.format_=s,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=n,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Y.IDLE&&(this.setState(Y.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(Y.ERROR)}setFeatures(t){this.features_=t,this.setState(Y.LOADED)}setLoader(t){this.loader_=t}};const ms=[];class ia extends Qs{constructor(t,e,i,s){super(t,e,{transition:0}),this.context_=null,this.executorGroups=[],this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=s.bind(void 0,this),this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=te(1,1,ms)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(t){const e=O(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){Vs(this.context_),ms.push(this.context_.canvas),this.context_=null,super.release()}}class sa extends Kr{constructor(t){const e=t.projection||"EPSG:3857",i=t.extent||Xr(e),s=t.tileGrid||jr({extent:i,maxResolution:t.maxResolution,maxZoom:t.maxZoom!==void 0?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,projection:e,state:t.state,tileGrid:s,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:na,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0?!0:t.wrapX,transition:t.transition,zDirection:t.zDirection===void 0?1:t.zDirection}),this.format_=t.format?t.format:null,this.sourceTileCache_=new Jr(128),this.overlaps_=t.overlaps==null?!0:t.overlaps,this.tileClass=t.tileClass?t.tileClass:ea,this.tileGrids_={}}getOverlaps(){return this.overlaps_}clear(){this.sourceTileCache_.clear()}expireCache(t,e){const i=this.getTileCacheForProjection(t),s=Object.keys(e).reduce((n,o)=>{const a=zr(o),l=i.peek(a);if(l){const c=l.sourceTiles;for(let h=0,A=c.length;h<A;++h)n[c[h].getKey()]=!0}return n},{});super.expireCache(t,e),this.sourceTileCache_.expireCache(s)}getSourceTiles(t,e,i){if(i.getState()===Y.IDLE){i.setState(Y.LOADING);const s=i.wrappedTileCoord,n=this.getTileGridForProjection(e),o=n.getTileCoordExtent(s),a=s[0],l=n.getResolution(a);At(o,-l,o);const c=this.tileGrid,h=c.getExtent();h&&Ws(o,h,o);const A=c.getZForResolution(l,this.zDirection);c.forEachTileCoord(o,A,d=>{const u=this.tileUrlFunction(d,t,e),g=this.sourceTileCache_.containsKey(u)?this.sourceTileCache_.get(u):new this.tileClass(d,u?Y.IDLE:Y.EMPTY,u,this.format_,this.tileLoadFunction);i.sourceTiles.push(g);const f=g.getState();if(f<Y.LOADED){const x=p=>{this.handleTileChange(p);const y=g.getState();if(y===Y.LOADED||y===Y.ERROR){const C=g.getKey();C in i.errorTileKeys?g.getState()===Y.LOADED&&delete i.errorTileKeys[C]:i.loadingSourceTiles--,y===Y.ERROR?i.errorTileKeys[C]=!0:g.removeEventListener(Ut.CHANGE,x),i.loadingSourceTiles===0&&i.setState(qt(i.errorTileKeys)?Y.LOADED:Y.ERROR)}};g.addEventListener(Ut.CHANGE,x),i.loadingSourceTiles++}f===Y.IDLE&&(g.extent=c.getTileCoordExtent(d),g.projection=e,g.resolution=c.getResolution(d[0]),this.sourceTileCache_.set(u,g),g.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(d=>d.getState()===Y.ERROR)?Y.ERROR:Y.LOADED)}return i.sourceTiles}getTile(t,e,i,s,n){const o=[t,e,i];let a=this.getTileCoordForTileUrlFunction(o,n);const l=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(n);if(a&&l){const d=c.getTileCoordExtent(a);At(d,-c.getResolution(t),d),Z(l,d)||(a=null)}let h=!0;if(a!==null){const d=this.tileGrid,u=c.getResolution(t),g=d.getZForResolution(u,1),f=c.getTileCoordExtent(a);At(f,-u,f),d.forEachTileCoord(f,g,x=>{h=h&&!this.tileUrlFunction(x,s,n)})}const A=new ia(o,h?Y.EMPTY:Y.IDLE,a,this.getSourceTiles.bind(this,s,n));return A.key=this.getKey(),A}getTileGridForProjection(t){const e=t.getCode();let i=this.tileGrids_[e];if(!i){const s=this.tileGrid,n=s.getResolutions().slice(),o=n.map(function(c,h){return s.getOrigin(h)}),a=n.map(function(c,h){return s.getTileSize(h)}),l=Hr+1;for(let c=n.length;c<l;++c)n.push(n[c-1]/2),o.push(o[c-1]),a.push(a[c-1]);i=new Zr({extent:s.getExtent(),origins:o,resolutions:n,tileSizes:a}),this.tileGrids_[e]=i}return i}getTilePixelRatio(t){return t}getTilePixelSize(t,e,i){const s=this.getTileGridForProjection(i),n=Bi(s.getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]}}function na(r,t){r.setLoader(function(e,i,s){hn(t,r.getFormat(),e,i,s,r.onLoad.bind(r),r.onError.bind(r))})}class ra extends qr{constructor(t){t=t||{},super({projection:t.projection,tileGrid:t.tileGrid,wrapX:t.wrapX!==void 0?t.wrapX:!0,zDirection:t.zDirection,url:t.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(e,i)=>{const s=e.getTileCoord()[0],n=Bi(this.tileGrid.getTileSize(s)),o=te(n[0],n[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,n[0]+.5,n[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(i,n[0]/2,n[1]/2,n[0]),o.fillText(i,n[0]/2,n[1]/2,n[0]),e.setImage(o.canvas)}})}}class oa extends $r{constructor(t){t=t||{};const e=Object.assign({},t.params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=Nt(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,s){const n=lt(i),o=this.getProjection()||n;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=to(t,n,o),c=eo(o,n,t,e),h=a.getZForResolution(c,this.zDirection),A=a.getResolution(h),d=a.getTileCoordForCoordAndZ(l,h);if(a.getResolutions().length<=d[0])return;let u=a.getTileCoordExtent(d,this.tmpExtent_);const g=this.gutter_;g!==0&&(u=At(u,A*g,u));const f={QUERY_LAYERS:this.params_.LAYERS};Object.assign(f,xs(this.params_,"GetFeatureInfo"),s);const x=Math.floor((l[0]-u[0])/A),p=Math.floor((u[3]-l[1])/A);return f[this.v13_?"I":"X"]=x,f[this.v13_?"J":"Y"]=p,this.getRequestUrl_(d,u,1,o||n,f)}getLegendUrl(t,e){if(this.urls[0]===void 0)return;const i={SERVICE:"WMS",VERSION:wi,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const s=this.params_.LAYERS;if(!(!Array.isArray(s)||s.length===1))return;i.LAYER=s}if(t!==void 0){const s=this.getProjection()?this.getProjection().getMetersPerUnit():1,n=28e-5;i.SCALE=t*s/n}return Object.assign(i,e),Ys(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,s,n){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=io(so(t),o.length);a=o[l]}return ta(e,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(t[0]),i,s,a,n,this.serverType_)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||wi;this.v13_=rn(t,"1.3")>=0}tileUrlFunction(t,e,i){let s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(i)),s.getResolutions().length<=t[0])return;e!=1&&(!this.hidpi_||this.serverType_===void 0)&&(e=1);const n=s.getResolution(t[0]);let o=s.getTileCoordExtent(t,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=At(o,n*a,o));const l=Object.assign({},xs(this.params_,"GetMap"));return this.getRequestUrl_(t,o,e,i,l)}}const I={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Se=[I.FILL],bt=[I.STROKE],kt=[I.BEGIN_PATH],ps=[I.CLOSE_PATH];class An{drawCustom(t,e,i,s,n){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,i){}drawFeature(t,e,i){}drawGeometryCollection(t,e,i){}drawLineString(t,e,i){}drawMultiLineString(t,e,i){}drawMultiPoint(t,e,i){}drawMultiPolygon(t,e,i){}drawPoint(t,e,i){}drawPolygon(t,e,i){}drawText(t,e,i){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}class me extends An{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,n=this.coordinates;let o=n.length;for(let a=0,l=t.length;a<l;a+=e)s[0]=t[a],s[1]=t[a+1],Ei(i,s)&&(n[o++]=s[0],n[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,i,s,n,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(e+=s);let h=t[e],A=t[e+1];const d=this.tmpCoordinate_;let u=!0,g,f,x;for(g=e+s;g<i;g+=s)d[0]=t[g],d[1]=t[g+1],x=no(c,d),x!==f?(u&&(a[l++]=h,a[l++]=A,u=!1),a[l++]=d[0],a[l++]=d[1]):x===ro.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],u=!1):u=!0,h=d[0],A=d[1],f=x;return(n&&u||g===e+s)&&(a[l++]=h,a[l++]=A),l}drawCustomCoordinates_(t,e,i,s,n){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(t,e,l,s,!1,!1);n.push(c),e=l}return e}drawCustom(t,e,i,s,n){this.beginGeometry(t,e,n);const o=t.getType(),a=t.getStride(),l=this.coordinates.length;let c,h,A,d,u;switch(o){case"MultiPolygon":c=t.getOrientedFlatCoordinates(),d=[];const g=t.getEndss();u=0;for(let f=0,x=g.length;f<x;++f){const p=[];u=this.drawCustomCoordinates_(c,u,g[f],a,p),d.push(p)}this.instructions.push([I.CUSTOM,l,d,t,i,Ci,n]),this.hitDetectionInstructions.push([I.CUSTOM,l,d,t,s||i,Ci,n]);break;case"Polygon":case"MultiLineString":A=[],c=o=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(c,0,t.getEnds(),a,A),this.instructions.push([I.CUSTOM,l,A,t,i,pi,n]),this.hitDetectionInstructions.push([I.CUSTOM,l,A,t,s||i,pi,n]);break;case"LineString":case"Circle":c=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([I.CUSTOM,l,h,t,i,Xt,n]),this.hitDetectionInstructions.push([I.CUSTOM,l,h,t,s||i,Xt,n]);break;case"MultiPoint":c=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(c,a),h>l&&(this.instructions.push([I.CUSTOM,l,h,t,i,Xt,n]),this.hitDetectionInstructions.push([I.CUSTOM,l,h,t,s||i,Xt,n]));break;case"Point":c=t.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),h=this.coordinates.length,this.instructions.push([I.CUSTOM,l,h,t,i,void 0,n]),this.hitDetectionInstructions.push([I.CUSTOM,l,h,t,s||i,void 0,n]);break}this.endGeometry(e)}beginGeometry(t,e,i){this.beginGeometryInstruction1_=[I.BEGIN_GEOMETRY,e,0,t,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[I.BEGIN_GEOMETRY,e,0,t,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const i=t.length;let s,n,o=-1;for(e=0;e<i;++e)s=t[e],n=s[0],n==I.END_GEOMETRY?o=e:n==I.BEGIN_GEOMETRY&&(s[2]=e,oo(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const s=t.getColor();i.fillPatternScale=s&&typeof s=="object"&&"src"in s?this.pixelRatio:1,i.fillStyle=Lt(s||nt)}else i.fillStyle=void 0;if(e){const s=e.getColor();i.strokeStyle=Lt(s||Ge);const n=e.getLineCap();i.lineCap=n!==void 0?n:Pe;const o=e.getLineDash();i.lineDash=o?o.slice():_t;const a=e.getLineDashOffset();i.lineDashOffset=a||Et;const l=e.getLineJoin();i.lineJoin=l!==void 0?l:Oe;const c=e.getWidth();i.lineWidth=c!==void 0?c:ve;const h=e.getMiterLimit();i.miterLimit=h!==void 0?h:ke,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[I.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(t.fillPatternScale),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[I.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,s=t.lineCap,n=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||n!=t.currentLineDash&&!ze(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[I.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=ao(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;At(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class aa extends me{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!Ei(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const s=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,n);this.instructions.push([I.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([I.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const s=t.getFlatCoordinates(),n=[];for(let l=0,c=s.length;l<c;l+=t.getStride())(!this.maxExtent||Ei(this.maxExtent,s.slice(l,l+2)))&&n.push(s[l],s[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(n,2);this.instructions.push([I.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([I.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),s=t.getSize(),n=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class la extends me{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){const n=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),a=[I.MOVE_TO_LINE_TO,n,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e,i){const s=this.state,n=s.strokeStyle,o=s.lineWidth;if(n===void 0||o===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,_t,Et],kt);const a=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(bt),this.endGeometry(e)}drawMultiLineString(t,e,i){const s=this.state,n=s.strokeStyle,o=s.lineWidth;if(n===void 0||o===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,_t,Et],kt);const a=t.getEnds(),l=t.getFlatCoordinates(),c=t.getStride();let h=0;for(let A=0,d=a.length;A<d;++A)h=this.drawFlatCoordinates_(l,h,a[A],c);this.hitDetectionInstructions.push(bt),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(bt),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(bt),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(kt)}}class ys extends me{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){const n=this.state,o=n.fillStyle!==void 0,a=n.strokeStyle!==void 0,l=i.length;this.instructions.push(kt),this.hitDetectionInstructions.push(kt);for(let c=0;c<l;++c){const h=i[c],A=this.coordinates.length,d=this.appendFlatLineCoordinates(t,e,h,s,!0,!a),u=[I.MOVE_TO_LINE_TO,A,d];this.instructions.push(u),this.hitDetectionInstructions.push(u),a&&(this.instructions.push(ps),this.hitDetectionInstructions.push(ps)),e=h}return o&&(this.instructions.push(Se),this.hitDetectionInstructions.push(Se)),a&&(this.instructions.push(bt),this.hitDetectionInstructions.push(bt)),e}drawCircle(t,e,i){const s=this.state,n=s.fillStyle,o=s.strokeStyle;if(n===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_FILL_STYLE,nt]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,_t,Et]);const a=t.getFlatCoordinates(),l=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const h=[I.CIRCLE,c];this.instructions.push(kt,h),this.hitDetectionInstructions.push(kt,h),s.fillStyle!==void 0&&(this.instructions.push(Se),this.hitDetectionInstructions.push(Se)),s.strokeStyle!==void 0&&(this.instructions.push(bt),this.hitDetectionInstructions.push(bt)),this.endGeometry(e)}drawPolygon(t,e,i){const s=this.state,n=s.fillStyle,o=s.strokeStyle;if(n===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_FILL_STYLE,nt]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,_t,Et]);const a=t.getEnds(),l=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(e)}drawMultiPolygon(t,e,i){const s=this.state,n=s.fillStyle,o=s.strokeStyle;if(n===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_FILL_STYLE,nt]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,_t,Et]);const a=t.getEndss(),l=t.getOrientedFlatCoordinates(),c=t.getStride();let h=0;for(let A=0,d=a.length;A<d;++A)h=this.drawFlatCoordinatess_(l,h,a[A],c);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=lo(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}function ha(r,t,e,i,s){const n=[];let o=e,a=0,l=t.slice(e,2);for(;a<r&&o+s<i;){const[c,h]=l.slice(-2),A=t[o+s],d=t[o+s+1],u=Math.sqrt((A-c)*(A-c)+(d-h)*(d-h));if(a+=u,a>=r){const g=(r-a+u)/u,f=st(c,A,g),x=st(h,d,g);l.push(f,x),n.push(l),l=[f,x],a==r&&(o+=s),a=0}else if(a<r)l.push(t[o+s],t[o+s+1]),o+=s;else{const g=u-a,f=st(c,A,g/u),x=st(h,d,g/u);l.push(f,x),n.push(l),l=[f,x],a=0,o+=s}}return a>0&&n.push(l),n}function ca(r,t,e,i,s){let n=e,o=e,a=0,l=0,c=e,h,A,d,u,g,f,x,p,y,C;for(A=e;A<i;A+=s){const m=t[A],_=t[A+1];g!==void 0&&(y=m-g,C=_-f,u=Math.sqrt(y*y+C*C),x!==void 0&&(l+=d,h=Math.acos((x*y+p*C)/(d*u)),h>r&&(l>a&&(a=l,n=c,o=A),l=0,c=A-s)),d=u,x=y,p=C),g=m,f=_}return l+=u,l>a?[c,A]:[n,o]}const Qe={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Aa extends me{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[nt]={fillStyle:nt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const s=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!s&&!n)return;const a=this.coordinates;let l=a.length;const c=t.getType();let h=null,A=t.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!Z(this.maxExtent,t.getExtent()))return;let d;if(h=t.getFlatCoordinates(),c=="LineString")d=[h.length];else if(c=="MultiLineString")d=t.getEnds();else if(c=="Polygon")d=t.getEnds().slice(0,1);else if(c=="MultiPolygon"){const x=t.getEndss();d=[];for(let p=0,y=x.length;p<y;++p)d.push(x[p][0])}this.beginGeometry(t,e,i);const u=o.repeat,g=u?void 0:o.textAlign;let f=0;for(let x=0,p=d.length;x<p;++x){let y;u?y=ha(u*this.resolution,h,f,d[x],A):y=[h.slice(f,d[x])];for(let C=0,m=y.length;C<m;++C){const _=y[C];let w=0,R=_.length;if(g==null){const F=ca(o.maxAngle,_,0,_.length,2);w=F[0],R=F[1]}for(let F=w;F<R;F+=A)a.push(_[F],_[F+1]);const T=a.length;f=d[x],this.drawChars_(l,T),l=T}}this.endGeometry(e)}else{let d=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),A=2;break;case"Polygon":h=t.getFlatInteriorPoint(),o.overflow||d.push(h[2]/this.resolution),A=3;break;case"MultiPolygon":const y=t.getFlatInteriorPoints();h=[];for(let C=0,m=y.length;C<m;C+=3)o.overflow||d.push(y[C+2]/this.resolution),h.push(y[C],y[C+1]);if(h.length===0)return;A=2;break}const u=this.appendFlatPointCoordinates(h,A);if(u===l)return;if(d&&(u-l)/2!==h.length/A){let y=l/2;d=d.filter((C,m)=>{const _=a[(y+m)*2]===h[m*A]&&a[(y+m)*2+1]===h[m*A+1];return _||--y,_})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,i);let g=o.padding;if(g!=vt&&(o.scale[0]<0||o.scale[1]<0)){let y=o.padding[0],C=o.padding[1],m=o.padding[2],_=o.padding[3];o.scale[0]<0&&(C=-C,_=-_),o.scale[1]<0&&(y=-y,m=-m),g=[y,C,m,_]}const f=this.pixelRatio;this.instructions.push([I.DRAW_IMAGE,l,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==vt?vt:g.map(function(y){return y*f}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const x=1/f,p=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=nt,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([I.DRAW_IMAGE,l,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[x,x],NaN,this.declutterMode_,this.declutterImageWithText_,g,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?nt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),o.backgroundFill&&(this.state.fillStyle=p,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||de,justify:e.justify,textBaseline:e.textBaseline||Me,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,s=this.textState_,n=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Qe[s.textBaseline],h=this.textOffsetY_*l,A=this.text_,d=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([I.DRAW_CHARS,t,e,c,s.overflow,a,s.maxAngle,l,h,n,d*l,A,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([I.DRAW_CHARS,t,e,c,s.overflow,a&&nt,s.maxAngle,l,h,n,d*l,A,o,1/l,this.declutterMode_])}setTextStyle(t,e){let i,s,n;if(!t)this.text_="";else{const o=t.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Lt(o.getColor()||nt)):(s=null,this.textFillState_=s);const a=t.getStroke();if(!a)n=null,this.textStrokeState_=n;else{n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);const g=a.getLineDash(),f=a.getLineDashOffset(),x=a.getWidth(),p=a.getMiterLimit();n.lineCap=a.getLineCap()||Pe,n.lineDash=g?g.slice():_t,n.lineDashOffset=f===void 0?Et:f,n.lineJoin=a.getLineJoin()||Oe,n.lineWidth=x===void 0?ve:x,n.miterLimit=p===void 0?ke:p,n.strokeStyle=Lt(a.getColor()||Ge)}i=this.textState_;const l=t.getFont()||Ks;ho(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Me,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||vt,i.scale=c===void 0?[1,1]:c;const h=t.getOffsetX(),A=t.getOffsetY(),d=t.getRotateWithView(),u=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=A===void 0?0:A,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=u===void 0?0:u,this.strokeKey_=n?(typeof n.strokeStyle=="string"?n.strokeStyle:O(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+O(s.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const da={Circle:ys,Default:me,Image:aa,LineString:la,Polygon:ys,Text:Aa};class dn{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const s in i){const n=i[s].finish();t[e][s]=n}}return t}getBuilder(t,e){const i=t!==void 0?t.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let n=s[e];if(n===void 0){const o=da[e];n=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=n}return n}}function ua(r,t,e,i,s,n,o,a,l,c,h,A){let d=r[t],u=r[t+1],g=0,f=0,x=0,p=0;function y(){g=d,f=u,t+=i,d=r[t],u=r[t+1],p+=x,x=Math.sqrt((d-g)*(d-g)+(u-f)*(u-f))}do y();while(t<e-i&&p+x<n);let C=x===0?0:(n-p)/x;const m=st(g,d,C),_=st(f,u,C),w=t-i,R=p,T=n+a*l(c,s,h);for(;t<e-i&&p+x<T;)y();C=x===0?0:(T-p)/x;const F=st(g,d,C),P=st(f,u,C);let L;if(A){const S=[m,_,F,P];co(S,0,4,2,A,S,S),L=S[0]>S[2]}else L=m>F;const b=Math.PI,k=[],D=w+i===t;t=w,x=0,p=R,d=r[t],u=r[t+1];let B;if(D){y(),B=Math.atan2(u-f,d-g),L&&(B+=B>0?-b:b);const S=(F+m)/2,M=(P+_)/2;return k[0]=[S,M,(T-n)/2,B,s],k}s=s.replace(/\n/g," ");for(let S=0,M=s.length;S<M;){y();let U=Math.atan2(u-f,d-g);if(L&&(U+=U>0?-b:b),B!==void 0){let E=U-B;if(E+=E>b?-2*b:E<-b?2*b:0,Math.abs(E)>o)return null}B=U;const W=S;let N=0;for(;S<M;++S){const E=L?M-S-1:S,qe=a*l(c,s[E],h);if(t+i<e&&p+x<n+N+qe/2)break;N+=qe}if(S===W)continue;const V=L?s.substring(M-W,M-S):s.substring(W,S);C=x===0?0:(n+N/2-p)/x;const H=st(g,d,C),wt=st(f,u,C);k.push([H,wt,N/2,U,V]),n+=N}return k}const Qt=Nt(),Ft=[],yt=[],Ct=[],Tt=[];function Cs(r){return r[3].declutterBox}const _s=new RegExp("[-----]");function Ai(r,t){return t==="start"?t=_s.test(r)?"right":"left":t==="end"&&(t=_s.test(r)?"left":"right"),Qe[t]}function ga(r,t,e){return e>0&&r.push(`
`,""),r.push(t,""),r}class fa{constructor(t,e,i,s,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=$t(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=n?new Xs:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,i,s){const n=t+e+i+s;if(this.labels_[n])return this.labels_[n];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],A=l.justify?Qe[l.justify]:Ai(Array.isArray(t)?t[0]:t,l.textAlign||de),d=s&&o.lineWidth?o.lineWidth:0,u=Array.isArray(t)?t:String(t).split(`
`).reduce(ga,[]),{width:g,height:f,widths:x,heights:p,lineWidths:y}=Ao(l,u),C=g+d,m=[],_=(C+2)*h[0],w=(f+d)*h[1],R={width:_<0?Math.floor(_):Math.ceil(_),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:m};(h[0]!=1||h[1]!=1)&&m.push("scale",h),s&&(m.push("strokeStyle",o.strokeStyle),m.push("lineWidth",d),m.push("lineCap",o.lineCap),m.push("lineJoin",o.lineJoin),m.push("miterLimit",o.miterLimit),m.push("setLineDash",[o.lineDash]),m.push("lineDashOffset",o.lineDashOffset)),i&&m.push("fillStyle",a.fillStyle),m.push("textBaseline","middle"),m.push("textAlign","center");const T=.5-A;let F=A*C+T*d;const P=[],L=[];let b=0,k=0,D=0,B=0,S;for(let M=0,U=u.length;M<U;M+=2){const W=u[M];if(W===`
`){k+=b,b=0,F=A*C+T*d,++B;continue}const N=u[M+1]||l.font;N!==S&&(s&&P.push("font",N),i&&L.push("font",N),S=N),b=Math.max(b,p[D]);const V=[W,F+T*x[D]+A*(x[D]-y[B]),.5*(d+b)+k];F+=x[D],s&&P.push("strokeText",V),i&&L.push("fillText",V),++D}return Array.prototype.push.apply(m,P),Array.prototype.push.apply(m,L),this.labels_[n]=R,R}replayTextBackground_(t,e,i,s,n,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignAndScaleFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,n,o,a,l,c,h,A,d,u,g,f,x){a*=d[0],l*=d[1];let p=i-a,y=s-l;const C=n+c>t?t-c:n,m=o+h>e?e-h:o,_=g[3]+C*d[0]+g[1],w=g[0]+m*d[1]+g[2],R=p-g[3],T=y-g[0];(f||A!==0)&&(Ft[0]=R,Tt[0]=R,Ft[1]=T,yt[1]=T,yt[0]=R+_,Ct[0]=yt[0],Ct[1]=T+w,Tt[1]=Ct[1]);let F;return A!==0?(F=Je($t(),i,s,1,1,A,-i,-s),Kt(F,Ft),Kt(F,yt),Kt(F,Ct),Kt(F,Tt),mi(Math.min(Ft[0],yt[0],Ct[0],Tt[0]),Math.min(Ft[1],yt[1],Ct[1],Tt[1]),Math.max(Ft[0],yt[0],Ct[0],Tt[0]),Math.max(Ft[1],yt[1],Ct[1],Tt[1]),Qt)):mi(Math.min(R,R+_),Math.min(T,T+w),Math.max(R,R+_),Math.max(T,T+w),Qt),u&&(p=Math.round(p),y=Math.round(y)),{drawImageX:p,drawImageY:y,drawImageW:C,drawImageH:m,originX:c,originY:h,declutterBox:{minX:Qt[0],minY:Qt[1],maxX:Qt[2],maxY:Qt[3],value:x},canvasTransform:F,scale:d}}replayImageOrLabel_(t,e,i,s,n,o,a){const l=!!(o||a),c=s.declutterBox,h=a?a[2]*s.scale[0]/2:0;return c.minX-h<=e[0]&&c.maxX+h>=0&&c.minY-h<=e[1]&&c.maxY+h>=0&&(l&&this.replayTextBackground_(t,Ft,yt,Ct,Tt,o,a),uo(t,s.canvasTransform,n,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const i=Kt(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;t.save(),t.translate(i[0]%s,i[1]%s),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){const n=this.textStates[e],o=this.createLabel(t,e,s,i),a=this.strokeStates[i],l=this.pixelRatio,c=Ai(Array.isArray(t)?t[0]:t,n.textAlign||de),h=Qe[n.textBaseline||Me],A=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*n.scale[0],u=c*d+2*(.5-c)*A,g=h*o.height/l+2*(.5-h)*A;return{label:o,anchorX:u,anchorY:g}}execute_(t,e,i,s,n,o,a,l){const c=this.zIndexContext_;let h;this.pixelCoordinates_&&ze(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Ht(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),go(this.renderedTransform_,i));let A=0;const d=s.length;let u=0,g,f,x,p,y,C,m,_,w,R,T,F,P,L=0,b=0,k=null,D=null;const B=this.coordinateCache_,S=this.viewRotation_,M=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,U={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:S},W=this.instructions!=s||this.overlaps?0:200;let N,V,H,wt;for(;A<d;){const E=s[A];switch(E[0]){case I.BEGIN_GEOMETRY:N=E[1],wt=E[3],N.getGeometry()?a!==void 0&&!Z(a,wt.getExtent())?A=E[2]+1:++A:A=E[2],c&&(c.zIndex=E[4]);break;case I.BEGIN_PATH:L>W&&(this.fill_(t),L=0),b>W&&(t.stroke(),b=0),!L&&!b&&(t.beginPath(),y=NaN,C=NaN),++A;break;case I.CIRCLE:u=E[1];const $e=h[u],ti=h[u+1],vn=h[u+2],kn=h[u+3],Qi=vn-$e,Vi=kn-ti,Wi=Math.sqrt(Qi*Qi+Vi*Vi);t.moveTo($e+Wi,ti),t.arc($e,ti,Wi,0,2*Math.PI,!0),++A;break;case I.CLOSE_PATH:t.closePath(),++A;break;case I.CUSTOM:u=E[1],g=E[2];const Mn=E[3],Un=E[4],Ki=E[5];U.geometry=Mn,U.feature=N,A in B||(B[A]=[]);const se=B[A];Ki?Ki(h,u,g,2,se):(se[0]=h[u],se[1]=h[u+1],se.length=2),c&&(c.zIndex=E[6]),Un(se,U),++A;break;case I.DRAW_IMAGE:u=E[1],g=E[2],w=E[3],f=E[4],x=E[5];let ei=E[6];const Nn=E[7],Yn=E[8],Qn=E[9],Xi=E[10];let ii=E[11];const Vn=E[12];let ye=E[13];p=E[14]||"declutter";const ne=E[15];if(!w&&E.length>=20){R=E[19],T=E[20],F=E[21],P=E[22];const $=this.drawLabelWithPointPlacement_(R,T,F,P);w=$.label,E[3]=w;const Ot=E[23];f=($.anchorX-Ot)*this.pixelRatio,E[4]=f;const tt=E[24];x=($.anchorY-tt)*this.pixelRatio,E[5]=x,ei=w.height,E[6]=ei,ye=w.width,E[13]=ye}let si;E.length>25&&(si=E[25]);let ni,Ce,_e;E.length>17?(ni=E[16],Ce=E[17],_e=E[18]):(ni=vt,Ce=!1,_e=!1),Xi&&M?ii+=S:!Xi&&!M&&(ii-=S);let Wn=0;for(;u<g;u+=2){if(si&&si[Wn++]<ye/this.pixelRatio)continue;const $=this.calculateImageOrLabelDimensions_(w.width,w.height,h[u],h[u+1],ye,ei,f,x,Yn,Qn,ii,Vn,n,ni,Ce||_e,N),Ot=[t,e,w,$,Nn,Ce?k:null,_e?D:null];if(l){let tt,dt,et;if(ne){const Q=g-u;if(!ne[Q]){ne[Q]={args:Ot,declutterMode:p};continue}const X=ne[Q];tt=X.args,dt=X.declutterMode,delete ne[Q],et=Cs(tt)}let xt,mt;if(tt&&(dt!=="declutter"||!l.collides(et))&&(xt=!0),(p!=="declutter"||!l.collides($.declutterBox))&&(mt=!0),dt==="declutter"&&p==="declutter"){const Q=xt&&mt;xt=Q,mt=Q}xt&&(dt!=="none"&&l.insert(et),this.replayImageOrLabel_.apply(this,tt)),mt&&(p!=="none"&&l.insert($.declutterBox),this.replayImageOrLabel_.apply(this,Ot))}else this.replayImageOrLabel_.apply(this,Ot)}++A;break;case I.DRAW_CHARS:const ji=E[1],Ji=E[2],ri=E[3],Kn=E[4];P=E[5];const Xn=E[6],zi=E[7],Zi=E[8];F=E[9];const oi=E[10];R=E[11],T=E[12];const Hi=[E[13],E[13]];p=E[14]||"declutter";const ai=this.textStates[T],re=ai.font,oe=[ai.scale[0]*zi,ai.scale[1]*zi];let ae;re in this.widths_?ae=this.widths_[re]:(ae={},this.widths_[re]=ae);const qi=on(h,ji,Ji,2),$i=Math.abs(oe[0])*rs(re,R,ae);if(Kn||$i<=qi){const $=this.textStates[T].textAlign,Ot=(qi-$i)*Ai(R,$),tt=ua(h,ji,Ji,2,R,Ot,Xn,Math.abs(oe[0]),rs,re,ae,M?0:this.viewRotation_);t:if(tt){const dt=[];let et,xt,mt,Q,X;if(F)for(et=0,xt=tt.length;et<xt;++et){X=tt[et],mt=X[4],Q=this.createLabel(mt,T,"",F),f=X[2]+(oe[0]<0?-oi:oi),x=ri*Q.height+(.5-ri)*2*oi*oe[1]/oe[0]-Zi;const pt=this.calculateImageOrLabelDimensions_(Q.width,Q.height,X[0],X[1],Q.width,Q.height,f,x,0,0,X[3],Hi,!1,vt,!1,N);if(l&&p==="declutter"&&l.collides(pt.declutterBox))break t;dt.push([t,e,Q,pt,1,null,null])}if(P)for(et=0,xt=tt.length;et<xt;++et){X=tt[et],mt=X[4],Q=this.createLabel(mt,T,P,""),f=X[2],x=ri*Q.height-Zi;const pt=this.calculateImageOrLabelDimensions_(Q.width,Q.height,X[0],X[1],Q.width,Q.height,f,x,0,0,X[3],Hi,!1,vt,!1,N);if(l&&p==="declutter"&&l.collides(pt.declutterBox))break t;dt.push([t,e,Q,pt,1,null,null])}l&&p!=="none"&&l.load(dt.map(Cs));for(let pt=0,jn=dt.length;pt<jn;++pt)this.replayImageOrLabel_.apply(this,dt[pt])}}++A;break;case I.END_GEOMETRY:if(o!==void 0){N=E[1];const $=o(N,wt,p);if($)return $}++A;break;case I.FILL:W?L++:this.fill_(t),++A;break;case I.MOVE_TO_LINE_TO:for(u=E[1],g=E[2],V=h[u],H=h[u+1],t.moveTo(V,H),y=V+.5|0,C=H+.5|0,u+=2;u<g;u+=2)V=h[u],H=h[u+1],m=V+.5|0,_=H+.5|0,(u==g-2||m!==y||_!==C)&&(t.lineTo(V,H),y=m,C=_);++A;break;case I.SET_FILL_STYLE:k=E,this.alignAndScaleFill_=E[2],L&&(this.fill_(t),L=0,b&&(t.stroke(),b=0)),t.fillStyle=E[1],++A;break;case I.SET_STROKE_STYLE:D=E,b&&(t.stroke(),b=0),this.setStrokeStyle_(t,E),++A;break;case I.STROKE:W?b++:t.stroke(),++A;break;default:++A;break}}L&&this.fill_(t),b&&t.stroke()}execute(t,e,i,s,n,o){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,n,void 0,void 0,o)}executeHitDetection(t,e,i,s,n){return this.viewRotation_=i,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,s,n)}}const zt=["Polygon","Circle","LineString","Image","Text","Default"],Ve=["Image","Text"],xa=zt.filter(r=>!Ve.includes(r));class un{constructor(t,e,i,s,n,o,a){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=$t(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(n,a)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t,e){for(const i in t){let s=this.executorsByZIndex_[i];s===void 0&&(s={},this.executorsByZIndex_[i]=s);const n=t[i];for(const o in n){const a=n[o];s[o]=new fa(this.resolution_,this.pixelRatio_,this.overlaps_,a,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let s=0,n=t.length;s<n;++s)if(t[s]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,n,o){s=Math.round(s);const a=s*2+1,l=Je(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=te(a,a,void 0,{willReadFrequently:!0}));const h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a);let A;this.renderBuffer_!==void 0&&(A=Nt(),fo(A,t),At(A,e*(this.renderBuffer_+s),A));const d=ma(s);let u;function g(_,w,R){const T=h.getImageData(0,0,a,a).data;for(let F=0,P=d.length;F<P;F++)if(T[d[F]]>0){if(!o||R==="none"||u!=="Image"&&u!=="Text"||o.includes(_)){const L=(d[F]-3)/4,b=s-L%a,k=s-(L/a|0),D=n(_,w,b*b+k*k);if(D)return D}h.clearRect(0,0,a,a);break}}const f=Object.keys(this.executorsByZIndex_).map(Number);f.sort(he);let x,p,y,C,m;for(x=f.length-1;x>=0;--x){const _=f[x].toString();for(y=this.executorsByZIndex_[_],p=zt.length-1;p>=0;--p)if(u=zt[p],C=y[u],C!==void 0&&(m=C.executeHitDetection(h,l,i,g,A),m))return m}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],s=e[1],n=e[2],o=e[3],a=[i,s,i,o,n,o,n,s];return Ht(a,0,8,2,t,a),a}isEmpty(){return qt(this.executorsByZIndex_)}execute(t,e,i,s,n,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(he),o=o||zt;const c=zt.length;let h,A,d,u,g;for(a&&l.reverse(),h=0,A=l.length;h<A;++h){const f=l[h].toString();for(g=this.executorsByZIndex_[f],d=0,u=o.length;d<u;++d){const x=o[d],p=g[x];if(p!==void 0){const y=a===null?void 0:p.getZIndexContext(),C=y?y.getContext():t,m=this.maxExtent_&&x!=="Image"&&x!=="Text";if(m&&(C.save(),this.clip(C,i)),!y||x==="Text"||x==="Image"?p.execute(C,e,i,s,n,a):y.pushFunction(_=>p.execute(_,e,i,s,n,a)),m&&C.restore(),y){y.offset();const _=l[h]*c+d;this.deferredZIndexContexts_[_]||(this.deferredZIndexContexts_[_]=[]),this.deferredZIndexContexts_[_].push(y)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(he);for(let i=0,s=e.length;i<s;++i)t[e[i]].forEach(n=>{n.draw(this.renderedContext_),n.clear()}),t[e[i]].length=0}}const di={};function ma(r){if(di[r]!==void 0)return di[r];const t=r*2+1,e=r*r,i=new Array(e+1);for(let n=0;n<=r;++n)for(let o=0;o<=r;++o){const a=n*n+o*o;if(a>e)break;let l=i[a];l||(l=[],i[a]=l),l.push(((r+n)*t+(r+o))*4+3),n>0&&l.push(((r-n)*t+(r+o))*4+3),o>0&&(l.push(((r+n)*t+(r-o))*4+3),n>0&&l.push(((r-n)*t+(r-o))*4+3))}const s=[];for(let n=0,o=i.length;n<o;++n)i[n]&&s.push(...i[n]);return di[r]=s,s}class pa extends An{constructor(t,e,i,s,n,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.transformRotation_=s?xo(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=n,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=$t()}drawImages_(t,e,i,s){if(!this.image_)return;const n=Ht(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,A=n.length;h<A;h+=2){const d=n[h]-this.imageAnchorX_,u=n[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=d+this.imageAnchorX_,f=u+this.imageAnchorY_;Je(a,g,f,1,1,c,-g,-f),o.save(),o.transform.apply(o,a),o.translate(g,f),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,u,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,e,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const n=Ht(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=s){const l=n[e]+this.textOffsetX_,c=n[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,e,i,s,n){const o=this.context_,a=Ht(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;n&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return n&&o.closePath(),i}drawRings_(t,e,i,s){for(let n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Z(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=mo(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],n=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Z(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Z(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getFlatCoordinates();let n=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)n=this.moveToLineTo_(s,n,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Z(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Z(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const n=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,l=n.length;a<l;++a){const c=n[a];s=this.drawRings_(i,s,c,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),ze(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:de;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:Lt(i||nt)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),s=e.getLineCap(),n=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),h=n||_t;this.strokeState_={lineCap:s!==void 0?s:Pe,lineDash:this.pixelRatio_===1?h:h.map(A=>A*this.pixelRatio_),lineDashOffset:(o||Et)*this.pixelRatio_,lineJoin:a!==void 0?a:Oe,lineWidth:(l!==void 0?l:ve)*this.pixelRatio_,miterLimit:c!==void 0?c:ke,strokeStyle:Lt(i||Ge)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const u=e.getColor();this.textFillState_={fillStyle:Lt(u||nt)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const u=i.getColor(),g=i.getLineCap(),f=i.getLineDash(),x=i.getLineDashOffset(),p=i.getLineJoin(),y=i.getWidth(),C=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Pe,lineDash:f||_t,lineDashOffset:x||Et,lineJoin:p!==void 0?p:Oe,lineWidth:y!==void 0?y:ve,miterLimit:C!==void 0?C:ke,strokeStyle:Lt(u||Ge)}}const s=t.getFont(),n=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),h=t.getText(),A=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:s!==void 0?s:Ks,textAlign:A!==void 0?A:de,textBaseline:d!==void 0?d:Me},this.text_=h!==void 0?Array.isArray(h)?h.reduce((u,g,f)=>u+=f%2?" ":g,""):h:"",this.textOffsetX_=n!==void 0?this.pixelRatio_*n:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const q=.5;function gn(r,t,e,i,s,n,o,a,l){const c=l?js(s):s,h=r[0]*q,A=r[1]*q,d=te(h,A);d.imageSmoothingEnabled=!1;const u=d.canvas,g=new pa(d,q,s,null,o,a,l?po(yo(),l):null),f=e.length,x=Math.floor((256*256*256-1)/f),p={};for(let C=1;C<=f;++C){const m=e[C-1],_=m.getStyleFunction()||i;if(!_)continue;let w=_(m,n);if(!w)continue;Array.isArray(w)||(w=[w]);const T=(C*x).toString(16).padStart(7,"#00000");for(let F=0,P=w.length;F<P;++F){const L=w[F],b=L.getGeometryFunction()(m);if(!b||!Z(c,b.getExtent()))continue;const k=L.clone(),D=k.getFill();D&&D.setColor(T);const B=k.getStroke();B&&(B.setColor(T),B.setLineDash(null)),k.setText(void 0);const S=L.getImage();if(S){const N=S.getImageSize();if(!N)continue;const V=te(N[0],N[1],void 0,{alpha:!1}),H=V.canvas;V.fillStyle=T,V.fillRect(0,0,H.width,H.height),k.setImage(new ee({img:H,anchor:S.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:S.getOrigin(),opacity:1,size:S.getSize(),scale:S.getScale(),rotation:S.getRotation(),rotateWithView:S.getRotateWithView()}))}const M=k.getZIndex()||0;let U=p[M];U||(U={},p[M]=U,U.Polygon=[],U.Circle=[],U.LineString=[],U.Point=[]);const W=b.getType();if(W==="GeometryCollection"){const N=b.getGeometriesArrayRecursive();for(let V=0,H=N.length;V<H;++V){const wt=N[V];U[wt.getType().replace("Multi","")].push(wt,k)}}else U[W.replace("Multi","")].push(b,k)}}const y=Object.keys(p).map(Number).sort(he);for(let C=0,m=y.length;C<m;++C){const _=p[y[C]];for(const w in _){const R=_[w];for(let T=0,F=R.length;T<F;T+=2){g.setStyle(R[T+1]);for(let P=0,L=t.length;P<L;++P)g.setTransform(t[P]),g.drawGeometry(R[T])}}}return d.getImageData(0,0,u.width,u.height)}function fn(r,t,e){const i=[];if(e){const s=Math.floor(Math.round(r[0])*q),n=Math.floor(Math.round(r[1])*q),o=(os(s,0,e.width-1)+os(n,0,e.height-1)*e.width)*4,a=e.data[o],l=e.data[o+1],h=e.data[o+2]+256*(l+256*a),A=Math.floor((256*256*256-1)/t.length);h&&h%A===0&&i.push(t[h/A-1])}return i}const ya=.5,xn={Point:Ta,LineString:wa,Polygon:La,MultiPoint:Ia,MultiLineString:Ra,MultiPolygon:Fa,GeometryCollection:Sa,Circle:_a};function Ca(r,t){return parseInt(O(r),10)-parseInt(O(t),10)}function Ri(r,t){const e=mn(r,t);return e*e}function mn(r,t){return ya*r/t}function _a(r,t,e,i,s){const n=e.getFill(),o=e.getStroke();if(n||o){const l=r.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(n,o),l.drawCircle(t,i,s)}const a=e.getText();if(a&&a.getText()){const l=r.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function We(r,t,e,i,s,n,o,a){const l=[],c=e.getImage();if(c){let d=!0;const u=c.getImageState();u==ce.LOADED||u==ce.ERROR?d=!1:u==ce.IDLE&&c.load(),d&&l.push(c.ready())}const h=e.getFill();h&&h.loading()&&l.push(h.ready());const A=l.length>0;return A&&Promise.all(l).then(()=>s(null)),Ea(r,t,e,i,n,o,a),A}function Ea(r,t,e,i,s,n,o){const a=e.getGeometryFunction()(t);if(!a)return;const l=a.simplifyTransformed(i,s);if(e.getRenderer())pn(r,l,e,t,o);else{const h=xn[l.getType()];h(r,l,e,t,o,n)}}function pn(r,t,e,i,s){if(t.getType()=="GeometryCollection"){const o=t.getGeometries();for(let a=0,l=o.length;a<l;++a)pn(r,o[a],e,i,s);return}r.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer(),s)}function Sa(r,t,e,i,s,n){const o=t.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=xn[o[a].getType()];c(r,o[a],e,i,s,n)}}function wa(r,t,e,i,s){const n=e.getStroke();if(n){const a=r.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,n),a.drawLineString(t,i,s)}const o=e.getText();if(o&&o.getText()){const a=r.getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i,s)}}function Ra(r,t,e,i,s){const n=e.getStroke();if(n){const a=r.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,n),a.drawMultiLineString(t,i,s)}const o=e.getText();if(o&&o.getText()){const a=r.getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i,s)}}function Fa(r,t,e,i,s){const n=e.getFill(),o=e.getStroke();if(o||n){const l=r.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(n,o),l.drawMultiPolygon(t,i,s)}const a=e.getText();if(a&&a.getText()){const l=r.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i,s)}}function Ta(r,t,e,i,s,n){const o=e.getImage(),a=e.getText(),l=a&&a.getText(),c=n&&o&&l?{}:void 0;if(o){if(o.getImageState()!=ce.LOADED)return;const h=r.getBuilder(e.getZIndex(),"Image");h.setImageStyle(o,c),h.drawPoint(t,i,s)}if(l){const h=r.getBuilder(e.getZIndex(),"Text");h.setTextStyle(a,c),h.drawText(t,i,s)}}function Ia(r,t,e,i,s,n){const o=e.getImage(),a=o&&o.getOpacity()!==0,l=e.getText(),c=l&&l.getText(),h=n&&a&&c?{}:void 0;if(a){if(o.getImageState()!=ce.LOADED)return;const A=r.getBuilder(e.getZIndex(),"Image");A.setImageStyle(o,h),A.drawMultiPoint(t,i,s)}if(c){const A=r.getBuilder(e.getZIndex(),"Text");A.setTextStyle(l,h),A.drawText(t,i,s)}}function La(r,t,e,i,s){const n=e.getFill(),o=e.getStroke();if(n||o){const l=r.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(n,o),l.drawPolygon(t,i,s)}const a=e.getText();if(a&&a.getText()){const l=r.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i,s)}}class ba extends Co{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Nt(),this.wrappedRenderedExtent_=Nt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,i){const s=e.extent,n=e.viewState,o=n.center,a=n.resolution,l=n.projection,c=n.rotation,h=l.getExtent(),A=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),u=e.pixelRatio,g=e.viewHints,f=!(g[ut.ANIMATING]||g[ut.INTERACTING]),x=this.context,p=Math.round(Wt(s)/a*u),y=Math.round(Be(s)/a*u),C=A.getWrapX()&&l.canWrapX(),m=C?Wt(h):null,_=C?Math.ceil((s[2]-h[2])/m)+1:1;let w=C?Math.floor((s[0]-h[0])/m):0;do{let R=this.getRenderTransform(o,a,0,u,p,y,w*m);e.declutter&&(R=R.slice(0)),t.execute(x,[x.canvas.width,x.canvas.height],R,c,f,i===void 0?zt:i?Ve:xa,i?d&&e.declutter[d]:void 0)}while(++w<_)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=te(this.context.canvas.width,this.context.canvas.height,as))}resetDrawContext_(){if(this.opacity_!==1){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,Vs(this.context),as.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex];this.opacity_=i.opacity;const s=t.viewState;this.prepareContainer(t,e);const n=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(ls.PRERENDER)||this.getLayer().hasListener(ls.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(n,t),s.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const l=_o(i.extent);a=Z(l,t.extent),this.clipped_=a&&!Jt(l,t.extent),this.clipped_&&this.clipUnrotated(n,t,l)}return a&&this.renderWorlds(o,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&n.restore(),this.postRender(n,t),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),s=this.renderedCenter_,n=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],A=i[0]*q,d=i[1]*q;h.push(this.getRenderTransform(s,n,o,q,A,d,0).slice());const u=c.getSource(),g=a.getExtent();if(u.getWrapX()&&a.canWrapX()&&!Jt(g,l)){let f=l[0];const x=Wt(g);let p=0,y;for(;f<g[0];)--p,y=x*p,h.push(this.getRenderTransform(s,n,o,q,A,d,y).slice()),f+=x;for(p=0,f=l[2];f>g[2];)++p,y=x*p,h.push(this.getRenderTransform(s,n,o,q,A,d,y).slice()),f-=x}this.hitDetectionImageData_=gn(i,h,this.renderedFeatures_,c.getStyleFunction(),l,n,o,Ri(n,this.renderedPixelRatio_),null)}e(fn(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,s,n){if(!this.replayGroup_)return;const o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),c={},h=function(g,f,x){const p=O(g),y=c[p];if(y){if(y!==!0&&x<y.distanceSq){if(x===0)return c[p]=!0,n.splice(n.lastIndexOf(y),1),s(g,l,f);y.geometry=f,y.distanceSq=x}}else{if(x===0)return c[p]=!0,s(g,l,f);n.push(c[p]={feature:g,layer:l,geometry:f,distanceSq:x,callback:s})}};let A;const d=[this.replayGroup_],u=this.getLayer().getDeclutter();return d.some(g=>A=g.forEachFeatureAtCoordinate(t,o,a,i,h,u&&e.declutter[u]?e.declutter[u].all().map(f=>f.value):null)),A}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const s=t.viewHints[ut.ANIMATING],n=t.viewHints[ut.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&n)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,h=c.projection,A=c.resolution,d=t.pixelRatio,u=e.getRevision(),g=e.getRenderBuffer();let f=e.getRenderOrder();f===void 0&&(f=Ca);const x=c.center.slice(),p=At(l,g*A),y=p.slice(),C=[p.slice()],m=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!Jt(m,t.extent)){const D=Wt(m),B=Math.max(Wt(p)/2,D);p[0]=m[0]-B,p[2]=m[2]+B,Js(x,h);const S=Eo(C[0],h);S[0]<m[0]&&S[2]<m[2]?C.push([S[0]+D,S[1],S[2]+D,S[3]]):S[0]>m[0]&&S[2]>m[2]&&C.push([S[0]-D,S[1],S[2]-D,S[3]])}if(this.ready&&this.renderedResolution_==A&&this.renderedRevision_==u&&this.renderedRenderOrder_==f&&this.renderedFrameDeclutter_===!!t.declutter&&Jt(this.wrappedRenderedExtent_,p))return ze(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const _=new dn(mn(A,d),p,A,d);let w;for(let D=0,B=C.length;D<B;++D)i.loadFeatures(C[D],A,h);const R=Ri(A,d);let T=!0;const F=(D,B)=>{let S;const M=D.getStyleFunction()||e.getStyleFunction();if(M&&(S=M(D,A)),S){const U=this.renderFeature(D,R,S,_,w,this.getLayer().getDeclutter(),B);T=T&&!U}},P=js(p),L=i.getFeaturesInExtent(P);f&&L.sort(f);for(let D=0,B=L.length;D<B;++D)F(L[D],D);this.renderedFeatures_=L,this.ready=T;const b=_.finish(),k=new un(p,A,d,i.getOverlaps(),b,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=A,this.renderedRevision_=u,this.renderedRenderOrder_=f,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=p,this.renderedCenter_=x,this.renderedProjection_=h,this.renderedPixelRatio_=d,this.replayGroup_=k,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,s,n,o,a){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let c=0,h=i.length;c<h;++c)l=We(s,t,i[c],e,this.boundHandleStyleImageChange_,n,o,a)||l;else l=We(s,t,i,e,this.boundHandleStyleImageChange_,n,o,a);return l}}class Pt extends zs{constructor(t){super(t)}createRenderer(){return new ba(this)}}const Da={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Es={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Ba extends So{constructor(t,e){super(t,e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=$t(),this.tileClipContexts_=null}drawTile(t,e,i,s,n,o,a,l){this.updateExecutorGroup_(t,e.pixelRatio,e.viewState.projection),this.tileImageNeedsRender_(t)&&this.renderTileImage_(t,e),super.drawTile(t,e,i,s,n,o,a,l)}getTile(t,e,i,s){const n=this.getOrCreateTile(t,e,i,s);if(!n)return null;const a=s.viewState.resolution,l=s.viewHints;return(!(l[ut.ANIMATING]||l[ut.INTERACTING])||!n.wantedResolution)&&(n.wantedResolution=a),n}prepareFrame(t){const e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,i){const s=this.getLayer(),n=s.getRevision(),o=s.getRenderOrder()||null,a=t.wantedResolution,l=t.getReplayState(s);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==n&&l.renderedRenderOrder==o)return;const c=s.getSource(),h=!!s.getDeclutter(),A=c.getTileGrid(),u=c.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),g=c.getSourceTiles(e,i,t),f=O(s);delete t.hitDetectionImageData[f],t.executorGroups[f]=[],l.dirty=!1;for(let x=0,p=g.length;x<p;++x){const y=g[x];if(y.getState()!=Y.LOADED)continue;const C=y.tileCoord,m=A.getTileCoordExtent(C),_=Ws(u,m),w=At(_,s.getRenderBuffer()*a,this.tempExtent),R=bi(m,_)?null:w,T=new dn(0,_,a,e),F=Ri(a,e),P=function(B,S){let M;const U=B.getStyleFunction()||s.getStyleFunction();if(U&&(M=U(B,a)),M){const W=this.renderFeature(B,F,M,T,h,S);l.dirty=l.dirty||W}},L=y.getFeatures();o&&o!==l.renderedRenderOrder&&L.sort(o);for(let B=0,S=L.length;B<S;++B){const M=L[B];(!R||Z(R,M.getGeometry().getExtent()))&&P.call(this,M,B)}const b=T.finish(),k=s.getRenderMode()!=="vector"&&h&&g.length===1?null:_,D=new un(k,a,e,c.getOverlaps(),b,s.getRenderBuffer(),!0);t.executorGroups[f].push(D)}l.renderedRevision=n,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(t,e,i,s,n){const o=e.viewState.resolution,a=e.viewState.rotation;i=i??0;const l=this.getLayer(),h=l.getSource().getTileGridForProjection(e.viewState.projection),A=wo([t]);At(A,o*i,A);const d={},u=function(x,p,y){let C=x.getId();C===void 0&&(C=O(x));const m=d[C];if(m){if(m!==!0&&y<m.distanceSq){if(y===0)return d[C]=!0,n.splice(n.lastIndexOf(m),1),s(x,l,p);m.geometry=p,m.distanceSq=y}}else{if(y===0)return d[C]=!0,s(x,l,p);n.push(d[C]={feature:x,layer:l,geometry:p,distanceSq:y,callback:s})}},g=this.renderedTiles;let f;for(let x=0,p=g.length;!f&&x<p;++x){const y=g[x],C=h.getTileCoordExtent(y.wrappedTileCoord);if(!Z(C,A))continue;const m=O(l),_=[y.executorGroups[m]],w=l.getDeclutter();_.some(R=>{const T=w?e.declutter[w].all().map(F=>F.value):null;for(let F=0,P=R.length;F<P;++F)if(f=R[F].forEachFeatureAtCoordinate(t,o,a,i,u,T),f)return!0})}return f}getFeatures(t){return new Promise((e,i)=>{const s=this.getLayer(),n=O(s),o=s.getSource(),a=this.renderedProjection,l=a.getExtent(),c=this.renderedResolution,h=o.getTileGridForProjection(a),A=Kt(this.renderedPixelToCoordinateTransform_,t.slice()),d=h.getTileCoordForCoordAndResolution(A,c);let u;for(let C=0,m=this.renderedTiles.length;C<m;++C)if(d.toString()===this.renderedTiles[C].tileCoord.toString()){if(u=this.renderedTiles[C],u.getState()===Y.LOADED){const _=h.getTileCoordExtent(u.tileCoord);o.getWrapX()&&a.canWrapX()&&!Jt(l,_)&&Js(A,a);break}u=void 0}if(!u||u.loadingSourceTiles>0){e([]);return}const g=h.getTileCoordExtent(u.wrappedTileCoord),f=Ro(g),x=[(A[0]-f[0])/c,(f[1]-A[1])/c],p=u.getSourceTiles().reduce(function(C,m){return C.concat(m.getFeatures())},[]);let y=u.hitDetectionImageData[n];if(!y){const C=Bi(h.getTileSize(h.getZForResolution(c,o.zDirection))),m=this.renderedRotation_,_=[this.getRenderTransform(h.getTileCoordCenter(u.wrappedTileCoord),c,0,q,C[0]*q,C[1]*q,0)];y=gn(C,_,p,s.getStyleFunction(),h.getTileCoordExtent(u.wrappedTileCoord),u.getReplayState(s).renderedResolution,m),u.hitDetectionImageData[n]=y}e(fn(x,p,y))})}getFeaturesInExtent(t){const e=[],i=this.getTileCache();if(i.getCount()===0)return e;const s=this.getLayer().getSource().tileGrid,n=s.getZForResolution(this.renderedResolution);return i.forEach(o=>{if(o.tileCoord[0]!==n||o.getState()!==Y.LOADED)return;const a=o.getSourceTiles();for(let l=0,c=a.length;l<c;++l){const h=a[l],A=h.tileCoord;if(Z(t,s.getTileCoordExtent(A))){const d=h.getFeatures();if(d)for(let u=0,g=d.length;u<g;++u){const f=d[u],x=f.getGeometry();Z(t,x.getExtent())&&e.push(f)}}}}),e}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.renderedLayerRevision_!==void 0&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t,e){const i=this.context,s=i.globalAlpha;i.globalAlpha=e.opacity;const n=t.viewHints,o=!(n[ut.ANIMATING]||n[ut.INTERACTING]),a=this.renderedTiles;for(let l=0,c=a.length;l<c;++l){const h=a[l],A=h.executorGroups[O(this.getLayer())],d=this.getLayer().getDeclutter();if(A)for(let u=A.length-1;u>=0;--u)A[u].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(h,t),t.viewState.rotation,o,Ve,d?t.declutter[d]:void 0)}i.globalAlpha=s}renderDeferredInternal(t){const i=this.renderedTiles.reduce((a,l,c)=>(l.executorGroups[O(this.getLayer())].forEach(h=>a.push({executorGroup:h,index:c})),a),[]),s=i.map(({executorGroup:a})=>a.getDeferredZIndexContexts()),n={};for(let a=0,l=i.length;a<l;++a){const c=i[a].executorGroup.getDeferredZIndexContexts();for(const h in c)n[h]=!0}Object.keys(n).sort(he).map(Number).forEach(a=>{s.forEach((l,c)=>{l[a]&&(l[a].forEach(h=>{const{executorGroup:A,index:d}=i[c],u=A.getRenderedContext(),g=u.globalAlpha;u.globalAlpha=this.renderedOpacity_;const f=this.tileClipContexts_[d];f&&f.draw(u),h.draw(u),f&&u.restore(),u.globalAlpha=g,h.clear()}),l[a].length=0)})})}getTileRenderTransform(t,e){const i=e.pixelRatio,s=e.viewState,n=s.center,o=s.resolution,a=s.rotation,l=e.size,c=Math.round(l[0]*i),h=Math.round(l[1]*i),d=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),u=t.tileCoord,g=d.getTileCoordExtent(t.wrappedTileCoord),f=d.getTileCoordExtent(u,this.tempExtent)[0]-g[0];return Fo(li(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(n,o,a,i,c,h,f))}postRender(t,e){var m;const i=e.viewHints,s=!(i[ut.ANIMATING]||i[ut.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation,this.renderedOpacity_=e.layerStatesArray[e.layerIndex].opacity;const n=this.getLayer(),o=n.getRenderMode(),a=t.globalAlpha;t.globalAlpha=this.renderedOpacity_;const l=n.getDeclutter(),c=l?Es[o].filter(_=>!Ve.includes(_)):Es[o],h=e.viewState,A=h.rotation,d=n.getSource(),g=d.getTileGridForProjection(h.projection).getZForResolution(h.resolution,d.zDirection),f=this.renderedTiles,x=[],p=[],y=[];let C=!0;for(let _=f.length-1;_>=0;--_){const w=f[_];C=C&&!w.getReplayState(n).dirty;const R=w.executorGroups[O(n)].filter(D=>D.hasExecutors(c));if(R.length===0)continue;const T=this.getTileRenderTransform(w,e),F=w.tileCoord[0];let P=!1;const L=R[0].getClipCoords(T);let b=t,k;if(L){k=new Xs,b=k.getContext();for(let D=0,B=x.length;D<B;++D)if(g!==F&&F<p[D]){const S=x[D];Z([L[0],L[3],L[4],L[7]],[S[0],S[3],S[4],S[7]])&&(P||(b.save(),P=!0),b.beginPath(),b.moveTo(L[0],L[1]),b.lineTo(L[2],L[3]),b.lineTo(L[4],L[5]),b.lineTo(L[6],L[7]),b.moveTo(S[6],S[7]),b.lineTo(S[4],S[5]),b.lineTo(S[2],S[3]),b.lineTo(S[0],S[1]),b.clip())}x.push(L),p.push(F)}for(let D=0,B=R.length;D<B;++D)R[D].execute(t,[t.canvas.width,t.canvas.height],T,A,s,c,(m=e.declutter)==null?void 0:m[l]);P&&(b===t?b.restore():y[_]=k)}t.globalAlpha=a,this.ready=C,this.tileClipContexts_=y,e.declutter||this.renderDeferredInternal(e),super.postRender(t,e)}renderFeature(t,e,i,s,n,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=We(s,t,i[l],e,this.boundHandleStyleImageChange_,void 0,n,o)||a;else a=We(s,t,i,e,this.boundHandleStyleImageChange_,void 0,n,o);return a}tileImageNeedsRender_(t){const e=this.getLayer();if(e.getRenderMode()==="vector")return!1;const i=t.getReplayState(e),s=e.getRevision(),n=t.wantedResolution;return i.renderedTileResolution!==n||i.renderedTileRevision!==s}renderTileImage_(t,e){const i=this.getLayer(),s=t.getReplayState(i),n=i.getRevision(),o=t.executorGroups[O(i)];s.renderedTileRevision=n;const a=t.wrappedTileCoord,l=a[0],c=i.getSource();let h=e.pixelRatio;const d=e.viewState.projection,u=c.getTileGridForProjection(d),g=u.getResolution(t.tileCoord[0]),f=e.pixelRatio/t.wantedResolution*g,x=u.getResolution(l),p=t.getContext();h=Math.round(Math.max(h,f/h));const y=c.getTilePixelSize(l,h,d);p.canvas.width=y[0],p.canvas.height=y[1];const C=h/f;if(C!==1){const R=hs(this.tmpTransform_);li(R,C,C),p.setTransform.apply(p,R)}const m=u.getTileCoordExtent(a,this.tempExtent),_=f/x,w=hs(this.tmpTransform_);li(w,_,-_),To(w,-m[0],-m[3]);for(let R=0,T=o.length;R<T;++R)o[R].execute(p,[p.canvas.width*C,p.canvas.height*C],w,0,!0,Da[i.getRenderMode()],null);s.renderedTileResolution=t.wantedResolution}}class Ga extends zs{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload;const i=t.cacheSize===void 0?0:t.cacheSize;delete t.cacheSize,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=i;const s=t.renderMode||"hybrid";Zt(s=="hybrid"||s=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=s,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Ba(this,{cacheSize:this.cacheSize_})}getFeatures(t){return super.getFeatures(t)}getFeaturesInExtent(t){return this.getRenderer().getFeaturesInExtent(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Ee.PRELOAD)}getUseInterimTilesOnError(){return this.get(Ee.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(Ee.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(Ee.USE_INTERIM_TILES_ON_ERROR,t)}}const Pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAAB60lEQVQ4Ea1VwS4DURS9BBvCsKlNk2FLolaiq1qQhoVKWBt/UF/Q9gMEX9CxRdJaENKFdlPLToQlKrXQDUPYsOCc6bxGeKrUSe686X33nd659533RPQw4I7DMrAr2JtvJd9nYdSiTeONwZeOhAPG8tKwRMKDYga7vTDn7F6c83vZO6pI9rBShjMFs2F1fCZcN4M98fT6JIgC9SDdS7nyLFOLOSlXnpKYJ7GHj4SJ0OhA8nh3WozeTjXfcHQfXzxSZL6BwFUGK0ILmaVLubmmydQ/kXR8+oCZLsCXbfcnEo0yS62dytBEBnW7UTz10ejtEpYISMMMElqxaNBUheeMAus0PnMg+ZOquA+v8oBsdGC92UTMWSScn48GdXHo6J2w0172fY3ryjgg0oGHGRrp1xIic61f5+T2AsaYYeg7Qt3C73x+yUwS/itIWGbxWwUVBDgkdAroYqugLIFrEhbs7YtW+Tx9g8Tb2Ha+WHVhfyZlyfzDwlbSi0F6mVJuFtLr+hWx+/gK6e1TeitYaKsuZ+HY5OlBbTYLkvknTopkXKcI+R5HYVM1of/cdZaImTlnd5tYmyQBoT659qv2tDAkqG8qZQwqUhuftcoXb2Vr5xJj1UUcPzMLawoWongF8NhXVwCvA/riMB4GX/AO0EK4gq4xIIQAAAAASUVORK5CYII=",Oa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACXElEQVQ4EY1VPW/TUBS9RdCFqjIsRUiRXDYEIumEyBSGSBUdmkp8jHUkfoCj7sT5BW1/gYPEBEh1BxBVBtIlEQIpHgpigRhloQzEVHQpgznnJc91HVN6pJv3fO99x/fdj1gkGwbUNmQL0odEY+mNdRbWTExlaCvQuaXinLH64JqUilfEzF1Ubv7eUPyPQ9neGYj3ZhBA2YA0ITHShOtmbsZ21++AaC52ytoEg0O5e78lweC3AzuJFZKE9cLNy87bl2UxZi9o+6lreHCkSBH5BhxrdNaEFiJze62lM5PpN5F0ofyaka5A550bG+pZkelrTV19JpRqrYuDh5pLrcbstDBFgAsxSGhVFnOmTjwtGsxR/sYlGX5+JP13KxJFEUg72hyvzDeLCIVFwuXlxVxs1JtRJJHYj6+rNPCFzlpe2p194TXTYEcApfP4MQuIIg0SMKokkCe00AxeMJ1Uqz3bC8gzwkIWofJK/IQHf1QOVx+qSBKW0XacMpOE/wXJmE++2Fm7dao/CYN05dInak/eK5W7UUyb4mdOEOCT0N/t7seG9KZqd8T/FEpWWyV9OZbANxLuNp9/Sdrifa3+QdrdH9JEn4W/jlQP/us2nG/A46Swf/qIwEjOLw/O3+afzSQYbYZvAM95PXoVtMNWr3UvsyUmKY81LNhC+RVHrwptU1fZg2KTlcxq2uPjJ3e6+jjbIBmtmpB7G4ltjAb95LzSmAYnhpH5ez83YXO0XV9ZP3O1IHXON0TNsm585rXd+S5PX3zlCIbw4zU9yJlgwYtV6UH0J4CfA+psCIs5gb9vzOmWEVmx1QAAAABJRU5ErkJggg==",va="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACiElEQVQ4EY1Vz2sTURCe+qMKLXXjJSINbPQkFpqCqM3FeAgEPSQFf926Ae8mf0GSv6DpWSQpeKpC0oPSkoPpJUVQskILOWgTCYi9NGmxl3rQ79vsW7Kbpe3AZF5m5n078943uyL+osGdgVagbeg/W5u2z4D1lTEfbwq+Uiwa1Baf3pBY9JrooQkrzdzuibnTk7WNrlTXux04C9Ay1BEv4JIemsyUluYBFHSS/Bad7pE8fFKTTvdPHnECWzIMmIvMXM1/eh8Xbeqiip9o+4fHFigqLyIxy2QFaKCyUrP2+Mxg6kkEnYt/ZKUL8FXP2YGcX2WqrbHrb4U6aPFIYVlWmxoXHhGkBNUIaKQSIV0dPCNKCDB7OyC91nNpf16QCNbpbEOFHcvz5iXCYRAwmUyEnKBasDomFgt3rGPgA1+9vCX1xh7ac1fJPWQEJEZAnU/2CgHsVpzQ2noXFJp0aOQEsCC9ILMX8BPxA2RUSTq7xUOX/uFfqbx5oNwuax+ZzgpPFX16QmLzQekfHMvKu90T80mbNg7c91K8O0mR8N2qlIpRSSWmXWFO0Fz8g8kKzc2tPVeQfzhmy69bLj8pEpkJyLedfZdf5cP+JOBmefXHSAKryeS+uEBXVnetW158dnMkn/MNqbJl8qcNYmve+cULQLK5r9aFMNsisU+7pFH4XqWDlLAavRToUGnWHlmbuHlYFO/8yM+bx9nxoWnsKZ+3N7bQYmCj/uv+i6Quly8p9yCqXRkXqlcIxmlqfT8oIMYXhAzTJoOLKAwGfXQSvGCcGFZmbu8vI5ZXcdWy+k9rQHOcb6g1y4r4bL3e+G1xEYB95LHNKvRMYiCLnwC+9tUnoG37MrAadET+A5b38dBIuf2xAAAAAElFTkSuQmCC",ka="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACP0lEQVQ4EZ1VsW4TQRAdUKABhYMmNJYuSYMEIk6FcOUUlqJQxJFCKNkgUXMRH+DzByDHNcWZEhHJpiACuUjSOE0kn6IgpQJHpiANOSLcOAW8t9yenPM5NjxpvHezs8+zb2f2RJJhwe3AqrCvsN+hNUOfwpiISwnePHxeNjNhPX08JdnMbbFT13SYf3Ai/ucTef+pLbWP7RacRVgFFiFOWLJT1x2v9BBEE1FQ0kOr3ZG55bq02r9czJNYo5ewkL53y93ayIk1fsXMXzgGp11NiszXEbjGYEOokJnXrD8amcz8E0lnc5vMdAm+2uVwojAss+KrfZl8UNUaGjKO1vhVoUSAx1cSqvx8yjbCcyYO6rX++lCCn2ewbnxa681DxIQi4eLifKovqNdB8V88vyPWjcHasiKALAnt9N2bvevPPZeRGeG+vH/OH39heQEzY/hJDyLkVl1ox8MahlAymxkOxFphT2/1In3ji0nYYiZxVN5+ke3GsaiVaZRERxtjjr51JDg9i4eb0/e5ZX9n9xinrEWNAuHDwq4ulciJB+U0RD2ZNqUSTbEtgSMWtoMjL7EOh4F16JUyiW259GyH/b3KLVewtYDb+19QkvCyqJjWy6P1qs36gq78fyGmnrO5D2y9VSZnTrkGR5kFTN1GBcnCG6dIMq4zhHx2IGzxb6P3nzoDekGJmJl/8KMMv2vmzJbNO0cFK7C/YTKDLjKFT622G9/lzTtdUgHiuM0abCQoRPETwGvffAL4OaDPgfEy6MMf5Dvf2UslcMoAAAAASUVORK5CYII=",Ma="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACf0lEQVQ4EY1VTWsTURS99RuUdtqFdTM40Y3QYlMQ1KziIlh0kQRU3HWK7p3iD0jyA0rStULiVoXEhWLJwmQTEYQMUjULNSMRsRuTlnZTF3rOdN6QzIzaA3fee/fdOe+++zEjEg0NagtShXQhvz1pezoTYyTGIrQZ6MrJxLS2ePOMJBOnxNCPu2b2el/s9315ttaT2sueA2UBUoH4CBIWDf2EVS5eBtG0bxQ1cXo7cuVGXZzedh77JHYxTJiLz07lXz1NiTZ+WO3/cxxs7bqk8LwEw2UaK0ITnpXb9ev7JlMnkXQ+9YKeZqGrKcJu903WULFSxqsPOlJ6+FEt3REHC28xjEZrg54OoIsdwsPMLOghMr7ABMRnpuTe3XNcutDGj6ipPzLeTCKITRKm0wu6vzk8cb5tS+aq/t8E8R1WBAiTJDTiM5PDPP4ccZHTuCKvTvDgYFiUMcsLmDuAR/zvhDuyZLXE/tCXxusNiV2sSmHlneIYGb2DDHoYCWYvf/+8LN4663vlBX9EF3yZHjos0iAY/BwIh6/I4HPdhLdBMIGATUI7yoAeRl9vTCYiMs22BL6SsFl5/JmLEEpIhiIdbP2S5dxb1yaZOBmyZX8DbmFrmHRRrFqwf3lq9k6TXeAScL+YvyDx2dGqYMiQMAdGMdUpGXRAtV2/htYLFy69G2zujsTTPQEP7s2nnvPQJSwrB72NDmI2udb4ful22pBjR5V6b5drbSL6IH5xOp82C7DkB0IYQwULVyzsNXo468pIjSwhemav/1yFLq/06spqzdGE5NjfEJlDF6nCZ6warR/y6MkXthk/BrxmDbIvmLDiL4CfffUL4O+AOguiQUL4AxQW8ADbO5FsAAAAAElFTkSuQmCC",Ua="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACrUlEQVQ4EY1VQWsTYRCd2loFJW56iYiBrXgItNgUBW0vbQ+xRQ+JqKgntwcPgocUDx43+QES/QGSCF6sSlKkYsihKUh6ERKlhR5sm5Ii9tKkxRxakfreJt8SNhvpg9lvd2b27eyb+XZF3KHBHYWlYRuww6YVmz4Dqyu6XLwR+JLjoz7t4d0LMj56VnT/KSuttFyV0kpV5rIVyXyulOGMw1IwG07ChO4/HU0mRkDks5PcTsqVukzcyUm58juGOIkttBKawcG+2ML7kGie4yr+37W2d2CRovIXSJxhsiI0UFmymLt5ZDL1JJIOhz6x0lvwZY41A2anyuLPv4s3MCtd597I8PV5S0NFxlXz9AolApK8JKERmfLrSnhGFGbMr5LJbsnCh5BUV+9JeNIvE7dzwqpaQb3ZRPiMbhzMZ08GA8EBb2sOXqEuDx5/kaWPUxK46JGTJ7qtRu3v/8V5j915+yYM1lx2a78HDt1JxqRvKzsWgXamV1Jv12Rzqy5jIz4xn16yOVpPOF7AEAmDboScN2I4NG9VQ61Ss+sCeSQRv2zFWg9NyXQSdkS+sI2br0j0UcDKoQx8QHjyfMc5ZVPKTHSCFQUH+mwyxlkFG7C4tO1MV90vkbDkljCEJmG22m5kh/kwJ7gtgU0SLqZm15xxuyGcw9reHyvOc94Yho5OcH8DGe4Uzs8GBltz7l9KMT1TEGpJYDdJ+tWYBAfbR6z/arqMlH619SJIThdzN1xfhxXWdg/aZw8MjLFRkGcalykONrEKbbzZ/M9r98O6NcQNd+PIoeY8OkEyfnFWf+zGEeMHQqihQhT6xBsbvb3rKkmtlIGVlZZ3XsIXU371yuqaqwEzub85xOy2Gnxqmi/8ktfv1qlrDXl8zQzsSDCQxV8AP/vqF7DR9EWxarA2/APTqP6lLyWxXQAAAABJRU5ErkJggg==",Na="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACN0lEQVQ4EY1VPU8bQRCdoCQNETI0pLF0mBIEThlXToGEoMCWAilZ+AVn5Qec/Qfi8AfiS5kPyeciEcgFduMoEshWREqw0TXQBAuFJimS9+zbk41XZz9pbm/fzr6bnd3ZEzEjBtqGlWFt2L/AmgGn0BrxwMBmwJXSqfnY7nZC0qmnYsWne26tsxtp/byRypEv3qHfAVmAubAQ9wWLVvyJXSo+h9B86GR66fh38uJlVTr+7zzGKdzDoKCTXJ7LH39ek9jMIz0e2XZv//REEflbOOborAUVIis1q5sTi+kvUfTZ2ldGmgXnacF2+3vW0rmic+XQF9s50fOG2vK7tCSXZkOu1rhmpF0QCw/xUJn1+JAYPVeX5qRUTPE1BPO2l2tgFY9Dji/MNzcRwoqCW1vr8SEHdhjtYMTksvt1Ua8WR3iO8URAME1BazB8DprAZfHIcNNM4PECVqfwSE4iWHjzQ3Z3EsboqBSsxqLgWOAQYxfvRO0sjvWlYIfOUcg5p5HRcS7TwYaCrfq3a3aMcD9c9Pj86xXjuCZZlsAlBevux3PNj7TMnTNGjJNY34BHQRc72OUu3oeOTmEzosCUBZeFqyslg9IrN6sbI4c2Sohj3du/KL0vLL09dF1GSHggDnh7sDYnBcWCG6eAOS7naUG+20hsoV/o0btOZ6aIkbXOfh2gmydH6CX3e/2nQuOwvmGo6dnwImCuao0ref/pgoK8DLhMDzYRFLz4C+C1r38B/B2Qs2Ex2Aj+A+Wp1NVgc0jkAAAAAElFTkSuQmCC",Ya="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAAClklEQVQ4EY1VQWsTURCeqo2Cod16iYiRTU+KxcaL2l4aD8Wgh6Sg1IPgCno2xR+Q5A9Y/QGSFLxYhawHpSUH00tFELJKCzlok5JS7KWJpbnoIX7fZl+a7G6lHwxvd2be92bmzeyK+EODOgUpQKqQtiNlR2dg9cWAjzYJXS42GdIe3huV2ORZ0cOnbTdrrSHWekPeL9fFXKrXoMxC8pAu3ITzejiYys1PgCjUdfJ7qNVbcvNuUWr1/QzsJLbRS5iOjp3JfHo3LdrQoLL/d23u/bFJEfkLOM7RWREaiCxXLt45Mpk6iaRXpz8y0hnozGOOIe0XmUpr4NxroXRSbCkue9WGAsISATmIRkIjGQ/rqvC0KJBg/PKINCqzUv0yI1E8U+cG681LhN4gYSIRD7t9kEKLaUjm2RW7DDzw6eNLto42N9gRQIyEOk92QxseBFFA2CoKpdUdtFCw20ZKz5XtBYzzUtrt7Qd88YBkTJEpsfiMrPBqSqJj3gC4mXVmhIdiLvNV9AtBmZoISeJWpywLbzcO9afhBKSGkz2Xkn+zYUfU20rG7KhErpn2Acn4+T5iThBgMUJr5fNOn5Evm1v7dg17m5w1Zbrf1nc9/k6tN0m4kl/86XFgmhY2LiwepGgubQkvxq8rON+AyUth/1TR2Jp7fpl29vl3u1XozQjTaKPUk4t87YKXFbleqEERUaOXRDsUysXb9qaup/Og+s6v+Zt7fzF6H3joI7jnjzt7KmiLkeXS9o37CV1OnVTqjlUbDgjFDZKxrSo/fmdh4weir21SKGy2M+jeSXCTsZaMzFrbfQlbRtlVyuqdqwFJc74h9iyrSWLqpdVfwl4EYRN+TNOEHAkGvPgL4Gdf/QL4O6AuBdEgHvwD/oD7on0nGz4AAAAASUVORK5CYII=",Qa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACqUlEQVQ4EY1VTWsTURS9VVuFSjvpJiJGproRKyRFQZONcREJukgCSt05QVyb/IIkP0CSrl1MBFdaSFwolizabFoEJVFayEJNSkTspklLuqkLPeclL0zHoD1w5713v+a++zEjMhoG2ClQCdQE/R5QbcCzsI7E2AhuHDw7HPIaD+9fkHDojJi+SaVW3+hIfbMjr5fbUn7XboGZAxVBQ7gd5k3f6ZSdD8KRd6g0atNq78utexVptXtZyOlYwekwE7gyk11ZiogxNa7l/1y7ewfKKSIvQDFNZe3QQmR2rXL3yM70m+h0PvKWkSbAKx8bCDKjImPOeK2xsy8UJdPrMNzXvtRqTE0IUwTYIIMOrXjUZ+rEU0LQMPGoKv45j3QaC9J8n5Du7oEk02t9BceT+WYRwbLoMBaL+hzi/nZ1bVttCrlrKg18oV0ICqPWMqcROwII06EZQBRubH3viZvP6xnT4/IJreMG2wvw02HAbUjJzaBXReLMGaPjmYVwY5Ay84RboM/MSyx6ThUFOVZO6ps7/+1PRthyRqEdci0WQpLPXVU59F/2yMrSbSX2z8041dSeEwTUGWG9ur6NKqukKqGS4Hrgy5PHl4QREnwxC2LnQ+rsfDAdwBYjrBZffnXK1N48PynZp59l8VlDnbt7vySd+SDWwsXhbDuNON9AmZPC/mmisQ33/OIDACcfEVmPyipSG2lwjyYjn71eakFlVo9eHKNXqlXuQHmCtodAA2MaLTNixhn5fOQNX5qEUfH4wLKBVvAsr/648SBmyqmTmt2X0pmbRwmdcTQbX3ZzOPIDIcyhRgqJzfUH/fC8agXnyuIwsvrGziL4WS3TV9ZnrhYow/lmdTnLuvH7Vf4pz199Y7W70OM1y6AjwYJWCVQD6V8AfwfkpUAG6C/8AeTBAxu3Ro0CAAAAAElFTkSuQmCC",Va="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACiUlEQVQ4Ea1Vz2sTQRR+9UcVLLrrpSIGVk8FC01Pai+Nh0DRQ1JQ8eb2P0j+giR/gLSeBRPBi20l8aBYcmhzaRGErFAlBzWRFLEXsy3NpR70+97uxJAmoQc/eDM7b9588+a9N7Mi/WFBnYIUIXXIn1Cqoc5F3xcjfbRJ6PKxmXHr0f1rEpu5JE7knJp52y3xPrXk9VpTSu+aDShzkAKkg17CRScylsov3gLReMeo30ej2Zbb98rSaB5kMU9iRTdhJjp5Mbu+Ghfr/GkzP7T39w+VFJ4vwTBNY0PowrN8tXz32GRmJ5JOx9/S03noSifCiYzxzN//LenMB7l6o6jx+rcw0NsTyzJy+YUspLdA0oYDo8IQAXmIRUI3ORdxGHgGfTr+Rg1p7O8d0lCRe/wRidiR9Vdxqb+fp0cg3dQ5xptJxMAlYSIxF9EJ73NLdys+m9WxaXispac1oT563das83tjc7dzClYEEDuFxqER4T5QpX53N/ScRzN2nNPxpC0VkFLP8gKm6GG025DaXvB4SFqvWpwrY0LvibBWHRL+V5CwwQQMg31hVJPQa0PveHSCN4gdCb3K1i4HAzGLLHJxuEjt6ASTMhXGn3EGvpOwUlj+qkaDGnrB0mCZaDmhVllGjKu5orzfgBZ2ATv53G0YWCZMAgvenngpjZ228DIQ3CR8LArm6iWxW7FavtOJySBy3iQWvHmBOA4uw8EC1hROhgtriJG9tvHj5sOEI2fPGPVRWs5ZSBJBMr44tS97OQz5QEh32aQQ2Fxw0YdnnQsZInrmbf96gmGWOsIcORgFrYsuw/sN0Syawg8y+1Oer3wjoQ87HrMEORZcWPEXwGff/ALqoS6F3oIcwV8sRRZkeZzwewAAAABJRU5ErkJggg==",Wa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACFUlEQVQ4Ea1VsU4bQRCdIEIDIgcNaU66UCEFyaaKoHIKCwsKOxKpuUjpsb/A9heAawpf2iSSLwXIyAWmIU0kuwCJhmBkCtzA2UoaU8B761vrFFvG4DxpbvdmZ9/Nze7bFekPA+4krAC7gN37VvF9Ntq+eNHHm4AvH1mZMzY/zktk5bVY5qQKq57cSvX0Vn4c1MUt1mtwZmEOrIt/CbctcyqZ314G0Vw3qF+nVv8r7zdKUqv/yWCcxApBwnR4cTZz+D0qxvRLPT6w9VptRYrMdxCYYrAmtJFZvlJaH5pMf4mkS9F9ZvoBPnfMH0gHM/Nad5JK/5I37wqqZnoy29zumfK7xSvlNqYnhCUC8jCDhHYiZlq68KzNUnRPEbHvNdsMRgadmrlYEK95J01kpsF6cxHxbpMwHo+ZegxEN7L1eUGYcRD8tfiqqfzGq94ac0cAkXE8rPDbme5cZNvtBzuMCcYFx9jn9gJCzDA8KJBRw8AvmUXC/woS1ljwUUEFAVUSVo9+NkblE8oSuCThkfP1fGRC6htQG9spHzc82LNJWTL/sHC09BKQXqFSWoP0Jp5ETFVRCJDeJ0x09Cq7cOR4enADDwuS+SdOlmScpwnZT6Kw2Y7QH191lkhJ9OQmh7kZEhD6lztvnaeNJk19UzWhgEJYq/LxtXz59httw0Mcf9OFDQUbUbwCeOzrK4DXAX1JGA+DHjwAVtbTH+z+42MAAAAASUVORK5CYII=",Ka="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACcUlEQVQ4EZVVz2sTQRR+Fc1FsVsvFSGweiooNgVBzMV4CBQ9NAG9CW4E7xv8Azb7B0jSs0gieKpC4kFRcjC5pChCFmnFiyYSEOuhWYu51MP6fZOdEJLVxA/ezuybN9++eT9mRaJhQG1DqpAOJAilHeosjJFYiNBmoCunksvGnVvnJJU8LWb8uDLzdvri7fbl+eue1F71ulC6kApkhEnCohk/YZeLV0C0PDKKmnR7A7l2sy7d3q8C1kmsME7oJC6cKrx5lhbj5DG9/s/RPzhUpPC8BMM8jTWhBc/K7fqNucn0l0i6ln5JT7PQ1Y6EC472zD/4LXnnvZy9XFXx0hv1EZdWtmThzJPwuAM4EBOGCChDDBJamfW4ycAz6GvpF4qIBP7PQxoq8CPc3HmXlc7brCTOL0ku31JrjDeTiBeLhBsb63G10Njek6J7SejtOHgsb3dfnPsXVUj4cc4brT0cdaBMWRFA6igeJr9G2PdW1Dj5UJ7Bq3FoImNxmECWF7BKDxOacHzDrHn2bjP0OKZMw1o1SfjfyNktMRZjUsCxJ0HCrnZ/cjHqnWTeR38qzuwgwCOh10Qy5oH74IM0tn9I9dHVqXplhQBfSdisbH2eyUey0sNPqLmksuWpKKxbgv0N1Phg/fRRKkHw7fZIoAu0DnWnb5upsVJKBuF6h2S69TJovWq7fl0VLxfmBT1kM6D1cthT0VmuQbHJ24NFPC9IFt44Lsm4TxNybiOw7rDRh9VP5d/ALlFturO/CZuCttNH1u8cLYjD/obIKrpIFz6T0Gh9l8dPv7DtfNjxmCoRGGfCggV/Abz2dTIYeOpsCJM5hT/w/RU/0O92gQAAAABJRU5ErkJggg==",Xa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACpklEQVQ4EY1US2sTURQ+9Q0pduKmIo1MXRWUNoKgdmNcFIoukoKiC8Fx4dqoP2CSH1Bi1wWTghurkLjwUbIw3VQEIUEqZKFNJFJ00ySl2TSL8ftu5o6TB6kfnHvvnHvmu/e8rshgGFDHIVlIBeK4UnR1FuaBGBmgjUGXjsyOG/dvn5PI7GkxQwFlVtqsS+lbXd6s1ST3oVaFMgnJQDz0EqbM0Gg8nboKonHPaNCiWmvJ9Vt5qdb2EtgnsYKf0A5fOJX4+HpOjJNH9f7QubG7r0hx82cwfExjTWjhZuli/uZ/k+mTSHpx7h1vugBd7pC7YeubaVcmLzMf/6D1walVGTnzwnW3hQscE4YISEMMElqx+ZDJwGdebuG0t9zEiS0164HxmjkfFHpRL9+RMNbUEYw3k4ilRcJodD5EvVR/7Un2+TWxn0yrbz3QLf6UeDqtMs4Y21jDTe9gVgQQOYLB5GkEfyAKG3/UrAefW1qlbBB3McY6CWR5ATMkDGtCz3rIIm5/keZuG/W4I6nkJRVDmru1auqkDKHo3pqcGBVzIiCNZlsVOMPhBwmrvQnwG/SuHz2cUvEr5m9I7n1NVpBIgh3EiYSl9U/dMeOOH2y5peWyX6VcZaL0DWkD/CThemb1R5dx74d5NiCJxa+ShGgwcehn0RXC/gZyHFg/dRS242zfU8I1dN439SgnB1nVr46DzDtIirKpfF6gvgLxWi8G4yzjwhIZhgYy3Gju66zC5bZqBtTkA/yXOez+XEYsgmuF7St3o6acOK7V/dTcM8Y6h5KM3VL+3uRrwwdC/GUTR2CTnUbvbrt+2k7xs01LmztL2E9oG/3a6G/OFsRmf0NU/+rCZ3kVNn7LyqstdkoDdnRTJQLzgbBgwSenCNHJYOCpi0MMSB/+AqyMIb5pMY78AAAAAElFTkSuQmCC",ja="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACZ0lEQVQ4EY1VQWsTQRR+inqx6OqlPRhY66VgsSkI0pziIRD0kAjqSXALeu6KPyDZH6BJzh52PaqFrgelkoPppb0ICaWCF3UlRczFJqW9pIf6fdOdZZtsZT94u7Pfe/PlzZt5E5FkGKBt2ArsJ+wwtHbIWXgn4lQCWwbn5nOTxuMH05LPTYmZOa/COls70vm6I+8/dcVf7QYgHZgHizAqWDMzE7ZbW4DQZBSUNAi6+3L7flOC7l4VfgorxAUr2dnL1c/LBTEunNX+/777u0MliszrCHzGYC1oITO33bybWkz/EkXnCx+Z6T1w/unQUdGZ6aVcvcX9SEbj1Teh31/dRgLnhCUCXJhBQatczJgsPAPnCx9UEIWTQL76YlP6gwMZIDuC9eYmYmhRsFQqZshLsL0nzHTpyYz6Tno4EFt6OiPGxeN15okA8hQ0s9cvqbk156ZkZ4/Gihh5eG9+SGujJ9XnN0Y8zHKK3BwFs1pwLCpGcKnOy021ghgdDcOzalIwFbjUUvFKdMhPmkTB4KQN0JO4VHSGLD68huOxr4y+/mAo/d0DFcYOAjpn+Fjb6GGXp5Uj6QE/Jg4lixMQh135Ij7akBvJtgR+McM17+33eNzY2K0vyOHvR8eMNfPquaim7G9AHWyvtd7rw8aE0hIsQ3hZeLr1ymi9lXbzjjrUaYUYxxqyGdB6i/j09C77IBq8PVirtKBYeOM4FOM8LcixjcI6R42e3HYM0mCJmFln628DXFXzesn6m28LVmF/w2QOXaQPPmvVWv8jr9+hY1B3xHGZPiwVLETxymnD9F8A/w7I2TBeBmP4BxL//+/DOFLuAAAAAElFTkSuQmCC",Ja="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACp0lEQVQ4EY1Uz09TQRAef6GJBF694IEmT7yYSKTchIv1ACFyKCRKPJjwjPH+jHfh/QGInD1QjyJJ8YAROdBeMCYmbRVJD0qf1hC50ELgAof6fdu3m5Y+lElmZ3dm9tvZ2ZkVCScLahecAhfB1YCzgc6BDKVTIdoR6Gbj/R3W+L0uifdfFjt6Ubnl1sqS+1aWt0slWXhf8qH0wEmwoaOA03a01Z2d7gNQh3EKm/ilfbl9d1n80t4k7ARWVA84Eeu+NLkyPyBW2zlt/6es7B4oUET+Ao5P6KwBHUQ2m10ePjGYPomgvQPvGOkodAsasFj8NGozV5XdQ/Gm8syRrMwPmvwlX2+I9zyvcYzEPkmvbjHSCpRXzmJwRoaiCoxJH32UkcRQJ07cN5s4ya9vi93ZKhNPbzTouWC++YgAdgiYSAxFlVNuvSz6QWZeFpRODzwg2KhVDZIVAcA4Ae3Y9YgyOmNdDU71C//3nuAmwoOYt1t9KirjwvIC9ZzGENOAxhoy8X/ti/vss/AWrEWWjDf1xXgGtWozwhOR+/iajI9dNY/EfPcOLjZFygj9ow8QdgIfQ3cM7bHuiOI8oiUxagoC5jIft7g4lpgzXo/yKLW3tygVIwb9JGAmOfdDKY8brLYWSc6hDqe+KpdareKAnUOJ43FI7G/QAgcLXEbLVaubDwxDV0XRmjXn6Cb961Rx5Wr2w7Cy0wZ//kqm9UbgnMou30Hr1a5AYxgxusrOgckn170Di2y9h/BPngk2FZCfyFJ68+b9hC0Xzmt1MyRtVpA3grF8Ct93PHjygxDmUJOLxHq1Rm9sO+1QL9m/jCy3tj0D/aS26c9Brykd8AT7m53Rgy7Shc/ySq/+kVdvNthm/Ax4TfUQkP8lBx4pcBasH4OJp84FW+Am+gsT+CdBBSasZgAAAABJRU5ErkJggg==",za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACv0lEQVQ4EY1Vv29SURQ+9Uc1qbHQBWNKfLVLkzYWolHLUhwwRAcgseoGNXF/jX8A8AcY7GxSXhMX0QQcMDYMwtLGwYCmJgy2pcEYu1hoZGkH/b7bdwlSxH7J4fLOPed759e9T6Q3HFCbkCxkC/LblrKti2HtiYEe2jB0ab/P5YjOXRa/74IY7iFlVlnflcqXXXmzUpfcu3oNyiTEgrTRTZgy3OfMdGoGRK62Ua8/tXpLbt0rSK3+K4F9Eit0EsY9UyOJ968D4jh/Wu/3XRt7+4oUkT+D4QKNNWEMkaXLhbvHJtNvIqk38JaRRqDLnbA34jqyxt6BRB6VZOxGFkYt7afW5NPP4pzIyMDFF+K9nWcdEcCgsERAGuIgYSwcdBssfHF1R8auZ2UYKfciszKbkl2ald3qA4nOjcu8uabsWG82kVyn8BMKBd1YRIprO8oB6csynDWYVgLRbX2ItDtuPp6QJvR8MYPhRCAgPwkNz6RT+SaeXFFrd3QcF8/kiDiGB8V6uSHb31oyO+OSuG1PJ44XME1Cjyakphc+YfYOi59X0bBuTB+lklTyqnKxZ9Ug4X9BMnQRzteEqRLMwhvIq0jDwdE2B5tS606xvWv/uTQ6pLqpyahmRIyQp4bgCeJCwkoJzegHDLzaZqSd4LOBlxGsM7BNwpKV2eDDP8Eae6acshD/qFKl4eLzqprD6P1x5WdHqgbbQrsbnMF+SKd80mjuq4HnYHOMskt+lTpLZl8Wlj56Ycxetly4o2rVj5gnicR2V9H9A9UcNG0eftZJ27mKejhXit9vPgwZcvaMVh+l5h7nkSAZb5zq12YSj7wghDXUMFHY5OFB//sMa4POlSXi2FTWfy5Cn9B7OmX9zDUGifN8cyym2RD7JLFWxdUfsvxqk8esATummYMcCzFY8RPAa19/Avg5oM6EOCBH8AelXiRum6PHbAAAAABJRU5ErkJggg==",Za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACU0lEQVQ4EZVVMW/TQBR+RcACqlyWsERy2wVERdOxWUiHSFUZmkpQxroSzLj8gcQ/ANLMIGJGoFLMAAIy0C5BTLGqIlhogrLQhZoKljLA9118VkIs13zSu7Pffffd87t7Z5F4GHDbsAasA/sTWjv0WehjMRbjLcFXL+QzxtrNKSnkL4qZPado/t6h+B8P5cWbnnive104HZgLi/CvYNXMnrfr1XkIZSJS3EO390sWbjSl2/tZwTiFFQYFy7mZC5V3W0Uxxs/o8cQ+ODpWooh8E8QNkrWghcjq7eb11GJ6JYrOFV8x0hX4PC3Y6XxYMXWuag8/y+ajT2Lfvix371yS7daBrG+0tMZQ33hckOCHijTAwORpNFZpMavEmBdODI5+wz2G/lhNzs1MSL2aV8+60Vxj/Kzkrkww5wYWtk6BsLy8mFU8hC3X5jPSfrsU7SwHOImbNGg77w/EujUd8XgigAIjNLmCegsnqZeEhtG5z74I0hSxeLyAWUaY04LR6AkPzv3doehID/NvMsL/Qlx0gwKMsEtSWnDTBnOn57GCAJ+CPhOcBjw+XLx87+oInWUJfKXgDhOcBs6DXVlbndL5GprC+gY8CrpYOeDqSXCf7qvorNXpERqjDi8LV1dKCaXXaDeX1JkbmZHgYBHMFV+y9NZBcxkh4cFR4+2hq6PvTm4pFt44Dpgu2VqQzzYS6/QL/eRdZ4oYmb/3vYa5FQoQ+pP7b/3WQldmfcNkFlWkDz5ztd36Jk+e7/PC4GXAz/RgqWCBxV8Ar339C+DvgD4bZsBG8BdTQPJbZdBgiQAAAABJRU5ErkJggg==",Ha="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACs0lEQVQ4EY1UTWsTURS99aMKLXbSTUQanLpSKyYFUZtN4iJQdJEEFF0IRqH7SH9Akl/QZu1HUnDjB0y6UCxZmGxausoILWahTSRSrIsmlmaji3jOS1462LH2wJ03c999Z+49774n4g4D7iTMgtVgnZ5Ver4ERlcMuHhj8OXCQa/x4M45CQdPi+kbUmH2WlPs9aYsLjWk8L5RhzMDy8P6+JtwzvQNJ3NzUyDy9oPcXuqNtty4XZR6YzeNeRIrOAlTgUuj6Q9vImKcOq7nDxxbO78UKTKfR+BjBmvCBDLLVYq3Dk2m/0TSycg7ZhqHr3CkN5HSmbV2fkv8UVnGr1kIaut16p0lDpx5oaxbbhsJDAolAnIwg4SJ2LTPpPCl5S0Zv2rJCEp2kjGaBGfHhqRZvassNOVVPmZIvbmJ5CJhNDrt4xoprWyJ9Twk6Vm/+tYPLkJJkpy5oCShxsmZ88qnf8yOAMIkNAMTHrU2PXvZdXdZFjSWj2gZDbZQ199tKbYX4D+GR0AT6mC30XoWUiWi/8QYGVTy5OaDipTxvV41meGhkH36SRFRO//FbkX0UQ4nSFjXOjgnnO+LyKq08kPYCdSOVluNKbKFlxsqlCcIsElol7EZB4E/dOqlY82xYal/21Wf1BT4SsJy/tUX5fzXw49Ns9e3Jfuk2g9hi1FP/8So8vF8AwU+2D9NlNPpbN5XVluNq9uFo/ahnTrYaX3rdJBxZy5zxRlfI5k+ejEEW5Xizf6ucdINWm99A/FkTUbesicfIj5/tLeoit3yLJU2r9+LmnLyhHbvp2TL0AiS8QRVP//M4JMXhDjbJglhM92DvneGGeQGasjM7LXtLObTOkaXrL85JmApnm8YRPeIbnyWW1r+LguvN9jYLcSxTLURGP+LBCIsWAWmN4PC05eEGbB9+AMiziwWYWCsOQAAAABJRU5ErkJggg==",qa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACq0lEQVQ4EY1VTWsTURS99aMKKe3ETUUanXZVsJgUxY9sjItI0UUSUHRnKrg20h+QyQ+QxD9gRnBjLUxcKJYummxSXCVKC11oG4lIu2nTYjd1oee8zIthMpEeuPNx750z951374yIPwy4MzAHtgn741rN9aVx9sWAjzcJXzEWHTUe3Z+QWPSsmKGASquv7kp9bVfeLTal9LHZgDMHs2EdeAnzZmgoU8zfANFoJ8nvotE8kFv3lqTR/GUhTmKFbsJsZOqMtbwQF2P4pI7/99zaP1SkqLyAxGdM1oRpVFasLd09Mpl+E0mn4x9YaQq+0jE3kNWVtfZ/S+pxRcavOUg60M+pay5x4NxrZcxh3BgeFEoEFGEGCdPJmZBJ4cvVbRm/6sgIluxHFr4YlM1PKWXM4QsI6s1NJBcJE4mZEP1SXtkW5+VNsebC6l4fPq/tqMtC7oracb7cLkSltXeoimCQHQHESGhG8GbCmrvku7t6aSqp6xCZCkoFRRBsLyBMwogmpMcPXCpE75GBEjV+tHV2e9U84Ufg9VGj9IMJpRmvuRHllS21Gm+LscJG9wZ4yfR9Hvrlc5fFHAvIBdjywm1FbI4NqRROEFBnhXXogF1Woqqg98CRo1ZPn0wKOqITJkkWuhPMAb6zwoo9/403fWGeD4j1/IvkYAR7dTZTFWqv9ed8A6qxbYjbosD9QM3YTvb8hmrq4OQbtRmUgaBk7sfC1qOXxOg5taU7Spd+xPphY2QQee15Z7XT8ffsglnE7ePuw+uYyeBi+ef1hwlTTp/S7l5qkuk4yTgt61/3csjkB0KooUYGwubag/5vhnXQe6ZErKy+uvMCMUvH9ZL1Pc9pWJbzzR1lU2vhqVW5uiWv3m5w5FrI4zJLsCMhjSwHVoPpXwB/B/RlYAasB38BbTMURenwjkwAAAAASUVORK5CYII=",$a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACyUlEQVQ4EY1UTU9TURAdNaAJhj5YiBvMC2yIEqk7YAMuSIwsbBMtLkx4xLC2DT+A8gekXWssbv1I60IjdkHZ1JiQtBqIXaitKSGy4bUENnRxPee299HA82OS09s3M/d03syZivibBXcUSANlQLVQaPkcnL52xscbgi81Od5nzd4bkMnxy2L3d+m04qYrxS1X3qxWJfO+WoFzCVgBPDtJuGz3X4ymlsdA1Ocl+X2pVA/l5t2sVKoHccRJrK2dcDE43BtfezUlVneHif/1rO0faVJUnkBijMmG0EFlqUJ2+r/JzC+R9MbUO1Yahi9j/OXyp7AqfJhWeFU9AKu7Uzkzg8otRZTaeeAhOj+kGMNFFbrVr3gPb8VnF7DO4sNBwLYCHRJ+uC4TY33ilmaE1Ra39iT5pISUpsUWNzCMbVl7PSUgkgBaMxfL635ziMhymJlOJcYVCFRwuMerhFVlnk0otMLzIVdXYypm9ayWFWKQrDLDCu3gtR4h8Mp4PDa33kBPO7Ujl9/V39unz5h9pUs+Q0qUF2yEhEGSnTTKYunxF3k0P6RDdTTfCjTJ23ODV3ulsn1gtGqT8JQZjc1GBsQBaG796FSen4OEFRIYayeLL1w3boFGpeZDyur46twgWJGExfWPu/pibb/RmvQlaSdjkOtHzbGXxvjjXEcqgyfsJwnXV158R3JDq55bEl8YgVAPPTCTVTiRQYnFN7Sf+cmnX3VfOSjuN0wLm/pxKWKcvqB4KRXKBKReDpeAMQJ3y4C3eiHoLV3I3vZkwuCfjNWxn802NLB6b1H1wRzyV861LpXQn57V3M7o/Tu2XDhv3P6UjFNCpk2lb3X+2ySYzR4ai6KxS81FP566CZ48ORxWVtzcSyIWN3Hzb2OeeTrAIvcbkJHWFjHAQeXyv+T5yx+cdg0uvqYeBOP/MgcJaaAAmEGw8fRFAQs4Zb8BSBtwJRgqL8cAAAAASUVORK5CYII=",tl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACe0lEQVQ4EY1VTWsTYRCeiHqplNVLRBpYParYFARpLsZDINRDEvDj6Ab/QIo/INk/YJKzh6zQUxWSHipqDjaXFE8JUqEXbSQXvZhY2ks91Od5s7Ok61ozMDvvzsz7vPPOx65INFlQl8BN8B742Oeer3MgIykWoc1D10in4taTh9cknbosdmLOuPV3RtL/PJKNd0NpvR0OoHTBHjigMGDVTlwoNarLAIoHTlGLwfBQ7j1oy2B4UIGdwIamAcvJm5cqH15nxJo/p/ZT5Xj/yIAi8hocV+msgA4ia/Ta92cG05MIupR5w0gL0LXO+IayRqZXiV1ZE3JxdRvOh7rfyPqLXbl6pymU1vx5YYpADbBFQCefTdiaeOZl8cZFGe0+lr2PBRn/OgJolxsMMO3eq694iwmjIzHfLCKWDgFzuWyCej+SY6m5t83VeUgV663uD99+IHeX49J7vxJU3hjwYEeA0mfxsJOIiEQARjVNBEN+jcqPZNocrNleoEVGmFTAwOovmDv3+ScpP7sVNv317qfMJmAkjfd/S+FpR3LZBXEemetE+oWVBByEq0gwU5zrlslneFPUOycI1Cdgv7M9Sbo6FktdsRfmxKulVPVfybEEfSNgx1v/EmwgGE+rIG+MXDlw+MeC8w1qscoeKlkGs4/EW2ePoVKZTSP1weprr6pOJQ/1Pxaejl4erdHstVdM56vjLJL5XsLhGL0i/D1emdSCos5CaPdP1Kc/tXjY68LTo7cCcl1CYt3JoJ+cXRrDxIZnZP2dn3XYKmrXK+s7pQMuc77BZq618Zmrre53eYlZBuAYfrxmCzwTOfDiL4Cfff0F8HdAXQlsigh5gv4ArXr/f4PXeKEAAAAASUVORK5CYII=",el="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACqklEQVQ4EY1Uv29SURQ+GstiU58O4iAJ0aVRIzRxKQs4kBA7AIm2i4mPqLOPdBf4AxQ6GwOuagIOGpVBWCCaJpCmJiwKBmOqgw+butgBv+/CfSk/rJzke/fec8797rnnnvNEposBtQUUgTbQH6Ix1JkYp8qRKdoYdPlQwG3cunFOQoEz4vUcV27NbVuaH2158aYrpdfdDpQZoAA4Mk6Y9XrmrXx2GURux2napNP9LVevl6XT3UvDTmIlBwlT/kun0u+eh8VYmNP2Q8fe7h9FishzcEzSWROaiCzfKK/MTKZPIulS+BUjjUNX0vp2+328T+Cq+gH65tr5vt1a7fe/3VSwW2vKbiy4lA99uQe34toGjKP4mLGIx8vEMye+iycFGwWOPFUSVl0fKsn7m7iBS9of4soeXHarPcw3YJCLhNFoxKNezzgxJ7nMFXVtHmDdWZRK7btDWKnvSGr9smNPY85D+UCsCEjoGD5eP6IiGm9XnM2c2L/2UTLzjo5RHxQSURgIywviY4R+ko0LnTMPt+Te3cVxk7OO364qO9MwrFUvCSekt7uvchONnBVzVV1lwidh1ZQuve4bsZGwo0OnRZMFl0+rfI54DxfJ1KZU6j+k+DjolBk7CNIkYbNaHyRek/kuGFLIBYbbR4fMgy203VdhA+iWpAfbEvKFhNXC009coERq6kReg1FrKCM+JMs9akk+OzhM2xkI+xuiCpv1Y6MEnILGemTO4iXG9XqNAGhrA07rxVAexUb5GiJ0UT+zMLql8EvcZi+BTQVemVKCYoOdwt6cVXTOsZd/mwL3aULOLSQ2M2j0QcFS+S9hBzGy5vbPDfiktZ/+2+g1RxNIsb8B1du68PkIldqOPHn2mS3Zgx+vqR4C43/FhEcRaAD6QZh46iyAjzkhfwH6QzxVDjE9cQAAAABJRU5ErkJggg==",il="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAACz0lEQVQ4EY1VMUxTURS9iCAGAh8TpQON37poJFASB+kCDo1GBtpEwcGEb3Q0sYTBxKXt5mJaZofWFU3AQSN2sCwYE5NWg6aD0poSYhd/ITiIw/ecR1/zU0r1Jve//+497/73zj2vFWluBsIR+BK8CHdqnqvFLIxNra1JNIRYaiIwYMze8MlEwCOmt1vB8uu25D/b8mKlLMuvyyUE4/A0vG6NBROmtyeSSoyh0EAd1OylVP4ll69npFTejSHPwsrcBaP+oROxt8+DYvR26HzLsbqzp4pi50kA5wjWBS3sLJXLTP53Mf0lFh0NvuJOw4gt63ix+D7sYHeOf6hfNcDo7XRi88OOs3Wr7sSACoc5LFRYvQ5zG24cwcMKXfWaGNX27989L3ZhRnj09OKGLDwpMKWMnJ0e7BaehJipK161Bpsg5wZAVjse0Qf3hs6R5DYQ8OjhqHQdaxfPqeOKj+y7itycMlXBj19sic2PqK4Tw8bNRT+ovOdkF7q/+fsokKb/Qr/QrRmfWqgflIjR16mnwu67LbtWUVPKCjTwfYQF/SzWaNRcevGbgKPGlESwq+2dP5Jd+yGpZEAVqxU0yeEB4/HDd1YlEb9YF7UbdGawR0xwSZGsghJ2Whtlww6b+jZowc5O+8DXsMYdOrJRITRnHHyOBl/mucM8v0JrVYy5+ONPCud+8KilzV0hRbDvLLhKrnQxds6aPqvmjNFpRl+HJCEhd1E2BXdaxsc86n4DpoRN/dgULMYDjhtUF3buzaTDucZR4ODZobgRK8LrVy8E4FIuc023n7lDrYoOV7f3VMP4Du5wkt3bWJCmsGkFdKp/Jbt1iSKmaFsZ89Qni7Epha/bceCTXOOWTQTExvcv+j5vrYqSP+4sv/5zAbiYxlI2jWYhEOX9hstI7RYRxAZRzE+fbWCsVBHiMVUjmP+XWQDwL4A/+7oRJJ6xCNyAH7C/V6JHC9VDTDkAAAAASUVORK5CYII=",sl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAUCAYAAACeXl35AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAFAAAAABUzb9jAAACnElEQVRIDWNgwAQOQKF+IL4PxP/JxOeB+uYDsQIQowBGJJ4AkF0vwMdWkJ+qwZAQpsygIMuNJE0888KV9wwXrr5naOy7xPDg8ZcJQJ2NQPwBZALMQpBl++PDlAwmNJkyCPCxguQoBh8+/WJo7L3EMGH2jQtAwxyB+AMz1NR2oK8CZnSaM3Cww4Qotg9sloejFMiXEhevvucAmrgT5EMFBVme++d3e1PNZ+hOBflU0WwDA5B2ZAJK1tcX66FY9uDxVwbHkN0MjFJLwDix8DhIMbo5WPkTZ99gUDRfzwCiYQCYLhgKgOkCCAJAFhoYaAvC5MA0yDJ9oNj7G+EM908GgoKEITDpIIoadA7MkQtW3wNKMWI4MB6YCIHAH8NCUOoS4GdlmNBoAvY1KKXWF+kxgFIePgBylL2lOMP5XV5YUzc0xSuwoBsC8u35Xd4owiDXA+MZRQyd42AlzgDChACGhegaQJaB8hMonkEAFJfI8QMSAwUXsXkWr4UfPv0GJx5/DxlgQaAEMhsMHjz5CmOCaUiCIq6QwGkhzDJ7SzFwfMJsAKW4+f2WMC7JNCjRYAXglKolwLBgghVWeXIFQRY+AMUTMkgsOAbmNhTrA7PEVzhGVkMqG5T6geACKEg3Llx1Nx+WKA4ce8mwYBUoLzGAMzCYASVAeZLYxIGsD8SGZqsLoKLNARgv+++fCgDmOzZ0dVThg9KDoetWUAGiCArSA8BUNrGw/ixVDMdmSGPvRZBlE4FyD2BVwwlgGHt8/PRbwsJYhGo1BshnmeUnGWYsvg2qnhKB+AfMwh9AzsoT595wrtz40EKQHxK0EmKcQGHSASihTZxzgyEy8wgD0EyQz0CWgStgbKYpAAUXADGomUBuEwPUPJkAxA5AjAIA7oMIyaGb3E0AAAAASUVORK5CYII=",nl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAUCAYAAACeXl35AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAFAAAAABUzb9jAAACyElEQVRIDa1WX0hTYRQ/Vi7F0C0ihzS41stAqEn/Zi9uD8agBzcIoyezPw8+OfFBelrroeihtr0JRib10CRIH4TEhyWEqURbkjCIugslkIJtMmE5Yv3Obfd273bXdPqDw/2+c77vnO/8+c53iUrhACsAEkH5KimKfWMgAaRBjWpmxNhnbDR4B25Z6VrPCRIsDSrx9oexT0mKrSTJ/2iZEquZIHb6QSnWIBtkY5HenuO24N2zZGysZdmukdrYIv/DZQqOxmNQ5gSl9he03odX7pEH56nuoMzatT1Jl8vZwl6aP64k66Bxhj0UBMshMTp7ac88Kz4qe9p6bpLwde6D0OcbOqkxxjlwXp6lmpbnEvUNvsMpN4v16M7fzK9T+8Vp4j0yUBfkRV0AbjZos7WZZJmk2HNjjk6Bl4xfIXHRQ/l8HgrmlTXlBoO+9+S5PofDGziMmmW9KEKgu8Qgcx0XminoPyN5zZXKFcsnrwSOgrjkIUdHc8nSQsULB4olLBgLdGjYSDjZ2g5reHqTV0869dgaXolBtfRv7jJIdo7UykKjcS4AZWm3y4ID/UuLItAZcEjLQjjWIHmWSm/R+MQXZZ24lqHE2qZCqXROkVUa/NdDrl7GwE0rtXdNUydyI+e3kuJy8hIPuTg4ZGpwXo1NtVJo1fxqxmwwUXzHvCjv8Ymvkj7OH7cnDtt286R3EO6tQIwNTqnzwyEL4ErcgRG++CZrmCZnVinysqvqZi5ZQjNhg9zaHLioEXHJLV1Y5sqQPS/cIZm94y9HiWsAzaCVO3Ui++u3af1H1u5GeathbDIgdwY1q6rx7XtReh35HsLmF/LTsIAYu9IbObP99JE9ezHYs/7hRRp59pmfpz5QVjaYxSS88OFnfXjqm91U8Mp8tB7snYNTEXocp6v9bwk62TM2Jj3AetoEMJ+C+Deh2l8MEXuDIAdIgz9GchluxrTNYQAAAABJRU5ErkJggg==",rl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAUCAYAAACeXl35AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAFAAAAABUzb9jAAACgUlEQVRIDWNgwAQOQKF+IL4PxP/JxOeB+uYDsQIQowBGJJ4AkF0vwMdWkJ+qwZAQpsygIMuNJE0888KV9wwXrr5naOy7xPDg8ZcJQJ2NQPwBZALMQpBl++PDlAwmNJkyCPCxguQoBh8+/WJo7L3EMGH2jQtAwxyB+AMz1NR2oK8CZnSaM3Cww4Qotg9sloejFMiXEhevvucAmrgT5EMFBVme++d3e1PNZ+hOBflU0WwDA5B2ZAJK1tcX6+G0rLD+DIOi+XpwnKAbhI1/4NhLBkO3rQyJhcfh0sB0wVAATBdAEACy0MBAWxAuicwARf6GHU+AQfKV4cPHX8hSWNkgxwUmHQTKMYKCEUVNPDARAoE/XgsDkw8ygHxPLAClTFDUBLjLYGiBpngFkIVYASh1OViJA7OHElZ5bIL717gSzEos2DSCgnDBqnsMIAOwgYmzb4ASAFzK3lIc7Di4AB4GVgsdQ3aDgxJXxr//5AvDx0+/4cbqI7HhgjgYGBaCglKAn43BAehqkE9h4OETYMIBGgwqFCY0msCESaYxLDxw/CXDhSvvwFkB2bSEgmMMCeHKDPP7LZGFSWaDLHwA9Akw80PKTWzxxii1BByfoERELgClYCC4AEqlGxeuukuuOUTrA+VpILgAKtocgCXB/vunAoDxw0a0AaQoBMW9oetWUGGgCPLhAWASn1hYf5YUM0hS29h7EWTZRKCmB7Cq4QQwjD2ASV3CwliEajUGyGeZ5ScZZiy+DaqeEoH4B8zCH0DOyhPn3nCu3PjQQhCYLUBAQowTTJNKgLLTxDk3GCIzjzAAzQT5DGQZuALGZpYCUHABEIOaCeQ2MUDNkwlA7ADEKAAATIH2zR+4T2EAAAAASUVORK5CYII=",ol="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAUCAYAAACeXl35AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAFAAAAABUzb9jAAACXElEQVRIDWNgwAQOQKF+IL4PxP/JxOeB+uYDsQIQowBGJJ4AkF0vwMdWkJ+qwZAQpsygIMuNJE0888KV9wwXrr5naOy7xPDg8ZcJQJ2NQPwBZALMQpBl++PDlAwmNJkyCPCxguQoBh8+/WJo7L3EMGH2jQtAwxyB+AMz1NR2oK8CZnSaM3Cww4Qotg9sloejFMiXEhevvucAmrgT5EMFBVme++d3e1PNZ+hOBflU0WwDA5B2ZAJK1tcX68Et27jjMYOi+Xqs+MHjr+hmofA/fPrNUFh/BqwXFIcwAEwXDAXAdAEEASxAwsBAWxAmx6CvLcQwv98KzgcxNu58zLBhxxMGAX7ccQtKKIHJB8EJDeSwDx9/oZgRD0yEDb2X/DEsBKVM9NSZWHicARIKbCiGIHMOHH/J0N9owhDgIcPAKLUEWQrMhpqpALIQL1iw8h5YPiFMCa86aJDhVQOSJGghKC+BfAcDoKADBTEyQJZHFsfGxmshNt+BUtyDJ/gTDzaLYGJ4LUT3HUiTg5U4GMMMIJUGZQusAJvvsCokURBk4QNs+Qub70g0G0U5NF9eAFm4ceGquyiStPAdKLEBwQVQ0eYALAn23z8VACxtcOczFBeRyAGVQIauW0FlqiLIhweAKW9iYf1ZEo0hXnlj70WQZROBOh7AqoYTwDD2+Pjpt4SFsQjVagyQzzLLTzLMWHwbVD0lAvEPmIU/gJyVJ8694Vy58aGFID8kaCXEOIHCpANQIpw45wZDZOYRBqCZIJ+BLANXwNhMUwAKLgBiUDOB3CYGqHkyAYgdgBgFAADj2e234obfjwAAAABJRU5ErkJggg==",al="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAUCAYAAACeXl35AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAFAAAAABUzb9jAAAC20lEQVRIDa1WTWgTURCeqo0tljYBsaE0sK0XQdGU+pN4aXJQAx6SgLR4aqN46MkGD+IpxIPiQbO9FfyJRQ9WD00OxZQeYkCaRtTEYiEguikpQlDIJijEBtGZR3Z52TXSpB0YMm9m3sz73sy8DYCeHKgKIUvIf1rkNO4LIwvIddTGrYwoB4zdhqmrVw7BxOhBECz7OPPWxczHImTWihC8twq5/A8RdwaRZYqgJKRk8fHRQat48wQYu9vJtm2Sy5sQvLsK4v1sBoM5keXdtai3EZVn5s4p6NirqLadj8VyOfsIpfnDWrEDIy4SQkGwdEnppfM7hkx7VEI6cDIC+OvchcZA4NrRumRUA+eFJWjre8rY50/iKX9q4/xz/Wq5AENnF8AfeKfasS9gCvsCyUMJrdbDJtVIp/FeTsAx1BWzYyClvCCXNsHnX1Z9Ggn+wFv0S+LhDYSmzm0cmxDJrUtI6PDOQQweZ6ipU0Mo08n/R3QDNENUGqG/S+da63iBEtaR9YiJnZBPEI3lcUT0QfiNFFA5JK/Xynu0CrqOsGgH76UEOE73squRy1WYfziiulKr8+R2WYAvC2/TyrqEFHz6QRYI6Yi9l/nTevbFF9QNs3Vuo76B5FJVG7fhWpcw8jLPOlJKedRNHkQwdGYB3Of6GepwyK7amhV0NUwkCywoH4jqY+xph3UNMt5nqzIlzPEzRtdIKCOxDTUG1Yx8lCtWDU0I9LYiZShhdPb5Z3XrxNgg0ONNM6UMfmQxD/OPHC0/5iwTjhtShp42B3ZmXHrjYeNAWoUU5LUZUtRN/1IjUg/gfA/QS52r/PptKnyr2Kg5eDL2GLB2Bl7VknzjVhpi8a/TuPmZ8mlYwTt2lcpVs214/459MQjZ5PUUzDz5RJ8nH3JFSVjBxdzK+++dc9F1m6mGynygE9XNE5WCZvfi5GvAmISMksmNIgloeIxMfxNa/Ysh4V4R2YFcR38Bb3Ues5HaWTAAAAAASUVORK5CYII=",ll="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAUCAYAAACeXl35AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAFAAAAABUzb9jAAADA0lEQVRIDa1WX0iTURQ/648pim0QOaTRrBcpKCOr5YvbgyT00IQwgkAtevCpSQ/R01wPRQ+57U3QVKiHFoH5EBg+TCH8E9GmpA2CNlGEUbRvQ2Epsc7v5r19m01T94Oze79z7/mde/589xvRRthZ5WWJsmR2KCG262exsmTBoHsy8txtLC9y3bldTa3Nx8lqKdUt//80/ClB4dkEebpmKLaw7GNLD4sGBukQzoItzcdqfA/OkbF8P9Z2DS21Sp4nM+TriYSZzMGi7V1nfcRRObsfX6DiA1K1a3+Cq9FRiSjN07OJYmZ8iwitVktZNDRyuWCR5R4VkVadf008Ovbwott995RyFltYIcfVETJUPheCOXRbYTM77gtycV8wnHBYU3PSpPiabo2y8yJKRK4Jqb9YIQ6AU26Gto5xOnqkVNhEp5oInNBJtHATMq4gpZnM0g2pF1EhvfpDINpcnTLgCQ5zpuENDfbZlR10puqXBOey28GDCLPA9aSx8bjSyXRKI7WgmyAjMiqpzme3T26Q4+DTekJaRyfiZDxYRKPsHCcHKTAQ+Erzi8tyOyHl9roK9YyJllqjpptjhN7IxYYI/b2feY9BEJ0+8ae2nq5pkTYYJzlVscUVJSDPRZtrXBy28x8Os2o4NLxAra4JUS99CtGpzksWwg20FeAsPKdR8FWD6nxps6GGieQqF7hMFVluRDrDcwn5mHfscH/I60waIaWxvwUu4zvwB/l7InJd1BB1RK02A64w1NfbWUsaHxyckhd2uFsx4MfHucarIWSwrz7DUaqvBEeX8Xpq1brcpx+5Q9V+5suac2qFbb+3Dvp+1NDOpMHoe6fqRNaJTsNJ9bWEfidAY+E95Tu1Cjd1LP3zlyn+LW1zNloUHy5xvBaFwP2HIRoOLvmZ64X8NExyjhuTqTWz7eyhgn0xEFn7vSnqfvYFtWtjSUuHaX4ITH78XhIYmreZ1iMzHy5h9faBZvH3Ruh6+ztiTkQGZ1o+JisvDLDgb0JWA2zjOcp7fSx2liz8BkCog304fm8JAAAAAElFTkSuQmCC",hl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAUCAYAAACeXl35AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAFAAAAABUzb9jAAAC0UlEQVRIDa1WTWgTURCe+lNbLDUBaUNpcKMXQdGUqk17MTlUAj00glQ81SoeemqCB/EU40HxoNncCi0kRQ+mCtpDRdtDDIitoiYWiwFpk9IiBMWkoUI0iM63ZpfdbCsxyQdD3pt9b76Zl2/eLpEednb52ZJsvyu0GO8LsglsGtSpZgYeew3N9e6RSwfp/MABEsy7VY/LH8Y/ZCi+mCHfnQVKrW6IvNPHlkUEmRBkkcGB/Vbx+nEyNO/Es6qRzf0k3+0FEscScQ7mYMtuL0a9yVW5Rm91UcMu2VU1nxTL6WhDlab3i5kGjvgMFQqCuSkZm+2rWWWlqaJSy4nHxL+ObfzQ6718REP2/GWaHGdmqa7tnmRDnjksLo2z6Rx7O05Nk8f7VnnOuiA364LhAqHVesioPEytfqfTF6J0lH2ZxFmKzfSxAL5JPmXRFgOP9w0hORCUJjjIImT06wgD4x/J3tNKou+YVLX1sJEiD3sJmSOZfwE9hL9GaG/SLSsqXgChBtn1Ahn21Gt8yBgWnUtr/KUTOclSv3q+Qz3BGMd7jaXs93VKJPAFxhKaI4LU1eh3mqV9at9WYx0hmj70YIk6ep+QiwOxpKUmZiUrMVJr2qPFqZQLHSE2Qiih8DKtrG3Qye5WCoo9rNoZ2tf+9+YJ+rvLja9bpyOEOLhJCZXKgFhwXUFA1QKiSZWqz83ynphclmJLbXIxKiUA4VQK3K2MOAinJiaXlDhoCT+3BISDxrd0PeJjbZHaRFlUwQAnxIjjarNz5pHka5eiSjkeqkOLVHuZZ3MFFuE0BGjBTZ3K//hlTH/J26BKNUBWi8v86o0YPY18DnDs+/KrYZ7P2LmeK5hsnXtrQoLEUdnwlVc0evcTXk9DbHmZMM+T8Py7r43hqRWbsXjTmFoa2f3/wF8RGE/QueEXxDFRGcikF/Bm0QR2htjwmVDpJ0aS94psdjYN/gBLWxwVhmOXcAAAAABJRU5ErkJggg==",v={exit1:Pa,exit2:Oa,exit3:va,exit4:ka,exit5:Ma,exit6:Ua,exit7:Na,exit8:Ya,exit9:Qa,exit10:Va,exit11:Wa,exit12:Ka,exit13:Xa,exit14:ja,exit15:Ja,exit16:za,exit17:Za,exit18:Ha,exit19:qa,exit20:$a,exit21:tl,exit22:el,exit23:il,exit2_1:sl,exit3_1:nl,exit4_1:rl,exit7_1:ol,exit8_1:al,exit8_2:ll,exit9_1:hl};class cl{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=gt,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?lt(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=lt(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return j()}readFeature(t,e){return j()}readFeatures(t,e){return j()}readGeometry(t,e){return j()}readProjection(t){return j()}writeFeature(t,e){return j()}writeFeatures(t,e){return j()}writeGeometry(t,e){return j()}}const yn=cl;function He(r,t,e){const i=e?lt(e.featureProjection):null,s=e?lt(e.dataProjection):null;let n=r;if(i&&s&&!Io(i,s)){t&&(n=r.clone());const o=t?i:s,a=t?s:i;o.getUnits()==="tile-pixels"?n.transform(o,a):n.applyTransform(Lo(o,a))}if(t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),a=function(l){for(let c=0,h=l.length;c<h;++c)l[c]=Math.round(l[c]*o)/o;return l};n===r&&(n=r.clone()),n.applyTransform(a)}return n}const Al={Point:Bt,LineString:Yt,Polygon:De,MultiPoint:xe,MultiLineString:ue,MultiPolygon:ge};function dl(r,t,e){return Array.isArray(t[0])?(Ps(r,0,t,e)||(r=r.slice(),yi(r,0,t,e)),r):(bo(r,0,t,e)||(r=r.slice(),Do(r,0,t,e)),r)}function Cn(r,t){var n;const e=r.geometry;if(!e)return[];if(Array.isArray(e))return e.map(o=>Cn({...r,geometry:o})).flat();const i=e.type==="MultiPolygon"?"Polygon":e.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const s=e.layout.length;return He(new z(i,i==="Polygon"?dl(e.flatCoordinates,e.ends,s):e.flatCoordinates,(n=e.ends)==null?void 0:n.flat(),s,r.properties||{},r.id).enableSimplifyTransformed(),!1,t)}function Pi(r,t){if(!r)return null;if(Array.isArray(r)){const i=r.map(s=>Pi(s,t));return new Ne(i)}const e=Al[r.type];return He(new e(r.flatCoordinates,r.layout,r.ends),!1,t)}class ul extends yn{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(we(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(we(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return j()}readFeaturesFromObject(t,e){return j()}readGeometry(t,e){return this.readGeometryFromObject(we(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return j()}readProjection(t){return this.readProjectionFromObject(we(t))}readProjectionFromObject(t){return j()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return j()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return j()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return j()}}function we(r){if(typeof r=="string"){const t=JSON.parse(r);return t||null}return r!==null?r:null}class Oi extends ul{constructor(t){t=t||{},super(),this.dataProjection=lt(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=lt(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const s=vi(i.geometry);if(this.featureClass===z)return Cn({geometry:s,id:i.id,properties:i.properties},e);const n=new gt;return this.geometryName_?n.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&n.setGeometryName(i.geometry_name),n.setGeometry(Pi(s,e)),"id"in i&&n.setId(i.id),i.properties&&n.setProperties(i.properties,!0),n}readFeaturesFromObject(t,e){const i=t;let s=null;if(i.type==="FeatureCollection"){const n=t;s=[];const o=n.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],e);c&&s.push(c)}}else s=[this.readFeatureFromObject(t,e)];return s.flat()}readGeometryFromObject(t,e){return gl(t,e)}readProjectionFromObject(t){const e=t.crs;let i;if(e)if(e.type=="name")i=lt(e.properties.name);else if(e.type==="EPSG")i=lt("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(i.id=s),!t.hasProperties())return i;const n=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Fi(o,e),delete n[t.getGeometryName()]),qt(n)||(i.properties=n),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let s=0,n=t.length;s<n;++s)i.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return Fi(t,this.adaptOptions(e))}}function vi(r,t){if(!r)return null;let e;switch(r.type){case"Point":{e=xl(r);break}case"LineString":{e=ml(r);break}case"Polygon":{e=_l(r);break}case"MultiPoint":{e=yl(r);break}case"MultiLineString":{e=pl(r);break}case"MultiPolygon":{e=Cl(r);break}case"GeometryCollection":{e=fl(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return e}function gl(r,t){const e=vi(r);return Pi(e,t)}function fl(r,t){return r.geometries.map(function(i){return vi(i)})}function xl(r){const t=r.coordinates;return{type:"Point",flatCoordinates:t,layout:ie(t.length)}}function ml(r){var i;const t=r.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:ie(((i=t[0])==null?void 0:i.length)||2)}}function pl(r){var n,o;const t=r.coordinates,e=((o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length)||2,i=[],s=Di(i,0,t,e);return{type:"MultiLineString",flatCoordinates:i,ends:s,layout:ie(e)}}function yl(r){var e;const t=r.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:ie(((e=t[0])==null?void 0:e.length)||2)}}function Cl(r){var n,o;const t=r.coordinates,e=[],i=((o=(n=t[0])==null?void 0:n[0])==null?void 0:o[0].length)||2,s=Os(e,0,t,i);return{type:"MultiPolygon",flatCoordinates:e,ends:s,layout:ie(i)}}function _l(r){var n,o;const t=r.coordinates,e=[],i=(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length,s=Di(e,0,t,i);return{type:"Polygon",flatCoordinates:e,ends:s,layout:ie(i)}}function Fi(r,t){r=He(r,!0,t);const e=r.getType();let i;switch(e){case"Point":{i=Tl(r);break}case"LineString":{i=Sl(r);break}case"Polygon":{i=Il(r,t);break}case"MultiPoint":{i=Rl(r);break}case"MultiLineString":{i=wl(r);break}case"MultiPolygon":{i=Fl(r,t);break}case"GeometryCollection":{i=El(r,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return i}function El(r,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(i){return Fi(i,t)})}}function Sl(r,t){return{type:"LineString",coordinates:r.getCoordinates()}}function wl(r,t){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function Rl(r,t){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function Fl(r,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(e)}}function Tl(r,t){return{type:"Point",coordinates:r.getCoordinates()}}function Il(r,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(e)}}const Ti=65536*65536,Ss=1/Ti,Ll=12,ws=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),ui=0,Re=1,le=2,Fe=5;class bl{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,e,i=this.length){for(;this.pos<i;){const s=this.readVarint(),n=s>>3,o=this.pos;this.type=s&7,t(n,e,this),this.pos===o&&this.skip(s)}return e}readMessage(t,e){return this.readFields(t,e,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Ti;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Ti;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const e=this.buf;let i,s;return s=e[this.pos++],i=s&127,s<128||(s=e[this.pos++],i|=(s&127)<<7,s<128)||(s=e[this.pos++],i|=(s&127)<<14,s<128)||(s=e[this.pos++],i|=(s&127)<<21,s<128)?i:(s=e[this.pos],i|=(s&15)<<28,Dl(i,t,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2===1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=Ll&&ws?ws.decode(this.buf.subarray(e,t)):Wl(this.buf,e,t)}readBytes(){const t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e}readPackedVarint(t=[],e){const i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readVarint(e));return t}readPackedSVarint(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===le?this.readVarint()+this.pos:this.pos+1}skip(t){const e=t&7;if(e===ui)for(;this.buf[this.pos++]>127;);else if(e===le)this.pos=this.readVarint()+this.pos;else if(e===Fe)this.pos+=4;else if(e===Re)this.pos+=8;else throw new Error(`Unimplemented type: ${e}`)}writeTag(t,e){this.writeVarint(t<<3|e)}realloc(t){let e=this.length||16;for(;e<this.pos+t;)e*=2;if(e!==this.length){const i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=e}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Ss),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Ss),!0),this.pos+=8}writeVarint(t){if(t=+t||0,t>268435455||t<0){Bl(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))}writeSVarint(t){this.writeVarint(t<0?-t*2-1:t*2)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(t.length*4),this.pos++;const e=this.pos;this.pos=Kl(this.buf,t,this.pos);const i=this.pos-e;i>=128&&Rs(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const e=t.length;this.writeVarint(e),this.realloc(e);for(let i=0;i<e;i++)this.buf[this.pos++]=t[i]}writeRawMessage(t,e){this.pos++;const i=this.pos;t(e,this);const s=this.pos-i;s>=128&&Rs(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s}writeMessage(t,e,i){this.writeTag(t,le),this.writeRawMessage(e,i)}writePackedVarint(t,e){e.length&&this.writeMessage(t,Ol,e)}writePackedSVarint(t,e){e.length&&this.writeMessage(t,vl,e)}writePackedBoolean(t,e){e.length&&this.writeMessage(t,Ul,e)}writePackedFloat(t,e){e.length&&this.writeMessage(t,kl,e)}writePackedDouble(t,e){e.length&&this.writeMessage(t,Ml,e)}writePackedFixed32(t,e){e.length&&this.writeMessage(t,Nl,e)}writePackedSFixed32(t,e){e.length&&this.writeMessage(t,Yl,e)}writePackedFixed64(t,e){e.length&&this.writeMessage(t,Ql,e)}writePackedSFixed64(t,e){e.length&&this.writeMessage(t,Vl,e)}writeBytesField(t,e){this.writeTag(t,le),this.writeBytes(e)}writeFixed32Field(t,e){this.writeTag(t,Fe),this.writeFixed32(e)}writeSFixed32Field(t,e){this.writeTag(t,Fe),this.writeSFixed32(e)}writeFixed64Field(t,e){this.writeTag(t,Re),this.writeFixed64(e)}writeSFixed64Field(t,e){this.writeTag(t,Re),this.writeSFixed64(e)}writeVarintField(t,e){this.writeTag(t,ui),this.writeVarint(e)}writeSVarintField(t,e){this.writeTag(t,ui),this.writeSVarint(e)}writeStringField(t,e){this.writeTag(t,le),this.writeString(e)}writeFloatField(t,e){this.writeTag(t,Fe),this.writeFloat(e)}writeDoubleField(t,e){this.writeTag(t,Re),this.writeDouble(e)}writeBooleanField(t,e){this.writeVarintField(t,+e)}}function Dl(r,t,e){const i=e.buf;let s,n;if(n=i[e.pos++],s=(n&112)>>4,n<128||(n=i[e.pos++],s|=(n&127)<<3,n<128)||(n=i[e.pos++],s|=(n&127)<<10,n<128)||(n=i[e.pos++],s|=(n&127)<<17,n<128)||(n=i[e.pos++],s|=(n&127)<<24,n<128)||(n=i[e.pos++],s|=(n&1)<<31,n<128))return Vt(r,s,t);throw new Error("Expected varint not more than 10 bytes")}function Vt(r,t,e){return e?t*4294967296+(r>>>0):(t>>>0)*4294967296+(r>>>0)}function Bl(r,t){let e,i;if(r>=0?(e=r%4294967296|0,i=r/4294967296|0):(e=~(-r%4294967296),i=~(-r/4294967296),e^4294967295?e=e+1|0:(e=0,i=i+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),Gl(e,i,t),Pl(i,t)}function Gl(r,t,e){e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos]=r&127}function Pl(r,t){const e=(r&7)<<4;t.buf[t.pos++]|=e|((r>>>=3)?128:0),r&&(t.buf[t.pos++]=r&127|((r>>>=7)?128:0),r&&(t.buf[t.pos++]=r&127|((r>>>=7)?128:0),r&&(t.buf[t.pos++]=r&127|((r>>>=7)?128:0),r&&(t.buf[t.pos++]=r&127|((r>>>=7)?128:0),r&&(t.buf[t.pos++]=r&127)))))}function Rs(r,t,e){const i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));e.realloc(i);for(let s=e.pos-1;s>=r;s--)e.buf[s+i]=e.buf[s]}function Ol(r,t){for(let e=0;e<r.length;e++)t.writeVarint(r[e])}function vl(r,t){for(let e=0;e<r.length;e++)t.writeSVarint(r[e])}function kl(r,t){for(let e=0;e<r.length;e++)t.writeFloat(r[e])}function Ml(r,t){for(let e=0;e<r.length;e++)t.writeDouble(r[e])}function Ul(r,t){for(let e=0;e<r.length;e++)t.writeBoolean(r[e])}function Nl(r,t){for(let e=0;e<r.length;e++)t.writeFixed32(r[e])}function Yl(r,t){for(let e=0;e<r.length;e++)t.writeSFixed32(r[e])}function Ql(r,t){for(let e=0;e<r.length;e++)t.writeFixed64(r[e])}function Vl(r,t){for(let e=0;e<r.length;e++)t.writeSFixed64(r[e])}function Wl(r,t,e){let i="",s=t;for(;s<e;){const n=r[s];let o=null,a=n>239?4:n>223?3:n>191?2:1;if(s+a>e)break;let l,c,h;a===1?n<128&&(o=n):a===2?(l=r[s+1],(l&192)===128&&(o=(n&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=r[s+1],c=r[s+2],(l&192)===128&&(c&192)===128&&(o=(n&15)<<12|(l&63)<<6|c&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=r[s+1],c=r[s+2],h=r[s+3],(l&192)===128&&(c&192)===128&&(h&192)===128&&(o=(n&15)<<18|(l&63)<<12|(c&63)<<6|h&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,i+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),i+=String.fromCharCode(o),s+=a}return i}function Kl(r,t,e){for(let i=0,s,n;i<t.length;i++){if(s=t.charCodeAt(i),s>55295&&s<57344)if(n)if(s<56320){r[e++]=239,r[e++]=191,r[e++]=189,n=s;continue}else s=n-55296<<10|s-56320|65536,n=null;else{s>56319||i+1===t.length?(r[e++]=239,r[e++]=191,r[e++]=189):n=s;continue}else n&&(r[e++]=239,r[e++]=191,r[e++]=189,n=null);s<128?r[e++]=s:(s<2048?r[e++]=s>>6|192:(s<65536?r[e++]=s>>12|224:(r[e++]=s>>18|240,r[e++]=s>>12&63|128),r[e++]=s>>6&63|128),r[e++]=s&63|128)}return e}class Xl extends yn{constructor(t){super(),t=t||{},this.dataProjection=new Bo({code:"",units:"tile-pixels"}),this.featureClass=t.featureClass?t.featureClass:z,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,i,s){t.pos=e.geometry;const n=t.readVarint()+t.pos;let o=1,a=0,l=0,c=0,h=0,A=0;for(;t.pos<n;){if(!a){const d=t.readVarint();o=d&7,a=d>>3}if(a--,o===1||o===2)l+=t.readSVarint(),c+=t.readSVarint(),o===1&&h>A&&(s.push(h),A=h),i.push(l,c),h+=2;else if(o===7)h>A&&(i.push(i[A],i[A+1]),h+=2);else throw new Error("Invalid command found in the PBF")}h>A&&(s.push(h),A=h)}createFeature_(t,e,i){const s=e.type;if(s===0)return null;let n;const o=e.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=e.id,o[this.layerName_]=e.layer.name;const l=[],c=[];this.readRawGeometry_(t,e,l,c);const h=Hl(s,c.length);if(this.featureClass===z)n=new this.featureClass(h,l,c,2,o,a),n.transform(i.dataProjection);else{let A;if(h=="Polygon"){const g=ks(l,c);A=g.length>1?new ge(l,"XY",g):new De(l,"XY",c)}else A=h==="Point"?new Bt(l,"XY"):h==="LineString"?new Yt(l,"XY"):h==="MultiPoint"?new xe(l,"XY"):h==="MultiLineString"?new ue(l,"XY",c):null;const d=this.featureClass;n=new d,this.geometryName_&&n.setGeometryName(this.geometryName_);const u=He(A,!1,i);n.setGeometry(u),a!==void 0&&n.setId(a),n.setProperties(o,!0)}return n}getType(){return"arraybuffer"}readFeatures(t,e){const i=this.layers_;e=this.adaptOptions(e);const s=lt(e.dataProjection);s.setWorldExtent(e.extent),e.dataProjection=s;const n=new bl(t),o=n.readFields(jl,{}),a=[];for(const l in o){if(i&&!i.includes(l))continue;const c=o[l],h=c?[0,0,c.extent,c.extent]:null;s.setExtent(h);for(let A=0,d=c.length;A<d;++A){const u=Zl(n,c,A),g=this.createFeature_(n,u,e);g!==null&&a.push(g)}}return a}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function jl(r,t,e){if(r===3){const i={keys:[],values:[],features:[]},s=e.readVarint()+e.pos;e.readFields(Jl,i,s),i.length=i.features.length,i.length&&(t[i.name]=i)}}function Jl(r,t,e){if(r===15)t.version=e.readVarint();else if(r===1)t.name=e.readString();else if(r===5)t.extent=e.readVarint();else if(r===2)t.features.push(e.pos);else if(r===3)t.keys.push(e.readString());else if(r===4){let i=null;const s=e.readVarint()+e.pos;for(;e.pos<s;)r=e.readVarint()>>3,i=r===1?e.readString():r===2?e.readFloat():r===3?e.readDouble():r===4?e.readVarint64():r===5?e.readVarint():r===6?e.readSVarint():r===7?e.readBoolean():null;t.values.push(i)}}function zl(r,t,e){if(r==1)t.id=e.readVarint();else if(r==2){const i=e.readVarint()+e.pos;for(;e.pos<i;){const s=t.layer.keys[e.readVarint()],n=t.layer.values[e.readVarint()];t.properties[s]=n}}else r==3?t.type=e.readVarint():r==4&&(t.geometry=e.pos)}function Zl(r,t,e){r.pos=t.features[e];const i=r.readVarint()+r.pos,s={layer:t,type:0,properties:{}};return r.readFields(zl,s,i),s}function Hl(r,t){let e;return r===1?e=t===1?"Point":"MultiPoint":r===2?e=t===1?"LineString":"MultiLineString":r===3&&(e="Polygon"),e}let St;Ze.subscribe(r=>St=r);const ki={1:"#7885BB",2:"#84CD8C",3:"#F5A881",4:"#7AC0E7",5:"#B086E4",6:"#CE9168",7:"#A1A56E",8:"#EA73A3",9:"#D9C593",10:"#71B1E6",11:"#ABD7C4",12:"#91D5C0",13:"#A5CFE9",14:"#C4E29E",15:"#F2E374",16:"#CD7984",17:"#D2D087",18:"#BCA468",19:"#A8D6A5",20:"#FABF78",21:"#A4BDDE",22:"#F8C67E",23:"#66BCB9",24:"#E98D9D",25:"#66CBB3",26:"#FFD066",27:"#65AC91",28:"#F6A665",29:"#B4D992",30:"#D7BA66",31:"#7AB1E0",32:"#B79DCC",33:"#909FC4",34:"#6698C9"},ql={1:v.exit1,2:v.exit2,3:v.exit3,4:v.exit4,5:v.exit5,6:v.exit6,7:v.exit7,8:v.exit8,9:v.exit9,10:v.exit10,11:v.exit11,12:v.exit12,13:v.exit13,14:v.exit14,15:v.exit15,16:v.exit16,17:v.exit17,18:v.exit18,19:v.exit19,20:v.exit20,21:v.exit21,22:v.exit22,23:v.exit23,"2-1":v.exit2_1,"3-1":v.exit3_1,"4-1":v.exit4_1,"7-1":v.exit7_1,"8-1":v.exit8_1,"8-2":v.exit8_2,"9-1":v.exit9_1},Mi=new Oi,$l=new Pt({source:new Gt({format:Mi,url:No}),style:function(r){if(!St)return;const t=St.getView().getZoom();if(t&&t>=15){const e=ki[r.get("line_id")];return new K({stroke:new Mt({color:e,width:1.5})})}else return},zIndex:2,updateWhileAnimating:!0,updateWhileInteracting:!0}),_n=new Gt,En=new Gt;fetch(Yo).then(r=>r.json()).then(r=>{Mi.readFeatures(r).forEach(e=>{_n.addFeature(e);const i=e.get("center");if(i){const s=new gt({geometry:new Bt(i.coordinates),name:e.get("name"),color:ki[e.get("line_id")]});En.addFeature(s)}})}).catch(r=>console.error("Error loading GeoJSON data:",r));const th=new Pt({source:_n,style:function(r){if(!St)return;const t=St.getView().getZoom();if(t&&t>=15.8){const e=ki[r.get("line_id")];return new K({fill:new J({color:e})})}else return},zIndex:4,updateWhileAnimating:!0,updateWhileInteracting:!0}),eh=new Pt({source:En,style:function(r){if(!St)return;const t=St.getView().getZoom();if(!(!t||t<15))return t<15.8?new K({image:new Zs({radius:4,fill:new J({color:"white"}),stroke:new Mt({color:r.get("color"),width:1.5})}),text:new ot({font:'600 14px "Pretendard Variable"',textBaseline:"top",offsetY:8,fill:new J({color:"#25272A"}),stroke:new Mt({color:"white",width:3}),text:r.get("name")})}):new K({text:new ot({font:'600 14px "Pretendard Variable"',textBaseline:"top",offsetY:8,fill:new J({color:"#25272A"}),stroke:new Mt({color:"white",width:3}),text:r.get("name")})})},zIndex:6,updateWhileAnimating:!0,updateWhileInteracting:!0,declutter:!0}),gi={},ih=new Pt({source:new Gt({format:Mi,url:Qo}),style:function(r){if(!St)return;const t=St.getView().getZoom();if(t&&t>=16.2){const e=r.get("id");return gi[e]||(gi[e]=new K({image:new ee({src:ql[r.get("name")],scale:.75})})),gi[e]}else return},zIndex:5,updateWhileAnimating:!0,updateWhileInteracting:!0}),sh="data:image/svg+xml,%3csvg%20width='8'%20height='8'%20viewBox='0%200%208%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='4'%20cy='4'%20r='3.5'%20fill='white'%20stroke='%2325272A'%20/%3e%3ccircle%20cx='4'%20cy='4'%20r='1.5'%20fill='%2325272A'%20stroke='%2325272A'%20/%3e%3c/svg%3e",nh="data:image/svg+xml,%3csvg%20width='6'%20height='6'%20viewBox='0%200%206%206'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='3'%20cy='3'%20r='2.5'%20transform='matrix(1%200%200%20-1%200%206)'%20fill='white'%20stroke='%2325272A'%20/%3e%3c/svg%3e";let Ii;Ze.subscribe(r=>Ii=r);const It=new Mt({color:"white",width:1}),rh=new Gt({format:new Oi,url:r=>`${Gi}/wfs?service=WFS&version=2.0.0&request=GetFeature&typename=bluedot:base_administrative&srsName=EPSG%3A900913&outputFormat=application%2Fjson&exceptions=application%2Fjson&bbox=${r.join(",")},EPSG:900913`,strategy:ln}),oh=new cn({source:rh,distance:80,createCluster:(r,t)=>t.length<=1?t[0]:t.sort((i,s)=>i.get("labelrank")-s.get("labelrank"))[0]}),ah=new Pt({source:oh,style:function(r){if(!Ii)return;const t=Ii.getView().getZoom();if(!t||t<6)return;const e=r.get("labelrank"),i=r.get("alias")??r.get("name_ko");if(e===1)return t>=6&&t<7.5?new K({text:new ot({font:'700 14px "Pretendard Variable"',fill:new J({color:"#25272A"}),stroke:It,text:i}),zIndex:10}):void 0;if(e===2){const s=r.get("capital");return t>=6&&t<11?new K({text:new ot({font:`600 ${t<8?"12":"16"}px "Pretendard Variable"`,textAlign:"left",offsetX:7,fill:new J({color:"#25272A"}),stroke:It,text:i}),image:s?new ee({src:sh,width:8}):void 0,zIndex:9}):void 0}else if(e===3){const s=r.get("metropolitan");return t>=7.5&&t<11?new K({text:new ot({font:`600 ${t<8?"10":"14"}px "Pretendard Variable"`,textBaseline:"bottom",offsetY:-5,fill:new J({color:"#4B5362"}),stroke:It,text:i}),image:s?new ee({src:nh,width:6}):void 0,zIndex:8}):void 0}else return e===4?t>=8&&t<9?new K({text:new ot({font:'600 12px "Pretendard Variable"',fill:new J({color:"#778195"}),stroke:It,text:i}),zIndex:7}):void 0:e===5?t>=9&&t<14?new K({text:new ot({font:`600 ${t<11?"12":"14"}px "Pretendard Variable"`,fill:new J({color:"#8690A2"}),stroke:It,text:i}),zIndex:6}):void 0:e===6?t>=11&&t<14?new K({text:new ot({font:'600 14px "Pretendard Variable"',fill:new J({color:"#8690A2"}),stroke:It,text:i}),zIndex:5}):void 0:e===7?t>=14&&t<17.1?new K({text:new ot({font:`600 ${t<13?"10":"12"}px "Pretendard Variable"`,fill:new J({color:"#8690A2"}),stroke:It,text:i}),zIndex:4}):void 0:e===8&&t>=15&&t<17.1?new K({text:new ot({font:'600 10px "Pretendard Variable"',fill:new J({color:"#8690A2"}),stroke:It,text:i}),zIndex:3}):void 0},zIndex:3,renderBuffer:100}),Sn=new K({fill:new J({color:"#DAEEFF"}),stroke:new Mt({color:"#D1E9FC",width:1})}),lh=new Ga({source:new sa({format:new Xl,url:Vo}),minZoom:17,zIndex:1,renderMode:"vector",style:Sn}),hh=new Pt({source:new Gt({format:new Oi,url:r=>`${Gi}/wfs?service=WFS&version=2.0.0&request=GetFeature&typename=bluedot:base_building_big&srsName=EPSG%3A900913&outputFormat=application%2Fjson&exceptions=application%2Fjson&bbox=${r[0]}%2C${r[1]}%2C${r[2]}%2C${r[3]}%2CEPSG%3A900913`,strategy:ln}),minZoom:16,maxZoom:17,zIndex:1,updateWhileAnimating:!0,updateWhileInteracting:!0,style:Sn}),ch={SELECT:"select"};class Ah extends Ns{constructor(t,e,i,s){super(t),this.selected=e,this.deselected=i,this.mapBrowserEvent=s}}const Te={};class Ui extends Go{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:Po,this.addCondition_=t.addCondition?t.addCondition:cs,this.removeCondition_=t.removeCondition?t.removeCondition:cs,this.toggleCondition_=t.toggleCondition?t.toggleCondition:Oo,this.multi_=t.multi?t.multi:!1,this.filter_=t.filter?t.filter:_i,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=t.style!==void 0?t.style:dh(),this.features_=t.features||new Us;let e;if(t.layers)if(typeof t.layers=="function")e=t.layers;else{const i=t.layers;e=function(s){return i.includes(s)}}else e=_i;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[O(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[O(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(jt.ADD,this.boundAddFeature_),this.features_.addEventListener(jt.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(jt.ADD,this.boundAddFeature_),this.features_.removeEventListener(jt.REMOVE,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const i=this.getMap().getAllLayers().find(function(s){if(s instanceof Pt&&s.getSource()&&s.getSource().hasFeature(e))return s});i&&this.addFeatureLayerAssociation_(e,i)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=O(t);e in Te||(Te[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let s=e.length-1;s>=0;--s){const n=e[s];if(n!==this&&n instanceof Ui&&n.getStyle()&&n.getFeatures().getArray().lastIndexOf(t)!==-1){t.setStyle(n.getStyle());return}}const i=O(t);t.setStyle(Te[i]),delete Te[i]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[O(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),i=this.removeCondition_(t),s=this.toggleCondition_(t),n=!e&&!i&&!s,o=t.map,a=this.getFeatures(),l=[],c=[];if(n){vo(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,(h,A)=>{if(!(!(h instanceof gt)||!this.filter_(h,A)))return this.addFeatureLayerAssociation_(h,A),c.push(h),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let h=a.getLength()-1;h>=0;--h){const A=a.item(h),d=c.indexOf(A);d>-1?c.splice(d,1):(a.remove(A),l.push(A))}c.length!==0&&a.extend(c)}else{o.forEachFeatureAtPixel(t.pixel,(h,A)=>{if(!(!(h instanceof gt)||!this.filter_(h,A)))return(e||s)&&!a.getArray().includes(h)?(this.addFeatureLayerAssociation_(h,A),c.push(h)):(i||s)&&a.getArray().includes(h)&&(l.push(h),this.removeFeatureLayerAssociation_(h)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let h=l.length-1;h>=0;--h)a.remove(l[h]);a.extend(c)}return(c.length>0||l.length>0)&&this.dispatchEvent(new Ah(ch.SELECT,c,l,t)),!0}}function dh(){const r=ko();return ct(r.Polygon,r.LineString),ct(r.GeometryCollection,r.LineString),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}}const uh=`<svg width="50" height="58" viewBox="0 0 50 58" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <g filter="url(#filter0_d_1215_8322)">
    <path fill-rule="evenodd" clip-rule="evenodd"
      d="M43 24.0345C43 25.4836 42.8384 26.8948 42.5322 28.2511C39.9336 41.6768 27.2737 51.0001 24 51.0001C20.7263 51.0001 8.06645 41.6768 5.46782 28.2511C5.16163 26.8948 5 25.4836 5 24.0345C5 23.9377 5.00072 23.8411 5.00216 23.7447C5.00072 23.6356 5 23.5263 5 23.4167H5.00982C5.33529 13.1902 13.7129 5 24 5C34.2871 5 42.6647 13.1902 42.9902 23.4167H43C43 23.5263 42.9993 23.6356 42.9978 23.7447C42.9993 23.8411 43 23.9377 43 24.0345Z"
      fill="white" />
    <rect x="8.1665" y="8.17188" width="31.6667" height="31.7241" rx="15.8333"
      fill="#D9D9D9" />
    <rect x="8.1665" y="8.17188" width="31.6667" height="31.7241" rx="15.8333"
      fill="url(#pattern_img)" />
  </g>
  <defs>
    <filter id="filter0_d_1215_8322" x="0" y="0" width="50" height="58" filterUnits="userSpaceOnUse"
      color-interpolation-filters="sRGB">
      <feFlood flood-opacity="0" result="BackgroundImageFix" />
      <feColorMatrix in="SourceAlpha" type="matrix"
        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
      <feOffset dx="1" dy="1" />
      <feGaussianBlur stdDeviation="3" />
      <feComposite in2="hardAlpha" operator="out" />
      <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0" />
      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1215_8322" />
      <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1215_8322" result="shape" />
    </filter>
    <pattern id="pattern_img" width="1" height="1">
      <image width="31.6667" height="31.7241"
        xlink:href="dataURL"
        preserveAspectRatio="xMidYMid slice" />
    </pattern>
  </defs>
</svg>`,Dt=document.createElement("canvas");Dt.style.display="none";const G=Dt.getContext("2d"),gh="image/jpeg",wn="image/png",Ae=5,Li=1.5;async function fh(r,t){return new Promise(async(e,i)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=async function(){if(!G)return;const n=t*Li;Dt.width=n,Dt.height=n;const o=(n-Ae*2)/2;G.beginPath(),G.arc(n/2,n/2,o,0,2*Math.PI),G.shadowBlur=Ae,G.shadowColor="rgba(0, 0, 0, 0.5)",G.shadowOffsetX=1,G.shadowOffsetY=1,G.fill(),G.shadowBlur=0,G.shadowOffsetX=0,G.shadowOffsetY=0,G.clip(),G.drawImage(s,0,0,n,n),G.lineWidth=10,G.strokeStyle="white",G.stroke();const a=Dt.toDataURL(wn);G.clearRect(0,0,n,n),e(a)},s.src=r})}async function xh(r){const t=await ph(r),e=uh.replace("dataURL",t),i=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(i)}async function mh(r,t=204,e=224.4){return new Promise(async(i,s)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=async function(){if(!G)return;t*=Li,e*=Li,Dt.width=t,Dt.height=e;const o=t-Ae,a=e-Ae,l=o/200,c=a/220;G.beginPath(),G.moveTo(100*l,220*c),G.lineTo(32*l,154*c),G.bezierCurveTo(5*l,128*c,-5*l,76*c,29*l,36*c),G.bezierCurveTo(63*l,-5*c,137*l,-5*c,171*l,36*c),G.bezierCurveTo(205*l,76*c,195*l,128*c,168*l,154*c),G.closePath(),G.shadowBlur=Ae,G.shadowColor="rgba(0, 0, 0, 0.5)",G.shadowOffsetX=1,G.shadowOffsetY=1,G.fill(),G.shadowBlur=0,G.shadowOffsetX=0,G.shadowOffsetY=0,G.clip(),G.drawImage(n,0,0,o,a),G.lineWidth=10,G.strokeStyle="white",G.stroke();const h=Dt.toDataURL(wn);G.clearRect(0,0,t,e),i(h)},n.src=r})}function ph(r){return new Promise((t,e)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{const s=document.createElement("canvas"),n=s.getContext("2d");if(!n)return e("context not found");s.width=i.width,s.height=i.height,n.drawImage(i,0,0,i.width,i.height);const o=s.toDataURL(gh,.3);t(o)},i.onerror=e,i.src=r})}const Ke="data:image/svg+xml,%3csvg%20width='56'%20height='58'%20viewBox='0%200%2056%2058'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20%3e%3cpath%20d='M43.1568%2038.1549L27.6001%2052.7999L12.0434%2038.1549C8.96671%2035.2584%206.87153%2031.5681%206.02275%2027.5507C5.17397%2023.5332%205.60971%2019.369%207.27487%2015.5847C8.94003%2011.8004%2011.7598%208.5659%2015.3777%206.29023C18.9955%204.01456%2023.249%202.79993%2027.6001%202.79993C31.9512%202.79993%2036.2047%204.01456%2039.8225%206.29023C43.4404%208.5659%2046.2602%2011.8004%2047.9253%2015.5847C49.5905%2019.369%2050.0262%2023.5332%2049.1774%2027.5507C48.3287%2031.5681%2046.2335%2035.2584%2043.1568%2038.1549Z'%20fill='gray'%20shape-rendering='crispEdges'%20/%3e%3cpath%20d='M43.1568%2038.1549L27.6001%2052.7999L12.0434%2038.1549C8.96671%2035.2584%206.87153%2031.5681%206.02275%2027.5507C5.17397%2023.5332%205.60971%2019.369%207.27487%2015.5847C8.94003%2011.8004%2011.7598%208.5659%2015.3777%206.29023C18.9955%204.01456%2023.249%202.79993%2027.6001%202.79993C31.9512%202.79993%2036.2047%204.01456%2039.8225%206.29023C43.4404%208.5659%2046.2602%2011.8004%2047.9253%2015.5847C49.5905%2019.369%2050.0262%2023.5332%2049.1774%2027.5507C48.3287%2031.5681%2046.2335%2035.2584%2043.1568%2038.1549Z'%20stroke='white'%20stroke-width='3'%20shape-rendering='crispEdges'%20/%3e%3c/svg%3e",Rn="data:image/svg+xml,%3csvg%20width='50'%20height='58'%20viewBox='0%200%2050%2058'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg%20filter='url(%23filter0_d_1215_8322)'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M43%2024.0345C43%2025.4836%2042.8384%2026.8948%2042.5322%2028.2511C39.9336%2041.6768%2027.2737%2051.0001%2024%2051.0001C20.7263%2051.0001%208.06645%2041.6768%205.46782%2028.2511C5.16163%2026.8948%205%2025.4836%205%2024.0345C5%2023.9377%205.00072%2023.8411%205.00216%2023.7447C5.00072%2023.6356%205%2023.5263%205%2023.4167H5.00982C5.33529%2013.1902%2013.7129%205%2024%205C34.2871%205%2042.6647%2013.1902%2042.9902%2023.4167H43C43%2023.5263%2042.9993%2023.6356%2042.9978%2023.7447C42.9993%2023.8411%2043%2023.9377%2043%2024.0345Z'%20fill='white'%20/%3e%3crect%20x='8.1665'%20y='8.17188'%20width='31.6667'%20height='31.7241'%20rx='15.8333'%20fill='%23D9D9D9'%20/%3e%3crect%20x='8.1665'%20y='8.17188'%20width='31.6667'%20height='31.7241'%20rx='15.8333'%20fill='url(%23pattern_img)'%20/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d_1215_8322'%20x='0'%20y='0'%20width='50'%20height='58'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'%20/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'%20/%3e%3cfeOffset%20dx='1'%20dy='1'%20/%3e%3cfeGaussianBlur%20stdDeviation='3'%20/%3e%3cfeComposite%20in2='hardAlpha'%20operator='out'%20/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.1%200'%20/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow_1215_8322'%20/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow_1215_8322'%20result='shape'%20/%3e%3c/filter%3e%3cpattern%20id='pattern_img'%20width='1'%20height='1'%3e%3cimage%20width='31.6667'%20height='31.7241'%20xlink:href='dataURL'%20preserveAspectRatio='xMidYMid%20slice'%20/%3e%3c/pattern%3e%3c/defs%3e%3c/svg%3e";let at;Ze.subscribe(r=>{at=r,at&&(at.addInteraction(Yi),at.getView().on("change:resolution",()=>{if(!at)return;const t=at.getView().getZoom();if(!t)return;const e=80*(17/t);Fn.setDistance(e)}))});const ft=new Gt({attributions:[],wrapX:!1}),Fn=new cn({source:ft,distance:80,createCluster:(r,t)=>{const e=t.sort((i,s)=>Number(i.getId())-Number(s.getId()));return new gt({geometry:e[0].getGeometry(),features:e})}}),Ni=new Pt({source:Fn,zIndex:10,style:Tn,renderBuffer:100,updateWhileAnimating:!1,updateWhileInteracting:!0});ft.on("change",()=>{ft.getState()==="ready"&&Ni.changed()});const yh="iconSelector",Yi=new Ui({layers:[Ni],style:Tn});Yi.setProperties({name:yh});Yi.on("select",r=>{const t=r.mapBrowserEvent.coordinate,e=r.selected[0];let i=null,s=1/0;const n=e.get("features");n.forEach(o=>{var c;const a=(c=o.getGeometry())==null?void 0:c.getCoordinates();if(!a)return;const l=Ch(t,a);l<s&&(i=o,s=l)}),sn((i??n[0]).get("link"))});function Ch(r,t){const e=r[0]-t[0],i=r[1]-t[1];return Math.sqrt(e*e+i*i)}function Tn(r){const t=r.get("features"),e=[];let i;for(let s=0;s<t.length;s++){const n=t[s],o=Number(n.getId());if(Number.isNaN(o))continue;const a=n.getGeometry();if(a)if(s===0){if(i=_h(n),n.get("onlyMain")===!0)break}else e.push(new K({image:new Zs({radius:3,fill:new J({color:"#3490FF"})}),geometry:a}))}return i&&e.push(i),e}const Ie={};function _h(r){const t=`${r.get("type")}_${r.getId()}`,e=r.get("width"),i=r.get("height");let s;if(!Ie[t]){const n=r.get("image");n&&(s=wh({shape:r.get("shape"),image:n,width:e,height:i}));const o=r.get("src"),a=new K({image:o?new ee({src:o,width:e,height:i,displacement:[0,r.get("offsetY")]}):void 0,text:new ot({font:'400 12px/1.8 "Pretendard Variable"',textBaseline:"top",offsetY:-1.75862,fill:new J({color:"#25272A"}),stroke:new Mt({color:"white",width:1.5}),text:r.get("name")})});Ie[t]=a}return s==null||s.then(n=>{Ie[t].setImage(new ee({src:n,width:e,height:i,displacement:[0,r.get("offsetY")]})),ft.changed()}),Ie[t]}async function Eh(r){if(!at)return;const t=[],e=r.map(async i=>{if(i.idx&&ft.getFeatureById(i.idx))return;const s=i.shape==="waterdrop"?Ke:i.shape==="point"?Rn:"";t.push(In(i,s))});await Promise.allSettled(e),ft.addFeatures(t)}async function Sh(r){if(!at||r.idx&&ft.getFeatureById(r.idx))return;const t=r.shape==="waterdrop"?Ke:r.shape==="point"?Rn:"",e=In(r,t);ft.addFeature(e)}function In(r,t){const e=new gt({width:r.width,height:r.height,offsetY:r.height/2,name:r.name.replace(/(.{8})/g,`$1
`),link:r.link,rank:r.rank,src:t,type:r.type,shape:r.shape,image:r.image,onlyMain:r.onlyMain});if(r.coordinate)e.setGeometry(new Bt(r.coordinate));else if(at){const i=at.getView().calculateExtent(at.getSize()),s=Xe(i);e.setGeometry(new Bt(s))}return e.setId(r.idx),e}async function wh(r){let t;return r.shape==="circle"?t=await fh(r.image,r.width):r.shape==="waterdrop"?t=r.image===""?Ke:await mh(r.image,r.width,r.height):r.shape==="point"?t=await xh(r.image):t=Ke,t}const Fs=$s("Preferences",{web:()=>nn(()=>import("./web.DJlEQ6ar.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(r=>new r.PreferencesWeb)});function Rh(r){r.CapacitorUtils.Synapse=new Proxy({},{get(t,e){return new Proxy({},{get(i,s){return(n,o,a)=>{const l=r.Capacitor.Plugins[e];if(l===void 0){a(new Error(`Capacitor plugin ${e} not found`));return}if(typeof l[s]!="function"){a(new Error(`Method ${s} not found in Capacitor plugin ${e}`));return}(async()=>{try{const c=await l[s](n);o(c)}catch(c){a(c)}})()}}})}})}function Fh(r){r.CapacitorUtils.Synapse=new Proxy({},{get(t,e){return r.cordova.plugins[e]}})}function Th(r=!1){window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!r?Rh(window):window.cordova!==void 0&&Fh(window)}const Ts=$s("Geolocation",{web:()=>nn(()=>import("./web.DngZNwES.js"),__vite__mapDeps([6,1,2,3,4,5]),import.meta.url).then(r=>new r.GeolocationWeb)});Th();let fi={latitude:0,longitude:0,accuracy:0,altitudeAccuracy:void 0,altitude:null,speed:null,heading:null};class Ln{static async getCurrentOrLastLocation(){const t=Wo.isNativePlatform()?await this.checkAndRequestGeolocationPermission():{location:"granted"};if((t==null?void 0:t.location)==="granted")try{const e=await Ts.getCurrentPosition({maximumAge:2e3}),{latitude:i,longitude:s,accuracy:n,altitudeAccuracy:o,altitude:a,speed:l,heading:c}=e.coords;return fi={latitude:i,longitude:s,accuracy:n,altitudeAccuracy:o,altitude:a,speed:l,heading:c},this.saveLastKnownLocation(fi),fi}catch(e){return console.warn(e),this.getLastKnownLocation()}else return this.getLastKnownLocation()}static async checkAndRequestGeolocationPermission(){try{return await Ts.requestPermissions({permissions:["location"]})}catch{return null}}static saveLastKnownLocation(t){Fs.set({key:this.LAST_LOCATION_KEY,value:JSON.stringify(t)})}static async getLastKnownLocation(){const{value:t}=await Fs.get({key:this.LAST_LOCATION_KEY});return t?JSON.parse(t):null}}ts(Ln,"LAST_LOCATION_KEY","last_known_location");new Hs({source:new ra,zIndex:99});const Ih=new oa({url:`${Gi}/wms`,params:{LAYERS:"bluedot:v3_base",FORMAT:"image/png8",TRANSPARENT:!0,TILED:!0}}),Lh=new Hs({source:Ih,zIndex:0,preload:1/0}),pe=new Mo({projection:"EPSG:3857",center:Ue([126.97685,37.578019]),zoom:16,minZoom:2,maxZoom:22}),bn=document.createElement("img");bn.src=jo;const Dn=new qs({id:0,element:bn,positioning:"center-center",stopEvent:!1}),Bn=document.createElement("img");Bn.src=Jo;const bh=new qs({id:1,element:Bn,positioning:"bottom-center",stopEvent:!1,offset:[0,7]}),rt=new Uo({layers:[Lh,hh,lh,$l,ih,eh,th,ah,Ni],overlays:[Dn,bh],view:pe,controls:[]});Ze.set(rt);ht.on("setTo",Gn);function Gn(r){pe.setCenter(r)}ht.on("setToCurrentPosition",()=>Pn(Gn));async function Pn(r){const t=await Ln.getCurrentOrLastLocation();if(t){const e=Ue([t.longitude,t.latitude]);r(e),Dn.setPosition(e)}else console.log("No location available")}ht.on("flyTo",On);function On(r){pe.animate({center:r})}ht.on("flyToCurrentPosition",()=>Pn(On));ht.on("setZoom",Dh);function Dh(r){pe.setZoom(r)}ht.on("addIcon",Bh);function Bh(r){Sh(r)}ht.on("addIcons",Gh);function Gh(r){Eh(r)}function Ph(r){pe.animate(r)}async function Oh(r,t={},e,i){const s=e||new AbortController;let n;try{return await fetch(r.href,{...t,signal:s.signal})}catch(o){throw o.name==="AbortError"&&console.error("Request timed out"),o}}async function vh({tags:r,bbox:t,abortController:e,offset:i=0,limit:s=100}){const n=new URL(`${tn}/embeddings/explore`);n.searchParams.append("tags",r),n.searchParams.append("bbox",t),i&&n.searchParams.append("offset",String(i)),s&&n.searchParams.append("limit",String(s));try{return(await(await Oh(n,{headers:{"x-api-version":en.EMBEDDING}},e||void 0)).json()).data}catch(o){return o!=="new request"&&console.error(o),[]}}function kh(r,t=500,e=10){let i,s,n;const o=c=>{if("TouchEvent"in window&&c instanceof TouchEvent&&c.touches.length>=2)return clearTimeout(i);const{clientX:h,clientY:A}=c instanceof MouseEvent?c:c.touches[0];s=h,n=A,i=setTimeout(()=>{r.dispatchEvent(new CustomEvent("longpress",{detail:c}))},t)},a=c=>{if("TouchEvent"in window&&c instanceof TouchEvent&&c.touches.length>=2)return clearTimeout(i);const{clientX:h,clientY:A}=c instanceof MouseEvent?c:c.touches[0],d=Math.abs(h-s),u=Math.abs(A-n);(d>e||u>e)&&clearTimeout(i)},l=()=>{clearTimeout(i)};return r.addEventListener("mousedown",o),r.addEventListener("mousemove",a),r.addEventListener("mouseup",l),r.addEventListener("mouseleave",l),r.addEventListener("touchstart",o),r.addEventListener("touchmove",a),r.addEventListener("touchend",l),r.addEventListener("touchcancel",l),{destroy(){r.removeEventListener("mousedown",o),r.removeEventListener("mousemove",a),r.removeEventListener("mouseup",l),r.removeEventListener("mouseleave",l),r.removeEventListener("touchstart",o),r.removeEventListener("touchmove",a),r.removeEventListener("touchend",l),r.removeEventListener("touchcancel",l)}}}function Mh(r){if(!r||!r.includes("youtu"))return null;let t=null;return r.includes("watch?v=")?t=r.split("watch?v=")[1].split("&")[0]:r.includes("embed")?t=r.split("embed/")[1].split("?")[0]:r.includes("shorts")&&(t=r.split("shorts/")[1].split("?")[0]),t}function Uh(r,t="default"){return r.includes("youtu")?`https://img.youtube.com/vi/${Mh(r)}/${t}.jpg`:r}function xi(r,t){if(!r)return"";if(typeof r!="string"&&(r=r[0]||""),String(r).includes("youtu"))return Uh(r,"hqdefault");if(!String(r).includes("bluedot-media"))return r;const e=r.split("/").at(-1);return t?`${As}/resize?key=${e}&side=${t}`:`${As}/${e}`}async function Nh(r){try{const e=(await fetch(r,{method:"HEAD"})).headers.get("Content-Type");return e?e.startsWith("video/"):!1}catch(t){return console.error("Error checking file type:",t),!1}}function Yh(r){let t,e,i,s;const n=r[8].default,o=Hn(n,r,r[7],null);return{c(){t=qn("div"),o&&o.c(),this.h()},l(a){t=$n(a,"DIV",{id:!0,class:!0});var l=tr(t);o&&o.l(l),l.forEach(es),this.h()},h(){is(t,"id","map"),is(t,"class","absolute w-full h-full z-[1] bg-[#BDDBF3] transition-transform duration-500"),ss(t,"transform",`translateY(${r[1]}px)`)},m(a,l){er(a,t,l),o&&o.m(t,null),r[9](t),e=!0,i||(s=[ir(kh.call(null,t,500)),sr(t,"longpress",r[10])],i=!0)},p(a,[l]){o&&o.p&&(!e||l&128)&&nr(o,n,a,a[7],e?or(n,a[7],l,null):rr(a[7]),null),l&2&&ss(t,"transform",`translateY(${a[1]}px)`)},i(a){e||(gr(o,a),e=!0)},o(a){fr(o,a),e=!1},d(a){a&&es(t),o&&o.d(a),r[9](null),i=!1,ar(s)}}}function Is(r){r.preventDefault()}function Qh(r,t,e){let i;lr(r,Ko,m=>e(5,i=m));let{$$slots:s={},$$scope:n}=t,{onSelect:o=()=>{}}=t,{onMoveend:a=()=>{}}=t,{mapY:l=0}=t,{allowEdit:c=!0}=t,{whenCancelEdit:h=()=>{}}=t;ft.refresh(),ht.on("explorePlaces",u);let A="",d;async function u(){var m;if(!(rt.getView().getZoom()<16))try{d&&d.abort("new request");const _=(m=window.location.search.split("tags=")[1])==null?void 0:m.split("&")[0];if(!_)return;const w=decodeURIComponent(_);if(!w)return;A!==w&&(ft.refresh(),A=w),d=new AbortController;const R=await vh({tags:A,bbox:hi(rt.getView().calculateExtent(),"EPSG:3857","EPSG:4326").join(),abortController:d});ht.emit("addIcons",R.map(T=>({idx:T.idx,coordinate:Ue(T.location.replace("POINT(","").replace(")","").split(" ").map(Number)),image:xi(T.thumbnail,500)||"",shape:"point",type:"place",link:`/places/${T.idx}`,rank:3,name:T.name,width:38,height:46,onlyMain:!0})))}catch(_){(_==null?void 0:_.name)==="AbortError"?console.log(" explorePlaces  ."):console.error("explorePlaces   :",_)}}rt.on("moveend",g);function g(){var m,_;u(),Xo({location:((m=rt.getView().getCenter())==null?void 0:m.join(","))??"",zoom:((_=rt.getView().getZoom())==null?void 0:_.toFixed(2))??""}),a(hi(rt.getView().calculateExtent(),"EPSG:3857","EPSG:4326").join())}u();let f;hr(()=>{rt.setTarget(f),f.addEventListener("contextmenu",Is),i.url.searchParams.has("location")&&x(),i.url.searchParams.has("placeIdx")&&p(i.url.searchParams.get("placeIdx")),a(hi(rt.getView().calculateExtent(),"EPSG:3857","EPSG:4326").join())}),cr(()=>{rt.un("moveend",g),f.removeEventListener("contextmenu",Is)});function x(){const m=i.url.searchParams.get("location"),_=i.url.searchParams.get("zoom"),w=m==null?void 0:m.split(",").map(Number),R={};w&&(R.center=w),_&&(R.zoom=Number(_)),Object.values(R).length>0&&Ph(R)}ht.on("addIconByPlaceIdx",p);async function p(m){var T;const _=await fetch(`${tn}/places/${m}`,{headers:{"x-api-version":en.PLACE}}).then(F=>F.json()).then(F=>F.data.place).catch(F=>{console.error(F)});let w=((T=_.thumbnail)==null?void 0:T.at(0))||"";if(!String(w).includes("youtu")){const F=xi(w);await Nh(F)&&(w=w+"-thumbnail")}const R={idx:_.placeIdx,coordinate:Ue([_.longitude,_.latitude]),image:xi(w,500)||"",shape:"point",type:"place",link:`/places/${_.placeIdx}`,rank:5,name:_.name,width:38,height:46};ht.emit("addIcon",R)}function y(m){Ar[m?"unshift":"push"](()=>{f=m,e(4,f)})}const C=m=>{if(!c)return h();if(!i.url.pathname.startsWith("/map"))return;const _=rt.getEventCoordinate(m.detail);i.url.pathname!=="/map/edit"?sn(`/map/edit?location=${_.join()}`):o(_)};return r.$$set=m=>{"onSelect"in m&&e(0,o=m.onSelect),"onMoveend"in m&&e(6,a=m.onMoveend),"mapY"in m&&e(1,l=m.mapY),"allowEdit"in m&&e(2,c=m.allowEdit),"whenCancelEdit"in m&&e(3,h=m.whenCancelEdit),"$$scope"in m&&e(7,n=m.$$scope)},[o,l,c,h,f,i,a,n,s,y,C]}class tc extends dr{constructor(t){super(),ur(this,t,Qh,Yh,Zn,{onSelect:0,onMoveend:6,mapY:1,allowEdit:2,whenCancelEdit:3})}}export{tc as M,xi as s};
