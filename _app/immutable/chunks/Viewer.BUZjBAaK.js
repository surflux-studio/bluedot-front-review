import{s as Ae,e as k,m as ee,c as y,b as g,o as te,f as _,l as d,i as $,h as m,n as ve,H as me,k as qe,p as xe,I as Ne,q as Be,D as ge,a as H,t as we,g as R,d as be,x as Xe,J as N,K as F,L as ke,w as Q,M as Ze,j as ye,r as Ue,E as Ee}from"./scheduler.CuQsZbPO.js";import{S as He,i as Re,t as B,g as Te,f as Oe,b as se,c as Ie,a as Ve,m as je,d as ze}from"./index.Cqam3s4x.js";import{e as ie}from"./each.ymBi7bvQ.js";import{g as Ge}from"./entry.C3ZeWRV_.js";import{s as de,a as Je}from"./store.rX2ibtV1.js";import{g as Ke,s as Fe}from"./searchParams.9fzCcyvw.js";/* empty css                                             */import{C as Qe}from"./CircleImage.CLFwxlId.js";import{e as $e}from"./units.BdAKOLXt.js";import{p as et}from"./stores.CjvurGw_.js";function tt(t){let e,i,s,l,c,a,n,r,E,w;return{c(){e=k("div"),i=ee("svg"),s=ee("defs"),l=ee("clipPath"),c=ee("path"),n=ee("image"),r=ee("path"),this.h()},l(p){e=y(p,"DIV",{class:!0,style:!0});var b=g(e);i=te(b,"svg",{viewBox:!0,preserveAspectRatio:!0});var M=g(i);s=te(M,"defs",{});var D=g(s);l=te(D,"clipPath",{id:!0});var L=g(l);c=te(L,"path",{d:!0}),g(c).forEach(_),L.forEach(_),D.forEach(_),n=te(M,"image",{href:!0,width:!0,height:!0,preserveAspectRatio:!0,"clip-path":!0}),g(n).forEach(_),r=te(M,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),g(r).forEach(_),M.forEach(_),b.forEach(_),this.h()},h(){d(c,"d",a=ue(t[3])),d(l,"id","waterdrop-clip"),d(n,"href",t[1]),d(n,"width","100%"),d(n,"height","100%"),d(n,"preserveAspectRatio","xMidYMid slice"),d(n,"clip-path","url(#waterdrop-clip)"),d(r,"d",E=ue(t[3])),d(r,"fill","none"),d(r,"stroke",t[2]),d(r,"stroke-width",t[3]),d(i,"viewBox","0 0 204 224.4"),d(i,"preserveAspectRatio","xMinYMin slice"),d(e,"class","waterdrop-container svelte-1ubdx7w"),d(e,"style",w=`width: ${t[0]}`)},m(p,b){$(p,e,b),m(e,i),m(i,s),m(s,l),m(l,c),m(i,n),m(i,r)},p(p,[b]){b&8&&a!==(a=ue(p[3]))&&d(c,"d",a),b&2&&d(n,"href",p[1]),b&8&&E!==(E=ue(p[3]))&&d(r,"d",E),b&4&&d(r,"stroke",p[2]),b&8&&d(r,"stroke-width",p[3]),b&1&&w!==(w=`width: ${p[0]}`)&&d(e,"style",w)},i:ve,o:ve,d(p){p&&_(e)}}}function ue(t){const e=t/2;return`
      M100,${220-e}
      L${32+e},${154-e}
      C${5+e},${128-e} ${-5+e},76 ${29+e/2},${36+e}
      C${63+e/2},${-5+e} ${137-e/2},${-5+e} ${171-e/2},${36+e}
      C${205-e},76 ${195-e},${128-e} ${168-e},${154-e}
      Z
    `}function st(t,e,i){let{width:s="204px"}=e,{src:l="https://bluedot-media.s3.ap-northeast-2.amazonaws.com/79535d66-857a-4302-b1be-c97e74c26590"}=e,{strokeColor:c="black"}=e,{strokeWidth:a="10"}=e;return t.$$set=n=>{"width"in n&&i(0,s=n.width),"src"in n&&i(1,l=n.src),"strokeColor"in n&&i(2,c=n.strokeColor),"strokeWidth"in n&&i(3,a=n.strokeWidth)},[s,l,c,a]}class it extends He{constructor(e){super(),Re(this,e,st,tt,Ae,{width:0,src:1,strokeColor:2,strokeWidth:3})}}function Se(t,e,i){const s=t.slice();return s[31]=e[i],s[32]=e,s[33]=i,s}function Me(t,e,i){const s=t.slice();return s[34]=e[i],s[36]=i,s}function De(t,e,i){const s=t.slice();return s[34]=e[i],s}function Pe(t){let e,i,s,l,c,a,n,r,E,w,p,b,M,D=t[31].display_name+"",L,le,j,z,T,I,O=(t[31].place_name||"")+"",X,Z,re,q,C,Y="공유",U,G,P,ae,ne,x=ie(t[31].media),o=[];for(let h=0;h<x.length;h+=1)o[h]=Ce(De(t,x,h));let u=t[31].media.length>=2&&Ye(t);function v(){t[11].call(r,t[32],t[33])}p=new Qe({props:{src:t[31].profile_image_url,width:"2rem",strokeColor:"white",strokeWidth:"13"}});function W(){return t[12](t[31])}z=new it({props:{src:`https://picsum.photos/50/50/?r=${t[31].place_idx}`,width:"2rem",strokeColor:"white",strokeWidth:"13"}});function ce(){return t[13](t[31])}return{c(){e=k("div"),i=k("div"),s=k("div");for(let h=0;h<o.length;h+=1)o[h].c();c=H(),u&&u.c(),a=H(),n=k("div"),r=k("textarea"),E=H(),w=k("div"),Ie(p.$$.fragment),b=H(),M=k("div"),L=we(D),le=H(),j=k("div"),Ie(z.$$.fragment),T=H(),I=k("div"),X=we(O),re=H(),q=k("div"),C=k("button"),C.textContent=Y,U=H(),this.h()},l(h){e=y(h,"DIV",{class:!0});var f=g(e);i=y(f,"DIV",{class:!0});var S=g(i);s=y(S,"DIV",{class:!0});var oe=g(s);for(let he=0;he<o.length;he+=1)o[he].l(oe);oe.forEach(_),c=R(S),u&&u.l(S),S.forEach(_),a=R(f),n=y(f,"DIV",{class:!0});var A=g(n);r=y(A,"TEXTAREA",{class:!0,placeholder:!0}),g(r).forEach(_),E=R(A),w=y(A,"DIV",{class:!0});var J=g(w);Ve(p.$$.fragment,J),b=R(J),M=y(J,"DIV",{});var V=g(M);L=be(V,D),V.forEach(_),J.forEach(_),le=R(A),j=y(A,"DIV",{class:!0});var K=g(j);Ve(z.$$.fragment,K),T=R(K),I=y(K,"DIV",{});var _e=g(I);X=be(_e,O),_e.forEach(_),K.forEach(_),A.forEach(_),re=R(f),q=y(f,"DIV",{class:!0});var pe=g(q);C=y(pe,"BUTTON",{class:!0,"data-svelte-h":!0}),Xe(C)!=="svelte-172h23d"&&(C.textContent=Y),pe.forEach(_),U=R(f),f.forEach(_),this.h()},h(){var h,f;d(s,"class",l=N(`carousel-track transition-transform ${t[3]?"duration-0":""}`)+" svelte-jyziao"),F(s,"transform",`translateX(${-(((h=t[6])==null?void 0:h.width)??document.body.clientWidth)*t[31].mediaIdx+t[5]}px)`),d(i,"class","carousel-container svelte-jyziao"),d(r,"class","w-full h-auto overflow-scroll py-0 px-1 mb-3 outline-0 focus:outline-none focus:outline-0 focus:ring-0 border-none bg-transparent text-sm text-shadow placeholder:text-white/75 placeholder:text-base box-content  svelte-jyziao"),r.readOnly=t[7]!=="post"&&t[7]!=="patch",d(r,"placeholder",t[7]==="post"||t[7]==="patch"?"✎ 텍스트 입력하기":""),d(w,"class","text-shadow text-center flex gap-2 justify-center items-center svelte-jyziao"),d(j,"class","text-shadow text-center flex gap-2 justify-center items-center svelte-jyziao"),d(n,"class",Z=N(`fixed bottom-0 w-full px-4 text-white text-md flex flex-col items-start gap-2 z-[9999] ${t[1]?"":"pb-24"} transition-transform`)+" svelte-jyziao"),F(n,"transform",`translateY(${t[1]}px)`),d(C,"class","bg-yellow-300"),d(q,"class","absolute bottom-20 right-4 z-[9999]"),d(e,"class",G=N(`w-screen h-screen gradient-overlay absolute content-center transition-transform ${t[3]?"duration-0":""}`)+" svelte-jyziao"),F(e,"top",`${t[33]*100}%`),F(e,"transform",`translateY(${-(((f=t[6])==null?void 0:f.height)??document.body.clientHeight)*t[2]+t[4]}px)`)},m(h,f){$(h,e,f),m(e,i),m(i,s);for(let S=0;S<o.length;S+=1)o[S]&&o[S].m(s,null);m(i,c),u&&u.m(i,null),m(e,a),m(e,n),m(n,r),ke(r,t[31].text),m(n,E),m(n,w),je(p,w,null),m(w,b),m(w,M),m(M,L),m(n,le),m(n,j),je(z,j,null),m(j,T),m(j,I),m(I,X),m(e,re),m(e,q),m(q,C),m(e,U),P=!0,ae||(ne=[Q(s,"transitionend",t[8],{once:!0}),Q(r,"input",v),Q(r,"input",fe),Q(w,"click",W),Q(j,"click",ce),Q(C,"click",t[14]),Q(e,"transitionend",function(){Ze(t[33]===t[2]?t[8]:void 0)&&(t[33]===t[2]?t[8]:void 0).apply(this,arguments)})],ae=!0)},p(h,f){var A,J;if(t=h,f[0]&1){x=ie(t[31].media);let V;for(V=0;V<x.length;V+=1){const K=De(t,x,V);o[V]?o[V].p(K,f):(o[V]=Ce(K),o[V].c(),o[V].m(s,null))}for(;V<o.length;V+=1)o[V].d(1);o.length=x.length}(!P||f[0]&8&&l!==(l=N(`carousel-track transition-transform ${t[3]?"duration-0":""}`)+" svelte-jyziao"))&&d(s,"class",l),f[0]&97&&F(s,"transform",`translateX(${-(((A=t[6])==null?void 0:A.width)??document.body.clientWidth)*t[31].mediaIdx+t[5]}px)`),t[31].media.length>=2?u?u.p(t,f):(u=Ye(t),u.c(),u.m(i,null)):u&&(u.d(1),u=null),f[0]&1&&ke(r,t[31].text);const S={};f[0]&1&&(S.src=t[31].profile_image_url),p.$set(S),(!P||f[0]&1)&&D!==(D=t[31].display_name+"")&&ye(L,D);const oe={};f[0]&1&&(oe.src=`https://picsum.photos/50/50/?r=${t[31].place_idx}`),z.$set(oe),(!P||f[0]&1)&&O!==(O=(t[31].place_name||"")+"")&&ye(X,O),(!P||f[0]&2&&Z!==(Z=N(`fixed bottom-0 w-full px-4 text-white text-md flex flex-col items-start gap-2 z-[9999] ${t[1]?"":"pb-24"} transition-transform`)+" svelte-jyziao"))&&d(n,"class",Z),f[0]&2&&F(n,"transform",`translateY(${t[1]}px)`),(!P||f[0]&8&&G!==(G=N(`w-screen h-screen gradient-overlay absolute content-center transition-transform ${t[3]?"duration-0":""}`)+" svelte-jyziao"))&&d(e,"class",G),f[0]&84&&F(e,"transform",`translateY(${-(((J=t[6])==null?void 0:J.height)??document.body.clientHeight)*t[2]+t[4]}px)`)},i(h){P||(B(p.$$.fragment,h),B(z.$$.fragment,h),P=!0)},o(h){se(p.$$.fragment,h),se(z.$$.fragment,h),P=!1},d(h){h&&_(e),me(o,h),u&&u.d(),ze(p),ze(z),ae=!1,Ue(ne)}}}function Ce(t){let e,i,s,l,c;return{c(){e=k("div"),i=k("img"),c=H(),this.h()},l(a){e=y(a,"DIV",{class:!0});var n=g(e);i=y(n,"IMG",{src:!0,alt:!0,class:!0}),c=R(n),n.forEach(_),this.h()},h(){Ee(i.src,s=t[34])||d(i,"src",s),d(i,"alt",l=t[31].place_name),d(i,"class","w-screen h-screen object-contain"),d(e,"class","carousel-slide svelte-jyziao")},m(a,n){$(a,e,n),m(e,i),m(e,c)},p(a,n){n[0]&1&&!Ee(i.src,s=a[34])&&d(i,"src",s),n[0]&1&&l!==(l=a[31].place_name)&&d(i,"alt",l)},d(a){a&&_(e)}}}function Ye(t){let e,i=ie(t[31].media),s=[];for(let l=0;l<i.length;l+=1)s[l]=We(Me(t,i,l));return{c(){e=k("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=y(l,"DIV",{class:!0});var c=g(e);for(let a=0;a<s.length;a+=1)s[a].l(c);c.forEach(_),this.h()},h(){d(e,"class","carousel-nav svelte-jyziao")},m(l,c){$(l,e,c);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(l,c){if(c[0]&5){i=ie(l[31].media);let a;for(a=0;a<i.length;a+=1){const n=Me(l,i,a);s[a]?s[a].p(n,c):(s[a]=We(n),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=i.length}},d(l){l&&_(e),me(s,l)}}}function We(t){let e,i;return{c(){e=k("span"),this.h()},l(s){e=y(s,"SPAN",{class:!0}),g(e).forEach(_),this.h()},h(){d(e,"class",i=N(`carousel-dot ${t[0][t[2]].mediaIdx===t[36]?"active":""}`)+" svelte-jyziao")},m(s,l){$(s,e,l)},p(s,l){l[0]&5&&i!==(i=N(`carousel-dot ${s[0][s[2]].mediaIdx===s[36]?"active":""}`)+" svelte-jyziao")&&d(e,"class",i)},d(s){s&&_(e)}}}function Le(t){let e,i,s=t[2]-t[33]<=1&&t[33]-t[2]<=1&&Pe(t);return{c(){s&&s.c(),e=ge()},l(l){s&&s.l(l),e=ge()},m(l,c){s&&s.m(l,c),$(l,e,c),i=!0},p(l,c){l[2]-l[33]<=1&&l[33]-l[2]<=1?s?(s.p(l,c),c[0]&4&&B(s,1)):(s=Pe(l),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(Te(),se(s,1,1,()=>{s=null}),Oe())},i(l){i||(B(s),i=!0)},o(l){se(s),i=!1},d(l){l&&_(e),s&&s.d(l)}}}function lt(t){let e,i,s=ie(t[0]),l=[];for(let a=0;a<s.length;a+=1)l[a]=Le(Se(t,s,a));const c=a=>se(l[a],1,1,()=>{l[a]=null});return{c(){e=k("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=y(a,"DIV",{class:!0});var n=g(e);for(let r=0;r<l.length;r+=1)l[r].l(n);n.forEach(_),this.h()},h(){d(e,"class","bg-black w-screen h-screen")},m(a,n){$(a,e,n);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);i=!0},p(a,n){if(n[0]&511){s=ie(a[0]);let r;for(r=0;r<s.length;r+=1){const E=Se(a,s,r);l[r]?(l[r].p(E,n),B(l[r],1)):(l[r]=Le(E),l[r].c(),B(l[r],1),l[r].m(e,null))}for(Te(),r=s.length;r<l.length;r+=1)c(r);Oe()}},i(a){if(!i){for(let n=0;n<s.length;n+=1)B(l[n]);i=!0}},o(a){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)se(l[n]);i=!1},d(a){a&&_(e),me(l,a)}}}function fe(t){const e=t.target;e.style.height="16px";let i=e.scrollHeight;i>96&&(i=96),e.style.height=`${i}px`}function rt(t,e,i){let s;qe(t,et,o=>i(10,s=o));let l=s.url.searchParams.get("type"),{posts:c=[]}=e,{dontMoveVetically:a=!1}=e,{keyboardY:n=0}=e,r=0,E=!0,w=0;async function p(){Fe({pidx:`${r}`,midx:`${c[r].mediaIdx}`},{replaceState:!0,invalidateAll:!1})}function b(o,u){if(r===0&&o>0){T=u;return}const v=Y.height;i(4,w=o>v?v:o<-v?-v:o)}function M(o){document.querySelectorAll("textarea").forEach(W=>{fe({target:W})});let u=o.changedTouches[0].clientY-T;i(3,E=!1);const v=Y.height;u>v/2&&r!==0?(i(2,r-=1),p()):-u>v/2&&r!==c.length-1&&(i(2,r+=1),p(),c.length-2),i(4,w=0)}let D=0;function L(o){const u=Y.width;o=o>u?u:o<-u?-u:o,o=c[r].mediaIdx===0&&o>0||c[r].mediaIdx===c[r].media.length-1&&o<0?0:o,i(5,D=o)}function le(o){const u=Y.width;i(3,E=!1);let v=o.changedTouches[0].clientX-z;v>u/2&&c[r].mediaIdx!==0?i(0,c[r].mediaIdx-=1,c):-v>u/2&&c[r].mediaIdx!==c[r].media.length-1&&i(0,c[r].mediaIdx+=1,c),i(5,D=0)}let j=!1;$e.on("blockSwipeInViewer",o=>j=o);let z=-1,T=-1,I;function O(o){j||(I=void 0,de.set(!0),z=o.touches[0].clientX,T=o.touches[0].clientY)}function X(o){if(j)return;let v=o.touches[0].clientX-z;const W=o.touches[0].clientY;let ce=W-T;if(I===void 0&&Math.abs(ce)-Math.abs(v)>=0&&(I="post"),!a&&I==="post")b(ce,W);else{if(I===void 0){const h=c[r].mediaIdx===0&&v>0,f=c[r].mediaIdx===c[r].media.length-1&&v<0,S=z<20||z>Y.width-20;h||f||S?I="else":I="media"}if(I==="else")return de.set(!1);L(v)}}function Z(o){if(!j)return I==="post"?M(o):I==="media"?le(o):de.set(!1)}function re(){document.addEventListener("touchstart",O),document.addEventListener("touchmove",X),document.addEventListener("touchend",Z)}function q(){document.removeEventListener("touchstart",O),document.removeEventListener("touchmove",X),document.removeEventListener("touchend",Z)}function C(){i(3,E=!0),de.set(!1)}let Y;function U(){i(6,Y={width:document.body.clientWidth,height:document.body.clientHeight})}function G(){const o=s.url.searchParams.get("pidx"),u=s.url.searchParams.get("midx"),v=Number(o);o&&v!==r&&c[v]?i(2,r=v):i(2,r=0);const W=Number(u);u&&W!==c[r].mediaIdx&&c[r].media[W]?i(0,c[r].mediaIdx=W,c):i(0,c[r].mediaIdx=0,c),p()}xe(async()=>{U(),window.addEventListener("resize",U),re(),G(),await Ne(),document.querySelectorAll("textarea").forEach(o=>{fe({target:o})})}),Be(()=>{window.removeEventListener("resize",U),q()});function P(o,u){o[u].text=this.value,i(0,c)}const ae=o=>{o.user_idx&&Ke(`/users/${o.user_idx}`)},ne=o=>{o.place_idx&&Ge(`/places/${o.place_idx}`)},x=()=>{Je.set(!0)};return t.$$set=o=>{"posts"in o&&i(0,c=o.posts),"dontMoveVetically"in o&&i(9,a=o.dontMoveVetically),"keyboardY"in o&&i(1,n=o.keyboardY)},t.$$.update=()=>{t.$$.dirty[0]&1024&&s.url.searchParams.get("pidx")==0&&s.url.searchParams.get("midx")==0&&G()},[c,n,r,E,w,D,Y,l,C,a,s,P,ae,ne,x]}class pt extends He{constructor(e){super(),Re(this,e,rt,lt,Ae,{posts:0,dontMoveVetically:9,keyboardY:1},null,[-1,-1])}}export{pt as V};
