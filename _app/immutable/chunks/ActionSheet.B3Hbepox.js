import{X as Ae,R as dt,s as Ke,q as Ee,r as Me,b as L,f as y,v as C,i as be,h as T,n as he,m as Se,e as j,a as ge,c as K,g as Ce,M as v,J as ae,C as $,y as z,O as fe,H as ht,G as gt,u as Fe,o as Te,p as Oe,F as Ct,k as mt,w as _t,B as bt,W as Bt,Q as pt,I as Le,z as Dt}from"./scheduler.CbwPF6wx.js";import{n as Ht,l as wt,S as qe,i as Ne,t as O,g as Pe,a as q,d as Ye,k as Ie,c as vt,b as yt,m as kt,e as At}from"./index.DiLw73rm.js";import{f as We,c as Et}from"./index.98TglEsW.js";import{w as Mt}from"./entry.C6FKLZKF.js";import{r as ce}from"./units.BJZU6p1c.js";import{C as St}from"./sign.CGwCWKOZ.js";import{K as me}from"./ActionSheet.svelte_svelte_type_style_lang.Dc1rF6-g.js";function ze(e){return Object.prototype.toString.call(e)==="[object Date]"}function _e(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const s=t.map((i,r)=>_e(e[r],i));return i=>s.map(r=>r(i))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(ze(e)&&ze(t)){e=e.getTime(),t=t.getTime();const r=t-e;return l=>new Date(e+l*r)}const s=Object.keys(t),i={};return s.forEach(r=>{i[r]=_e(e[r],t[r])}),r=>{const l={};return s.forEach(h=>{l[h]=i[h](r)}),l}}if(n==="number"){const s=t-e;return i=>e+i*s}throw new Error(`Cannot interpolate ${n} values`)}function Ft(e,t={}){const n=Mt(e);let s,i=e;function r(l,h){if(e==null)return n.set(e=l),Promise.resolve();i=l;let B=s,b=!1,{delay:P=0,duration:p=400,easing:S=dt,interpolate:k=_e}=Ae(Ae({},t),h);if(p===0)return B&&(B.abort(),B=null),n.set(e=i),Promise.resolve();const a=Ht()+P;let A;return s=wt(E=>{if(E<a)return!0;b||(A=k(e,l),typeof p=="function"&&(p=p(e,l)),b=!0),B&&(B.abort(),B=null);const c=E-a;return c>p?(n.set(e=l),!1):(n.set(e=A(S(c/p))),!0)}),s.promise}return{set:r,update:(l,h)=>r(l(i,e),h),subscribe:n.subscribe}}function Tt(e){let t,n;return{c(){t=Ee("svg"),n=Ee("path"),this.h()},l(s){t=Me(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=L(t);n=Me(i,"path",{id:!0,d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0}),L(n).forEach(y),i.forEach(y),this.h()},h(){C(n,"id","Vector 27674"),C(n,"d","M2 2H33"),C(n,"stroke","#DADDE0"),C(n,"stroke-width","3"),C(n,"stroke-linecap","round"),C(t,"width","35"),C(t,"height","4"),C(t,"viewBox","0 0 35 4"),C(t,"fill","none"),C(t,"xmlns","http://www.w3.org/2000/svg")},m(s,i){be(s,t,i),T(t,n)},p:he,i:he,o:he,d(s){s&&y(t)}}}class Ot extends qe{constructor(t){super(),Ne(this,t,null,Tt,Ke,{})}}const Lt=e=>({}),Ve=e=>({});function Re(e){let t,n,s,i,r;return{c(){t=j("div"),this.h()},l(l){t=K(l,"DIV",{class:!0}),L(t).forEach(y),this.h()},h(){C(t,"class","fixed inset-0 bg-black/20 pointer-events-auto")},m(l,h){be(l,t,h),s=!0,i||(r=z(t,"click",e[29]),i=!0)},p(l,h){e=l},i(l){s||(l&&Bt(()=>{s&&(n||(n=Ie(t,We,{duration:200,easing:e[10]},!0)),n.run(1))}),s=!0)},o(l){l&&(n||(n=Ie(t,We,{duration:200,easing:e[10]},!1)),n.run(0)),s=!1},d(l){l&&y(t),l&&n&&n.end(),i=!1,r()}}}function je(e){let t,n;return t=new Ot({}),{c(){vt(t.$$.fragment)},l(s){yt(t.$$.fragment,s)},m(s,i){kt(t,s,i),n=!0},i(s){n||(O(t.$$.fragment,s),n=!0)},o(s){q(t.$$.fragment,s),n=!1},d(s){At(t,s)}}}function Pt(e){let t,n,s,i,r,l,h,B,b,P,p,S,k,a,A,E,c=e[0]&&Re(e),d=!e[3]&&je();const D=e[26].default,w=Se(D,e,e[25],null),Y=e[26].footer,H=Se(Y,e,e[25],Ve);return{c(){t=j("div"),c&&c.c(),n=ge(),s=j("div"),i=j("div"),r=j("div"),d&&d.c(),l=ge(),h=j("div"),w&&w.c(),P=ge(),p=j("div"),H&&H.c(),this.h()},l(g){t=K(g,"DIV",{class:!0});var u=L(t);c&&c.l(u),n=Ce(u),s=K(u,"DIV",{id:!0,class:!0,style:!0});var N=L(s);i=K(N,"DIV",{class:!0,style:!0});var V=L(i);r=K(V,"DIV",{class:!0});var G=L(r);d&&d.l(G),G.forEach(y),l=Ce(V),h=K(V,"DIV",{class:!0});var M=L(h);w&&w.l(M),M.forEach(y),V.forEach(y),N.forEach(y),P=Ce(u),p=K(u,"DIV",{class:!0,style:!0});var J=L(p);H&&H.l(J),J.forEach(y),u.forEach(y),this.h()},h(){C(r,"class","flex justify-center items-center h-[1.625rem]"),C(h,"class","content overflow-y-auto transition-transform duration-200 ios-scroll-fix svelte-1vussu5"),v(h,"h-full",e[6]),v(h,"touch-pan-y",!e[4]),C(i,"class",B=ae(`
        sheet absolute 
        min-h-full h-[120vh] w-full ${e[2]}
        rounded-t-[1.25rem]  
        flex flex-col 
        shadow-[0px_7px_16px_rgba(0,0,0,0.08)] backdrop-blur-[10px]
      `)+" svelte-1vussu5"),C(i,"style",b=`
        transform: translateY(${e[9]}px);
      `),C(s,"id","action-sheet--max"),C(s,"class","fixed left-0 right-0 overflow-visible"),$(s,"top",e[11]+"px"),$(s,"height",e[1]+"px"),v(s,"pointer-events-auto",e[0]),v(s,"pointer-events-none",!e[0]),C(p,"class",S="fixed w-full bottom-0 "+e[2]+" svelte-1vussu5"),$(p,"padding-bottom",e[8]+"px"),C(t,"class",k=ae(`fixed inset-0 ${e[5]?"z-50":"z-[60]"}`)+" svelte-1vussu5"),v(t,"pointer-events-none",!e[0]),v(t,"invisible",!e[0])},m(g,u){be(g,t,u),c&&c.m(t,null),T(t,n),T(t,s),T(s,i),T(i,r),d&&d.m(r,null),T(i,l),T(i,h),w&&w.m(h,null),e[30](h),T(t,P),T(t,p),H&&H.m(p,null),a=!0,A||(E=[z(i,"touchstart",function(){fe(!e[4]&&e[13])&&(!e[4]&&e[13]).apply(this,arguments)},!0),z(i,"touchmove",function(){fe(!e[4]&&e[14])&&(!e[4]&&e[14]).apply(this,arguments)},!0),z(i,"touchend",function(){fe(!e[4]&&e[15])&&(!e[4]&&e[15]).apply(this,arguments)},!0),z(i,"mousedown",function(){fe(!e[4]&&e[16])&&(!e[4]&&e[16]).apply(this,arguments)},!0),z(i,"click",ht(e[28])),z(s,"click",e[31]),z(s,"contextmenu",gt(e[27]))],A=!0)},p(g,u){e=g,e[0]?c?(c.p(e,u),u[0]&1&&O(c,1)):(c=Re(e),c.c(),O(c,1),c.m(t,n)):c&&(Pe(),q(c,1,1,()=>{c=null}),Ye()),e[3]?d&&(Pe(),q(d,1,1,()=>{d=null}),Ye()):d?u[0]&8&&O(d,1):(d=je(),d.c(),O(d,1),d.m(r,null)),w&&w.p&&(!a||u[0]&33554432)&&Fe(w,D,e,e[25],a?Oe(D,e[25],u,null):Te(e[25]),null),(!a||u[0]&64)&&v(h,"h-full",e[6]),(!a||u[0]&16)&&v(h,"touch-pan-y",!e[4]),(!a||u[0]&4&&B!==(B=ae(`
        sheet absolute 
        min-h-full h-[120vh] w-full ${e[2]}
        rounded-t-[1.25rem]  
        flex flex-col 
        shadow-[0px_7px_16px_rgba(0,0,0,0.08)] backdrop-blur-[10px]
      `)+" svelte-1vussu5"))&&C(i,"class",B),(!a||u[0]&512&&b!==(b=`
        transform: translateY(${e[9]}px);
      `))&&C(i,"style",b),(!a||u[0]&2)&&$(s,"height",e[1]+"px"),(!a||u[0]&1)&&v(s,"pointer-events-auto",e[0]),(!a||u[0]&1)&&v(s,"pointer-events-none",!e[0]),H&&H.p&&(!a||u[0]&33554432)&&Fe(H,Y,e,e[25],a?Oe(Y,e[25],u,Lt):Te(e[25]),Ve),(!a||u[0]&4&&S!==(S="fixed w-full bottom-0 "+e[2]+" svelte-1vussu5"))&&C(p,"class",S),(!a||u[0]&256)&&$(p,"padding-bottom",e[8]+"px"),(!a||u[0]&32&&k!==(k=ae(`fixed inset-0 ${e[5]?"z-50":"z-[60]"}`)+" svelte-1vussu5"))&&C(t,"class",k),(!a||u[0]&33)&&v(t,"pointer-events-none",!e[0]),(!a||u[0]&33)&&v(t,"invisible",!e[0])},i(g){a||(O(c),O(d),O(w,g),O(H,g),a=!0)},o(g){q(c),q(d),q(w,g),q(H,g),a=!1},d(g){g&&y(t),c&&c.d(),d&&d.d(),w&&w.d(g),e[30](null),H&&H.d(g),A=!1,Ct(E)}}}const ee=50;function Yt(e,t){var n;try{if(console.log("activeElement id:",e==null?void 0:e.id,t),e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){const s=((n=e==null?void 0:e.value)==null?void 0:n.length)??0;console.log("현재 값:",e.value,"길이:",s),[200].forEach(r=>{setTimeout(()=>{requestAnimationFrame(()=>{try{e.setSelectionRange(0,0),s>0?setTimeout(()=>{e.setSelectionRange(s,s),e.style.caretColor=t},0):e.style.caretColor=t}catch(l){console.log(`시도 실패 (${r}ms):`,l),e.style.caretColor=t}})},r)}),console.log("setCursorPosition - input 요소 시도 시작",s)}else if(e instanceof HTMLElement){e.style.caretColor=t;const s=document.createRange(),i=window.getSelection();s.selectNodeContents(e),s.collapse(!1),i==null||i.removeAllRanges(),i==null||i.addRange(s),console.log("setCursorPosition - contenteditable 요소")}else e.style.caretColor=t}catch(s){e.style.caretColor=t,console.log("커서 위치 설정 실패:",s)}}function It(e,t,n){let s,i,{$$slots:r={},$$scope:l}=t;const h=St.isNativePlatform(),B=Et;let{isOpen:b=!1}=t,{backdropBackground:P="bg-[#24242424]"}=t,{sheetBackground:p="bg-[#222]"}=t,{noHandle:S=!1}=t,{fixed:k=!1}=t,{onOpen:a=()=>{}}=t,{onClose:A=()=>{}}=t,{bottomNavigation:E=!1}=t,{slotFullHeight:c=!1}=t,d=null,{maxHeight:D=null}=t;const w=ce(2.75),Y=ce(1.625);let{useDefaultHeight:H=!1}=t,{defaultHeight:g=null}=t,{keyboardHeight:u=0}=t,N=0;const V=ce(3),G=ce(2.13);let M=!1,J=0,R=0,Be=0;const I=Ft(0,{duration:0,easing:B});mt(e,I,o=>n(9,i=o));let de=!1,m,Q,X,te,pe,U=!1,oe;function Ge(){me.addListener("keyboardWillShow",o=>{console.log("keyboardWillShow 이벤트 발생",o),n(17,u=o.keyboardHeight),Z("keyboardWillShow"),x("keyboardWillShow"),te=document.activeElement;let f=window.getComputedStyle(te).caretColor;f!=="transparent"&&f!=="rgba(0, 0, 0, 0)"&&(pe=f,te.style.caretColor="transparent",Yt(te,pe))}),me.addListener("keyboardWillHide",()=>{console.log("keyboardWillHide",0),n(17,u=0),Z("keyboardWillHide"),x("keyboardWillHide")})}function Je(){me.removeAllListeners()}function Z(o){o&&console.log("update window height",o),d=window.innerHeight;let f=w,_=E?G+V:G;u>0?n(1,D=d-f-u):n(1,D=d-f-_);const W=(m?m.scrollHeight:0)+Y;H===!1&&(n(18,g=Math.min(W,D)),ue=!1)}function Qe(){document.body.style.overflow="hidden",Z(),ve(),pt(I,i=D,i),re("openSheet"),a()}function Xe(){document.body.style.overflow="auto",I.set(d,{duration:100,easing:B}).finally(()=>{A()})}function De(o,f){if(k)return;M=!0,J=o,Be=i,de=!1;let _=f;for(;_&&_!==document.body;){if(_.classList.contains("touch-pan-y")||_.classList.contains("overflow-y-auto")||_.classList.contains("overflow-y-scroll")){const{scrollHeight:F,clientHeight:W}=_;if(F>W){de=!0,ne=_;break}}_=_.parentElement}}let ne=null,se=!1,ie=!1;function Ue(){m&&(m.addEventListener("scroll",o=>{const f=o.target;if(f&&f!==m){const{scrollTop:_,scrollHeight:F,clientHeight:W}=f;_<0?se=!0:_+W>F?ie=!0:(se=!1,ie=!1)}},{passive:!0,capture:!0}),m.addEventListener("touchend",()=>{setTimeout(()=>{se=!1,ie=!1,ne=null},50)},{passive:!0}))}function He(o,f){if(M){if(R=o-J,de&&ne){const{scrollTop:_,scrollHeight:F,clientHeight:W}=ne;if(F>W){const ft=_<=0,ct=Math.abs(_+W-F)<1;if(!((ft||se)&&R>0)){if(!((ct||ie)&&R<0)){M=!1;return}}}}Math.abs(R)>ee&&f.stopPropagation(),ve()}}function we(){M&&(M=!1,Ze())}function ve(){let o=Be+R;o=Math.min(o,d);const f=D-d;o<f&&(o=f),I.set(o,{duration:0,easing:B});const _=D-o;if(m){const F=_-Y;n(7,m.style.maxHeight=`${F}px`,m)}}function Ze(){const o=R;R=0,g===D?xe(o):$e(i,o)}let ue=!1;function x(o){ue?le(o):re(o)}function le(o){N=D,ue=!0,I.set(0,{duration:200,easing:B});const f=D-Y;m?n(7,m.style.maxHeight=`${f}px`,m):console.error("contentEl is null"),o&&console.log("setToMaxHeight - done",o)}function re(o){N=g,ue=!1,I.set(D-g,{duration:200,easing:B});const f=g-Y;m?n(7,m.style.maxHeight=`${f}px`,m):console.error("contentEl is null"),o&&console.log("setToDefaultHeight - done",o)}function xe(o){o>ee?(console.log("충분히 아래로 드래그: 시트 닫기"),n(0,b=!1)):(console.log("충분한 드래그 없음: 기본 위치로 복귀"),le())}function $e(o,f){try{if(f===0)return;if(o<ee&&f!==0){console.log("케이스 1: 현재 위치가 거의 최대 높이 - 최대 높이로 확장"),le();return}if(f>ee){D===N?(console.log("케이스 2-1: 아래로 드래그 + 최대 높이 상태 - 기본 높이로 축소"),re()):(console.log("케이스 2-2: 아래로 드래그 + 기본 높이 상태 - 시트 닫기"),I.set(D,{duration:200,easing:B}),n(0,b=!1));return}if(f<-ee){console.log("케이스 3: 위로 드래그 - 최대 높이로 확장"),le();return}console.log("케이스 4: 제자리로 복귀"),x()}catch(_){console.error("handleMultiHeightMode 오류:",_),re()}}function et(o){De(o.touches[0].clientY,o.target)}function tt(o){He(o.touches[0].clientY,o)}function ot(){we()}function nt(o){o.button===0&&(De(o.clientY,o.target),window.addEventListener("mousemove",ye),window.addEventListener("mouseup",ke))}function ye(o){He(o.clientY,o)}function ke(){window.removeEventListener("mousemove",ye),window.removeEventListener("mouseup",ke),we()}_t(()=>{n(24,oe=window),h&&Ge(),Ue(),m&&Q===void 0&&(Q=new ResizeObserver(()=>{M||(Z(),x("resizeObserver"))}),Q.observe(m)),m&&X===void 0&&(X=new MutationObserver(o=>{M||(Z(),x("contentMutationObserver"))}),X.observe(m,{childList:!0,subtree:!0}))}),bt(()=>{console.log("컴포넌트 언마운트: 키보드 리스너 제거 중..."),h&&Je(),Q&&Q.disconnect(),X&&X.disconnect()});function st(o){Le.call(this,e,o)}function it(o){Le.call(this,e,o)}const ut=()=>n(0,b=!1);function lt(o){Dt[o?"unshift":"push"](()=>{m=o,n(7,m)})}const rt=()=>n(0,b=!1);return e.$$set=o=>{"isOpen"in o&&n(0,b=o.isOpen),"backdropBackground"in o&&n(19,P=o.backdropBackground),"sheetBackground"in o&&n(2,p=o.sheetBackground),"noHandle"in o&&n(3,S=o.noHandle),"fixed"in o&&n(4,k=o.fixed),"onOpen"in o&&n(20,a=o.onOpen),"onClose"in o&&n(21,A=o.onClose),"bottomNavigation"in o&&n(5,E=o.bottomNavigation),"slotFullHeight"in o&&n(6,c=o.slotFullHeight),"maxHeight"in o&&n(1,D=o.maxHeight),"useDefaultHeight"in o&&n(22,H=o.useDefaultHeight),"defaultHeight"in o&&n(18,g=o.defaultHeight),"keyboardHeight"in o&&n(17,u=o.keyboardHeight),"$$scope"in o&&n(25,l=o.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&25165825&&(U!==b&&b===!0&&oe!==void 0?(n(23,U=b),Qe()):U!==b&&b===!1&&oe!==void 0&&(n(23,U=b),Xe())),e.$$.dirty[0]&131104&&n(8,s=u>0?u:G+(E?V:0))},[b,D,p,S,k,E,c,m,s,i,B,w,I,et,tt,ot,nt,u,g,P,a,A,H,U,oe,l,r,st,it,ut,lt,rt]}class Nt extends qe{constructor(t){super(),Ne(this,t,It,Pt,Ke,{isOpen:0,backdropBackground:19,sheetBackground:2,noHandle:3,fixed:4,onOpen:20,onClose:21,bottomNavigation:5,slotFullHeight:6,maxHeight:1,useDefaultHeight:22,defaultHeight:18,keyboardHeight:17},null,[-1,-1,-1])}}export{Nt as A};
