import{P as G,Q as nt,s as ot,p as N,i as U,f as Y,k as rt,v as it,w as at,A as lt,e as S,a as ut,c as L,b as M,g as ft,l as T,L as Q,h as q,u as k,E as ct,F as dt,G as ht,r as mt}from"./scheduler.BRtuPHcG.js";import{n as gt,l as pt,S as _t,i as wt,t as A,g as yt,b as j,f as bt}from"./index.B4yC_IY0.js";import{c as y}from"./Modal.BPntAkJQ.js";import{w as vt}from"./entry.BiFNfNKk.js";function W(t){return Object.prototype.toString.call(t)==="[object Date]"}function I(t,o){if(t===o||t!==t)return()=>t;const n=typeof t;if(n!==typeof o||Array.isArray(t)!==Array.isArray(o))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const s=o.map((r,i)=>I(t[i],r));return r=>s.map(i=>i(r))}if(n==="object"){if(!t||!o)throw new Error("Object cannot be null");if(W(t)&&W(o)){t=t.getTime(),o=o.getTime();const i=o-t;return l=>new Date(t+l*i)}const s=Object.keys(o),r={};return s.forEach(i=>{r[i]=I(t[i],o[i])}),i=>{const l={};return s.forEach(u=>{l[u]=r[u](i)}),l}}if(n==="number"){const s=o-t;return r=>t+r*s}throw new Error(`Cannot interpolate ${n} values`)}function Et(t,o={}){const n=vt(t);let s,r=t;function i(l,u){if(t==null)return n.set(t=l),Promise.resolve();r=l;let c=s,_=!1,{delay:f=0,duration:a=400,easing:d=nt,interpolate:h=I}=G(G({},o),u);if(a===0)return c&&(c.abort(),c=null),n.set(t=r),Promise.resolve();const m=gt()+f;let g;return s=pt(v=>{if(v<m)return!0;_||(g=h(t,l),typeof a=="function"&&(a=a(t,l)),_=!0),c&&(c.abort(),c=null);const w=v-m;return w>a?(n.set(t=l),!1):(n.set(t=g(d(w/a))),!0)}),s.promise}return{set:i,update:(l,u)=>i(l(r,t),u),subscribe:n.subscribe}}function J(t){let o,n,s,r,i,l,u,c;const _=t[13].default,f=lt(_,t,t[12],null);return{c(){o=S("div"),n=S("div"),s=S("div"),r=ut(),i=S("div"),f&&f.c(),this.h()},l(a){o=L(a,"DIV",{class:!0});var d=M(o);n=L(d,"DIV",{class:!0,style:!0});var h=M(n);s=L(h,"DIV",{class:!0}),M(s).forEach(Y),r=ft(h),i=L(h,"DIV",{class:!0});var m=M(i);f&&f.l(m),m.forEach(Y),h.forEach(Y),d.forEach(Y),this.h()},h(){T(s,"class","handle svelte-1eqktq1"),T(i,"class","content svelte-1eqktq1"),T(n,"class","sheet svelte-1eqktq1"),Q(n,"transform","translateY("+t[1]+"px)"),T(o,"class","backdrop svelte-1eqktq1")},m(a,d){U(a,o,d),q(o,n),q(n,s),q(n,r),q(n,i),f&&f.m(i,null),l=!0,u||(c=[k(n,"touchstart",t[3],!0),k(n,"touchmove",t[4],!0),k(n,"touchend",t[5],{passive:!0,capture:!0}),k(n,"mousedown",t[6],!0),k(o,"click",t[7]),k(o,"touchstart",t[8])],u=!0)},p(a,d){f&&f.p&&(!l||d&4096)&&ct(f,_,a,a[12],l?ht(_,a[12],d,null):dt(a[12]),null),(!l||d&2)&&Q(n,"transform","translateY("+a[1]+"px)")},i(a){l||(A(f,a),l=!0)},o(a){j(f,a),l=!1},d(a){a&&Y(o),f&&f.d(a),u=!1,mt(c)}}}function kt(t){let o,n,s=t[0]&&J(t);return{c(){s&&s.c(),o=N()},l(r){s&&s.l(r),o=N()},m(r,i){s&&s.m(r,i),U(r,o,i),n=!0},p(r,[i]){r[0]?s?(s.p(r,i),i&1&&A(s,1)):(s=J(r),s.c(),A(s,1),s.m(o.parentNode,o)):s&&(yt(),j(s,1,1,()=>{s=null}),bt())},i(r){n||(A(s),n=!0)},o(r){j(s),n=!1},d(r){r&&Y(o),s&&s.d(r)}}}let K=10;function R(t){return Yt(t)}function Yt(t){for(;t&&t!==document.body&&!(t.classList&&t.classList.contains("content"));){const n=window.getComputedStyle(t).overflowY;if((n==="auto"||n==="scroll")&&t.scrollHeight>t.clientHeight)return!0;t=t.parentElement}return!1}function Ht(t,o,n){let s,{$$slots:r={},$$scope:i}=o,{isOpen:l=!1}=o,{maxHeight:u=null}=o,{defaultHeight:c=null}=o,{onClose:_=()=>{n(0,l=!1)}}=o,f=0,a=0,d=0,h=!1,m=0,g=0,v=0,w=!1;const p=Et(0,{duration:300,easing:y});rt(t,p,e=>n(1,s=e));function C(){g=window.innerHeight,u===null&&n(9,u=g*.97),c===null&&n(10,c=g/2),l&&O()}it(()=>{C(),E(),window.addEventListener("resize",C),l&&O()}),at(()=>{window.removeEventListener("resize",C)});function O(){m=c,p.set(g),p.set(g-m,{duration:300,easing:y})}function E(){p.set(g,{duration:300,easing:y}).then(()=>{_()})}function X(e){R(e.target)||(h=!0,w=!1,f=e.touches[0].clientY,v=s)}function Z(e){h&&(a=e.touches[0].clientY,d=a-f,Math.abs(d)>K&&(w=!0,e.preventDefault(),e.stopPropagation()),B())}function x(){h&&(h=!1,F())}function $(e){e.button===0&&(R(e.target)||(h=!0,w=!1,f=e.clientY,v=s,window.addEventListener("mousemove",V),window.addEventListener("mouseup",z)))}function V(e){h&&(a=e.clientY,d=a-f,Math.abs(d)>K&&(w=!0,e.preventDefault(),e.stopPropagation()),B())}function z(e){h&&(h=!1,window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",z),F())}function B(){let e=v+d;const b=g-u;if(e<b){const P=b-e;e=b-P/3}e=Math.min(e,g),p.set(e)}function F(){const e=d;d=0;const b=50,P=s,H=g-u,D=g-c;if(c===u)e>b?E():p.set(D,{duration:200,easing:y});else if(P<H+b)m=u,p.set(H,{duration:200,easing:y});else if(e>b)m===u?(m=c,p.set(D,{duration:200,easing:y})):E();else if(e<-b)m=u,p.set(H,{duration:200,easing:y});else{const st=(D+H)/2;P<st?(m=u,p.set(H,{duration:200,easing:y})):(m=c,p.set(D,{duration:200,easing:y}))}setTimeout(()=>{w=!1},200)}function tt(e){!w&&e.target===e.currentTarget&&E()}function et(e){e.target===e.currentTarget&&E()}return t.$$set=e=>{"isOpen"in e&&n(0,l=e.isOpen),"maxHeight"in e&&n(9,u=e.maxHeight),"defaultHeight"in e&&n(10,c=e.defaultHeight),"onClose"in e&&n(11,_=e.onClose),"$$scope"in e&&n(12,i=e.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&(l?O():E())},[l,s,p,X,Z,x,$,tt,et,u,c,_,i,r]}class Mt extends _t{constructor(o){super(),wt(this,o,Ht,kt,ot,{isOpen:0,maxHeight:9,defaultHeight:10,onClose:11})}}export{Mt as A};
