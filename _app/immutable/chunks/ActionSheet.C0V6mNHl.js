import{R,S as it,s as at,D as W,i as Z,f as Y,k as lt,p as ut,q as ft,y as ct,e as S,a as dt,c as q,b as C,g as ht,l as M,K as F,h as T,w as k,P as G,A as pt,B as gt,C as mt,r as _t}from"./scheduler.CuQsZbPO.js";import{n as wt,l as bt,S as yt,i as kt,t as A,g as vt,b as I,f as Et}from"./index.Cqam3s4x.js";import{c as b}from"./ActionSheet.svelte_svelte_type_style_lang.DGwovzh0.js";import{w as Yt}from"./entry.IqVVwzvC.js";function J(t){return Object.prototype.toString.call(t)==="[object Date]"}function V(t,o){if(t===o||t!==t)return()=>t;const n=typeof t;if(n!==typeof o||Array.isArray(t)!==Array.isArray(o))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const s=o.map((r,i)=>V(t[i],r));return r=>s.map(i=>i(r))}if(n==="object"){if(!t||!o)throw new Error("Object cannot be null");if(J(t)&&J(o)){t=t.getTime(),o=o.getTime();const i=o-t;return l=>new Date(t+l*i)}const s=Object.keys(o),r={};return s.forEach(i=>{r[i]=V(t[i],o[i])}),i=>{const l={};return s.forEach(u=>{l[u]=r[u](i)}),l}}if(n==="number"){const s=o-t;return r=>t+r*s}throw new Error(`Cannot interpolate ${n} values`)}function Dt(t,o={}){const n=Yt(t);let s,r=t;function i(l,u){if(t==null)return n.set(t=l),Promise.resolve();r=l;let c=s,_=!1,{delay:f=0,duration:a=400,easing:d=it,interpolate:h=V}=R(R({},o),u);if(a===0)return c&&(c.abort(),c=null),n.set(t=r),Promise.resolve();const p=wt()+f;let g;return s=bt(v=>{if(v<p)return!0;_||(g=h(t,l),typeof a=="function"&&(a=a(t,l)),_=!0),c&&(c.abort(),c=null);const w=v-p;return w>a?(n.set(t=l),!1):(n.set(t=g(d(w/a))),!0)}),s.promise}return{set:i,update:(l,u)=>i(l(r,t),u),subscribe:n.subscribe}}function Q(t){let o,n,s,r,i,l,u,c;const _=t[14].default,f=ct(_,t,t[13],null);return{c(){o=S("div"),n=S("div"),s=S("div"),r=dt(),i=S("div"),f&&f.c(),this.h()},l(a){o=q(a,"DIV",{class:!0});var d=C(o);n=q(d,"DIV",{class:!0,style:!0});var h=C(n);s=q(h,"DIV",{class:!0}),C(s).forEach(Y),r=ht(h),i=q(h,"DIV",{class:!0});var p=C(i);f&&f.l(p),p.forEach(Y),h.forEach(Y),d.forEach(Y),this.h()},h(){M(s,"class","handle svelte-1eqktq1"),M(i,"class","content svelte-1eqktq1"),M(n,"class","sheet svelte-1eqktq1"),F(n,"transform","translateY("+t[1]+"px)"),M(o,"class","backdrop svelte-1eqktq1")},m(a,d){Z(a,o,d),T(o,n),T(n,s),T(n,r),T(n,i),f&&f.m(i,null),l=!0,u||(c=[k(n,"touchstart",t[3],!0),k(n,"touchmove",t[4],!0),k(n,"touchend",t[5],{passive:!0,capture:!0}),k(n,"mousedown",t[6],!0),k(n,"transitionend",t[9]),k(o,"click",G(t[7])),k(o,"touchstart",G(t[8]))],u=!0)},p(a,d){f&&f.p&&(!l||d&8192)&&pt(f,_,a,a[13],l?mt(_,a[13],d,null):gt(a[13]),null),(!l||d&2)&&F(n,"transform","translateY("+a[1]+"px)")},i(a){l||(A(f,a),l=!0)},o(a){I(f,a),l=!1},d(a){a&&Y(o),f&&f.d(a),u=!1,_t(c)}}}function Ht(t){let o,n,s=t[0]&&Q(t);return{c(){s&&s.c(),o=W()},l(r){s&&s.l(r),o=W()},m(r,i){s&&s.m(r,i),Z(r,o,i),n=!0},p(r,[i]){r[0]?s?(s.p(r,i),i&1&&A(s,1)):(s=Q(r),s.c(),A(s,1),s.m(o.parentNode,o)):s&&(vt(),I(s,1,1,()=>{s=null}),Et())},i(r){n||(A(s),n=!0)},o(r){I(s),n=!1},d(r){r&&Y(o),s&&s.d(r)}}}let U=10;function X(t){return Pt(t)}function Pt(t){for(;t&&t!==document.body&&!(t.classList&&t.classList.contains("content"));){const n=window.getComputedStyle(t).overflowY;if((n==="auto"||n==="scroll")&&t.scrollHeight>t.clientHeight)return!0;t=t.parentElement}return!1}function St(t,o,n){let s,{$$slots:r={},$$scope:i}=o,{isOpen:l=!1}=o,{maxHeight:u=null}=o,{defaultHeight:c=null}=o,{onClose:_=()=>{n(0,l=!1)}}=o,f=0,a=0,d=0,h=!1,p=0,g=0,v=0,w=!1,L=!1;const m=Dt(0,{duration:300,easing:b});lt(t,m,e=>n(1,s=e));function O(){g=window.innerHeight,u===null&&n(10,u=g*.97),c===null&&n(11,c=g/2),l&&j()}ut(()=>{console.log("mount sheet"),O(),E(),window.addEventListener("resize",O),l&&j()}),ft(()=>{console.log("unmount sheet"),window.removeEventListener("resize",O)});function j(){L=!0,p=c,m.set(g),m.set(g-p,{duration:300,easing:b})}function E(){m.set(g,{duration:300,easing:b}).then(()=>{_()})}function x(e){X(e.target)||(h=!0,w=!1,f=e.touches[0].clientY,v=s)}function $(e){h&&(a=e.touches[0].clientY,d=a-f,Math.abs(d)>U&&(w=!0,e.preventDefault(),e.stopPropagation()),K())}function tt(){h&&(h=!1,N())}function et(e){e.button===0&&(X(e.target)||(h=!0,w=!1,f=e.clientY,v=s,window.addEventListener("mousemove",B),window.addEventListener("mouseup",z)))}function B(e){h&&(a=e.clientY,d=a-f,Math.abs(d)>U&&(w=!0,e.preventDefault(),e.stopPropagation()),K())}function z(e){h&&(h=!1,window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",z),N())}function K(){let e=v+d;const y=g-u;if(e<y){const H=y-e;e=y-H/3}e=Math.min(e,g),m.set(e)}function N(){const e=d;d=0;const y=50,H=s,D=g-u,P=g-c;if(c===u)e>y?E():m.set(P,{duration:200,easing:b});else if(H<D+y)p=u,m.set(D,{duration:200,easing:b});else if(e>y)p===u?(p=c,m.set(P,{duration:200,easing:b})):E();else if(e<-y)p=u,m.set(D,{duration:200,easing:b});else{const rt=(P+D)/2;H<rt?(p=u,m.set(D,{duration:200,easing:b})):(p=c,m.set(P,{duration:200,easing:b}))}setTimeout(()=>{w=!1},200)}function nt(e){console.log("click backdrop"),!L&&!w&&e.target===e.currentTarget&&E()}function st(e){console.log("touch backdrop"),e.target===e.currentTarget&&E()}function ot(){L=!1}return t.$$set=e=>{"isOpen"in e&&n(0,l=e.isOpen),"maxHeight"in e&&n(10,u=e.maxHeight),"defaultHeight"in e&&n(11,c=e.defaultHeight),"onClose"in e&&n(12,_=e.onClose),"$$scope"in e&&n(13,i=e.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&(l?j():E())},[l,s,m,x,$,tt,et,nt,st,ot,u,c,_,i,r]}class At extends yt{constructor(o){super(),kt(this,o,St,Ht,at,{isOpen:0,maxHeight:10,defaultHeight:11,onClose:12})}}export{At as A};
