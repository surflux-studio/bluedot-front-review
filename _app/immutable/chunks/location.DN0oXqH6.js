const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./web.DDov1osk.js","./index.Dq4Y7YpW.js","./web.CorHL6yQ.js"])))=>i.map(i=>d[i]);
var h=Object.defineProperty;var m=(e,t,o)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var n=(e,t,o)=>m(e,typeof t!="symbol"?t+"":t,o);import{r,C as P}from"./index.Dq4Y7YpW.js";import{_ as c}from"./preload-helper.D6kgxu3v.js";const i=r("Preferences",{web:()=>c(()=>import("./web.DDov1osk.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>new e.PreferencesWeb)}),s=r("Geolocation",{web:()=>c(()=>import("./web.CorHL6yQ.js"),__vite__mapDeps([2,1]),import.meta.url).then(e=>new e.GeolocationWeb)});let a={latitude:0,longitude:0,accuracy:0,altitudeAccuracy:void 0,altitude:null,speed:null,heading:null};class y{static async getCurrentOrLastLocation(){const t=P.isNativePlatform()?await this.checkAndRequestGeolocationPermission():{location:"granted"};if((t==null?void 0:t.location)==="granted")try{const o=await s.getCurrentPosition(),{latitude:l,longitude:u,accuracy:d,altitudeAccuracy:L,altitude:_,speed:g,heading:w}=o.coords;return a={latitude:l,longitude:u,accuracy:d,altitudeAccuracy:L,altitude:_,speed:g,heading:w},this.saveLastKnownLocation(a),a}catch(o){return console.warn(o),this.getLastKnownLocation()}else return this.getLastKnownLocation()}static async checkAndRequestGeolocationPermission(){try{return await s.requestPermissions({permissions:["location"]})}catch{return null}}static saveLastKnownLocation(t){i.set({key:this.LAST_LOCATION_KEY,value:JSON.stringify(t)})}static async getLastKnownLocation(){const{value:t}=await i.get({key:this.LAST_LOCATION_KEY});return t?JSON.parse(t):null}}n(y,"LAST_LOCATION_KEY","last_known_location");export{y as L};
