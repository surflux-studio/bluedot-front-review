import{R as K,S as ft,s as dt,v as Q,i as et,f as D,k as ht,E as gt,G as mt,w as pt,e as L,a as wt,c as T,b as M,g as _t,m as H,H as O,I as U,h as A,q as Y,x as bt,N as X,z as kt,A as yt,B as vt,u as Et}from"./scheduler.C_RmZE3P.js";import{n as Yt,l as Ht,S as Dt,i as Pt,t as I,g as St,b as N,f as Bt}from"./index.pf-sDz8f.js";import{w as Ct}from"./entry.ByILCBPu.js";/* empty css                                                  */function k(t){const n=t-1;return n*n*n+1}function Z(t){return Object.prototype.toString.call(t)==="[object Date]"}function G(t,n){if(t===n||t!==t)return()=>t;const e=typeof t;if(e!==typeof n||Array.isArray(t)!==Array.isArray(n))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const s=n.map((r,i)=>G(t[i],r));return r=>s.map(i=>i(r))}if(e==="object"){if(!t||!n)throw new Error("Object cannot be null");if(Z(t)&&Z(n)){t=t.getTime(),n=n.getTime();const i=n-t;return c=>new Date(t+c*i)}const s=Object.keys(n),r={};return s.forEach(i=>{r[i]=G(t[i],n[i])}),i=>{const c={};return s.forEach(g=>{c[g]=r[g](i)}),c}}if(e==="number"){const s=n-t;return r=>t+r*s}throw new Error(`Cannot interpolate ${e} values`)}function Lt(t,n={}){const e=Ct(t);let s,r=t;function i(c,g){if(t==null)return e.set(t=c),Promise.resolve();r=c;let a=s,d=!1,{delay:m=0,duration:p=400,easing:f=ft,interpolate:l=G}=K(K({},n),g);if(p===0)return a&&(a.abort(),a=null),e.set(t=r),Promise.resolve();const u=Yt()+m;let h;return s=Ht(w=>{if(w<u)return!0;d||(h=l(t,c),typeof p=="function"&&(p=p(t,c)),d=!0),a&&(a.abort(),a=null);const _=w-u;return _>p?(e.set(t=c),!1):(e.set(t=h(f(_/p))),!0)}),s.promise}return{set:i,update:(c,g)=>i(c(r,t),g),subscribe:e.subscribe}}function Tt(t){function n(e){const s=e.target;s&&!t.contains(s)&&t.dispatchEvent(new CustomEvent("outsideclick"))}return window.addEventListener("click",n),{destroy(){window.removeEventListener("click",n)}}}function x(t){let n,e,s,r,i,c,g,a,d,m;const p=t[19].default,f=pt(p,t,t[18],null);return{c(){n=L("div"),e=L("div"),s=L("div"),r=wt(),i=L("div"),f&&f.c(),this.h()},l(l){n=T(l,"DIV",{class:!0});var u=M(n);e=T(u,"DIV",{class:!0,style:!0});var h=M(e);s=T(h,"DIV",{class:!0}),M(s).forEach(D),r=_t(h),i=T(h,"DIV",{class:!0});var w=M(i);f&&f.l(w),w.forEach(D),h.forEach(D),u.forEach(D),this.h()},h(){H(s,"class","handle svelte-ism897"),H(i,"class","content svelte-ism897"),H(e,"class",c=O(`sheet absolute bottom-0 w-full ${t[2]} 
      rounded-t-xl touch-pan-y will-change-transform 
      flex flex-col min-h-full h-full shadow-top`)+" svelte-ism897"),U(e,"transform","translateY("+t[5]+"px)"),H(n,"class",g=O(`backdrop fixed top-0 left-0 right-0 bottom-0 ${t[1]} z-40 overflow-hidden touch-none`)+" svelte-ism897")},m(l,u){et(l,n,u),A(n,e),A(e,s),A(e,r),A(e,i),f&&f.m(i,null),a=!0,d||(m=[Y(e,"touchstart",t[8],!0),Y(e,"touchmove",t[9],!0),Y(e,"touchend",t[10],{passive:!0,capture:!0}),Y(e,"mousedown",t[11],!0),bt(Tt.call(null,e)),Y(e,"outsideclick",t[20]),Y(e,"transitionend",t[14]),Y(n,"click",X(t[12])),Y(n,"touchstart",X(t[13]))],d=!0)},p(l,u){f&&f.p&&(!a||u[0]&262144)&&kt(f,p,l,l[18],a?vt(p,l[18],u,null):yt(l[18]),null),(!a||u[0]&4&&c!==(c=O(`sheet absolute bottom-0 w-full ${l[2]} 
      rounded-t-xl touch-pan-y will-change-transform 
      flex flex-col min-h-full h-full shadow-top`)+" svelte-ism897"))&&H(e,"class",c),(!a||u[0]&32)&&U(e,"transform","translateY("+l[5]+"px)"),(!a||u[0]&2&&g!==(g=O(`backdrop fixed top-0 left-0 right-0 bottom-0 ${l[1]} z-40 overflow-hidden touch-none`)+" svelte-ism897"))&&H(n,"class",g)},i(l){a||(I(f,l),a=!0)},o(l){N(f,l),a=!1},d(l){l&&D(n),f&&f.d(l),d=!1,Et(m)}}}function Mt(t){let n,e,s=t[0]&&x(t);return{c(){s&&s.c(),n=Q()},l(r){s&&s.l(r),n=Q()},m(r,i){s&&s.m(r,i),et(r,n,i),e=!0},p(r,i){r[0]?s?(s.p(r,i),i[0]&1&&I(s,1)):(s=x(r),s.c(),I(s,1),s.m(n.parentNode,n)):s&&(St(),N(s,1,1,()=>{s=null}),Bt())},i(r){e||(I(s),e=!0)},o(r){N(s),e=!1},d(r){r&&D(n),s&&s.d(r)}}}let $=10;function tt(t){return Ot(t)}function Ot(t){for(;t&&t!==document.body&&!(t.classList&&t.classList.contains("content"));){const e=window.getComputedStyle(t).overflowY;if((e==="auto"||e==="scroll")&&t.scrollHeight>t.clientHeight)return!0;t=t.parentElement}return!1}function At(t,n,e){let s,{$$slots:r={},$$scope:i}=n,{backdropBackground:c="bg-[#24242424]"}=n,{sheetBackground:g="bg-[#242424]"}=n,{isOpen:a=!1}=n,{maxHeight:d=null}=n,{defaultHeight:m=null}=n,{onClose:p=()=>{e(0,a=!1)}}=n,f=0,l=0,u=0,h=!1,w=0,_=0,j=0,y=!1,S=!0,z=!1;const b=Lt(0,{duration:300,easing:k});ht(t,b,o=>e(5,s=o));function V(){_=window.innerHeight,d===null&&e(15,d=_*.97),m===null&&e(16,m=_/2),a&&q()}gt(()=>{console.log("mount sheet"),V(),v(),window.addEventListener("resize",V),a&&q()}),mt(()=>{console.log("unmount sheet"),window.removeEventListener("resize",V)});function q(){z=!0,w=m,b.set(_),b.set(_-w,{duration:300,easing:k})}function v(){b.set(_,{duration:300,easing:k}).then(()=>{p()})}function ot(o){tt(o.target)||(h=!0,e(3,y=!1),f=o.touches[0].clientY,j=s)}function nt(o){h&&(l=o.touches[0].clientY,u=l-f,Math.abs(u)>$&&(e(3,y=!0),o.preventDefault(),o.stopPropagation()),F())}function st(){h&&(h=!1,J())}function rt(o){o.button===0&&(tt(o.target)||(h=!0,e(3,y=!1),f=o.clientY,j=s,window.addEventListener("mousemove",R),window.addEventListener("mouseup",W)))}function R(o){h&&(l=o.clientY,u=l-f,Math.abs(u)>$&&(e(3,y=!0),o.preventDefault(),o.stopPropagation()),F())}function W(o){h&&(h=!1,window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",W),J())}function F(){let o=j+u;const E=_-d;if(o<E){const B=E-o;o=E-B/3}o=Math.min(o,_),b.set(o)}function J(){const o=u;u=0;const E=10,B=s,P=_-d,C=_-m;if(m===d)o>E?v():b.set(C,{duration:200,easing:k});else if(B<P+E)w=d,b.set(P,{duration:200,easing:k});else if(o>E)w===d?(w=m,b.set(C,{duration:200,easing:k})):v();else if(o<-E)w=d,b.set(P,{duration:200,easing:k});else{const ct=(C+P)/2;B<ct?(w=d,b.set(P,{duration:200,easing:k})):(w=m,b.set(C,{duration:200,easing:k}))}setTimeout(()=>{e(3,y=!1)},200)}function it(o){console.log("click backdrop"),!z&&!y&&o.target===o.currentTarget&&v()}function lt(o){console.log("touch backdrop"),o.target===o.currentTarget&&v()}function at(){z=!1}const ut=o=>{o.preventDefault(),o.stopPropagation(),!y&&!S&&v()};return t.$$set=o=>{"backdropBackground"in o&&e(1,c=o.backdropBackground),"sheetBackground"in o&&e(2,g=o.sheetBackground),"isOpen"in o&&e(0,a=o.isOpen),"maxHeight"in o&&e(15,d=o.maxHeight),"defaultHeight"in o&&e(16,m=o.defaultHeight),"onClose"in o&&e(17,p=o.onClose),"$$scope"in o&&e(18,i=o.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1&&a&&(e(4,S=!0),setTimeout(()=>{e(4,S=!1)},50)),t.$$.dirty[0]&1&&(a?q():v())},[a,c,g,y,S,s,b,v,ot,nt,st,rt,it,lt,at,d,m,p,i,r,ut]}class qt extends Dt{constructor(n){super(),Pt(this,n,At,Mt,dt,{backdropBackground:1,sheetBackground:2,isOpen:0,maxHeight:15,defaultHeight:16,onClose:17},null,[-1,-1])}}export{qt as A,k as a,Tt as c};
