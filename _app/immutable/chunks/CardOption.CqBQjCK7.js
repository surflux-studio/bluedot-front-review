import{s as J,a as V,F as ee,g as R,i as O,f as p,U as Ve,y as Re,z as Se,l as te,e as w,c as E,b as L,o as v,M as T,h as k,G as Pe,u as re,q as ne,r as ae,t as q,d as Z,j as G,A as W,C as se,V as le,p as be,B as Xe,L as De,E as Ae,I as Be,O as H}from"./scheduler.I7jjIWdo.js";import{S as K,i as Q,t as b,g as B,a as M,f as N,e as ie,c as P,b as z,m as X,d as A}from"./index.DN2oNe6D.js";import{d as ye}from"./store.DqdLFdOX.js";import{I as Ne}from"./InputDim.DuTEwCbb.js";import{a as Ue}from"./sign.CuZeacrB.js";import{e as oe}from"./each.Du8WEvJj.js";import{e as ze}from"./emitter.E5P-NQ8u.js";function qe(n,e={}){let t,a,s=!1,r=0,l=!1,i=!1,f=!1;const o=e.threshold||50,c=e.beforeThreshold||30;function u(g){t=g.clientX,a=g.clientY,s=!1,l=!0,i=!1,f=!1,n.style.cursor="pointer"}function h(g){var D,C;if(l){if(!s){const I=g.clientX-t,y=g.clientY-a;(Math.abs(I)>5||Math.abs(y)>5)&&(s=!0,n.style.cursor="grabbing",n.style.transition="none",(D=e.onDragStart)==null||D.call(e,g))}if(s){const I=g.clientX-t,y=g.clientY-a;r=I,m(g,r),d(I,y),(C=e.onDragMove)==null||C.call(e,I,y)}}}function m(g,D){var C,I,y;D<-c&&!i?((C=e.onDragBeforeLeft)==null||C.call(e,g),i=!0):D>c&&!f?((I=e.onDragBeforeRight)==null||I.call(e,g),f=!0):D>-c&&D<c&&((i||f)&&((y=e.onDragCenter)==null||y.call(e,g)),i=!1,f=!1)}function d(g,D){const I=1*Math.min(Math.max(r/3,-30),10),y=Math.min(Math.max(-D/8,-20),10),j=1*Math.min(Math.max(r/15,-15),15),U="",S=g;n.style.transform=`
      ${U}
      translate(${S}px, ${D}px)
      rotateX(${y}deg)
      rotateY(${I}deg)
      rotateZ(${j}deg)
    `}function _(g){l&&(s&&Y(g),l=!1)}function Y(g){var C,I,y;s=!1,n.style.cursor="pointer",n.style.transition="transform 0.6s";const D=g.clientY-a;Math.abs(r)>Math.abs(D)?r<-o?((C=e.onDragLeft)==null||C.call(e,g),F(-1)):r>o?((I=e.onDragRight)==null||I.call(e,g),F(1)):n.style.transform="":n.style.transform="",(y=e.onDragEnd)==null||y.call(e,g)}function F(g){const D=window.innerWidth,C=g*(D*3),I=Math.random()*200-100,y=1,j=1,U=C;n.style.transition="transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out",n.style.transform=`
      
      translate(${U}px, ${I}px)
      rotateX(${g*15}deg)
      rotateY(${y*g*60}deg)
      rotateZ(${j*g*30}deg)
    `,n.style.opacity="0",setTimeout(()=>{var S;(S=e.onDrop)==null||S.call(e)},500)}return n.addEventListener("pointerdown",u),document.addEventListener("pointermove",h),document.addEventListener("pointerup",_),n.style.cursor="pointer",n.style.touchAction="none",n.style.transition="transform 0.6s",n.style.perspective="500px",n.style.transformStyle="preserve-3d",{destroy(){n.removeEventListener("pointerdown",u),document.removeEventListener("pointermove",h),document.removeEventListener("pointerup",_)}}}const Ze=n=>({}),fe=n=>({}),Ge=n=>({}),ce=n=>({});function ue(n){let e,t,a,s,r,l,i,f,o;const c=n[21].front,u=te(c,n,n[20],ce),h=n[21].back,m=te(h,n,n[20],fe);return{c(){e=w("div"),t=w("div"),a=w("div"),u&&u.c(),s=V(),r=w("div"),m&&m.c(),this.h()},l(d){e=E(d,"DIV",{class:!0});var _=L(e);t=E(_,"DIV",{class:!0,style:!0});var Y=L(t);a=E(Y,"DIV",{class:!0});var F=L(a);u&&u.l(F),F.forEach(p),s=R(Y),r=E(Y,"DIV",{class:!0});var g=L(r);m&&m.l(g),g.forEach(p),Y.forEach(p),_.forEach(p),this.h()},h(){v(a,"class","card-face card-front absolute inset-0 [backface-visibility:hidden] [transform:rotateY(0deg)] "),v(r,"class","card-face card-back absolute inset-0 [backface-visibility:hidden] [transform:rotateY(180deg)] "),v(t,"class",l="card relative "+he+" "+n[8]+" bg-white rounded-[2vh] shadow-xl p-[1.5vh] [transform-style:preserve-3d] [will-change:transform] svelte-wchsjo"),T(t,"aspect-ratio",ye),T(t,"--random-rotation",(n[0].rotateDegree!==void 0?n[0].rotateDegree:n[9])+"deg"),T(t,"--random-x",(Math.random()-.5)*200),T(t,"--random-y",(Math.random()-.5)*200),T(t,"--random-rotate-x",Math.random()*360),T(t,"--random-rotate-y",Math.random()*360),T(t,"--random-rotate-z",Math.random()*360),T(t,"--entry-delay",(n[0].entryDelay||0)+"ms"),T(t,"--entry-origin-x",n[6].x+"vw"),T(t,"--entry-origin-y",n[6].y+"vh"),T(t,"--push-initial-transform",n[7]),v(e,"class","fixed inset-0 flex items-center justify-center z-50")},m(d,_){O(d,e,_),k(e,t),k(t,a),u&&u.m(a,null),k(t,s),k(t,r),m&&m.m(r,null),n[22](t),i=!0,f||(o=Pe(qe.call(null,t,{onDragStart:n[10],onDragLeft:n[11],onDragRight:n[12],onDragBeforeLeft:n[13],onDragBeforeRight:n[14],onDragCenter:n[15],onDragEnd:n[16],onDragMove:n[17],onDrop:n[18],threshold:100,beforeThreshold:100})),f=!0)},p(d,_){u&&u.p&&(!i||_[0]&1048576)&&re(u,c,d,d[20],i?ae(c,d[20],_,Ge):ne(d[20]),ce),m&&m.p&&(!i||_[0]&1048576)&&re(m,h,d,d[20],i?ae(h,d[20],_,Ze):ne(d[20]),fe),(!i||_[0]&256&&l!==(l="card relative "+he+" "+d[8]+" bg-white rounded-[2vh] shadow-xl p-[1.5vh] [transform-style:preserve-3d] [will-change:transform] svelte-wchsjo"))&&v(t,"class",l),(!i||_[0]&1)&&T(t,"--random-rotation",(d[0].rotateDegree!==void 0?d[0].rotateDegree:d[9])+"deg"),(!i||_[0]&1)&&T(t,"--entry-delay",(d[0].entryDelay||0)+"ms"),(!i||_[0]&64)&&T(t,"--entry-origin-x",d[6].x+"vw"),(!i||_[0]&64)&&T(t,"--entry-origin-y",d[6].y+"vh"),(!i||_[0]&128)&&T(t,"--push-initial-transform",d[7])},i(d){i||(b(u,d),b(m,d),i=!0)},o(d){M(u,d),M(m,d),i=!1},d(d){d&&p(e),u&&u.d(d),m&&m.d(d),n[22](null),f=!1,o()}}}function de(n){let e,t,a,s;return{c(){e=w("div"),t=w("div"),a=q(n[2]),this.h()},l(r){e=E(r,"DIV",{class:!0});var l=L(e);t=E(l,"DIV",{class:!0});var i=L(t);a=Z(i,n[2]),i.forEach(p),l.forEach(p),this.h()},h(){v(t,"class",s=n[3]+" px-5 py-2 text-xl rounded-3xl svelte-wchsjo"),v(e,"class","fixed inset-0 flex items-center justify-center z-50 pointer-events-none")},m(r,l){O(r,e,l),k(e,t),k(t,a)},p(r,l){l[0]&4&&G(a,r[2]),l[0]&8&&s!==(s=r[3]+" px-5 py-2 text-xl rounded-3xl svelte-wchsjo")&&v(t,"class",s)},d(r){r&&p(e)}}}function He(n){let e,t,a,s=n[1]&&ue(n),r=n[4]&&n[2]&&de(n);return{c(){s&&s.c(),e=V(),r&&r.c(),t=ee()},l(l){s&&s.l(l),e=R(l),r&&r.l(l),t=ee()},m(l,i){s&&s.m(l,i),O(l,e,i),r&&r.m(l,i),O(l,t,i),a=!0},p(l,i){l[1]?s?(s.p(l,i),i[0]&2&&b(s,1)):(s=ue(l),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(B(),M(s,1,1,()=>{s=null}),N()),l[4]&&l[2]?r?r.p(l,i):(r=de(l),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i(l){a||(b(s),a=!0)},o(l){M(s),a=!1},d(l){l&&(p(e),p(t)),s&&s.d(l),r&&r.d(l)}}}let he="w-[35vh] min-w-[35vh] max-w-[35vh]";const We="bottom",Je=300;function Ke(n,e){switch(n){case"bottom":return`translateY(${e}px)`;case"top":return`translateY(-${e}px)`;case"left":return`translateX(-${e}px)`;case"right":return`translateX(${e}px)`;default:return`translateY(${e}px)`}}function Qe(n,e,t){let a,s,r,{$$slots:l={},$$scope:i}=e;const f=Ve();let{card:o}=e,c=!0,u=Math.random()*5,h="",m="bg-[#2286FF] text-white",d=!1,_,Y=!1,F=!1,g=!1,D=!1,C=null;const I={x:50,y:50};let y="default";o.pushAnimation?y="pushing":y="entering";let j=y;function U($){switch($){case"default":return`default-card rotate-z-${Math.floor(u)}`;case"flipped":return"flipped-card";case"scattered":return"scattered-card";case"dragging":return"dragging-card";case"entering":return"entering-card";case"pushing":return"pushing-card";default:return""}}function S($){D||(D=!0,$.stopPropagation(),o.unflippable||(g=!g,t(19,j=g?"flipped":"default")),C&&clearTimeout(C),C=setTimeout(()=>{D=!1},300))}function x($){if(Y||F||D)return;!!!$.target.closest(".card")&&c&&je()}function we(){Y=!0,t(19,j="dragging")}function Ee(){o.onDumpLeft&&o.onDumpLeft(),f("dragLeft")}function Ce(){o.onDumpRight&&o.onDumpRight(),f("dragRight")}function Ie($){t(4,d=!0),t(2,h=o.left),o.leftColor==="negative"?t(3,m="bg-gray-300 text-white"):o.leftColor==="positive"?t(3,m="bg-[#2286FF] text-white"):t(3,m=o.leftColor||"bg-gray-300 text-white")}function $e($){t(4,d=!0),t(2,h=o.right),o.rightColor==="negative"?t(3,m="bg-gray-300 text-white"):o.rightColor==="positive"?t(3,m="bg-[#2286FF] text-white"):t(3,m=o.rightColor||"bg-gray-300 text-white")}function Le($){t(4,d=!1),t(2,h="")}function Me(){t(4,d=!1),t(2,h=""),Y=!1,t(19,j=g?"flipped":"default"),F=!0,setTimeout(()=>{F=!1},300)}function Te($,Fe){Y=!0,t(19,j="dragging")}function Oe(){t(1,c=!1),t(4,d=!1),f("dropped")}function je(){c&&(t(19,j="scattered"),setTimeout(()=>{t(1,c=!1),t(4,d=!1),ze.emit("setCards",[]),f("dropped")},800))}Re(()=>{setTimeout(()=>{_&&_.addEventListener("click",S),document.addEventListener("click",x)},300),setTimeout(()=>{t(19,j="default"),o.pushAnimation&&f("pushComplete"),o.onLoad&&o.onLoad()},o.pushAnimation?600:800)}),Se(()=>{_&&_.removeEventListener("click",S),document.removeEventListener("click",x),C&&clearTimeout(C)});function Ye($){W[$?"unshift":"push"](()=>{_=$,t(5,_)})}return n.$$set=$=>{"card"in $&&t(0,o=$.card),"$$scope"in $&&t(20,i=$.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&524288&&t(8,a=U(j)),n.$$.dirty[0]&1&&t(7,s=Ke(o.pushDirection||We,o.pushOffset||Je)),n.$$.dirty[0]&1&&t(6,r=o.entryOrigin||I)},[o,c,h,m,d,_,r,s,a,u,we,Ee,Ce,Ie,$e,Le,Me,Te,Oe,j,i,l,Ye]}class ke extends K{constructor(e){super(),Q(this,e,Qe,He,J,{card:0},null,[-1,-1])}}function xe(n){let e,t,a,s,r,l=n[0].emoji+"",i,f,o;return{c(){e=w("div"),t=w("img"),s=V(),r=w("div"),i=q(l),this.h()},l(c){e=E(c,"DIV",{class:!0,style:!0});var u=L(e);t=E(u,"IMG",{src:!0,alt:!0,class:!0,draggable:!0}),u.forEach(p),s=R(c),r=E(c,"DIV",{class:!0});var h=L(r);i=Z(h,l),h.forEach(p),this.h()},h(){le(t.src,a=n[0].image)||v(t,"src",a),v(t,"alt","random image"),v(t,"class","w-full h-full object-cover rounded-[2vh]"),v(t,"draggable","false"),v(e,"class","w-full h-full p-[1vh] pb-[7.5vh]"),v(e,"style",`aspect-ratio: ${ye}`),v(r,"class","emoji absolute bottom-0 left-0 right-0 flex justify-center items-center text-[5vh] transform origin-center ")},m(c,u){O(c,e,u),k(e,t),O(c,s,u),O(c,r,u),k(r,i),f||(o=be(r,"click",Xe(n[1])),f=!0)},p(c,u){u&1&&!le(t.src,a=c[0].image)&&v(t,"src",a),u&1&&l!==(l=c[0].emoji+"")&&G(i,l)},d(c){c&&(p(e),p(s),p(r)),f=!1,o()}}}function et(n){let e,t,a=n[0].back+"",s;return{c(){e=w("div"),t=w("p"),s=q(a),this.h()},l(r){e=E(r,"DIV",{class:!0});var l=L(e);t=E(l,"P",{class:!0});var i=L(t);s=Z(i,a),i.forEach(p),l.forEach(p),this.h()},h(){v(t,"class","text-[2.5vh] text-center [transform:rotateZ(-25deg)] "),v(e,"class","w-full h-full flex items-center justify-center p-[3.5vh] ")},m(r,l){O(r,e,l),k(e,t),k(t,s)},p(r,l){l&1&&a!==(a=r[0].back+"")&&G(s,a)},d(r){r&&p(e)}}}function tt(n){let e,t,a,s,r,l;e=new ke({props:{card:n[0],$$slots:{back:[et],front:[xe]},$$scope:{ctx:n}}});function i(c){n[2](c)}function f(c){n[3](c)}let o={type:"emoji"};return n[0].inputDimIsOpen!==void 0&&(o.isOpen=n[0].inputDimIsOpen),n[0].emoji!==void 0&&(o.value=n[0].emoji),a=new Ne({props:o}),W.push(()=>ie(a,"isOpen",i)),W.push(()=>ie(a,"value",f)),a.$on("change",rt),a.$on("close",n[4]),{c(){P(e.$$.fragment),t=V(),P(a.$$.fragment)},l(c){z(e.$$.fragment,c),t=R(c),z(a.$$.fragment,c)},m(c,u){X(e,c,u),O(c,t,u),X(a,c,u),l=!0},p(c,[u]){const h={};u&1&&(h.card=c[0]),u&33&&(h.$$scope={dirty:u,ctx:c}),e.$set(h);const m={};!s&&u&1&&(s=!0,m.isOpen=c[0].inputDimIsOpen,se(()=>s=!1)),!r&&u&1&&(r=!0,m.value=c[0].emoji,se(()=>r=!1)),a.$set(m)},i(c){l||(b(e.$$.fragment,c),b(a.$$.fragment,c),l=!0)},o(c){M(e.$$.fragment,c),M(a.$$.fragment,c),l=!1},d(c){c&&p(t),A(e,c),A(a,c)}}}const rt=n=>{};function nt(n,e,t){let{card:a}=e;const s=()=>{a.ownerIdx===Ue()&&t(0,a.inputDimIsOpen=!0,a)};function r(f){n.$$.not_equal(a.inputDimIsOpen,f)&&(a.inputDimIsOpen=f,t(0,a))}function l(f){n.$$.not_equal(a.emoji,f)&&(a.emoji=f,t(0,a))}function i(f){De.call(this,n,f)}return n.$$set=f=>{"card"in f&&t(0,a=f.card)},[a,s,r,l,i]}class gt extends K{constructor(e){super(),Q(this,e,nt,tt,J,{card:0})}}function me(n,e,t){const a=n.slice();return a[2]=e[t],a}function ge(n){let e,t,a;var s=n[2].startIcon;function r(l,i){return{}}return s&&(t=H(s,r())),{c(){e=w("div"),t&&P(t.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var i=L(e);t&&z(t.$$.fragment,i),i.forEach(p),this.h()},h(){v(e,"class","flex-none")},m(l,i){O(l,e,i),t&&X(t,e,null),a=!0},p(l,i){if(i&1&&s!==(s=l[2].startIcon)){if(t){B();const f=t;M(f.$$.fragment,1,0,()=>{A(f,1)}),N()}s?(t=H(s,r()),P(t.$$.fragment),b(t.$$.fragment,1),X(t,e,null)):t=null}},i(l){a||(t&&b(t.$$.fragment,l),a=!0)},o(l){t&&M(t.$$.fragment,l),a=!1},d(l){l&&p(e),t&&A(t)}}}function pe(n){let e,t,a,s,r=n[2].endCount&&_e(n);var l=n[2].endIcon;function i(f,o){return{}}return l&&(a=H(l,i())),{c(){e=w("div"),r&&r.c(),t=V(),a&&P(a.$$.fragment),this.h()},l(f){e=E(f,"DIV",{class:!0});var o=L(e);r&&r.l(o),t=R(o),a&&z(a.$$.fragment,o),o.forEach(p),this.h()},h(){v(e,"class","flex-none flex items-center")},m(f,o){O(f,e,o),r&&r.m(e,null),k(e,t),a&&X(a,e,null),s=!0},p(f,o){if(f[2].endCount?r?r.p(f,o):(r=_e(f),r.c(),r.m(e,t)):r&&(r.d(1),r=null),o&1&&l!==(l=f[2].endIcon)){if(a){B();const c=a;M(c.$$.fragment,1,0,()=>{A(c,1)}),N()}l?(a=H(l,i()),P(a.$$.fragment),b(a.$$.fragment,1),X(a,e,null)):a=null}},i(f){s||(a&&b(a.$$.fragment,f),s=!0)},o(f){a&&M(a.$$.fragment,f),s=!1},d(f){f&&p(e),r&&r.d(),a&&A(a)}}}function _e(n){let e,t=n[2].endCount+"",a;return{c(){e=w("p"),a=q(t),this.h()},l(s){e=E(s,"P",{class:!0});var r=L(e);a=Z(r,t),r.forEach(p),this.h()},h(){v(e,"class","font-normal text-[12px] text-[rgba(56,56,56,0.8)]")},m(s,r){O(s,e,r),k(e,a)},p(s,r){r&1&&t!==(t=s[2].endCount+"")&&G(a,t)},d(s){s&&p(e)}}}function ve(n){let e,t,a,s=n[2].name+"",r,l,i,f,o,c,u=n[2].startIcon&&ge(n),h=n[2].endIcon&&pe(n);return{c(){e=w("button"),u&&u.c(),t=V(),a=w("p"),r=q(s),l=V(),h&&h.c(),i=V(),this.h()},l(m){e=E(m,"BUTTON",{class:!0});var d=L(e);u&&u.l(d),t=R(d),a=E(d,"P",{class:!0});var _=L(a);r=Z(_,s),_.forEach(p),l=R(d),h&&h.l(d),i=R(d),d.forEach(p),this.h()},h(){v(a,"class","flex-auto text-start truncate font-medium text-[14px] text-[#242424]"),v(e,"class","w-full p-2.5 flex justify-start items-center gap-1.5")},m(m,d){O(m,e,d),u&&u.m(e,null),k(e,t),k(e,a),k(a,r),k(e,l),h&&h.m(e,null),k(e,i),f=!0,o||(c=be(e,"click",function(){Be(n[2].onClick)&&n[2].onClick.apply(this,arguments)}),o=!0)},p(m,d){n=m,n[2].startIcon?u?(u.p(n,d),d&1&&b(u,1)):(u=ge(n),u.c(),b(u,1),u.m(e,t)):u&&(B(),M(u,1,1,()=>{u=null}),N()),(!f||d&1)&&s!==(s=n[2].name+"")&&G(r,s),n[2].endIcon?h?(h.p(n,d),d&1&&b(h,1)):(h=pe(n),h.c(),b(h,1),h.m(e,i)):h&&(B(),M(h,1,1,()=>{h=null}),N())},i(m){f||(b(u),b(h),f=!0)},o(m){M(u),M(h),f=!1},d(m){m&&p(e),u&&u.d(),h&&h.d(),o=!1,c()}}}function at(n){let e,t,a,s=oe(n[0].optionList),r=[];for(let i=0;i<s.length;i+=1)r[i]=ve(me(n,s,i));const l=i=>M(r[i],1,1,()=>{r[i]=null});return{c(){e=w("div"),t=w("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=E(i,"DIV",{class:!0});var f=L(e);t=E(f,"DIV",{class:!0});var o=L(t);for(let c=0;c<r.length;c+=1)r[c].l(o);o.forEach(p),f.forEach(p),this.h()},h(){v(t,"class","h-full w-full py-6 flex flex-col justify-start items-center"),v(e,"class","w-full h-full px-6 py-4 flex justify-center items-center")},m(i,f){O(i,e,f),k(e,t);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null);a=!0},p(i,f){if(f&1){s=oe(i[0].optionList);let o;for(o=0;o<s.length;o+=1){const c=me(i,s,o);r[o]?(r[o].p(c,f),b(r[o],1)):(r[o]=ve(c),r[o].c(),b(r[o],1),r[o].m(t,null))}for(B(),o=s.length;o<r.length;o+=1)l(o);N()}},i(i){if(!a){for(let f=0;f<s.length;f+=1)b(r[f]);a=!0}},o(i){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)M(r[f]);a=!1},d(i){i&&p(e),Ae(r,i)}}}function st(n){let e,t;return e=new ke({props:{card:n[0],$$slots:{front:[at]},$$scope:{ctx:n}}}),e.$on("dropped",n[1]),{c(){P(e.$$.fragment)},l(a){z(e.$$.fragment,a)},m(a,s){X(e,a,s),t=!0},p(a,[s]){const r={};s&1&&(r.card=a[0]),s&33&&(r.$$scope={dirty:s,ctx:a}),e.$set(r)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){M(e.$$.fragment,a),t=!1},d(a){A(e,a)}}}function lt(n,e,t){let{card:a}=e;function s(r){De.call(this,n,r)}return n.$$set=r=>{"card"in r&&t(0,a=r.card)},[a,s]}class pt extends K{constructor(e){super(),Q(this,e,lt,st,J,{card:0})}}export{ke as C,pt as a,gt as b};
