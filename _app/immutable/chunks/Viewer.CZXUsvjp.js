import{s as oe,D as ne,i as S,f as p,e as T,a as j,t as ge,c as D,b as R,g as Y,d as be,v as m,h as w,y as X,j as Ne,x as ee,O as He,C as $,n as K,q as Ce,r as xe,ac as Ge,B as At,E as Ae,F as ve,J as Fe,z as De,A as Oe,L as Nt,N as nt,k as vl,w as wl,G as kl,I as Cl}from"./scheduler.CbwPF6wx.js";import{S as fe,i as ue,t as I,g as te,a as O,d as le,c as Z,b as G,m as W,e as J,f as Re}from"./index.DiLw73rm.js";import{e as de,u as We,f as xl,o as St}from"./each.CXq2Zfzp.js";import{b as Me,e as _e,A as Le,m as qt,g as Ue,i as st,C as Il}from"./sign.D_LL5_6B.js";import{g as Ze}from"./entry.t8cWHZkX.js";import{p as El}from"./stores.BOGknbc_.js";import{g as Xe,u as yl}from"./searchParams.BVCK7i46.js";/* empty css                                           *//* empty css                                                  */import{f as Tl,u as Dl}from"./follow.CF4QVxbo.js";import{C as Ml}from"./CircleImage.S7F7_7k5.js";import{g as it}from"./color.C_Jm4JAr.js";import{s as rt}from"./s32cloudfront.DON5D_yO.js";import{r as Ie}from"./units.BJZU6p1c.js";import"./index.eClE66Ze.js";import{a as Vl}from"./NavigationBar.BhJvEaoN.js";import{C as jt}from"./Chip.6-PdHg3v.js";import{B as Bl}from"./BottomNavigationPadder.BR6eHBA2.js";import{I as Pl,a as Ol}from"./IconHeartFill.Da6WXsfi.js";import{l as Rl}from"./longPress.C9F0mLoM.js";import{w as Ll,a as Al}from"./Header.DLTfYya3.js";import{A as Yt}from"./ActionSheet.BtVrR044.js";import{M as Nl}from"./Modal.BIbSlpfR.js";import{f as Sl,c as ql,a as jl}from"./ActionSheetReport.svelte_svelte_type_style_lang.BwjDeOaq.js";import{F as Yl}from"./Figure.CpCmCIjG.js";import{I as Fl}from"./IconLink.BCnKa0tU.js";function at(n){let e,t,l,s,r,i,a=n[0].unique_name+"",o,f,u,_=String(n[0].user_idx)!==String(Me()),v,E,V;const C=[zl,Ul],h=[];function d(y,L){return y[0].profile_image_url?0:1}t=d(n),l=h[t]=C[t](n);let k=_&&ot(n);return{c(){e=T("div"),l.c(),s=j(),r=T("div"),i=T("div"),o=ge(a),f=j(),u=T("div"),k&&k.c(),this.h()},l(y){e=D(y,"DIV",{class:!0});var L=R(e);l.l(L),s=Y(L),r=D(L,"DIV",{class:!0});var x=R(r);i=D(x,"DIV",{class:!0});var A=R(i);o=be(A,a),A.forEach(p),f=Y(x),u=D(x,"DIV",{class:!0});var F=R(u);k&&k.l(F),F.forEach(p),x.forEach(p),L.forEach(p),this.h()},h(){m(i,"class","text-sm text-white"),m(u,"class","flex gap-1 items-center"),m(r,"class","flex gap-1 items-center"),m(e,"class","flex gap-[0.625rem] justify-center items-center")},m(y,L){S(y,e,L),h[t].m(e,null),w(e,s),w(e,r),w(r,i),w(i,o),w(r,f),w(r,u),k&&k.m(u,null),v=!0,E||(V=X(i,"click",n[5]),E=!0)},p(y,L){let x=t;t=d(y),t===x?h[t].p(y,L):(te(),O(h[x],1,1,()=>{h[x]=null}),le(),l=h[t],l?l.p(y,L):(l=h[t]=C[t](y),l.c()),I(l,1),l.m(e,s)),(!v||L&1)&&a!==(a=y[0].unique_name+"")&&Ne(o,a),L&1&&(_=String(y[0].user_idx)!==String(Me())),_?k?k.p(y,L):(k=ot(y),k.c(),k.m(u,null)):k&&(k.d(1),k=null)},i(y){v||(I(l),v=!0)},o(y){O(l),v=!1},d(y){y&&p(e),h[t].d(),k&&k.d(),E=!1,V()}}}function Ul(n){var a;let e,t,l=(((a=n[0].unique_name)==null?void 0:a.at(0))??"u")+"",s,r,i;return{c(){e=T("div"),t=T("span"),s=ge(l),this.h()},l(o){e=D(o,"DIV",{class:!0,style:!0});var f=R(e);t=D(f,"SPAN",{class:!0});var u=R(t);s=be(u,l),u.forEach(p),f.forEach(p),this.h()},h(){m(t,"class","text-base font-semibold text-black"),m(e,"class","w-[1.625rem] h-[1.625rem] flex items-center justify-center rounded-full"),$(e,"background-color",it(n[0].unique_name))},m(o,f){S(o,e,f),w(e,t),w(t,s),r||(i=X(e,"click",n[4]),r=!0)},p(o,f){var u;f&1&&l!==(l=(((u=o[0].unique_name)==null?void 0:u.at(0))??"u")+"")&&Ne(s,l),f&1&&$(e,"background-color",it(o[0].unique_name))},i:K,o:K,d(o){o&&p(e),r=!1,i()}}}function zl(n){let e,t;return e=new Ml({props:{src:rt(n[0].profile_image_url,500),width:"1.625rem",strokeColor:"white",strokeWidth:"0"}}),e.$on("click",n[3]),{c(){Z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){W(e,l,s),t=!0},p(l,s){const r={};s&1&&(r.src=rt(l[0].profile_image_url,500)),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function ot(n){let e,t="•",l,s,r=n[0].is_following?"팔로잉":"팔로우",i,a,o,f;return{c(){e=T("div"),e.textContent=t,l=j(),s=T("div"),i=ge(r),this.h()},l(u){e=D(u,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-168vif2"&&(e.textContent=t),l=Y(u),s=D(u,"DIV",{class:!0});var _=R(s);i=be(_,r),_.forEach(p),this.h()},h(){m(e,"class","text-xs text-white/60"),m(s,"class",a=`text-[0.8125rem] ${n[0].is_following?"text-gray-500":"text-[#3490FF]"}`)},m(u,_){S(u,e,_),S(u,l,_),S(u,s,_),w(s,i),o||(f=X(s,"click",function(){He(n[0].is_following?n[2]:n[1])&&(n[0].is_following?n[2]:n[1]).apply(this,arguments)}),o=!0)},p(u,_){n=u,_&1&&r!==(r=n[0].is_following?"팔로잉":"팔로우")&&Ne(i,r),_&1&&a!==(a=`text-[0.8125rem] ${n[0].is_following?"text-gray-500":"text-[#3490FF]"}`)&&m(s,"class",a)},d(u){u&&(p(e),p(l),p(s)),o=!1,f()}}}function Xl(n){let e,t,l=n[0].idx&&n[0].unique_name&&at(n);return{c(){l&&l.c(),e=ne()},l(s){l&&l.l(s),e=ne()},m(s,r){l&&l.m(s,r),S(s,e,r),t=!0},p(s,[r]){s[0].idx&&s[0].unique_name?l?(l.p(s,r),r&1&&I(l,1)):(l=at(s),l.c(),I(l,1),l.m(e.parentNode,e)):l&&(te(),O(l,1,1,()=>{l=null}),le())},i(s){t||(I(l),t=!0)},o(s){O(l),t=!1},d(s){s&&p(e),l&&l.d(s)}}}function Hl(n,e,t){let{post:l}=e,s=!1;async function r(){s||(s=!0,await Tl({targetIdx:l.user_idx,subjectIdx:Me()}),t(0,l.is_following=!0,l),s=!1)}async function i(){s||(s=!0,await Dl({targetIdx:l.user_idx,subjectIdx:Me()}),t(0,l.is_following=!1,l),s=!1)}const a=()=>{Xe(`/users/${l.user_idx}`)},o=()=>{Xe(`/users/${l.user_idx}`)},f=()=>{Xe(`/users/${l.user_idx}`)};return n.$$set=u=>{"post"in u&&t(0,l=u.post)},[l,r,i,a,o,f]}class Zl extends fe{constructor(e){super(),ue(this,e,Hl,Xl,oe,{post:0})}}function Gl(n){let e,t,l,s;return{c(){e=Ce("svg"),t=Ce("path"),l=Ce("path"),this.h()},l(r){e=xe(r,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var i=R(e);t=xe(i,"path",{d:!0,fill:!0}),R(t).forEach(p),l=xe(i,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linejoin":!0}),R(l).forEach(p),i.forEach(p),this.h()},h(){m(t,"d","M11.9996 14.3636C11.7585 14.3636 11.5273 14.2679 11.3568 14.0974C11.1863 13.9269 11.0906 13.6957 11.0906 13.4545L11.0906 8.90909C11.0906 8.66798 11.1863 8.43675 11.3568 8.26627C11.5273 8.09578 11.7585 8 11.9996 8C12.2408 8 12.472 8.09578 12.6425 8.26627C12.813 8.43675 12.9087 8.66798 12.9087 8.90909L12.9087 13.4545C12.9087 13.6957 12.813 13.9269 12.6425 14.0974C12.472 14.2679 12.2408 14.3636 11.9996 14.3636ZM10.636 16.6364C10.636 16.2747 10.7797 15.9279 11.0354 15.6721C11.2911 15.4164 11.638 15.2727 11.9996 15.2727C12.3613 15.2727 12.7082 15.4164 12.9639 15.6721C13.2196 15.9279 13.3633 16.2747 13.3633 16.6364C13.3633 16.998 13.2196 17.3449 12.9639 17.6006C12.7082 17.8563 12.3613 18 11.9996 18C11.638 18 11.2911 17.8563 11.0354 17.6006C10.7797 17.3449 10.636 16.998 10.636 16.6364Z"),m(t,"fill",n[0]),m(l,"d","M13.732 4C12.9623 2.66667 11.0378 2.66667 10.268 4L2.47372 17.5C1.70392 18.8333 2.66617 20.5 4.20577 20.5H19.7942C21.3338 20.5 22.2961 18.8333 21.5263 17.5L13.732 4Z"),m(l,"stroke",n[1]),m(l,"stroke-width","2"),m(l,"stroke-linejoin","round"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",n[2]),m(e,"height",n[2]),m(e,"viewBox",s="0 0 "+n[2]+" "+n[2]),m(e,"fill","none")},m(r,i){S(r,e,i),w(e,t),w(e,l)},p(r,[i]){i&1&&m(t,"fill",r[0]),i&2&&m(l,"stroke",r[1]),i&4&&m(e,"width",r[2]),i&4&&m(e,"height",r[2]),i&4&&s!==(s="0 0 "+r[2]+" "+r[2])&&m(e,"viewBox",s)},i:K,o:K,d(r){r&&p(e)}}}function Wl(n,e,t){let l,{fill:s="#FF4F1E"}=e,{stroke:r="#FF4F1E"}=e,{length:i=1.5}=e;return n.$$set=a=>{"fill"in a&&t(0,s=a.fill),"stroke"in a&&t(1,r=a.stroke),"length"in a&&t(3,i=a.length)},n.$$.update=()=>{n.$$.dirty&8&&t(2,l=Ie(i))},[s,r,l,i]}class Jl extends fe{constructor(e){super(),ue(this,e,Wl,Gl,oe,{fill:0,stroke:1,length:3})}}function ze(n){const t=["touchstart","touchmove","touchend","mousedown","mousemove","mouseup","wheel"].map(l=>{const s=r=>r.stopPropagation();return n.addEventListener(l,s),{event:l,handler:s}});return{destroy(){t.forEach(({event:l,handler:s})=>{n.removeEventListener(l,s)})}}}function ft(n){let e,t;return e=new jt({props:{prefixLength:1.25,textSize:"text-xs",textColor:"text-white",backgroundColor:"bg-[rgb(56,56,56)]/30",borderColor:"border-[rgb(56,56,56)]/10",border:!0,pointer:!0,prefixIconComponent:Vl,fill:"white",padding:"px-[0.88rem] py-[0.5rem]",value:n[0].name}}),e.$on("click",n[1]),{c(){Z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){W(e,l,s),t=!0},p(l,s){const r={};s&1&&(r.value=l[0].name),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Kl(n){let e,t,l=n[0].idx&&ft(n);return{c(){l&&l.c(),e=ne()},l(s){l&&l.l(s),e=ne()},m(s,r){l&&l.m(s,r),S(s,e,r),t=!0},p(s,[r]){s[0].idx?l?(l.p(s,r),r&1&&I(l,1)):(l=ft(s),l.c(),I(l,1),l.m(e.parentNode,e)):l&&(te(),O(l,1,1,()=>{l=null}),le())},i(s){t||(I(l),t=!0)},o(s){O(l),t=!1},d(s){s&&p(e),l&&l.d(s)}}}function Ql(n,e,t){let{place:l}=e;const s=async()=>{await Ze(`/places/${l.idx}`)};return n.$$set=r=>{"place"in r&&t(0,l=r.place)},[l,s]}class $l extends fe{constructor(e){super(),ue(this,e,Ql,Kl,oe,{place:0})}}function en(n){let e,t;return{c(){e=Ce("svg"),t=Ce("path"),this.h()},l(l){e=xe(l,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var s=R(e);t=xe(s,"path",{d:!0}),R(t).forEach(p),s.forEach(p),this.h()},h(){m(t,"d","M200-200h57l391-391-57-57-391 391v57Zm-40 80q-17 0-28.5-11.5T120-160v-97q0-16 6-30.5t17-25.5l505-504q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L313-143q-11 11-25.5 17t-30.5 6h-97Zm600-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 -960 960 960"),m(e,"width",n[1]),m(e,"height",n[1]),m(e,"fill",n[0])},m(l,s){S(l,e,s),w(e,t)},p(l,[s]){s&2&&m(e,"width",l[1]),s&2&&m(e,"height",l[1]),s&1&&m(e,"fill",l[0])},i:K,o:K,d(l){l&&p(e)}}}function tn(n,e,t){let l,{fill:s="#5f6368"}=e,{length:r="1.75"}=e,{alt:i="Edit"}=e;return n.$$set=a=>{"fill"in a&&t(0,s=a.fill),"length"in a&&t(2,r=a.length),"alt"in a&&t(3,i=a.alt)},n.$$.update=()=>{n.$$.dirty&4&&t(1,l=Ie(r))},[s,l,r,i]}class ln extends fe{constructor(e){super(),ue(this,e,tn,en,oe,{fill:0,length:2,alt:3})}}function nn(n){let e,t;return{c(){e=Ce("svg"),t=Ce("path"),this.h()},l(l){e=xe(l,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0});var s=R(e);t=xe(s,"path",{d:!0}),R(t).forEach(p),s.forEach(p),this.h()},h(){m(t,"d","M280-120q-33 0-56.5-23.5T200-200v-520q-17 0-28.5-11.5T160-760q0-17 11.5-28.5T200-800h160q0-17 11.5-28.5T400-840h160q17 0 28.5 11.5T600-800h160q17 0 28.5 11.5T800-760q0 17-11.5 28.5T760-720v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM400-280q17 0 28.5-11.5T440-320v-280q0-17-11.5-28.5T400-640q-17 0-28.5 11.5T360-600v280q0 17 11.5 28.5T400-280Zm160 0q17 0 28.5-11.5T600-320v-280q0-17-11.5-28.5T560-640q-17 0-28.5 11.5T520-600v280q0 17 11.5 28.5T560-280ZM280-720v520-520Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 -960 960 960"),m(e,"width",n[1]),m(e,"height",n[1]),m(e,"fill",n[0])},m(l,s){S(l,e,s),w(e,t)},p(l,[s]){s&2&&m(e,"width",l[1]),s&2&&m(e,"height",l[1]),s&1&&m(e,"fill",l[0])},i:K,o:K,d(l){l&&p(e)}}}function sn(n,e,t){let l,{fill:s="#5f6368"}=e,{length:r="1.75"}=e,{alt:i="Delete"}=e;return n.$$set=a=>{"fill"in a&&t(0,s=a.fill),"length"in a&&t(2,r=a.length),"alt"in a&&t(3,i=a.alt)},n.$$.update=()=>{n.$$.dirty&4&&t(1,l=Ie(r))},[s,l,r,i]}class rn extends fe{constructor(e){super(),ue(this,e,sn,nn,oe,{fill:0,length:2,alt:3})}}function ut(n){let e,t=n[0].text+"",l,s,r;return{c(){e=T("p"),l=ge(t),this.h()},l(i){e=D(i,"P",{class:!0,style:!0});var a=R(e);l=be(a,t),a.forEach(p),this.h()},h(){m(e,"class","text-xs text-shadow whitespace-pre-line w-full overflow-hidden max-w-full break-words"),m(e,"style",`
      overflow: hidden;
      height: ${n[1]}px;
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 1;
      max-width: 100%;
      width: 100%;
      word-break: break-all;
    `)},m(i,a){S(i,e,a),w(e,l),s||(r=[Ae(ze.call(null,e)),X(e,"click",n[2])],s=!0)},p(i,a){a&1&&t!==(t=i[0].text+"")&&Ne(l,t)},d(i){i&&p(e),s=!1,ve(r)}}}function an(n){var s;let e=((s=n[0])==null?void 0:s.text)&&n[0].text.trim().length>0,t,l=e&&ut(n);return{c(){l&&l.c(),t=ne()},l(r){l&&l.l(r),t=ne()},m(r,i){l&&l.m(r,i),S(r,t,i)},p(r,[i]){var a;i&1&&(e=((a=r[0])==null?void 0:a.text)&&r[0].text.trim().length>0),e?l?l.p(r,i):(l=ut(r),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:K,o:K,d(r){r&&p(t),l&&l.d(r)}}}function on(n,e,t){const l=Ge();let{post:s}=e;const r=Ie(1),i=Ie(6);function a(o){const f=o.currentTarget;if(f)if(f.style.height===`${r}px`||!f.style.height){if(f.scrollHeight>r){const u=f.scrollHeight<i?f.scrollHeight:i;f.style.height=`${u}px`,f.style.overflow="scroll",f.style.display="block",f.style.webkitLineClamp="unset",l("textExpanded",{expanded:!0})}}else f.style.height=`${r}px`,f.style.overflow="hidden",f.style.display="-webkit-box",f.style.webkitLineClamp="1",l("textExpanded",{expanded:!1})}return At(()=>{l("textExpanded",{expanded:!1})}),n.$$set=o=>{"post"in o&&t(0,s=o.post)},[s,r,a]}class fn extends fe{constructor(e){super(),ue(this,e,on,an,oe,{post:0})}}function un(n){let e;return{c(){e=T("div"),this.h()},l(t){e=D(t,"DIV",{class:!0,style:!0}),R(e).forEach(p),this.h()},h(){m(e,"class","fixed left-0 top-0 w-full h-full pointer-events-none z-30"),$(e,"opacity","0.6"),$(e,"background","linear-gradient(180deg, rgba(0, 0, 0, 0.16) -55.96%, rgba(0, 0, 0, 0.00) 55.55%), linear-gradient(180deg, rgba(0, 0, 0, 0.00) 58.49%, rgba(0, 0, 0, 0.50) 140.82%)")},m(t,l){S(t,e,l)},d(t){t&&p(e)}}}function cn(n){let e;return{c(){e=T("div"),this.h()},l(t){e=D(t,"DIV",{class:!0,style:!0}),R(e).forEach(p),this.h()},h(){m(e,"class","fixed inset-0 pointer-events-none z-30"),$(e,"opacity","0.7"),$(e,"background","linear-gradient(180deg, rgba(0, 0, 0, 0.00) 0%, #000 100%)")},m(t,l){S(t,e,l)},d(t){t&&p(e)}}}function dn(n){let e;function t(r,i){return r[0]?cn:un}let l=t(n),s=l(n);return{c(){s.c(),e=ne()},l(r){s.l(r),e=ne()},m(r,i){s.m(r,i),S(r,e,i)},p(r,[i]){l!==(l=t(r))&&(s.d(1),s=l(r),s&&(s.c(),s.m(e.parentNode,e)))},i:K,o:K,d(r){r&&p(e),s.d(r)}}}function hn(n,e,t){let{isTextExpanded:l=!1}=e;return n.$$set=s=>{"isTextExpanded"in s&&t(0,l=s.isTextExpanded)},[l]}class mn extends fe{constructor(e){super(),ue(this,e,hn,dn,oe,{isTextExpanded:0})}}function ct(n,e,t){const l=n.slice();return l[5]=e[t],l[7]=t,l}function dt(n,e){let t,l,s,r,i,a=K;return{key:n,first:null,c(){t=T("span"),l=T("span"),r=j(),this.h()},l(o){t=D(o,"SPAN",{class:!0,style:!0});var f=R(t);l=D(f,"SPAN",{class:!0,style:!0}),R(l).forEach(p),r=Y(f),f.forEach(p),this.h()},h(){m(l,"class",s=Fe(`carousel-dot block w-full h-full rounded-full transition-transform duration-300 ${e[0].mediaIdx===e[2]+e[7]?"bg-white z-10":"bg-white/50"}`)+" svelte-m8istd"),$(l,"transform","scale("+e[4](e[7])+")"),$(l,"transition-delay",e[0].mediaIdx===e[2]+e[7]?"0s":"0.1s"),m(t,"class","flex items-center justify-center"),$(t,"width","0.375rem"),$(t,"height","0.375rem"),this.first=t},m(o,f){S(o,t,f),w(t,l),w(t,r)},p(o,f){e=o,f&13&&s!==(s=Fe(`carousel-dot block w-full h-full rounded-full transition-transform duration-300 ${e[0].mediaIdx===e[2]+e[7]?"bg-white z-10":"bg-white/50"}`)+" svelte-m8istd")&&m(l,"class",s),f&8&&$(l,"transform","scale("+e[4](e[7])+")"),f&13&&$(l,"transition-delay",e[0].mediaIdx===e[2]+e[7]?"0s":"0.1s")},r(){i=t.getBoundingClientRect()},f(){Sl(t),a()},a(){a(),a=ql(t,i,jl,{})},d(o){o&&p(t)}}}function pn(n){let e,t=[],l=new Map,s,r=de(n[3]);const i=a=>a[5];for(let a=0;a<r.length;a+=1){let o=ct(n,r,a),f=i(o);l.set(f,t[a]=dt(f,o))}return{c(){e=T("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=D(a,"DIV",{class:!0});var o=R(e);for(let f=0;f<t.length;f+=1)t[f].l(o);o.forEach(p),this.h()},h(){m(e,"class",s=Fe(`
    ${n[1]?"fixed left-1/2 -translate-x-1/2 bottom-[10.3125rem]":""} 
    flex justify-center gap-1.5
  `)+" svelte-m8istd")},m(a,o){S(a,e,o);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null)},p(a,[o]){if(o&29){r=de(a[3]);for(let f=0;f<t.length;f+=1)t[f].r();t=We(t,o,i,1,a,r,l,e,xl,dt,null,ct);for(let f=0;f<t.length;f+=1)t[f].a()}o&2&&s!==(s=Fe(`
    ${a[1]?"fixed left-1/2 -translate-x-1/2 bottom-[10.3125rem]":""} 
    flex justify-center gap-1.5
  `)+" svelte-m8istd")&&m(e,"class",s)},i:K,o:K,d(a){a&&p(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}const Te=7;function _n(n,e,t){let{post:l}=e,{fixed:s=!0}=e,r=[],i=0;function a(o){const f=l.mediaIdx-i,u=r.length;if(u<=1)return 1;const _=Math.max(f,u-1-f);return _===0?1:1-Math.abs(o-f)/_*.5}return n.$$set=o=>{"post"in o&&t(0,l=o.post),"fixed"in o&&t(1,s=o.fixed)},n.$$.update=()=>{n.$$.dirty&5&&(l.media.length>Te?(l.mediaIdx<=Math.floor(Te/2)?t(2,i=0):l.mediaIdx>=l.media.length-Math.ceil(Te/2)?t(2,i=l.media.length-Te):t(2,i=l.mediaIdx-Math.floor(Te/2)),t(3,r=l.media.slice(i,i+Te))):(t(2,i=0),t(3,r=l.media)))},[l,s,i,r,a]}class Ft extends fe{constructor(e){super(),ue(this,e,_n,pn,oe,{post:0,fixed:1})}}function ht(n,e,t){const l=n.slice();return l[13]=e[t].text,l[14]=e[t].value,l[15]=e[t].custom,l[17]=t,l}function mt(n){let e,t,l,s,r=n[13]+"",i,a,o,f;return{c(){e=T("label"),t=T("input"),l=j(),s=T("span"),i=ge(r),a=j(),this.h()},l(u){e=D(u,"LABEL",{class:!0});var _=R(e);t=D(_,"INPUT",{type:!0,name:!0,class:!0}),l=Y(_),s=D(_,"SPAN",{class:!0});var v=R(s);i=be(v,r),v.forEach(p),a=Y(_),_.forEach(p),this.h()},h(){m(t,"type","radio"),m(t,"name","report"),m(t,"class","w-6 h-6 svelte-1wjrpwl"),t.value=n[14],m(s,"class","flex gap-2 items-center text-white text-sm leading-4 font-medium"),m(e,"class","flex gap-2 py-2")},m(u,_){S(u,e,_),w(e,t),w(e,l),w(e,s),w(s,i),w(e,a),o||(f=X(t,"change",n[7]),o=!0)},p:K,d(u){u&&p(e),o=!1,f()}}}function pt(n){let e,t,l,s;return{c(){e=T("div"),t=T("textarea"),this.h()},l(r){e=D(r,"DIV",{class:!0});var i=R(e);t=D(i,"TEXTAREA",{class:!0,placeholder:!0}),R(t).forEach(p),i.forEach(p),this.h()},h(){m(t,"class","w-full p-3.5 border-0 rounded-[0.25rem] bg-[#2C2C2E] text-white placeholder:text-[#757D86] text-sm font-normal"),m(t,"placeholder","이 게시물을 신고하는 다른 이유가 있다면 자유롭게 적어주세요. (선택)"),m(e,"class","px-5 py-2.5")},m(r,i){S(r,e,i),w(e,t),nt(t,n[2]),l||(s=X(t,"input",n[8]),l=!0)},p(r,i){i&4&&nt(t,r[2])},d(r){r&&p(e),l=!1,s()}}}function gn(n){let e,t,l="게시물 신고 사유",s,r,i,a,o,f,u="취소",_,v,E="신고",V,C,h=de(n[3]),d=[];for(let y=0;y<h.length;y+=1)d[y]=mt(ht(n,h,y));let k=n[1]==="etc"&&pt(n);return{c(){e=T("div"),t=T("heading"),t.textContent=l,s=j(),r=T("div");for(let y=0;y<d.length;y+=1)d[y].c();i=j(),k&&k.c(),a=j(),o=T("div"),f=T("button"),f.textContent=u,_=j(),v=T("button"),v.textContent=E,this.h()},l(y){e=D(y,"DIV",{class:!0});var L=R(e);t=D(L,"HEADING",{class:!0,"data-svelte-h":!0}),ee(t)!=="svelte-z3puxq"&&(t.textContent=l),s=Y(L),r=D(L,"DIV",{class:!0});var x=R(r);for(let F=0;F<d.length;F+=1)d[F].l(x);x.forEach(p),i=Y(L),k&&k.l(L),a=Y(L),o=D(L,"DIV",{class:!0});var A=R(o);f=D(A,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(f)!=="svelte-xb8aop"&&(f.textContent=u),_=Y(A),v=D(A,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(v)!=="svelte-1fehi46"&&(v.textContent=E),A.forEach(p),L.forEach(p),this.h()},h(){m(t,"class","px-5 py-2.5 font-semibold text-white text-[0.9375rem]"),m(r,"class","px-5"),m(f,"class","bg-[#2C2C2E] w-full px-5 py-2.5 rounded-[3.125rem] flex justify-center items-center text-[#F1F1F1] text-sm"),m(v,"class","bg-[#2C2C2E] w-full px-5 py-2.5 rounded-[3.125rem] flex justify-center items-center text-[#FF4F1E] text-sm"),m(o,"class","flex gap-2.5 w-full px-5 py-2.5 justify-between"),m(e,"class","flex flex-col gap-2.5")},m(y,L){S(y,e,L),w(e,t),w(e,s),w(e,r);for(let x=0;x<d.length;x+=1)d[x]&&d[x].m(r,null);w(e,i),k&&k.m(e,null),w(e,a),w(e,o),w(o,f),w(o,_),w(o,v),V||(C=[X(f,"click",n[9]),X(v,"click",n[4]),Ae(ze.call(null,e))],V=!0)},p(y,L){if(L&10){h=de(y[3]);let x;for(x=0;x<h.length;x+=1){const A=ht(y,h,x);d[x]?d[x].p(A,L):(d[x]=mt(A),d[x].c(),d[x].m(r,null))}for(;x<d.length;x+=1)d[x].d(1);d.length=h.length}y[1]==="etc"?k?k.p(y,L):(k=pt(y),k.c(),k.m(e,a)):k&&(k.d(1),k=null)},d(y){y&&p(e),Nt(d,y),k&&k.d(),V=!1,ve(C)}}}function bn(n){let e,t,l;function s(i){n[10](i)}let r={noHandle:!0,fixed:!0,$$slots:{default:[gn]},$$scope:{ctx:n}};return n[0]!==void 0&&(r.isOpen=n[0]),e=new Yt({props:r}),De.push(()=>Re(e,"isOpen",s)),{c(){Z(e.$$.fragment)},l(i){G(e.$$.fragment,i)},m(i,a){W(e,i,a),l=!0},p(i,[a]){const o={};a&262151&&(o.$$scope={dirty:a,ctx:i}),!t&&a&1&&(t=!0,o.isOpen=i[0],Oe(()=>t=!1)),e.$set(o)},i(i){l||(I(e.$$.fragment,i),l=!0)},o(i){O(e.$$.fragment,i),l=!1},d(i){J(e,i)}}}function vn(n,e,t){const l=Ge();let{isOpen:s}=e,{selectedValue:r=""}=e,{targetTable:i=""}=e,{targetIdx:a=""}=e;const o=[{text:"스팸, 사기 또는 악용",value:"spam"},{text:"허위 정보",value:"false"},{text:"부적절한 내용",value:"inappropriate"},{text:"저작권 침해",value:"copyright"},{text:"개인정보 유출 또는 사생활 침해",value:"privacy"},{text:"폭력, 혐오 또는 학대",value:"violence"},{text:"불법 행위 조장",value:"illegal"},{text:"성적 행위",value:"sexual"},{text:"아동 학대 및 착취",value:"child"},{text:"기타",value:"etc"}];let f="",u=!1;async function _(){const h=o.findIndex(d=>d.value===r);if(h===-1){alert("신고 사유를 선택해주세요.");return}if(!u){u=!0,_e.emit("loading",!0);try{const d=o[h],k=new URL(`${Le}/auth/permissions`);k.searchParams.set("targetTable",i),k.searchParams.set("targetIdx",a),k.searchParams.set("relation","reported"),k.searchParams.set("subjectTable","users"),k.searchParams.set("subjectIdx",qt().sub),k.searchParams.set("metadata",JSON.stringify({...d,customReason:f})),t(0,s=!1),t(2,f=""),await fetch(k,{method:"PUT",headers:{Authorization:`Bearer ${Ue()}`}}),l("reported")}finally{u=!1,_e.emit("loading",!1)}}}const v=h=>{t(1,r=h.target.value)};function E(){f=this.value,t(2,f)}const V=()=>{t(0,s=!1)};function C(h){s=h,t(0,s)}return n.$$set=h=>{"isOpen"in h&&t(0,s=h.isOpen),"selectedValue"in h&&t(1,r=h.selectedValue),"targetTable"in h&&t(5,i=h.targetTable),"targetIdx"in h&&t(6,a=h.targetIdx)},[s,r,f,o,_,i,a,v,E,V,C]}class wn extends fe{constructor(e){super(),ue(this,e,vn,bn,oe,{isOpen:0,selectedValue:1,targetTable:5,targetIdx:6})}}function _t(n){let e,t,l,s="이 게시물을 신고해 주셔서 감사합니다.",r,i,a="신고 취소하기",o,f;return{c(){e=T("div"),t=T("div"),l=T("div"),l.textContent=s,r=j(),i=T("div"),i.textContent=a,this.h()},l(u){e=D(u,"DIV",{class:!0});var _=R(e);t=D(_,"DIV",{class:!0});var v=R(t);l=D(v,"DIV",{class:!0,"data-svelte-h":!0}),ee(l)!=="svelte-179ijsk"&&(l.textContent=s),r=Y(v),i=D(v,"DIV",{class:!0,"data-svelte-h":!0}),ee(i)!=="svelte-1haiztv"&&(i.textContent=a),v.forEach(p),_.forEach(p),this.h()},h(){m(l,"class","text-white text-[0.9375rem] font-semibold"),m(i,"class","text-primary-500 text-sm font-medium pointer-events-auto cursor-pointer"),m(t,"class","flex flex-col gap-2.5 items-center justify-center w-full h-full"),m(e,"class","fixed w-screen h-screen bg-black/80 backdrop-blur-[5px] z-10")},m(u,_){S(u,e,_),w(e,t),w(t,l),w(t,r),w(t,i),o||(f=X(i,"click",n[1]),o=!0)},p:K,d(u){u&&p(e),o=!1,f()}}}function kn(n){let e,t=n[0]&&_t(n);return{c(){t&&t.c(),e=ne()},l(l){t&&t.l(l),e=ne()},m(l,s){t&&t.m(l,s),S(l,e,s)},p(l,[s]){l[0]?t?t.p(l,s):(t=_t(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:K,o:K,d(l){l&&p(e),t&&t.d(l)}}}function Cn(n,e,t){const l=Ge();let{isVisible:s=!1}=e,{targetTable:r=""}=e,{targetIdx:i=""}=e,a=!1;async function o(){if(a!==!0){a=!0,_e.emit("loading",!0);try{const f=new URL(`${Le}/auth/permissions`);f.searchParams.set("targetTable",r),f.searchParams.set("targetIdx",i),f.searchParams.set("relation","reported"),f.searchParams.set("subjectTable","users"),f.searchParams.set("subjectIdx",qt().sub),await fetch(f,{method:"DELETE",headers:{Authorization:`Bearer ${Ue()}`}}),t(0,s=!1),l("unreported")}finally{a=!1,_e.emit("loading",!1)}}}return n.$$set=f=>{"isVisible"in f&&t(0,s=f.isVisible),"targetTable"in f&&t(2,r=f.targetTable),"targetIdx"in f&&t(3,i=f.targetIdx)},[s,o,r,i]}class xn extends fe{constructor(e){super(),ue(this,e,Cn,kn,oe,{isVisible:0,targetTable:2,targetIdx:3})}}function gt(n,e,t){const l=n.slice();return l[79]=e[t],l[80]=e,l[81]=t,l}function bt(n,e,t){const l=n.slice();return l[82]=e[t],l}function vt(n,e,t){const l=n.slice();return l[85]=e[t],l[87]=t,l}function wt(n){let e,t,l;return{c(){e=T("div"),this.h()},l(s){e=D(s,"DIV",{class:!0}),R(e).forEach(p),this.h()},h(){m(e,"class","fixed top-0 left-0 w-screen h-screen bg-black")},m(s,r){S(s,e,r),t||(l=X(e,"contextmenu",kl(n[24])),t=!0)},d(s){s&&p(e),t=!1,l()}}}function kt(n){let e,t,l,s=[],r=new Map,i,a,o,f,u,_,v,E=de(n[79].media);const V=h=>h[85];for(let h=0;h<E.length;h+=1){let d=vt(n,E,h),k=V(d);r.set(k,s[h]=Ct(k,d))}let C=!n[5]&&xt(n);return{c(){e=T("section"),t=T("div"),l=T("div");for(let h=0;h<s.length;h+=1)s[h].c();a=j(),C&&C.c(),o=j(),this.h()},l(h){e=D(h,"SECTION",{class:!0,style:!0});var d=R(e);t=D(d,"DIV",{class:!0});var k=R(t);l=D(k,"DIV",{class:!0,style:!0});var y=R(l);for(let L=0;L<s.length;L+=1)s[L].l(y);y.forEach(p),k.forEach(p),a=Y(d),C&&C.l(d),o=Y(d),d.forEach(p),this.h()},h(){m(l,"class",i="carousel-track flex w-full h-full select-none transition-transform duration-300 ease-in-out "+(n[9]?"duration-0 transition-duration-0":"")),$(l,"transform","translateX("+(-n[79].mediaIdx*n[12].width+n[11])+"px)"),m(t,"class","carousel-container w-full h-full overflow-hidden relative select-none"),m(e,"class",f=`w-full h-full absolute content-center transition-transform
            ${n[9]?"duration-0 transition-duration-0":""}`),$(e,"top","0"),$(e,"transform","translateY("+((n[81]-n[1])*n[12].height+n[10])+"px)")},m(h,d){S(h,e,d),w(e,t),w(t,l);for(let k=0;k<s.length;k+=1)s[k]&&s[k].m(l,null);w(e,a),C&&C.m(e,null),w(e,o),u=!0,_||(v=[X(l,"transitionend",function(){He(n[79].mediaIdx===n[0][n[1]].mediaIdx?n[15]:void 0)&&(n[79].mediaIdx===n[0][n[1]].mediaIdx?n[15]:void 0).apply(this,arguments)}),X(e,"transitionend",function(){He(n[81]===n[1]?n[15]:void 0)&&(n[81]===n[1]?n[15]:void 0).apply(this,arguments)})],_=!0)},p(h,d){n=h,d[0]&35&&(E=de(n[79].media),te(),s=We(s,d,V,1,n,E,r,l,St,Ct,null,vt),le()),(!u||d[0]&512&&i!==(i="carousel-track flex w-full h-full select-none transition-transform duration-300 ease-in-out "+(n[9]?"duration-0 transition-duration-0":"")))&&m(l,"class",i),(!u||d[0]&6145)&&$(l,"transform","translateX("+(-n[79].mediaIdx*n[12].width+n[11])+"px)"),n[5]?C&&(te(),O(C,1,1,()=>{C=null}),le()):C?(C.p(n,d),d[0]&32&&I(C,1)):(C=xt(n),C.c(),I(C,1),C.m(e,o)),(!u||d[0]&512&&f!==(f=`w-full h-full absolute content-center transition-transform
            ${n[9]?"duration-0 transition-duration-0":""}`))&&m(e,"class",f),(!u||d[0]&5123)&&$(e,"transform","translateY("+((n[81]-n[1])*n[12].height+n[10])+"px)")},i(h){if(!u){for(let d=0;d<E.length;d+=1)I(s[d]);I(C),u=!0}},o(h){for(let d=0;d<s.length;d+=1)O(s[d]);O(C),u=!1},d(h){h&&p(e);for(let d=0;d<s.length;d+=1)s[d].d();C&&C.d(),_=!1,ve(v)}}}function Ct(n,e){let t,l,s,r,i,a;return s=new Yl({props:{src:e[85],isEdit:e[5],post:e[0][e[1]],autoplay:e[1]===e[81]&&e[0][e[1]].mediaIdx===e[87],isRightOrderForYoutube:e[1]===e[81]}}),{key:n,first:null,c(){t=T("div"),l=T("div"),Z(s.$$.fragment),i=j(),this.h()},l(o){t=D(o,"DIV",{class:!0});var f=R(t);l=D(f,"DIV",{class:!0});var u=R(l);G(s.$$.fragment,u),u.forEach(p),i=Y(f),f.forEach(p),this.h()},h(){m(l,"class",r=`
                      w-full h-full flex justify-center items-center relative
                      ${e[5]?"px-5 pt-5 pb-3":""}
                    `),m(t,"class","carousel-slide flex justify-center items-center min-w-full h-full select-none"),this.first=t},m(o,f){S(o,t,f),w(t,l),W(s,l,null),w(t,i),a=!0},p(o,f){e=o;const u={};f[0]&1&&(u.src=e[85]),f[0]&32&&(u.isEdit=e[5]),f[0]&3&&(u.post=e[0][e[1]]),f[0]&3&&(u.autoplay=e[1]===e[81]&&e[0][e[1]].mediaIdx===e[87]),f[0]&3&&(u.isRightOrderForYoutube=e[1]===e[81]),s.$set(u),(!a||f[0]&32&&r!==(r=`
                      w-full h-full flex justify-center items-center relative
                      ${e[5]?"px-5 pt-5 pb-3":""}
                    `))&&m(l,"class",r)},i(o){a||(I(s.$$.fragment,o),a=!0)},o(o){O(s.$$.fragment,o),a=!1},d(o){o&&p(t),J(s)}}}function xt(n){var F;let e,t,l,s,r,i,a,o,f,u,_,v,E,V,C,h=n[79].media.length>1&&It(n),d=((F=n[79].reactions)==null?void 0:F.length)>0&&!n[7]&&Et(n);function k(b){n[26](b,n[79],n[80],n[81])}let y={};n[79]!==void 0&&(y.post=n[79]),r=new Zl({props:y}),De.push(()=>Re(r,"post",k));function L(...b){return n[27](n[79],n[80],n[81],...b)}o=new fn({props:{post:n[79]}}),o.$on("textExpanded",L),u=new $l({props:{place:{idx:n[79].place_idx,name:n[79].place_name}}});let x=!n[7]&&Tt(n),A=n[1]===n[81]&&Mt(n);return{c(){h&&h.c(),e=j(),t=T("div"),l=T("div"),d&&d.c(),s=j(),Z(r.$$.fragment),a=j(),Z(o.$$.fragment),f=j(),Z(u.$$.fragment),v=j(),x&&x.c(),E=j(),A&&A.c(),V=ne(),this.h()},l(b){h&&h.l(b),e=Y(b),t=D(b,"DIV",{class:!0});var B=R(t);l=D(B,"DIV",{class:!0,style:!0});var z=R(l);d&&d.l(z),s=Y(z),G(r.$$.fragment,z),a=Y(z),G(o.$$.fragment,z),f=Y(z),G(u.$$.fragment,z),z.forEach(p),v=Y(B),x&&x.l(B),B.forEach(p),E=Y(b),A&&A.l(b),V=ne(),this.h()},h(){m(l,"class","relative flex-grow text-white text-md flex flex-col items-start gap-2 transition-transform text-base "),m(l,"style",_=`transform: translateY(${n[6]}px);`),m(t,"class","absolute bottom-4 px-5 py-4 w-full flex flex-row z-40 items-end justify-between")},m(b,B){h&&h.m(b,B),S(b,e,B),S(b,t,B),w(t,l),d&&d.m(l,null),w(l,s),W(r,l,null),w(l,a),W(o,l,null),w(l,f),W(u,l,null),w(t,v),x&&x.m(t,null),S(b,E,B),A&&A.m(b,B),S(b,V,B),C=!0},p(b,B){var se;n=b,n[79].media.length>1?h?(h.p(n,B),B[0]&1&&I(h,1)):(h=It(n),h.c(),I(h,1),h.m(e.parentNode,e)):h&&(te(),O(h,1,1,()=>{h=null}),le()),((se=n[79].reactions)==null?void 0:se.length)>0&&!n[7]?d?(d.p(n,B),B[0]&129&&I(d,1)):(d=Et(n),d.c(),I(d,1),d.m(l,s)):d&&(te(),O(d,1,1,()=>{d=null}),le());const z={};!i&&B[0]&1&&(i=!0,z.post=n[79],Oe(()=>i=!1)),r.$set(z);const Q={};B[0]&1&&(Q.post=n[79]),o.$set(Q);const re={};B[0]&1&&(re.place={idx:n[79].place_idx,name:n[79].place_name}),u.$set(re),(!C||B[0]&64&&_!==(_=`transform: translateY(${n[6]}px);`))&&m(l,"style",_),n[7]?x&&(te(),O(x,1,1,()=>{x=null}),le()):x?(x.p(n,B),B[0]&128&&I(x,1)):(x=Tt(n),x.c(),I(x,1),x.m(t,null)),n[1]===n[81]?A?(A.p(n,B),B[0]&3&&I(A,1)):(A=Mt(n),A.c(),I(A,1),A.m(V.parentNode,V)):A&&(te(),O(A,1,1,()=>{A=null}),le())},i(b){C||(I(h),I(d),I(r.$$.fragment,b),I(o.$$.fragment,b),I(u.$$.fragment,b),I(x),I(A),C=!0)},o(b){O(h),O(d),O(r.$$.fragment,b),O(o.$$.fragment,b),O(u.$$.fragment,b),O(x),O(A),C=!1},d(b){b&&(p(e),p(t),p(E),p(V)),h&&h.d(b),d&&d.d(),J(r),J(o),J(u),x&&x.d(),A&&A.d(b)}}}function It(n){let e,t;return e=new Ft({props:{post:n[79]}}),{c(){Z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){W(e,l,s),t=!0},p(l,s){const r={};s[0]&1&&(r.post=l[79]),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Et(n){let e,t,l=de(n[79].reactions),s=[];for(let i=0;i<l.length;i+=1)s[i]=yt(bt(n,l,i));const r=i=>O(s[i],1,1,()=>{s[i]=null});return{c(){e=T("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=D(i,"DIV",{class:!0});var a=R(e);for(let o=0;o<s.length;o+=1)s[o].l(a);a.forEach(p),this.h()},h(){m(e,"class","flex gap-1 justify-center items-center mb-1")},m(i,a){S(i,e,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(i,a){if(a[0]&131073){l=de(i[79].reactions);let o;for(o=0;o<l.length;o+=1){const f=bt(i,l,o);s[o]?(s[o].p(f,a),I(s[o],1)):(s[o]=yt(f),s[o].c(),I(s[o],1),s[o].m(e,null))}for(te(),o=l.length;o<s.length;o+=1)r(o);le()}},i(i){if(!t){for(let a=0;a<l.length;a+=1)I(s[a]);t=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)O(s[a]);t=!1},d(i){i&&p(e),Nt(s,i)}}}function yt(n){let e,t;function l(){return n[25](n[79],n[82])}return e=new jt({props:{gap:"gap-0.5",textColor:"text-white",backgroundColor:"bg-[rgba(56,56,56,0.7)]",fill:"white",padding:"px-2.5 py-1.5",prefixTextSize:"text-[0.9375rem] leading-normal font-medium",prefix:n[82].type,textSize:"text-[0.8125rem] leading-[1.25rem]",value:n[82].count,height:"h-7",rounded:"rounded-[3.75rem]"}}),e.$on("click",l),{c(){Z(e.$$.fragment)},l(s){G(e.$$.fragment,s)},m(s,r){W(e,s,r),t=!0},p(s,r){n=s;const i={};r[0]&1&&(i.prefix=n[82].type),r[0]&1&&(i.value=n[82].count),e.$set(i)},i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){O(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function Tt(n){var F;let e,t,l,s,r,i,a,o,f=((F=n[79].reactions)!=null&&F.length?n[79].reactions.reduce(n[33],0):0)+"",u,_,v,E,V,C,h,d=n[79].onReactionShowcase&&Dt(n);const k=[En,In],y=[];function L(b,B){return b[79].myReaction?0:1}r=L(n),i=y[r]=k[r](n);function x(){return n[34](n[79])}function A(){return n[35](n[79],n[80],n[81])}return E=new Al({props:{fill:"white",length:1.5}}),{c(){e=T("div"),t=T("div"),d&&d.c(),l=j(),s=T("button"),i.c(),a=j(),o=T("span"),u=ge(f),_=j(),v=T("button"),Z(E.$$.fragment),this.h()},l(b){e=D(b,"DIV",{class:!0});var B=R(e);t=D(B,"DIV",{class:!0});var z=R(t);d&&d.l(z),l=Y(z),s=D(z,"BUTTON",{class:!0});var Q=R(s);i.l(Q),a=Y(Q),o=D(Q,"SPAN",{class:!0});var re=R(o);u=be(re,f),re.forEach(p),Q.forEach(p),z.forEach(p),_=Y(B),v=D(B,"BUTTON",{});var se=R(v);G(E.$$.fragment,se),se.forEach(p),B.forEach(p),this.h()},h(){m(o,"class","text-xs text-white h-4"),m(s,"class","relative bg-transparent flex flex-col gap-[0.3125rem] items-center justify-center"),m(t,"class","flex gap-4 relative"),m(e,"class","flex-shrink flex flex-col gap-4 pl-8")},m(b,B){S(b,e,B),w(e,t),d&&d.m(t,null),w(t,l),w(t,s),y[r].m(s,null),w(s,a),w(s,o),w(o,u),w(e,_),w(e,v),W(E,v,null),V=!0,C||(h=[X(s,"click",x),Ae(ze.call(null,s)),Ae(Rl.call(null,s,500)),X(s,"longpress",A),X(v,"click",n[36])],C=!0)},p(b,B){var Q;n=b,n[79].onReactionShowcase?d?d.p(n,B):(d=Dt(n),d.c(),d.m(t,l)):d&&(d.d(1),d=null);let z=r;r=L(n),r!==z&&(te(),O(y[z],1,1,()=>{y[z]=null}),le(),i=y[r],i||(i=y[r]=k[r](n),i.c()),I(i,1),i.m(s,a)),(!V||B[0]&1)&&f!==(f=((Q=n[79].reactions)!=null&&Q.length?n[79].reactions.reduce(n[33],0):0)+"")&&Ne(u,f)},i(b){V||(I(i),I(E.$$.fragment,b),V=!0)},o(b){O(i),O(E.$$.fragment,b),V=!1},d(b){b&&p(e),d&&d.d(),y[r].d(),J(E),C=!1,ve(h)}}}function Dt(n){let e,t,l="👍",s,r,i="🔥",a,o,f="😍",u,_,v="😋",E,V,C="😊️️",h,d;function k(){return n[28](n[79])}function y(){return n[29](n[79])}function L(){return n[30](n[79])}function x(){return n[31](n[79])}function A(){return n[32](n[79])}return{c(){e=T("div"),t=T("button"),t.textContent=l,s=j(),r=T("button"),r.textContent=i,a=j(),o=T("button"),o.textContent=f,u=j(),_=T("button"),_.textContent=v,E=j(),V=T("button"),V.textContent=C,this.h()},l(F){e=D(F,"DIV",{class:!0});var b=R(e);t=D(b,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(t)!=="svelte-3oecln"&&(t.textContent=l),s=Y(b),r=D(b,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(r)!=="svelte-131qbu2"&&(r.textContent=i),a=Y(b),o=D(b,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(o)!=="svelte-lq90i3"&&(o.textContent=f),u=Y(b),_=D(b,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(_)!=="svelte-l73y87"&&(_.textContent=v),E=Y(b),V=D(b,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(V)!=="svelte-11szxsj"&&(V.textContent=C),b.forEach(p),this.h()},h(){m(t,"class","text-2xl/[26px]"),m(r,"class","text-2xl/[26px]"),m(o,"class","text-2xl/[26px]"),m(_,"class","text-2xl/[26px]"),m(V,"class","text-2xl/[26px]"),m(e,"class","absolute right-10 bottom-2.5 bg-[rgba(56,56,56,0.7)] px-5 py-2 rounded-[3.75rem] flex gap-4 items-center justify-center backdrop-blur-[2px] pointer-events-auto text-white text-[1.375rem] leading-normal font-medium ")},m(F,b){S(F,e,b),w(e,t),w(e,s),w(e,r),w(e,a),w(e,o),w(e,u),w(e,_),w(e,E),w(e,V),h||(d=[X(t,"click",k),X(r,"click",y),X(o,"click",L),X(_,"click",x),X(V,"click",A)],h=!0)},p(F,b){n=F},d(F){F&&p(e),h=!1,ve(d)}}}function In(n){let e,t;return e=new Pl({props:{fill:"white",length:1.5}}),{c(){Z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){W(e,l,s),t=!0},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function En(n){let e,t;return e=new Ol({props:{fill:"#EA3323",length:1.5}}),{c(){Z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){W(e,l,s),t=!0},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Mt(n){let e,t;return e=new mn({props:{isTextExpanded:n[79].isTextExpanded}}),{c(){Z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){W(e,l,s),t=!0},p(l,s){const r={};s[0]&1&&(r.isTextExpanded=l[79].isTextExpanded),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Vt(n,e){let t,l=Math.abs(e[1]-e[81])<=1,s,r,i=l&&kt(e);return{key:n,first:null,c(){t=ne(),i&&i.c(),s=ne(),this.h()},l(a){t=ne(),i&&i.l(a),s=ne(),this.h()},h(){this.first=t},m(a,o){S(a,t,o),i&&i.m(a,o),S(a,s,o),r=!0},p(a,o){e=a,o[0]&3&&(l=Math.abs(e[1]-e[81])<=1),l?i?(i.p(e,o),o[0]&3&&I(i,1)):(i=kt(e),i.c(),I(i,1),i.m(s.parentNode,s)):i&&(te(),O(i,1,1,()=>{i=null}),le())},i(a){r||(I(i),r=!0)},o(a){O(i),r=!1},d(a){a&&(p(t),p(s)),i&&i.d(a)}}}function Bt(n){let e,t;return e=new Ft({props:{post:n[0][n[1]],fixed:!1}}),{c(){Z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){W(e,l,s),t=!0},p(l,s){const r={};s[0]&3&&(r.post=l[0][l[1]]),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Pt(n){let e,t;return e=new Bl({}),{c(){Z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){W(e,l,s),t=!0},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Ot(n){let e,t,l,s,r="수정",i,a,o,f,u,_="삭제",v,E,V;return t=new ln({props:{fill:"white",length:1.5}}),o=new rn({props:{fill:"white",length:1.5}}),{c(){e=T("button"),Z(t.$$.fragment),l=j(),s=T("span"),s.textContent=r,i=j(),a=T("button"),Z(o.$$.fragment),f=j(),u=T("span"),u.textContent=_,this.h()},l(C){e=D(C,"BUTTON",{class:!0});var h=R(e);G(t.$$.fragment,h),l=Y(h),s=D(h,"SPAN",{"data-svelte-h":!0}),ee(s)!=="svelte-17aljrl"&&(s.textContent=r),h.forEach(p),i=Y(C),a=D(C,"BUTTON",{class:!0});var d=R(a);G(o.$$.fragment,d),f=Y(d),u=D(d,"SPAN",{"data-svelte-h":!0}),ee(u)!=="svelte-1k1dgz"&&(u.textContent=_),d.forEach(p),this.h()},h(){m(e,"class","flex items-center gap-2 text-white text-sm"),m(a,"class","flex items-center gap-2 text-white text-sm")},m(C,h){S(C,e,h),W(t,e,null),w(e,l),w(e,s),S(C,i,h),S(C,a,h),W(o,a,null),w(a,f),w(a,u),v=!0,E||(V=[X(e,"click",n[38]),X(a,"click",n[39])],E=!0)},p:K,i(C){v||(I(t.$$.fragment,C),I(o.$$.fragment,C),v=!0)},o(C){O(t.$$.fragment,C),O(o.$$.fragment,C),v=!1},d(C){C&&(p(e),p(i),p(a)),J(t),J(o),E=!1,ve(V)}}}function Rt(n){let e,t,l,s,r,i;return t=new Jl({}),{c(){e=T("button"),Z(t.$$.fragment),l=ge(`
        신고`),this.h()},l(a){e=D(a,"BUTTON",{class:!0});var o=R(e);G(t.$$.fragment,o),l=be(o,`
        신고`),o.forEach(p),this.h()},h(){m(e,"class","flex gap-2 items-center text-white text-sm leading-4 font-medium")},m(a,o){S(a,e,o),W(t,e,null),w(e,l),s=!0,r||(i=X(e,"click",n[41]),r=!0)},p:K,i(a){s||(I(t.$$.fragment,a),s=!0)},o(a){O(t.$$.fragment,a),s=!1},d(a){a&&p(e),J(t),r=!1,i()}}}function yn(n){let e,t,l,s,r,i,a,o,f,u=n[14]&&Ot(n);s=new Fl({props:{length:1.5,fill:"white"}});let _=!n[14]&&Rt(n);return{c(){e=T("div"),u&&u.c(),t=j(),l=T("button"),Z(s.$$.fragment),r=ge(`
      프로필 URL 복사`),i=j(),_&&_.c(),this.h()},l(v){e=D(v,"DIV",{id:!0,class:!0});var E=R(e);u&&u.l(E),t=Y(E),l=D(E,"BUTTON",{class:!0});var V=R(l);G(s.$$.fragment,V),r=be(V,`
      프로필 URL 복사`),V.forEach(p),i=Y(E),_&&_.l(E),E.forEach(p),this.h()},h(){m(l,"class","flex gap-2 items-center text-white text-sm leading-4 font-medium"),m(e,"id","test"),m(e,"class","flex flex-col px-5 gap-3")},m(v,E){S(v,e,E),u&&u.m(e,null),w(e,t),w(e,l),W(s,l,null),w(l,r),w(e,i),_&&_.m(e,null),a=!0,o||(f=[X(l,"click",n[40]),Ae(ze.call(null,e))],o=!0)},p(v,E){v[14]?u?(u.p(v,E),E[0]&16384&&I(u,1)):(u=Ot(v),u.c(),I(u,1),u.m(e,t)):u&&(te(),O(u,1,1,()=>{u=null}),le()),v[14]?_&&(te(),O(_,1,1,()=>{_=null}),le()):_?(_.p(v,E),E[0]&16384&&I(_,1)):(_=Rt(v),_.c(),I(_,1),_.m(e,null))},i(v){a||(I(u),I(s.$$.fragment,v),I(_),a=!0)},o(v){O(u),O(s.$$.fragment,v),O(_),a=!1},d(v){v&&p(e),u&&u.d(),J(s),_&&_.d(),o=!1,ve(f)}}}function Tn(n){let e,t,l="정말로 삭제하시겠습니까?",s,r,i="이 작업은 취소할 수 없습니다. 계속 진행하시겠습니까?",a,o,f,u="삭제",_,v,E="취소",V,C;return{c(){e=T("div"),t=T("h2"),t.textContent=l,s=j(),r=T("p"),r.textContent=i,a=j(),o=T("div"),f=T("button"),f.textContent=u,_=j(),v=T("button"),v.textContent=E,this.h()},l(h){e=D(h,"DIV",{class:!0});var d=R(e);t=D(d,"H2",{class:!0,"data-svelte-h":!0}),ee(t)!=="svelte-1yzhdkj"&&(t.textContent=l),s=Y(d),r=D(d,"P",{class:!0,"data-svelte-h":!0}),ee(r)!=="svelte-26p028"&&(r.textContent=i),a=Y(d),o=D(d,"DIV",{class:!0});var k=R(o);f=D(k,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(f)!=="svelte-1q4epan"&&(f.textContent=u),_=Y(k),v=D(k,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(v)!=="svelte-1rzg9yy"&&(v.textContent=E),k.forEach(p),d.forEach(p),this.h()},h(){m(t,"class","text-lg font-semibold mb-2"),m(r,"class","text-gray-600 mb-4"),m(f,"class","bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition"),m(v,"class","bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition"),m(o,"class","flex justify-center space-x-4"),m(e,"class","text-center")},m(h,d){S(h,e,d),w(e,t),w(e,s),w(e,r),w(e,a),w(e,o),w(o,f),w(o,_),w(o,v),V||(C=[X(f,"click",n[46]),X(v,"click",n[47])],V=!0)},p:K,d(h){h&&p(e),V=!1,ve(C)}}}function Dn(n){var ae;let e,t,l,s=[],r=new Map,i,a,o,f,u,_,v,E,V,C,h,d,k,y,L,x=!n[5]&&wt(n),A=de(n[0]);const F=g=>g[79].idx;for(let g=0;g<A.length;g+=1){let M=gt(n,A,g),H=F(M);r.set(H,s[g]=Vt(H,M))}let b=n[5]&&((ae=n[0][n[1]])==null?void 0:ae.media.length)>1&&Bt(n),B=!n[5]&&Pt();function z(g){n[42](g)}let Q={fixed:!0,noHandle:!0,$$slots:{default:[yn]},$$scope:{ctx:n}};n[2]!==void 0&&(Q.isOpen=n[2]),u=new Yt({props:Q}),De.push(()=>Re(u,"isOpen",z));function re(g){n[43](g)}let se={targetTable:"posts",targetIdx:n[0][n[1]].idx};n[3]!==void 0&&(se.isOpen=n[3]),E=new wn({props:se}),De.push(()=>Re(E,"isOpen",re)),E.$on("reported",n[44]),h=new xn({props:{isVisible:n[0][n[1]].permission_signer==="reported",targetTable:"posts",targetIdx:n[0][n[1]].idx}}),h.$on("unreported",n[45]);function he(g){n[48](g)}let we={$$slots:{default:[Tn]},$$scope:{ctx:n}};return n[4]!==void 0&&(we.modalVisible=n[4]),k=new Nl({props:we}),De.push(()=>Re(k,"modalVisible",he)),{c(){x&&x.c(),e=j(),t=T("div"),l=T("div");for(let g=0;g<s.length;g+=1)s[g].c();i=j(),b&&b.c(),a=j(),B&&B.c(),f=j(),Z(u.$$.fragment),v=j(),Z(E.$$.fragment),C=j(),Z(h.$$.fragment),d=j(),Z(k.$$.fragment),this.h()},l(g){x&&x.l(g),e=Y(g),t=D(g,"DIV",{class:!0});var M=R(t);l=D(M,"DIV",{class:!0});var H=R(l);for(let me=0;me<s.length;me+=1)s[me].l(H);H.forEach(p),i=Y(M),b&&b.l(M),a=Y(M),B&&B.l(M),M.forEach(p),f=Y(g),G(u.$$.fragment,g),v=Y(g),G(E.$$.fragment,g),C=Y(g),G(h.$$.fragment,g),d=Y(g),G(k.$$.fragment,g),this.h()},h(){m(l,"class","flex flex-grow relative w-full h-full bg-black"),m(t,"class",o="viewer bg-black select-none flex flex-col "+(n[5]?"static w-full h-full":"fixed top-0 left-0 w-screen h-screen safe-area-pt"))},m(g,M){x&&x.m(g,M),S(g,e,M),S(g,t,M),w(t,l);for(let H=0;H<s.length;H+=1)s[H]&&s[H].m(l,null);w(t,i),b&&b.m(t,null),w(t,a),B&&B.m(t,null),n[37](t),S(g,f,M),W(u,g,M),S(g,v,M),W(E,g,M),S(g,C,M),W(h,g,M),S(g,d,M),W(k,g,M),L=!0},p(g,M){var Se;g[5]?x&&(x.d(1),x=null):x||(x=wt(g),x.c(),x.m(e.parentNode,e)),M[0]&171751&&(A=de(g[0]),te(),s=We(s,M,F,1,g,A,r,l,St,Vt,null,gt),le()),g[5]&&((Se=g[0][g[1]])==null?void 0:Se.media.length)>1?b?(b.p(g,M),M[0]&35&&I(b,1)):(b=Bt(g),b.c(),I(b,1),b.m(t,a)):b&&(te(),O(b,1,1,()=>{b=null}),le()),g[5]?B&&(te(),O(B,1,1,()=>{B=null}),le()):B?M[0]&32&&I(B,1):(B=Pt(),B.c(),I(B,1),B.m(t,null)),(!L||M[0]&32&&o!==(o="viewer bg-black select-none flex flex-col "+(g[5]?"static w-full h-full":"fixed top-0 left-0 w-screen h-screen safe-area-pt")))&&m(t,"class",o);const H={};M[0]&16668|M[2]&67108864&&(H.$$scope={dirty:M,ctx:g}),!_&&M[0]&4&&(_=!0,H.isOpen=g[2],Oe(()=>_=!1)),u.$set(H);const me={};M[0]&3&&(me.targetIdx=g[0][g[1]].idx),!V&&M[0]&8&&(V=!0,me.isOpen=g[3],Oe(()=>V=!1)),E.$set(me);const Ve={};M[0]&3&&(Ve.isVisible=g[0][g[1]].permission_signer==="reported"),M[0]&3&&(Ve.targetIdx=g[0][g[1]].idx),h.$set(Ve);const Be={};M[0]&16|M[2]&67108864&&(Be.$$scope={dirty:M,ctx:g}),!y&&M[0]&16&&(y=!0,Be.modalVisible=g[4],Oe(()=>y=!1)),k.$set(Be)},i(g){if(!L){for(let M=0;M<A.length;M+=1)I(s[M]);I(b),I(B),I(u.$$.fragment,g),I(E.$$.fragment,g),I(h.$$.fragment,g),I(k.$$.fragment,g),L=!0}},o(g){for(let M=0;M<s.length;M+=1)O(s[M]);O(b),O(B),O(u.$$.fragment,g),O(E.$$.fragment,g),O(h.$$.fragment,g),O(k.$$.fragment,g),L=!1},d(g){g&&(p(e),p(t),p(f),p(v),p(C),p(d)),x&&x.d(g);for(let M=0;M<s.length;M+=1)s[M].d();b&&b.d(),B&&B.d(),n[37](null),J(u,g),J(E,g),J(h,g),J(k,g)}}}const Mn=30,Vn=10,Lt=150;function Pe(n){return"touches"in n||"changedTouches"in n}function Bn(n){return Pe(n)?[n.touches[0].clientX,n.touches[0].clientY]:[n.clientX,n.clientY]}function Pn(n,e,t){let l,s,r;vl(n,El,c=>t(8,r=c));let{posts:i=[]}=e,{index:a=0}=e,{type:o=r.url.searchParams.get("type")}=e,{isEdit:f=!1}=e,{dontMoveVertically:u=!1}=e,{keyboardY:_=0}=e,{selectedReaction:v=void 0}=e,{hideActionButtons:E=!1}=e,V=!0,C=!1,h=!1,d=0,k=0,y={width:0,height:0},L=!1,x=!1,{actionSheetMoreIsOpen:A=!1}=e,{actionSheetReportIsOpen:F=!1}=e,{modalVisible:b=!1}=e;function B(c){if(!c)return!1;const P=Me();return P!==null&&String(P)===c}let z=!1,Q=!1,re=-1,se=-1,he,we=!1,ae=[],g=[],M;async function H(){yl({mediaIdx:`${i[a].mediaIdx||0}`,postIdx:`${i[a].idx}`},{replace:!0})}async function me(){t(21,z=!0);const c=i.length,P=r.url.searchParams.get("userIdx"),N=r.url.searchParams.get("placeIdx"),q=`&offset=${c}`,U=`&limit=${Mn}`,ie=P?`&userIdx=${P}`:"",ye=N?`&placeIdx=${N}`:"",ce=(await fetch(`${Le}/posts?${ie}${ye}${q}${U}`).then(ke=>ke.json()).then(ke=>{var lt;return((lt=ke.data)==null?void 0:lt.posts)??[]})).map(ke=>({...ke,mediaIdx:0}));ce.length===0&&t(22,Q=!0),t(0,i=[...i,...ce]),t(21,z=!1)}function Ve(c){const{height:P}=y;if(a===0&&c>0||a===i.length-1&&c<0){t(10,d=c*.3);return}t(10,d=Math.max(Math.min(c,P),-P))}function Be(c){t(9,V=!1);const P=Ie(2),N=Pe(c)?c.changedTouches[0].clientY-se:c.clientY-se;N>P&&a>0?(t(1,a-=1),C=!0,H()):-N>P&&a<i.length-1&&(t(1,a+=1),C=!0,H()),t(10,d=0)}function Se(c){const{width:P}=y,N=i[a].mediaIdx,q=i[a].media.length-1;if(N===0&&c>0||N===q&&c<0){t(11,k=c*.3);return}t(11,k=Math.max(Math.min(c,P),-P))}function Ut(c){t(9,V=!1);const P=Ie(2),N=Pe(c)?c.changedTouches[0].clientX-re:c.clientX-re,q=i[a].mediaIdx,U=i[a].media.length-1;N>P&&q>0?Ee(q-1):-N>P&&q<U&&Ee(q+1),t(11,k=0)}function Ee(c){t(0,i[a]={...i[a],mediaIdx:c},i),t(0,i=[...i]),h=!0,H()}function qe(c){C||h||(we=!0,he=void 0,Pe(c)?(re=c.touches[0].clientX,se=c.touches[0].clientY):(re=c.clientX,se=c.clientY,window.addEventListener("mousemove",je,{passive:!1}),window.addEventListener("mouseup",Ye)))}function je(c){if(!we||C||h)return;const[P,N]=Bn(c),q=P-re,U=N-se;he===void 0&&(he=Math.abs(U)>=Math.abs(q)?"post":"media"),!u&&he==="post"?Ve(U):he==="media"&&Se(q)}function Ye(c){!we||C||h||(we=!1,he==="post"?Be(c):he==="media"&&Ut(c),Pe(c)||(window.removeEventListener("mousemove",je),window.removeEventListener("mouseup",Ye)))}function Je(c){if(C||h)return;c.preventDefault();const P=Date.now(),N=Math.abs(c.deltaX),q=Math.abs(c.deltaY);if(N>q){if(g.push({deltaX:c.deltaX,timestamp:P}),g=g.filter(U=>P-U.timestamp<=Lt),g.length>=2){const U=g[0],ie=g[g.length-1];if(Math.abs(ie.deltaX)-Math.abs(U.deltaX)>=0&&Math.abs(ie.deltaX)>=30){const ce=i[a].mediaIdx,ke=i[a].media.length-1;ie.deltaX>0&&ce<ke?Ee(ce+1):ie.deltaX<0&&ce>0&&Ee(ce-1),g=[],h=!0}}}else if(ae.push({deltaY:c.deltaY,timestamp:P}),ae=ae.filter(U=>P-U.timestamp<=Lt),ae.length>=2){const U=ae[0],ie=ae[ae.length-1];Math.abs(ie.deltaY)-Math.abs(U.deltaY)>=0&&Math.abs(ie.deltaY)>=30&&(ie.deltaY>0&&a<i.length-1?(t(9,V=!1),t(1,a+=1),H(),C=!0):ie.deltaY<0&&a>0&&(t(9,V=!1),t(1,a-=1),H(),C=!0),ae=[])}}function Ke(c){if(C||h)return;const P=i[a].mediaIdx,N=i[a].media.length-1;switch(c.key){case"ArrowUp":a>0&&(t(9,V=!1),t(1,a--,a),C=!0,H());break;case"ArrowDown":a<i.length-1&&(t(9,V=!1),t(1,a++,a),C=!0,H());break;case"ArrowLeft":P>0&&(t(9,V=!1),h=!0,Ee(P-1));break;case"ArrowRight":P<N&&(t(9,V=!1),h=!0,Ee(P+1));break}}function zt(){t(9,V=!0),C=!1,h=!1}function Qe(){M&&t(12,y={width:M.clientWidth,height:M.clientHeight})}function Xt(){var N,q;const c=Number(r.url.searchParams.get("mediaIdx")||0),P=((q=(N=i.at(a))==null?void 0:N.media)==null?void 0:q.length)||0;c&&c<P?t(0,i[a]={...i[a],mediaIdx:c},i):t(0,i[a]={...i[a],mediaIdx:0},i),t(0,i=[...i]),H()}function Ht(){document.addEventListener("touchstart",qe,{passive:!1}),document.addEventListener("touchmove",je,{passive:!1}),document.addEventListener("touchend",Ye),document.addEventListener("mousedown",qe,{passive:!1}),document.addEventListener("wheel",Je,{passive:!1}),document.addEventListener("keydown",Ke)}function Zt(){document.removeEventListener("touchstart",qe),document.removeEventListener("touchmove",je),document.removeEventListener("touchend",Ye),document.removeEventListener("mousedown",qe),document.removeEventListener("wheel",Je),document.removeEventListener("keydown",Ke)}wl(()=>{Qe();const c=new ResizeObserver(()=>Qe());return M&&c.observe(M),Ht(),Xt(),()=>{c.disconnect()}}),At(()=>{Zt()});function $e(){var q;if(x)return;x=!0;const c=Ue(),P=Me(),N=(q=i[a])==null?void 0:q.idx;if(!c||!P||!N)return x=!1;fetch(`${Le}/posts/${N}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}}).then(U=>U.json()).then(()=>Ze(`/users/${P}`,{replaceState:!0,invalidateAll:!0})).finally(()=>{x=!1})}async function et(c){var U,ie,ye;const P=(U=i[c])==null?void 0:U.idx;if(P===void 0||f||((ie=i[c])==null?void 0:ie.needReactionReload)!==!0&&((ye=i[c])!=null&&ye.reactions))return;const N=Ue(),q=await fetch(`${Le}/vote/reactions?targetTable=posts&targetId=${P}&byType=true`,{method:"GET",headers:{Authorization:"Bearer "+N}});if(q.ok){const ce=await q.json();t(0,i[c].reactions=ce.data.reactions,i),t(0,i[c].myReaction=ce.data.myReaction,i)}}function pe(c,P){if(L)return;L=!0;const N=a,q=i[N];if((q==null?void 0:q.idx)!==c)return L=!1;if(!st())return q.needReactionReload=!0,L=!1,_e.emit("showSignInModal",{removable:!0,callback:Il.isNativePlatform()?()=>{et(N)}:void 0});q.myReaction===P?_e.emit("setReaction",{target:"posts",targetId:c,reaction:null,callback:()=>{t(0,i[N].myReaction=null,i),tt(N,P),L=!1}}):(q.myReaction&&tt(N,q.myReaction),_e.emit("setReaction",{target:"posts",targetId:c,reaction:P,callback:()=>{t(0,i[N].myReaction=P,i),i[N].reactions.some(U=>U.type===P)?t(0,i[N].reactions=i[N].reactions.map(U=>U.type===P?{...U,count:Number(U.count)+1}:U),i):t(0,i[N].reactions=[...i[N].reactions,{type:P,count:1}],i),L=!1}}))}function tt(c,P){let N=[];for(const q of i[c].reactions)if(q.type===P){const U=Number(q.count);U>1&&N.push({...q,count:U-1})}else N.push(q);t(0,i[c].reactions=N,i)}function Gt(c){Cl.call(this,n,c)}const Wt=(c,P)=>{pe(c.idx,P.type)};function Jt(c,P,N,q){N[q]=c,t(0,i)}const Kt=(c,P,N,q)=>{t(0,P[N].isTextExpanded=q.detail.expanded,i)},Qt=c=>{pe(c.idx,"👍")},$t=c=>{pe(c.idx,"️🔥")},el=c=>{pe(c.idx,"😍")},tl=c=>{pe(c.idx,"😋")},ll=c=>{pe(c.idx,"😊️️")},nl=(c,P)=>c+Number(P.count),sl=c=>{pe(c.idx,c.myReaction||"❤️")},il=(c,P,N)=>{t(0,P[N].onReactionShowcase=!0,i);const q=()=>{t(0,P[N].onReactionShowcase=!1,i),window.removeEventListener("click",q)};setTimeout(()=>{window.addEventListener("click",q)},500)},rl=()=>{if(!st())return _e.emit("showSignInModal",{removable:!0});t(2,A=!0)};function al(c){De[c?"unshift":"push"](()=>{M=c,t(13,M)})}const ol=()=>{var c;t(2,A=!1),Ze(`/viewer/edit?type=patch&postIdx=${(c=window.location.search.split("postIdx=")[1])==null?void 0:c.split("&")[0]}`,{replaceState:!1,invalidateAll:!1})},fl=()=>{t(2,A=!1),t(4,b=!0)},ul=()=>{Ll(r.url),isOpenActionSheet=!1},cl=()=>{t(2,A=!1),t(3,F=!0)};function dl(c){A=c,t(2,A)}function hl(c){F=c,t(3,F)}const ml=()=>{t(0,i[a].permission_signer="reported",i)},pl=()=>{t(0,i[a].permission_signer=null,i)},_l=()=>{$e(),t(4,b=!1)},gl=()=>{t(4,b=!1)};function bl(c){b=c,t(4,b)}return n.$$set=c=>{"posts"in c&&t(0,i=c.posts),"index"in c&&t(1,a=c.index),"type"in c&&t(18,o=c.type),"isEdit"in c&&t(5,f=c.isEdit),"dontMoveVertically"in c&&t(19,u=c.dontMoveVertically),"keyboardY"in c&&t(6,_=c.keyboardY),"selectedReaction"in c&&t(20,v=c.selectedReaction),"hideActionButtons"in c&&t(7,E=c.hideActionButtons),"actionSheetMoreIsOpen"in c&&t(2,A=c.actionSheetMoreIsOpen),"actionSheetReportIsOpen"in c&&t(3,F=c.actionSheetReportIsOpen),"modalVisible"in c&&t(4,b=c.modalVisible)},n.$$.update=()=>{var c;n.$$.dirty[0]&256&&r&&H(),n.$$.dirty[0]&1048576&&v&&pe(v.postIdx,v.reaction),n.$$.dirty[0]&2&&et(a),n.$$.dirty[0]&3&&t(23,l=(c=i[a])==null?void 0:c.user_idx),n.$$.dirty[0]&8388608&&t(14,s=B(l)),n.$$.dirty[0]&6815747&&!u&&a>=i.length-Vn&&!z&&!Q&&me()},[i,a,A,F,b,f,_,E,r,V,d,k,y,M,s,zt,$e,pe,o,u,v,z,Q,l,Gt,Wt,Jt,Kt,Qt,$t,el,tl,ll,nl,sl,il,rl,al,ol,fl,ul,cl,dl,hl,ml,pl,_l,gl,bl]}class is extends fe{constructor(e){super(),ue(this,e,Pn,Dn,oe,{posts:0,index:1,type:18,isEdit:5,dontMoveVertically:19,keyboardY:6,selectedReaction:20,hideActionButtons:7,actionSheetMoreIsOpen:2,actionSheetReportIsOpen:3,modalVisible:4},null,[-1,-1,-1])}}export{is as V};
