import{s as ee,z as $e,e as b,c as C,b as w,f as m,o as d,i as j,p as T,C as Je,D as Qe,E as Ze,I as me,J as je,K as De,h as k,n as q,a as V,g as M,Q,q as F,B as K,u as qe,M as Ke,R as We,m as _e,x as te,t as ge,d as ve,j as be,l as ce,y as Z,k as Xe,S as Ye,H as Ae,v as Ie}from"./scheduler.C36nLLxS.js";import{S as ne,i as oe,t as X,d as Y,c as fe,a as de,m as he,e as pe}from"./index.CVjGLjMk.js";import{o as et,a as tt}from"./keyboard.ByzVySsF.js";import{e as H}from"./each.dIER5Dya.js";import{s as ae,a as nt,g as ot}from"./index.DkAjgCzf.js";function rt(o){let e,t,n,r,l;const s=o[2].default,a=$e(s,o,o[1],null);return{c(){e=b("div"),a&&a.c(),this.h()},l(i){e=C(i,"DIV",{class:!0});var c=w(e);a&&a.l(c),c.forEach(m),this.h()},h(){d(e,"class",t="fixed inset-0 bg-black/50 z-50 "+o[0])},m(i,c){j(i,e,c),a&&a.m(e,null),n=!0,r||(l=T(e,"click",o[3]),r=!0)},p(i,[c]){a&&a.p&&(!n||c&2)&&Je(a,s,i,i[1],n?Ze(s,i[1],c,null):Qe(i[1]),null),(!n||c&1&&t!==(t="fixed inset-0 bg-black/50 z-50 "+i[0]))&&d(e,"class",t)},i(i){n||(X(a,i),n=!0)},o(i){Y(a,i),n=!1},d(i){i&&m(e),a&&a.d(i),r=!1,l()}}}function st(o,e,t){let{$$slots:n={},$$scope:r}=e,{className:l=""}=e;function s(a){me.call(this,o,a)}return o.$$set=a=>{"className"in a&&t(0,l=a.className),"$$scope"in a&&t(1,r=a.$$scope)},[l,r,n,s]}class lt extends ne{constructor(e){super(),oe(this,e,st,rt,ee,{className:0})}}const it=["local","version","cdnUrl"],at=["skins"],ut=["compact","flat","shortcodes"];function ct(o,e){return pt(o)||ht(o,e)||dt(o,e)||ft()}function ft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dt(o,e){if(o){if(typeof o=="string")return Be(o,e);var t={}.toString.call(o).slice(8,-1);return t==="Object"&&o.constructor&&(t=o.constructor.name),t==="Map"||t==="Set"?Array.from(o):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Be(o,e):void 0}}function Be(o,e){(e==null||e>o.length)&&(e=o.length);for(var t=0,n=Array(e);t<e;t++)n[t]=o[t];return n}function ht(o,e){var t=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(t!=null){var n,r,l,s,a=[],i=!0,c=!1;try{if(l=(t=t.call(o)).next,e!==0)for(;!(i=(n=l.call(t)).done)&&(a.push(n.value),a.length!==e);i=!0);}catch(u){c=!0,r=u}finally{try{if(!i&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}function pt(o){if(Array.isArray(o))return o}function Oe(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),t.push.apply(t,n)}return t}function Ge(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Oe(Object(t),!0).forEach(function(n){mt(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function mt(o,e,t){return(e=_t(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function _t(o){var e=gt(o,"string");return typeof e=="symbol"?e:e+""}function gt(o,e){if(typeof o!="object"||!o)return o;var t=o[Symbol.toPrimitive];if(t!==void 0){var n=t.call(o,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(o)}function Ce(o,e){if(o==null)return{};var t,n,r=vt(o,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(o);for(n=0;n<l.length;n++)t=l[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(o,t)&&(r[t]=o[t])}return r}function vt(o,e){if(o==null)return{};var t={};for(var n in o)if({}.hasOwnProperty.call(o,n)){if(e.indexOf(n)>=0)continue;t[n]=o[n]}return t}function bt(o,e,t){let n=`https://cdn.jsdelivr.net/npm/emojibase-data@${e}/${o}`;return typeof t=="function"?n=t(o,e):typeof t=="string"&&(n=`${t}/${o}`),n}async function ye(o,e={}){const t=e.local,n=t===void 0?!1:t,r=e.version,l=r===void 0?"latest":r,s=e.cdnUrl,a=Ce(e,it),i=bt(o,l,s),c=n?localStorage:sessionStorage,u=`emojibase/${l}/${o}`,p=c.getItem(u);if(p)return JSON.parse(p);const E=await fetch(i,Ge({credentials:"omit",mode:"cors",redirect:"error"},a));if(!E.ok)throw new Error("Failed to load Emojibase dataset.");const I=await E.json();try{c.setItem(u,JSON.stringify(I))}catch{}return I}const Ct={discord:"joypixels",slack:"iamcal"};async function Te(o,e,t){return ye(`${o}/shortcodes/${Ct[e]??e}.json`,t)}function G(o,e){if(e.length===0)return o;const t=new Set(o.shortcodes);return e.forEach(n=>{const r=n[o.hexcode];Array.isArray(r)?r.forEach(l=>t.add(l)):r&&t.add(r)}),o.shortcodes=[...t],o.skins&&o.skins.forEach(n=>{G(n,e)}),o}function yt(o,e=[]){const t=[];return o.forEach(n=>{if(n.skins){const r=n.skins,l=Ce(n,at);t.push(G(l,e)),r.forEach(s=>{const a=Ge({},s);l.tags&&(a.tags=[...l.tags]),t.push(G(a,e))})}else t.push(G(n,e))}),t}function kt(o,e){return e.length===0||o.forEach(t=>{G(t,e)}),o}async function Le(o,e={}){const t=e.compact,n=t===void 0?!1:t,r=e.flat,l=r===void 0?!1:r,s=e.shortcodes,a=s===void 0?[]:s,i=Ce(e,ut),c=await ye(`${o}/${n?"compact":"data"}.json`,i);let u=[];return a.length>0&&(u=await Promise.all(a.map(p=>{let E;if(p.includes("/")){const I=p.split("/"),L=ct(I,2),S=L[0],P=L[1];E=Te(S,P,i)}else E=Te(o,p,i);return E.catch(()=>({}))}))),l?yt(c,u):kt(c,u)}async function wt(o,e){return ye(`${o}/messages.json`,e)}function Et(o){let e,t;return{c(){e=je("svg"),t=je("path"),this.h()},l(n){e=De(n,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var r=w(e);t=De(r,"path",{d:!0,fill:!0}),w(t).forEach(m),r.forEach(m),this.h()},h(){d(t,"d","M25.3183 6H10.6C10.2189 6.00049 9.84232 6.08586 9.49524 6.25042C9.14815 6.41497 8.83856 6.65495 8.58708 6.95437C8.54355 7.00635 8.5053 7.0629 8.47292 7.12313L3.13692 15.4844C3.04734 15.6401 3 15.8183 3 16C3 16.1817 3.04734 16.36 3.13692 16.5156L8.46515 24.8638C8.49865 24.9281 8.53873 24.9885 8.58469 25.0438C8.83614 25.3437 9.14585 25.5841 9.49316 25.749C9.84047 25.9139 10.2174 25.9995 10.5988 26H25.3183C26.0293 25.9992 26.7109 25.7034 27.2137 25.1777C27.7164 24.652 27.9992 23.9391 28 23.1956V8.80437C27.9992 8.06086 27.7164 7.34804 27.2137 6.8223C26.7109 6.29655 26.0293 6.00083 25.3183 6ZM22.0233 19.4375C22.1142 19.5299 22.1867 19.6402 22.2364 19.7621C22.2862 19.884 22.3123 20.0151 22.3132 20.1476C22.3141 20.2802 22.2898 20.4116 22.2416 20.5342C22.1935 20.6569 22.1226 20.7683 22.033 20.862C21.9433 20.9557 21.8367 21.0298 21.7194 21.0801C21.6021 21.1303 21.4765 21.1557 21.3497 21.1547C21.223 21.1537 21.0977 21.1263 20.9811 21.0743C20.8646 21.0222 20.7591 20.9464 20.6708 20.8512L17.4613 17.5L14.2536 20.8531C14.0741 21.0408 13.8306 21.1463 13.5767 21.1463C13.3229 21.1463 13.0794 21.0408 12.8999 20.8531C12.7204 20.6654 12.6195 20.4108 12.6195 20.1453C12.6195 19.8798 12.7204 19.6252 12.8999 19.4375L16.1064 16.0831L12.8975 12.7275C12.718 12.5394 12.6174 12.2846 12.6177 12.0189C12.618 11.7532 12.7191 11.4986 12.899 11.3109C13.0788 11.1233 13.3225 11.018 13.5766 11.0183C13.8306 11.0186 14.0742 11.1244 14.2536 11.3125L17.4625 14.6687L20.6702 11.3125C20.8496 11.1249 21.093 11.0194 21.3467 11.0194C21.6005 11.0194 21.8439 11.1249 22.0233 11.3125C22.2027 11.5001 22.3035 11.7546 22.3035 12.02C22.3035 12.2854 22.2027 12.5399 22.0233 12.7275L18.8138 16.0831L22.0233 19.4375Z"),d(t,"fill","#757475"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","32"),d(e,"height","32"),d(e,"viewBox","0 0 32 32"),d(e,"fill","none")},m(n,r){j(n,e,r),k(e,t)},p:q,i:q,o:q,d(n){n&&m(e)}}}class jt extends ne{constructor(e){super(),oe(this,e,null,Et,ee,{})}}function Se(o,e,t){const n=o.slice();return n[26]=e[t],n}function Pe(o,e,t){const n=o.slice();return n[34]=e[t],n}function xe(o,e,t){const n=o.slice();return n[29]=e[t][0],n[30]=e[t][1],n}function Ve(o,e,t){const n=o.slice();return n[34]=e[t],n}function ue(o){const e=o.slice(),t=`group-${e[29]}`;return e[33]=t,e}function Me(o){let e,t="✕",n,r;return{c(){e=b("button"),e.textContent=t,this.h()},l(l){e=C(l,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),_e(e)!=="svelte-1e6u548"&&(e.textContent=t),this.h()},h(){d(e,"class","absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"),d(e,"title","검색어 지우기")},m(l,s){j(l,e,s),n||(r=T(e,"click",F(K(o[9]))),n=!0)},p:q,d(l){l&&m(e),n=!1,r()}}}function Dt(o){let e,t=H(o[2]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Ne(Pe(o,t,r));return{c(){e=b("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=C(r,"DIV",{class:!0});var l=w(e);for(let s=0;s<n.length;s+=1)n[s].l(l);l.forEach(m),this.h()},h(){d(e,"class","grid grid-cols-7 gap-2")},m(r,l){j(r,e,l);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(r,l){if(l[0]&2052){t=H(r[2]);let s;for(s=0;s<t.length;s+=1){const a=Pe(r,t,s);n[s]?n[s].p(a,l):(n[s]=Ne(a),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(r){r&&m(e),te(n,r)}}}function At(o){let e,t=H(Object.entries(o[0]).sort(o[15])),n=[];for(let r=0;r<t.length;r+=1)n[r]=Fe(xe(o,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Z()},l(r){for(let l=0;l<n.length;l+=1)n[l].l(r);e=Z()},m(r,l){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,l);j(r,e,l)},p(r,l){if(l[0]&2049){t=H(Object.entries(r[0]).sort(r[15]));let s;for(s=0;s<t.length;s+=1){const a=xe(r,t,s);n[s]?n[s].p(a,l):(n[s]=Fe(a),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(r){r&&m(e),te(n,r)}}}function It(o){let e,t="<p>검색 결과가 없습니다.</p>";return{c(){e=b("div"),e.innerHTML=t,this.h()},l(n){e=C(n,"DIV",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-1sbvlnv"&&(e.innerHTML=t),this.h()},h(){d(e,"class","flex justify-center items-center h-full")},m(n,r){j(n,e,r)},p:q,d(n){n&&m(e)}}}function Bt(o){let e,t="<p>이모지 로딩 중...</p>";return{c(){e=b("div"),e.innerHTML=t,this.h()},l(n){e=C(n,"DIV",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-n7g9l7"&&(e.innerHTML=t),this.h()},h(){d(e,"class","flex justify-center items-center h-full")},m(n,r){j(n,e,r)},p:q,d(n){n&&m(e)}}}function Ne(o){let e,t=o[34].unicode+"",n,r,l,s,a;function i(){return o[17](o[34])}return{c(){e=b("div"),n=ge(t),r=V(),this.h()},l(c){e=C(c,"DIV",{class:!0,title:!0});var u=w(e);n=ve(u,t),r=M(u),u.forEach(m),this.h()},h(){d(e,"class","text-3xl pointer-events-auto hover:bg-gray-100 p-1 rounded cursor-pointer text-center"),d(e,"title",l=o[34].label)},m(c,u){j(c,e,u),k(e,n),k(e,r),s||(a=T(e,"click",F(K(i)),!0),s=!0)},p(c,u){o=c,u[0]&4&&t!==(t=o[34].unicode+"")&&be(n,t),u[0]&4&&l!==(l=o[34].label)&&d(e,"title",l)},d(c){c&&m(e),s=!1,a()}}}function He(o){let e,t,n,r,l,s=H(o[30]),a=[];for(let i=0;i<s.length;i+=1)a[i]=ze(Ve(o,s,i));return{c(){e=b("hr"),n=V(),r=b("div");for(let i=0;i<a.length;i+=1)a[i].c();l=V(),this.h()},l(i){e=C(i,"HR",{id:!0,class:!0}),n=M(i),r=C(i,"DIV",{class:!0});var c=w(r);for(let u=0;u<a.length;u+=1)a[u].l(c);l=M(c),c.forEach(m),this.h()},h(){d(e,"id",t=o[33]),d(e,"class","opacity-0 h-0 m-0 p-0"),d(r,"class","grid grid-cols-7 gap-2 mb-4")},m(i,c){j(i,e,c),j(i,n,c),j(i,r,c);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(r,null);k(r,l)},p(i,c){if(c[0]&1&&t!==(t=i[33])&&d(e,"id",t),c[0]&2049){s=H(i[30]);let u;for(u=0;u<s.length;u+=1){const p=Ve(i,s,u);a[u]?a[u].p(p,c):(a[u]=ze(p),a[u].c(),a[u].m(r,l))}for(;u<a.length;u+=1)a[u].d(1);a.length=s.length}},d(i){i&&(m(e),m(n),m(r)),te(a,i)}}}function ze(o){let e,t=o[34].unicode+"",n,r,l,s;function a(){return o[16](o[34])}return{c(){e=b("div"),n=ge(t),this.h()},l(i){e=C(i,"DIV",{class:!0,title:!0});var c=w(e);n=ve(c,t),c.forEach(m),this.h()},h(){d(e,"class","text-3xl pointer-events-auto hover:bg-gray-100 p-1 rounded cursor-pointer text-center"),d(e,"title",r=o[34].label)},m(i,c){j(i,e,c),k(e,n),l||(s=T(e,"click",F(K(a)),!0),l=!0)},p(i,c){o=i,c[0]&1&&t!==(t=o[34].unicode+"")&&be(n,t),c[0]&1&&r!==(r=o[34].label)&&d(e,"title",r)},d(i){i&&m(e),l=!1,s()}}}function Fe(o){let e,t=o[30].length>0&&He(ue(o));return{c(){t&&t.c(),e=Z()},l(n){t&&t.l(n),e=Z()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,r){n[30].length>0?t?t.p(ue(n),r):(t=He(ue(n)),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&m(e),t&&t.d(n)}}}function Re(o){let e,t=H(o[1]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Ue(Se(o,t,r));return{c(){e=b("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=C(r,"DIV",{class:!0});var l=w(e);for(let s=0;s<n.length;s+=1)n[s].l(l);l.forEach(m),this.h()},h(){d(e,"class","flex items-center justify-between overflow-x-auto")},m(r,l){j(r,e,l);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(r,l){if(l[0]&1042){t=H(r[1]);let s;for(s=0;s<t.length;s+=1){const a=Se(r,t,s);n[s]?n[s].p(a,l):(n[s]=Ue(a),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(r){r&&m(e),te(n,r)}}}function Ue(o){let e,t=o[26].label+"",n,r,l,s,a,i;function c(){return o[19](o[26])}return{c(){e=b("div"),n=ge(t),r=V(),this.h()},l(u){e=C(u,"DIV",{class:!0,title:!0});var p=w(e);n=ve(p,t),r=M(p),p.forEach(m),this.h()},h(){d(e,"class",l="cursor-pointer px-2 text-xl "+(o[4]===o[26].key?"bg-gray-200 rounded":"")),d(e,"title",s=`Group ${o[26].groupIndex}`)},m(u,p){j(u,e,p),k(e,n),k(e,r),a||(i=T(e,"click",F(K(c))),a=!0)},p(u,p){o=u,p[0]&2&&t!==(t=o[26].label+"")&&be(n,t),p[0]&18&&l!==(l="cursor-pointer px-2 text-xl "+(o[4]===o[26].key?"bg-gray-200 rounded":""))&&d(e,"class",l),p[0]&2&&s!==(s=`Group ${o[26].groupIndex}`)&&d(e,"title",s)},d(u){u&&m(e),a=!1,i()}}}function Ot(o){let e,t,n,r,l,s,a,i,c,u,p,E,I,L,S,P,y=o[3]&&Me(o);c=new jt({});function z(_,B){return _[5]?Bt:_[2].length===0?It:_[3]?Dt:At}let N=z(o),D=N(o),f=!o[3]&&Re(o);return{c(){e=b("div"),t=b("div"),n=b("div"),r=b("div"),l=b("input"),s=V(),y&&y.c(),a=V(),i=b("div"),fe(c.$$.fragment),u=V(),p=b("div"),D.c(),E=V(),I=b("div"),f&&f.c(),this.h()},l(_){e=C(_,"DIV",{class:!0});var B=w(e);t=C(B,"DIV",{class:!0});var $=w(t);n=C($,"DIV",{class:!0});var R=w(n);r=C(R,"DIV",{class:!0});var U=w(r);l=C(U,"INPUT",{type:!0,class:!0,placeholder:!0}),s=M(U),y&&y.l(U),U.forEach(m),a=M(R),i=C(R,"DIV",{class:!0});var J=w(i);de(c.$$.fragment,J),J.forEach(m),R.forEach(m),$.forEach(m),u=M(B),p=C(B,"DIV",{class:!0});var re=w(p);D.l(re),re.forEach(m),E=M(B),I=C(B,"DIV",{class:!0});var h=w(I);f&&f.l(h),h.forEach(m),B.forEach(m),this.h()},h(){d(l,"type","text"),d(l,"class","w-full p-1 border border-gray-300 rounded-md pr-8"),d(l,"placeholder","이모지 검색... (한글 가능)"),d(r,"class","grow mr-2 relative"),d(i,"class","shrink-0"),d(n,"class","flex items-center justify-between mb-2"),d(t,"class","sticky top-0 w-full bg-white safe-area-pb p-2 h-16 z-10"),d(p,"class","w-full flex-1 p-2 overflow-y-auto "),d(I,"class","sticky bottom-0 w-full bg-white safe-area-pb p-2 h-14 z-10"),d(e,"class","w-full h-[300px] max-w-[500px] bg-white rounded-t-lg shadow-xl flex flex-col relative p-2 ")},m(_,B){j(_,e,B),k(e,t),k(t,n),k(n,r),k(r,l),Q(l,o[3]),k(r,s),y&&y.m(r,null),k(n,a),k(n,i),he(c,i,null),k(e,u),k(e,p),D.m(p,null),o[18](p),k(e,E),k(e,I),f&&f.m(I,null),L=!0,S||(P=[T(l,"input",o[13]),T(l,"input",o[8]),T(l,"click",F(K(o[12]))),T(i,"click",F(K(o[14])),!0),T(p,"scroll",o[7])],S=!0)},p(_,B){B[0]&8&&l.value!==_[3]&&Q(l,_[3]),_[3]?y?y.p(_,B):(y=Me(_),y.c(),y.m(r,null)):y&&(y.d(1),y=null),N===(N=z(_))&&D?D.p(_,B):(D.d(1),D=N(_),D&&(D.c(),D.m(p,null))),_[3]?f&&(f.d(1),f=null):f?f.p(_,B):(f=Re(_),f.c(),f.m(I,null))},i(_){L||(X(c.$$.fragment,_),L=!0)},o(_){Y(c.$$.fragment,_),L=!1},d(_){_&&m(e),y&&y.d(),pe(c),D.d(),o[18](null),f&&f.d(),S=!1,qe(P)}}}function Tt(o,e,t){let n={},r=[],l=[],s=[],a="",i=null,c=!0,u,p=new Map,E={},I=[];function L(){setTimeout(()=>{p.clear(),r.forEach(h=>{const v=u.querySelector(`#${h.key}`);v&&p.set(h.key,v.offsetTop-u.offsetTop)}),console.log("동적 카테고리 위치 저장됨:",[...p.entries()])},100)}function S(){if(!u)return;const h=u.scrollTop;let v=null;for(const[O,x]of p.entries())x!==void 0&&h>=x-10&&(v=O);if(v===null&&r.length>0){const O=r[0].key,x=p.get(O);x!==void 0&&h<x&&(v=O)}v!==i&&(t(4,i=v),console.log("스크롤로 카테고리 변경:",i))}function P(){if(!a.trim()){t(2,s=l);return}const h=a.toLowerCase();t(2,s=l.filter(v=>{if(v.unicode.toLowerCase().includes(h)||v.label&&v.label.toLowerCase().includes(h)||v.tags&&v.tags.some(g=>g.toLowerCase().includes(h)))return!0;const O=I.find(g=>g.hexcode===v.hexcode);if(O&&(O.label&&O.label.toLowerCase().includes(h)||O.tags&&O.tags.some(g=>g.toLowerCase().includes(h))))return!0;const x=E[`annotation-${v.hexcode}`];if(x&&x.toLowerCase().includes(h))return!0;const W=E[`tags-${v.hexcode}`];return!!(W&&W.toLowerCase().includes(h))}))}function y(){t(3,a=""),P()}function z(h){if(t(4,i=h),p.has(h)){const v=p.get(h);u.scrollTo({top:v,behavior:"smooth"}),console.log(`저장된 위치로 스크롤: ${h}:`,v)}else console.log(`저장된 위치가 없음: ${h}, 위치 다시 계산`),setTimeout(()=>{const v=u.querySelector(`#category-${h}`);if(v&&u){const O=v.offsetTop-u.offsetTop;u.scrollTo({top:O,behavior:"smooth"}),p.set(h,O),console.log(`위치 계산 및 저장: ${h}:`,O)}},10)}async function N(){try{t(5,c=!0),E=await wt("ko"),console.log("한국어 메시지 로드 완료:",Object.keys(E).length);const h=new Map;(await Le("ko",{compact:!0,flat:!0})).forEach(g=>h.set(g.hexcode,g)),l=(await Le("en",{compact:!0,flat:!0})).map(g=>{const A={...g},se=h.get(g.hexcode);if(se&&se.tags){const le=new Set([...A.tags||[],...se.tags||[]]);A.tags=Array.from(le)}const ke=E[`annotation-${g.hexcode}`];ke&&A.label&&(A.label=`${A.label} (${ke})`);const we=E[`tags-${g.hexcode}`];if(we){const le=we.split(",").map(ie=>ie.trim()),Ee=new Set(A.tags||[]);le.forEach(ie=>Ee.add(ie)),A.tags=Array.from(Ee)}return A}).sort((g,A)=>g.group===void 0&&A.group===void 0?0:g.group===void 0?1:A.group===void 0?-1:g.group===A.group?(g.order||0)-(A.order||0):g.group-A.group),t(0,n={}),t(1,r=[]);let W=-1;for(const g of l)if(g.group!==void 0&&(n[g.group]||t(0,n[g.group]=[],n),n[g.group].push(g),g.group!==W)){const A=n[g.group][0];A&&A.unicode&&(r.push({key:`group-${g.group}`,label:A.unicode,groupIndex:g.group}),W=g.group)}console.log("생성된 카테고리 헤더:",r),t(2,s=l),console.log("통합 및 그룹핑된 이모지 로드 완료 (EN 기준):",l.length)}catch(h){console.error("이모지 로딩 오류:",h)}finally{t(5,c=!1),L()}}Ke(()=>{N();const h=()=>{L()};return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}});const D=We();function f(h){me.call(this,o,h)}function _(){a=this.value,t(3,a)}const B=()=>{D("backspace")},$=([h],[v])=>parseInt(h)-parseInt(v),R=h=>{D("emojiClick",{emoji:h})},U=h=>{D("emojiClick",{emoji:h})};function J(h){ce[h?"unshift":"push"](()=>{u=h,t(6,u)})}return[n,r,s,a,i,c,u,S,P,y,z,D,f,_,B,$,R,U,J,h=>z(h.key)]}class Lt extends ne{constructor(e){super(),oe(this,e,Tt,Ot,ee,{},null,[-1,-1])}}function St(o){let e,t,n,r,l,s;return{c(){e=b("div"),t=b("textarea"),this.h()},l(a){e=C(a,"DIV",{class:!0});var i=w(e);t=C(i,"TEXTAREA",{class:!0,inputmode:!0}),w(t).forEach(m),i.forEach(m),this.h()},h(){d(t,"class",n="outline-none ring-0 focus:outline-none focus:ring-0 border-none shadow-none text-white bg-transparent transition-transform duration-300 text-center "+(o[2]==="emoji"&&o[0]?"translate-y-[-125px]":"translate-y-0")+" caret-white w-full mx-12 min-h-6"),d(t,"inputmode",r=o[2]==="emoji"?"none":"text"),Ae(t,"text-2xl",o[2]==="emoji"),d(e,"class","flex items-center justify-center h-full")},m(a,i){j(a,e,i),k(e,t),Q(t,o[1]),o[12](t),l||(s=[T(t,"input",o[10]),T(t,"click",F(o[9])),T(t,"keydown",o[11]),T(t,"input",Mt)],l=!0)},p(a,i){i&5&&n!==(n="outline-none ring-0 focus:outline-none focus:ring-0 border-none shadow-none text-white bg-transparent transition-transform duration-300 text-center "+(a[2]==="emoji"&&a[0]?"translate-y-[-125px]":"translate-y-0")+" caret-white w-full mx-12 min-h-6")&&d(t,"class",n),i&4&&r!==(r=a[2]==="emoji"?"none":"text")&&d(t,"inputmode",r),i&2&&Q(t,a[1]),i&5&&Ae(t,"text-2xl",a[2]==="emoji")},d(a){a&&m(e),o[12](null),l=!1,qe(s)}}}function Pt(o){let e,t,n,r,l,s,a;return e=new lt({props:{className:`
    transition-opacity duration-300 
    ${o[0]?"opacity-100 visible pointer-events-auto":"opacity-0 pointer-events-none"}
    ${o[3]?"visible":"invisible"}
  `,$$slots:{default:[St]},$$scope:{ctx:o}}}),e.$on("click",o[13]),l=new Lt({}),l.$on("backspace",o[6]),l.$on("emojiClick",o[7]),{c(){fe(e.$$.fragment),t=V(),n=b("div"),r=b("div"),fe(l.$$.fragment),this.h()},l(i){de(e.$$.fragment,i),t=M(i),n=C(i,"DIV",{class:!0});var c=w(n);r=C(c,"DIV",{class:!0});var u=w(r);de(l.$$.fragment,u),u.forEach(m),c.forEach(m),this.h()},h(){d(r,"class","transition-transform duration-300"),d(n,"class",s="fixed bottom-0 w-full flex items-center justify-center z-[999] transition-transform duration-300 "+(o[0]?"translate-y-0":"translate-y-[330px]")+" "+(o[2]==="emoji"&&o[3]?"visible":"invisible"))},m(i,c){he(e,i,c),j(i,t,c),j(i,n,c),k(n,r),he(l,r,null),o[14](r),a=!0},p(i,[c]){const u={};c&9&&(u.className=`
    transition-opacity duration-300 
    ${i[0]?"opacity-100 visible pointer-events-auto":"opacity-0 pointer-events-none"}
    ${i[3]?"visible":"invisible"}
  `),c&262167&&(u.$$scope={dirty:c,ctx:i}),e.$set(u),(!a||c&13&&s!==(s="fixed bottom-0 w-full flex items-center justify-center z-[999] transition-transform duration-300 "+(i[0]?"translate-y-0":"translate-y-[330px]")+" "+(i[2]==="emoji"&&i[3]?"visible":"invisible")))&&d(n,"class",s)},i(i){a||(X(e.$$.fragment,i),X(l.$$.fragment,i),a=!0)},o(i){Y(e.$$.fragment,i),Y(l.$$.fragment,i),a=!1},d(i){i&&(m(t),m(n)),pe(e,i),pe(l),o[14](null)}}}function xt(o){}function Vt(){}const Mt=o=>{o.target.style.height="auto",o.target.style.height=o.target.scrollHeight+"px"};function Nt(o,e,t){let n;Xe(o,ae,f=>t(15,n=f));const r=We();let{isOpen:l=!1}=e,{type:s="text"}=e,{value:a=""}=e;nt.subscribe(({isOpen:f,type:_})=>{if(n.at(-1).ownerIdx!==String(ot())){t(0,l=!1);return}t(0,l=f),t(2,s=_),s==="emoji"?t(1,a=n.at(-1).emoji):t(1,a=n.at(-1).back)});function i(){s==="emoji"?ae.update(f=>(f.at(-1).emoji=a,f)):s==="text"&&ae.update(f=>(f.at(-1).back=a,f))}let c=!1,u=null,p=null;Ke(()=>{et(()=>{},xt,Vt),new MutationObserver(_=>{t(1,a=(u==null?void 0:u.innerText)||""),r("change",a)}).observe(u,{childList:!0,subtree:!0})}),Ye(()=>{tt()});async function E(){u&&(u.focus(),await Ie(),document.execCommand("delete"))}async function I(f){if(!u)return;const _=f.detail.emoji.unicode;u.focus(),await Ie(),document.execCommand("insertText",!1,_)}function L(){u==null||u.focus()}function S(f){me.call(this,o,f)}function P(){a=this.value,t(1,a)}const y=f=>{if(s==="emoji"){if(f.metaKey&&f.key==="k")return;f.preventDefault(),f.stopPropagation()}};function z(f){ce[f?"unshift":"push"](()=>{u=f,t(4,u)})}const N=f=>{f.stopPropagation(),t(0,l=!1)};function D(f){ce[f?"unshift":"push"](()=>{p=f,t(5,p)})}return o.$$set=f=>{"isOpen"in f&&t(0,l=f.isOpen),"type"in f&&t(2,s=f.type),"value"in f&&t(1,a=f.value)},o.$$.update=()=>{o.$$.dirty&2&&a&&i(),o.$$.dirty&1&&(l?t(3,c=!0):setTimeout(()=>{t(3,c=!1)},300))},[l,a,s,c,u,p,E,I,L,S,P,y,z,N,D]}class qt extends ne{constructor(e){super(),oe(this,e,Nt,Pt,ee,{isOpen:0,type:2,value:1,focusInput:8})}get focusInput(){return this.$$.ctx[8]}}export{qt as I};
